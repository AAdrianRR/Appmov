const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-DCV8xu7u.js","assets/vendor-DSjS2lFR.js","assets/index-OhEAv8OR.js","assets/deferred-DTGvwTC-.js","assets/math.scalar.functions-C0i4R8fp.js","assets/animationGroup-d1sqceNo.js","assets/skeleton-Bagik3xG.js","assets/rawTexture-Dewpm-Sh.js","assets/easing-CajKLAVz.js","assets/weightedsound-bBjNjgjA.js","assets/audioEngine-CHCBM_9t.js","assets/babylonFileParser.function-CWsVgwsY.js","assets/assetContainer-D0nJp7Qv.js","assets/asyncLock-BFOnq96h.js","assets/ray-CISyEyom.js","assets/webgpuEngine-DRgC2b3Q.js","assets/bakedVertexAnimation-BGZgSEnO.js","assets/helperFunctions-B3jb5j17.js","assets/fresnelFunction-lR2KpzUd.js","assets/meshUboDeclaration-AFlkAd1w.js","assets/sceneUboDeclaration-whnwpks7.js","assets/decalFragment-BJVB-Fv_.js","assets/dataReader-D9hrAhih.js","assets/standardMaterial-v0TKD6s2.js","assets/shaderMaterial-CX5vDnVG.js","assets/bakedVertexAnimation-r1qSVdeC.js","assets/morphTargetsVertex-C9dYIlUd.js","assets/shadowsVertex-S5hamZiY.js","assets/vertexColorMixing-CXhqLf3v.js","assets/discBuilder-DqoXGRTT.js","assets/abstractEngine.cubeTexture-CcPpVQRB.js","assets/engine.multiRender-7WvSbcie.js","assets/environmentTextureTools-J9d3FeHg.js","assets/dumpTools-BkkJkf2v.js","assets/engine.multiRender-D8e_zcme.js","assets/flowGraphParser-D5suvPSf.js","assets/flowGraphRichTypes-Bu78U3ds.js","assets/flowGraphJsonPointerParserBlock-BuTtLl3_.js","assets/flowGraphCachedOperationBlock-CyEKQNo_.js","assets/flowGraphConsoleLogBlock-B6kvtKuK.js","assets/flowGraphBranchBlock-Dgu8WjkC.js","assets/flowGraphDoNBlock-qOKXexSZ.js","assets/flowGraphForLoopBlock-D087RdxT.js","assets/flowGraphThrottleBlock-BzCwnE0f.js","assets/flowGraphMultiGateBlock-CZZPupid.js","assets/flowGraphSwitchBlock-CFtuDYGW.js","assets/flowGraphWaitAllBlock-BWgU120j.js","assets/flowGraphCounterBlock-CONoKXm_.js","assets/flowGraphWhileLoopBlock-C0ujjTZj.js","assets/flowGraphDebounceBlock-CvZqQmIn.js","assets/flowGraphFlipFlopBlock-BAZLNUmC.js","assets/flowGraphSequenceBlock-DfpGmZSx.js","assets/flowGraphSetDelayBlock-CjaPyKXf.js","assets/flowGraphCancelDelayBlock-DFlw5h-5.js","assets/flowGraphPlayAnimationBlock-0lgMyePi.js","assets/flowGraphStopAnimationBlock-_oO5-G_w.js","assets/flowGraphPauseAnimationBlock-Boct0sKt.js","assets/flowGraphInterpolationBlock-DVW7uxEM.js","assets/flowGraphEasingBlock-CyU7rbf3.js","assets/flowGraphBezierCurveEasingBlock-DRk0hy5Z.js","assets/flowGraphConditionalDataBlock-C3-iX86O.js","assets/flowGraphGetVariableBlock-LxTadC8h.js","assets/flowGraphSetVariableBlock-nfKjxxSH.js","assets/flowGraphTransformCoordinatesSystemBlock-BvSl3IpY.js","assets/flowGraphGetPropertyBlock-BdvRneG1.js","assets/flowGraphSetPropertyBlock-BE7C2nIp.js","assets/flowGraphConstantBlock-CiCXWUwq.js","assets/flowGraphGetAssetBlock-Cxk0aws6.js","assets/flowGraphDataSwitchBlock-B6LKyg2J.js","assets/flowGraphMathBlocks-C8eCRyIb.js","assets/flowGraphBinaryOperationBlock-ZWOSePfl.js","assets/flowGraphUnaryOperationBlock-TU1z0AKT.js","assets/flowGraphMathCombineExtractBlocks-YfQMQyqV.js","assets/flowGraphMatrixMathBlocks-DnX_md6E.js","assets/flowGraphVectorMathBlocks-D6OQRyBX.js","assets/flowGraphTypeToTypeBlocks-B2B8Upb7.js","assets/flowGraphContextBlock-1uU8g3-L.js","assets/flowGraphArrayIndexBlock-ADfd3fNQ.js","assets/flowGraphCodeExecutionBlock-D-TlkP1I.js","assets/flowGraphIndexOfBlock-D4kUP2xn.js","assets/flowGraphFunctionReferenceBlock-CA8hWFbU.js","assets/flowGraphMeshPickEventBlock-DIBggri5.js","assets/flowGraphSceneReadyEventBlock-CgO0e7If.js","assets/flowGraphReceiveCustomEventBlock-z5d7B8Rp.js","assets/flowGraphSendCustomEventBlock-C9BwWAjz.js","assets/flowGraphSceneTickEventBlock-B9DVxNcd.js","assets/flowGraphPointerOutEventBlock-CRGEFPVX.js","assets/flowGraphPointerOverEventBlock-D4Ajo9fc.js","assets/shadowGeneratorSceneComponent-BvIK2Ru9.js","assets/shadowGenerator-Btv4XpyP.js","assets/clipPlaneFragment-Dwh5poJi.js","assets/clipPlaneVertex-8PaRce9Z.js","assets/pointCloudVertex-D-U3aeue.js","assets/pointLight-BL1epHev.js","assets/cubeTexture-Cp3-gqJ7.js","assets/dds-DzeKY6Xo.js","assets/ktxTextureLoader-EScRj7RA.js","assets/workerPool-H9Ji3mCo.js","assets/iblCdfGenerator-CNNcoBTc.js","assets/helperFunctions-DRqldPrm.js","assets/fogFragment-CZTnaXny.js","assets/logDepthVertex-GOhnybdg.js","assets/sceneUboDeclaration-Ce9Kvpvt.js","assets/meshUboDeclaration-CdFQgg5K.js","assets/iesTextureLoader-jaYDMBUn.js","assets/hdrCubeTexture-CSS4RSiM.js","assets/hdr-FCO6lxAV.js","assets/background.vertex-CVHQzq2_.js","assets/backgroundUboDeclaration-C7LCBEl2.js","assets/logDepthDeclaration-CbwYk5uq.js","assets/background.fragment-B882BdWt.js","assets/lightFragment-ispPLHNM.js","assets/lightsFragmentFunctions-DLdniHGs.js","assets/background.vertex-mmMG0s9H.js","assets/backgroundUboDeclaration-Bhe0Nsr5.js","assets/logDepthVertex-DZueXwJK.js","assets/shadowsVertex-DtKU9A0H.js","assets/logDepthDeclaration-BJc1AVO_.js","assets/background.fragment-BywsM-0F.js","assets/lightFragment-DKlWvzdj.js","assets/lightsFragmentFunctions-D_r21xeN.js","assets/fogFragmentDeclaration-i60Ormrs.js","assets/samplerVertexImplementation-CS_VCvGt.js","assets/pbr.vertex-Bv7TMC27.js","assets/harmonicsFunctions-DJaw0Ugx.js","assets/mainUVVaryingDeclaration-BM77SDZ4.js","assets/pbr.fragment-BGdvnhXn.js","assets/oitFragment-AC1IFYKu.js","assets/pbr.vertex-BFCPxL0I.js","assets/harmonicsFunctions-eimXP7hg.js","assets/mainUVVaryingDeclaration-DHpzD5AE.js","assets/bumpVertex-BItgqIbt.js","assets/pbr.fragment-J3nfoot-.js","assets/oitFragment-DnDTRfqo.js","assets/bumpFragment-l1FZBmVG.js","assets/shaderLanguage-BjwqUAVi.js","assets/ddsTextureLoader-_rOmKaI-.js","assets/envTextureLoader-BemjKn_Z.js","assets/tgaTextureLoader-4dE35oJr.js","assets/hdrTextureLoader-L32hDsO4.js","assets/basisTextureLoader-CY5ypzBu.js","assets/exrTextureLoader-4tc9pOgK.js","assets/iblShadowsRenderPipeline-BJ7sBmZk.js","assets/rawCubeTexture-Dz7ubbVy.js","assets/pointsCloudSystem-JK0sUxhQ.js","assets/thinInstanceMesh-DBepR3R5.js","assets/default.fragment-eyzg8sex.js","assets/defaultUboDeclaration-Umzy25ty.js","assets/default.vertex-DCemttek.js","assets/default.fragment-CzX8ZtT1.js","assets/defaultUboDeclaration-BI0Rb97i.js","assets/default.vertex-BSHYLBb-.js","assets/dracoDecoder-By88z37D.js","assets/meshoptCompression-Dt2nG0Qh.js","assets/mesh.vertexData.functions-BXkNVxNr.js","assets/lodCube.fragment-D155pVzS.js","assets/lod.fragment-BIYfMb-F.js","assets/lodCube.fragment-Cd2NUITB.js","assets/lod.fragment-DhW8AceI.js","assets/rgbdDecode.fragment-BFhHsYY9.js","assets/rgbdEncode.fragment-CLUG7VZE.js","assets/rgbdDecode.fragment-Bq6GYSwJ.js","assets/rgbdEncode.fragment-Bz6_EyXP.js","assets/postProcessRenderPipelineManagerSceneComponent-CmDO5Kcq.js","assets/postprocess.vertex-3sy8f_qD.js","assets/pass.fragment-Ch3MDItE.js","assets/passCube.fragment-Nf7dFDmB.js","assets/pass.fragment-bHA46Orm.js","assets/passCube.fragment-BDddnQu1.js","assets/index-DChXJ4aZ.js","assets/glTFLoader-Dj3qjnqy.js","assets/glTFLoaderExtensionRegistry-s9wiSIbw.js","assets/objectModelMapping-BrGyZIo9.js","assets/KHR_animation_pointer-BZCLpsxI.js","assets/EXT_lights_image_based-BnLQ9U4w.js","assets/EXT_mesh_gpu_instancing-CX8QasGr.js","assets/EXT_meshopt_compression-Bmb4MOuf.js","assets/EXT_texture_webp-DiIRI35h.js","assets/EXT_texture_avif-G_5GySsc.js","assets/EXT_lights_ies-JNp2cCXE.js","assets/KHR_draco_mesh_compression-DfhP9lrm.js","assets/KHR_lights_punctual-BLF7vlhm.js","assets/KHR_materials_pbrSpecularGlossiness-BDtmf-M9.js","assets/KHR_materials_unlit-VvmQpE72.js","assets/KHR_materials_clearcoat-C6_RdPBv.js","assets/KHR_materials_iridescence-BWsSAXtH.js","assets/KHR_materials_anisotropy-BdcaIcOo.js","assets/KHR_materials_emissive_strength-CksD8BWX.js","assets/KHR_materials_sheen-C0jABAjk.js","assets/KHR_materials_specular-DN43aNJY.js","assets/KHR_materials_ior-CMZ4bnmY.js","assets/KHR_materials_variants-BBBQO9Re.js","assets/KHR_materials_transmission-NCp-y5zZ.js","assets/KHR_materials_diffuse_transmission-B_itzJDR.js","assets/KHR_materials_volume-DUWovSPC.js","assets/KHR_materials_dispersion-CS7dxA-J.js","assets/EXT_materials_diffuse_roughness-CpuOfUGd.js","assets/KHR_mesh_quantization-mUfbLa1u.js","assets/KHR_texture_basisu-DaF2klRB.js","assets/KHR_texture_transform-DVWFdpGI.js","assets/KHR_xmp_json_ld-Cu-zqfEb.js","assets/MSFT_audio_emitter-B0vU9OUm.js","assets/MSFT_lod-VbNif_qg.js","assets/MSFT_minecraftMesh-CAu3eWY6.js","assets/MSFT_sRGBFactors-C_YpyOYc.js","assets/KHR_interactivity-BH3iwmuy.js","assets/declarationMapper-Cl0Wr9Xk.js","assets/KHR_node_visibility-JZoVX2jg.js","assets/KHR_node_selectability-Cjb18n2V.js","assets/KHR_node_hoverability-BxfxNxl5.js","assets/ExtrasAsMetadata-rVIbYjr9.js","assets/index-DGmIBWJZ.js","assets/stlFileLoader.metadata-D34mcJg2.js","assets/babylon.inspector.bundle-Chu2ZWkp.js","assets/objFileLoader-DQKYs81Z.js","assets/stlFileLoader-DEk7dt6V.js","assets/splatFileLoader-BDknTM5-.js","assets/sidebar-pages-mn_o4sfL.js","assets/use-supports-hover-DZjMG1u6.js","assets/conversations-rrr0kC0i.js","assets/delete-y6MQOtJ7.js","assets/share-CvpM0ogP.js","assets/dots-horizontal-C2b55xHh.js","assets/use-share-message-CnPN4hbb.js","assets/use-list-key-down-DQsGhfuA.js","assets/index.es-D4CGDrX3.js","assets/core-BHFwQFA7.js","assets/language-loader-CeBtiVlG.js","assets/code-DVb2ThHz.js","assets/copy-CDknyAJD.js","assets/index-BK4kHWYN.js","assets/index-Chjiymov.js","assets/sender-share-conversation-modal-BbgacZdJ.js","assets/alert-BLpTgyGn.js","assets/error-Dmv950if.js","assets/character-Dqu56dCZ.js","assets/use-set-up-babylon-BCpSl3J-.js","assets/product-purchase-CFrwGJqt.js","assets/constants-CdGcMGuJ.js","assets/utils-4DarmI0x.js","assets/wallet-element-factory-CuwqOlhw.js","assets/pidl-pages-DmJ3UioO.js","assets/constants-BnxRz7co.js","assets/payment-methods-management-Dq8sCtMc.js","assets/v4-CtRu48qb.js","assets/index-Cg_jzaXd.js","assets/upsell-block-DDDZRHy8.js","assets/cross-selling-strip-CbZ3JVxh.js","assets/price-tracking-block-BhA5tacP.js","assets/use-price-tracking-CSN6Jsdz.js","assets/use-shopping-telemetry-BKmRGUkZ.js","assets/shopping-telemetry-BjTSVCfL.js","assets/chevron-bolded-ZJreXwJM.js","assets/format-money-5coY0IJJ.js","assets/composer-auto-complete-BKcQFjPe.js","assets/composer-actions-prompt-suggestions-CIC5X68R.js","assets/booking-D6pAMRNz.js","assets/expedia-Cl6jX4QC.js","assets/flower-eBKutxuq.js","assets/hotels-I7RWNaEO.js","assets/kayak-4dKwBHeF.js","assets/open-table-NxfH9jxn.js","assets/priceline-WMKPmmw4.js","assets/sky-scanner-DDNTwWQm.js","assets/trip-advisor-Dka67OxB.js","assets/viator-DudiA7Ni.js","assets/voice-options-C1jSEvK0.js","assets/think-deeper-pro-subscription-ZbGvZEWK.js","assets/over-task-quota-Cd5zaadX.js","assets/composer-action-D2Ips0qp.js","assets/computer-use-task-closed-DReumW0v.js","assets/safety-risk-card-BvsdS5lz.js","assets/use-send-action-command-Ctetw1uX.js","assets/add-to-page-BrBj6Rs1.js","assets/cross-selling-strip-consumer-7Z8pXPpz.js","assets/composer-prompt-review-BqYQ-I6M.js","assets/use-ocv-feedback-D3CQDVYw.js","assets/biometric-consent-B0_Lx5F0.js","assets/daily-briefing-chat-DVyXzafk.js","assets/contract-down-left-BKAdNz91.js","assets/dailly-briefing-composer-input-Bs5qOPBD.js","assets/composer-sign-in-BuTvDVNT.js","assets/merge-conversation-checkbox-BfY5zvmg.js","assets/daily-briefing-composer-player-CDdvyX0C.js","assets/progress-bar-BdBaQEe8.js","assets/next-7HaWhFpK.js","assets/pause-QxL_fWTp.js","assets/play-CiUnb7Cg.js","assets/video-player-BZDJMibJ.js","assets/native-player-DF8XSOmI.js","assets/card-carousel-BTFd5iEc.js","assets/use-carousel-D9q2nYze.js","assets/utils-ifQmq0fb.js","assets/settings-P-XyxhDK.js","assets/privacy-choices-Dnkm5Riw.js","assets/dev-mode-state-Co11FhGw.js","assets/use-is-lab-enabled-t0nRpDlI.js","assets/mask-wrapper-DWXAsfTG.js","assets/atoms-BQZ81wVf.js","assets/order-details-view-BYMs_t2C.js","assets/card-info-DJnB6oTw.js","assets/visa-DNBWtMre.js","assets/product-info-CEguwQcN.js","assets/wallet-icon-button-Clb6dCdg.js","assets/minus-BviU7XVl.js","assets/shipping-address-CMpuExDm.js","assets/faq-link-tXPadXOQ.js","assets/utils-CYrE1UqD.js","assets/qr-Q45mFyTe.js","assets/moon-BpJk-lox.js","assets/sun-CnGrVso4.js","assets/rewards-link-BGW59jJw.js","assets/gift-WRFH8k7k.js","assets/link-WLgTzN_O.js","assets/rewards-badge-background-dark-D6e4bzYT.js","assets/rewards-badge-background-CkQAW_Yr.js","assets/rewards-badge-container-dark-CmiHCzqU.js","assets/rewards-badge-container-CERCAJs1.js","assets/rewards-badge-dark-DdP77cbV.js","assets/rewards-badge-DYrdNe__.js","assets/plus-NMgpZiMD.js","assets/base-modal-BbawVRVq.js","assets/picture-in-picture-D0Rdju7b.js","assets/composer-large-screen-CDjIJDnx.js","assets/types-S47nI6MK.js","assets/discover-6X3Cm0yT.js","assets/use-discover-feed-Cb5vcYZs.js","assets/podcast-schemas-BiroXcao.js","assets/block-CzQTwPyl.js","assets/thumbs-up-filled-CihciDYT.js","assets/external-link-CTMYO6nZ.js","assets/document-one-page-sparkle-CvCGFwgR.js","assets/food-apple-CZDUsLw5.js","assets/lightbulb-CZLxuwIC.js","assets/location-ripple-CjUMgkcO.js","assets/scales-BW0F7BKd.js","assets/tag-B7K_Too-.js","assets/play-outline-DAThQ6OI.js","assets/weather-states-categories-CmeEET4X.js","assets/use-open-finance-dashboard-ZBD2sVxX.js","assets/widget-player-BIch13GM.js","assets/parseISO-CqE4hOS1.js","assets/generateCategoricalChart-BFqFaGgP.js","assets/podcast-Bc7LGZT6.js","assets/headphones-Bh49iJcL.js","assets/use-podcasts-navigation-CtaLdfdk.js","assets/actions-chat-detail-BzKpPpEl.js","assets/expand-pane-CnNbnv_D.js","assets/save-action-DozYVABv.js","assets/new-tab-cJet6QVG.js","assets/pause-outline-Cy_2GDBJ.js","assets/showroom-chat-detail-CclAGWoH.js","assets/contextual-shopping-card-CJalk0xw.js","assets/product-rating-CL7NxUAm.js","assets/buy-button-BpeoQxoX.js","assets/use-shopping-visibility-telemetry-BhExO2Fm.js","assets/shopping-utils-DWdCcEPd.js","assets/citation-chips-row-ace2EUdr.js","assets/bell-alert-BP-O39NU.js","assets/bell-zk5pjW2B.js","assets/star-B6kecxRq.js","assets/appearance-chat-Dum3Rcbf.js","assets/action-alert-CkxzKiPV.js","assets/composer-system-alert-qSByrzji.js","assets/ai-message-DEFgmSWe.js","assets/use-page-CtVM7VzZ.js","assets/use-ads-card-operations-DqypispO.js","assets/use-podcast-share-Bh5CvcPg.js","assets/info-SKuKfMdw.js","assets/topic-selection.lazy-CUtes3jB.js","assets/login.lazy-Bif1qmgH.js","assets/gaming.lazy-DKkn83_U.js","assets/daily.lazy-DmOfeLwI.js","assets/daily-briefing-CxPlLz6h.js","assets/formatDistanceToNow-Bq3We9Ie.js","assets/constructNow-BuDNmKJc.js","assets/use-is-portrait-DfD2pSSD.js","assets/wand-C8McWxOO.js","assets/agents.lazy-BDIjjSDh.js","assets/index.lazy-COPaUBK7.js","assets/arrow-referral-zByK5GIm.js","assets/copliot-referral-B_iMIbdb.js","assets/four-leaf-clover-DNudsh3r.js","assets/hexagon-CO13jjou.js","assets/message-referral-BiwIwgjb.js","assets/rewards-Dcb-alJm.js","assets/index.lazy-BobqLvJC.js","assets/index.lazy-CS4xUp2J.js","assets/use-labs-telemetry-Dpa8wHHT.js","assets/index-DMaM_aOC.js","assets/labs-social-icon-discord-CsQZkbCa.js","assets/labs-social-icon-instagram-Be2jZvAy.js","assets/labs-social-icon-x-CfgKBCYh.js","assets/labs-social-icon-youtube-D08-N5BL.js","assets/labs-logo-CyIve0VB.js","assets/subscription.start.lazy-CB0o-j8F.js","assets/subscription.manage.lazy-fAU5ixGL.js","assets/shares._conversationId.lazy-C2QEoIQ3.js","assets/rules.lazy-DSdVju-u.js","assets/link-multiple-D0KD9W-2.js","assets/pro.subscribe.lazy-CZOZLVXC.js","assets/checkout-wrapper-CwmR7bg7.js","assets/paywall-container-vOw-UNnu.js","assets/add-address-C4n_Iv4b.js","assets/address-D4TJUQJ_.js","assets/pidl-element-factory-BjU7j9LK.js","assets/workflow-pi-dropdown-disabler-BEogl_Vx.js","assets/react-number-format.es-BYkAg4RH.js","assets/wallet-dropdown-XI0c7Hl7.js","assets/wallet-list-CMzoZN25.js","assets/current-C7bDKSja.js","assets/pidl-element-factory-DikK38DI.css","assets/add-address-view-CQYdo3VX.js","assets/form-field-skeleton-dpE4HD4b.js","assets/add-payment-instrument-CXI-i1ck.js","assets/add-payment-instrument-view-CT62HBk6.js","assets/add-ewallet-skeleton-B4_ogRBV.js","assets/select-payment-instrument-DvHY_YxC.js","assets/start-line-HWEcfD4C.js","assets/credit-card-C3boCXGK.js","assets/pro.subscribe-DU9qjcuZ.css","assets/talk.lazy-DoDQXrUb.js","assets/pages._pageId.lazy-DmI7ZzAm.js","assets/use-focus-restore-qGSPK6KK.js","assets/text-bold-Dkk3NYXp.js","assets/text-bullet-list-Bp5pN9sT.js","assets/text-code-BgnQQoa3.js","assets/text-italic-xT_exDao.js","assets/text-numbered-list-Dlrg1Jo_.js","assets/text-paragraph-VYd6pp3e.js","assets/pages-welcome-dark-r64A2mUI.js","assets/pages-welcome-light-DDUDcHxX.js","assets/arrow-enter-up-BYA6Nh6j.js","assets/use-focus-restore-QYyNVCeh.css","assets/copy-add-BvmYpkTT.js","assets/memory.narrative.lazy-yLVhutc4.js","assets/campaigns._campaignId.lazy-CBKVVI7n.js","assets/shares.podcasts._shareId.lazy-DE_g4UE5.js","assets/shares.pages._shareId.lazy-ZZeYgKCO.js","assets/eye-BcZu2ov3.js","assets/pro.redeem._redeemCode.lazy-C0b5paBi.js","assets/pro.ewallet.return.lazy-kQP2gzhn.js","assets/podcasts._podcastType._podcastId.lazy-B59UoFG3.js","assets/experiments._experimentAlias.lazy-Ds5ZY3RN.js","assets/chats_._conversationId.talk.lazy-Bozin0Y3.js","assets/timer-BTpd_Qi7.js","assets/voicemail-dark-BtARQIb1.js","assets/voicemail-light-DeMSWjpH.js","assets/my-creations.lazy-PeuyTF4N.js","assets/my-creations-DV8PrLMj.css","assets/shares._shareId.lazy-C1Z5og_M.js"])))=>i.map(i=>d[i]);
var SB=Object.defineProperty;var dk=t=>{throw TypeError(t)};var EB=(t,e,n)=>e in t?SB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>EB(t,typeof e!="symbol"?e+"":e,n),Fb=(t,e,n)=>e.has(t)||dk("Cannot "+n);var me=(t,e,n)=>(Fb(t,e,"read from private field"),n?n.call(t):e.get(t)),on=(t,e,n)=>e.has(t)?dk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Mt=(t,e,n,r)=>(Fb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Be=(t,e,n)=>(Fb(t,e,"access private method"),n);import{r as m,g as zw,a as V,p as st,b as D,j as h,V as wB,R as Gc,u as Te,v as Vw,z as l,q as TB,x as Uv,e as tt,Z as ng,W as HO,Q as Nh,f as $w,A as Tn,m as xe,L as zO,l as zf,E as Vf,X as VO,n as ed,y as Gw,B as qw,C as Kw,Y as IB,_ as _B,D as Ww,F as Fv,$ as Bv,o as td,G as nd,t as $O,H as GO,a0 as qO,P as KO,a1 as Pu,a2 as AB,a3 as kB,a4 as WO,I as xB,d as Yw,a5 as RB,M as YO,a6 as PB,a7 as QO,a8 as NB,a9 as OB,aa as MB,ab as LB,ac as DB,ad as jB,h as _t,ae as UB,af as JO,i as FB,ag as BB,ah as HB,ai as zB}from"./vendor-DSjS2lFR.js";function VB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const $B="modulepreload",GB=function(t){return"https://studiostaticassetsprod.azureedge.net/bundle-cmc/"+t},hk={},q=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let s=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=s(n.map(u=>{if(u=GB(u),u in hk)return;hk[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":$B,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,v)=>{p.addEventListener("load",g),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},XO=m.createContext(null),Bb={didCatch:!1,error:null};class ZO extends m.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Bb}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:i,reason:"imperative-api"}),this.setState(Bb)}}componentDidCatch(e,n){var r,o;(r=(o=this.props).onError)===null||r===void 0||r.call(o,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:o}=this.props;if(r&&n.error!==null&&qB(e.resetKeys,o)){var i,s;(i=(s=this.props).onReset)===null||i===void 0||i.call(s,{next:o,prev:e.resetKeys,reason:"keys"}),this.setState(Bb)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:o}=this.props,{didCatch:i,error:s}=this.state;let a=e;if(i){const c={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(c);else if(r)a=m.createElement(r,c);else if(o!==void 0)a=o;else throw s}return m.createElement(XO.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},a)}}function qB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}function KB(t){if(t==null||typeof t.didCatch!="boolean"||typeof t.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function e2(){const t=m.useContext(XO);KB(t);const[e,n]=m.useState({error:null,hasError:!1}),r=m.useMemo(()=>({resetBoundary:()=>{t.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:o=>n({error:o,hasError:!0})}),[t.resetErrorBoundary]);if(e.hasError)throw e.error;return r}var Hb,fk;function WB(){return fk||(fk=1,Hb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Hb}var YB=WB();const QB=zw(YB);var JB=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function pk(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],(QB[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=t.indexOf("-->");return{type:"comment",comment:r!==-1?t.slice(4,r):""}}for(var o=new RegExp(JB),i=null;(i=o.exec(t))!==null;)if(i[0].trim())if(i[1]){var s=i[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],o.lastIndex--}else i[2]&&(e.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return e}var XB=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ZB=/^\s*$/,e9=Object.create(null);function t2(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(n){var r=[];for(var o in n)r.push(o+'="'+n[o]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(t2,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var t9={parse:function(t,e){e||(e={}),e.components||(e.components=e9);var n,r=[],o=[],i=-1,s=!1;if(t.indexOf("<")!==0){var a=t.indexOf("<");r.push({type:"text",content:a===-1?t:t.substring(0,a)})}return t.replace(XB,function(c,u){if(s){if(c!=="</"+n.name+">")return;s=!1}var d,f=c.charAt(1)!=="/",p=c.startsWith("<!--"),g=u+c.length,v=t.charAt(g);if(p){var y=pk(c);return i<0?(r.push(y),r):((d=o[i]).children.push(y),r)}if(f&&(i++,(n=pk(c)).type==="tag"&&e.components[n.name]&&(n.type="component",s=!0),n.voidElement||s||!v||v==="<"||n.children.push({type:"text",content:t.slice(g,t.indexOf("<",g))}),i===0&&r.push(n),(d=o[i-1])&&d.children.push(n),o[i]=n),(!f||n.voidElement)&&(i>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(i--,n=i===-1?r:o[i]),!s&&v!=="<"&&v)){d=i===-1?r:o[i].children;var b=t.indexOf("<",g),C=t.slice(g,b===-1?void 0:b);ZB.test(C)&&(C=" "),(b>-1&&i+d.length>=0||C!==" ")&&d.push({type:"text",content:C})}}),r},stringify:function(t){return t.reduce(function(e,n){return e+t2("",n)},"")}};function km(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];wo(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const mk={};function rg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];wo(e[0])&&mk[e[0]]||(wo(e[0])&&(mk[e[0]]=new Date),km(...e))}const n2=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},gk=(t,e,n)=>{t.loadNamespaces(e,n2(t,n))},vk=(t,e,n,r)=>{wo(n)&&(n=[n]),n.forEach(o=>{t.options.ns.indexOf(o)<0&&t.options.ns.push(o)}),t.loadLanguages(e,n2(t,r))},n9=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],o=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const u=e.services.backendConnector.state[`${a}|${c}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!s(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||s(r,t)&&(!o||s(i,t)))},r9=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(rg("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(o,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!i(o.isLanguageChangingTo,t))return!1}}):n9(t,e,n)},wo=t=>typeof t=="string",Wl=t=>typeof t=="object"&&t!==null,o9=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,i9={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},s9=t=>i9[t],a9=t=>t.replace(o9,s9);let cE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:a9};const c9=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cE={...cE,...t}},r2=()=>cE;let o2;const l9=t=>{o2=t},Qw=()=>o2,zb=(t,e)=>{if(!t)return!1;const n=t.props?t.props.children:t.children;return e?n.length>0:!!n},Vb=t=>{if(!t)return[];const e=t.props?t.props.children:t.children;return t.props&&t.props.i18nIsDynamicList?Yl(e):e},u9=t=>Array.isArray(t)&&t.every(m.isValidElement),Yl=t=>Array.isArray(t)?t:[t],d9=(t,e)=>{const n={...e};return n.props=Object.assign(t.props,e.props),n},i2=(t,e)=>{if(!t)return"";let n="";const r=Yl(t),o=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return r.forEach((i,s)=>{if(wo(i))n+=`${i}`;else if(m.isValidElement(i)){const{props:a,type:c}=i,u=Object.keys(a).length,d=o.indexOf(c)>-1,f=a.children;if(!f&&d&&!u)n+=`<${c}/>`;else if(!f&&(!d||u)||a.i18nIsDynamicList)n+=`<${s}></${s}>`;else if(d&&u===1&&wo(f))n+=`<${c}>${f}</${c}>`;else{const p=i2(f,e);n+=`<${s}>${p}</${s}>`}}else if(i===null)km("Trans: the passed in value is invalid - seems you passed in a null child.");else if(Wl(i)){const{format:a,...c}=i,u=Object.keys(c);if(u.length===1){const d=a?`${u[0]}, ${a}`:u[0];n+=`{{${d}}}`}else km("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else km("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n},h9=(t,e,n,r,o,i)=>{if(e==="")return[];const s=r.transKeepBasicHtmlNodesFor||[],a=e&&new RegExp(s.map(b=>`<${b}`).join("|")).test(e);if(!t&&!a&&!i)return[e];const c={},u=b=>{Yl(b).forEach(S=>{wo(S)||(zb(S)?u(Vb(S)):Wl(S)&&!m.isValidElement(S)&&Object.assign(c,S))})};u(t);const d=t9.parse(`<0>${e}</0>`),f={...c,...o},p=(b,C,S)=>{const w=Vb(b),E=v(w,C.children,S);return u9(w)&&E.length===0||b.props&&b.props.i18nIsDynamicList?w:E},g=(b,C,S,w,E)=>{b.dummy?(b.children=C,S.push(m.cloneElement(b,{key:w},E?void 0:C))):S.push(...m.Children.map([b],T=>{const I={...T.props};return delete I.i18nIsDynamicList,m.createElement(T.type,{...I,key:w,ref:T.ref},E?null:C)}))},v=(b,C,S)=>{const w=Yl(b);return Yl(C).reduce((T,I,A)=>{const _=I.children&&I.children[0]&&I.children[0].content&&n.services.interpolator.interpolate(I.children[0].content,f,n.language);if(I.type==="tag"){let j=w[parseInt(I.name,10)];S.length===1&&!j&&(j=S[0][I.name]),j||(j={});const R=Object.keys(I.attrs).length!==0?d9({props:I.attrs},j):j,$=m.isValidElement(R),U=$&&zb(I,!0)&&!I.voidElement,se=a&&Wl(R)&&R.dummy&&!$,P=Wl(t)&&Object.hasOwnProperty.call(t,I.name);if(wo(R)){const k=n.services.interpolator.interpolate(R,f,n.language);T.push(k)}else if(zb(R)||U){const k=p(R,I,S);g(R,k,T,A)}else if(se){const k=v(w,I.children,S);g(R,k,T,A)}else if(Number.isNaN(parseFloat(I.name)))if(P){const k=p(R,I,S);g(R,k,T,A,I.voidElement)}else if(r.transSupportBasicHtmlNodes&&s.indexOf(I.name)>-1)if(I.voidElement)T.push(m.createElement(I.name,{key:`${I.name}-${A}`}));else{const k=v(w,I.children,S);T.push(m.createElement(I.name,{key:`${I.name}-${A}`},k))}else if(I.voidElement)T.push(`<${I.name} />`);else{const k=v(w,I.children,S);T.push(`<${I.name}>${k}</${I.name}>`)}else if(Wl(R)&&!$){const k=I.children[0]?_:null;k&&T.push(k)}else g(R,_,T,A,I.children.length!==1||!_)}else if(I.type==="text"){const j=r.transWrapTextNodes,R=i?r.unescape(n.services.interpolator.interpolate(I.content,f,n.language)):n.services.interpolator.interpolate(I.content,f,n.language);j?T.push(m.createElement(j,{key:`${I.name}-${A}`},R)):T.push(R)}return T},[])},y=v([{dummy:!0,children:t||[]}],d,Yl(t||[]));return Vb(y[0])};function f9(t){let{children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:s={},values:a,defaults:c,components:u,ns:d,i18n:f,t:p,shouldUnescape:g,...v}=t;const y=f||Qw();if(!y)return rg("You will need to pass in an i18next instance by using i18nextReactModule"),e;const b=p||y.t.bind(y)||(U=>U),C={...r2(),...y.options&&y.options.react};let S=d||b.ns||y.options&&y.options.defaultNS;S=wo(S)?[S]:S||["translation"];const w=i2(e,C),E=c||w||C.transEmptyNodeValue||o,{hashTransKey:T}=C,I=o||(T?T(w||E):w||E);y.options&&y.options.interpolation&&y.options.interpolation.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables});const A=a||n!==void 0||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},_={...s,context:i||s.context,count:n,...a,...A,defaultValue:E,ns:S},j=I?b(I,_):E;u&&Object.keys(u).forEach(U=>{const se=u[U];if(typeof se.type=="function"||!se.props||!se.props.children||j.indexOf(`${U}/>`)<0&&j.indexOf(`${U} />`)<0)return;function P(){return m.createElement(m.Fragment,null,se)}u[U]=m.createElement(P)});const R=h9(u||e,j,y,C,_,g),$=r!==void 0?r:C.defaultTransParent;return $?m.createElement($,v,R):R}const yk={type:"3rdParty",init(t){c9(t.options.react),l9(t)}},s2=m.createContext();class p9{constructor(){Z(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}function Fo(t){let{children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:s={},values:a,defaults:c,components:u,ns:d,i18n:f,t:p,shouldUnescape:g,...v}=t;const{i18n:y,defaultNS:b}=m.useContext(s2)||{},C=f||y||Qw(),S=p||C&&C.t.bind(C);return f9({children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:s,values:a,defaults:c,components:u,ns:d||S&&S.ns||b||C&&C.options&&C.options.defaultNS,i18n:C,t:p,shouldUnescape:g,...v})}const m9=(t,e)=>{const n=m.useRef();return m.useEffect(()=>{n.current=t},[t,e]),n.current},a2=(t,e,n,r)=>t.getFixedT(e,n,r),g9=(t,e,n,r)=>m.useCallback(a2(t,e,n,r),[t,e,n,r]),Fe=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:o}=m.useContext(s2)||{},i=n||r||Qw();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new p9),!i){rg("You will need to pass in an i18next instance by using initReactI18next");const E=(I,A)=>wo(A)?A:Wl(A)&&wo(A.defaultValue)?A.defaultValue:Array.isArray(I)?I[I.length-1]:I,T=[E,{},!1];return T.t=E,T.i18n={},T.ready=!1,T}i.options.react&&i.options.react.wait!==void 0&&rg("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...r2(),...i.options.react,...e},{useSuspense:a,keyPrefix:c}=s;let u=t||o||i.options&&i.options.defaultNS;u=wo(u)?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(E=>r9(E,i,s)),f=g9(i,e.lng||null,s.nsMode==="fallback"?u:u[0],c),p=()=>f,g=()=>a2(i,e.lng||null,s.nsMode==="fallback"?u:u[0],c),[v,y]=m.useState(p);let b=u.join();e.lng&&(b=`${e.lng}${b}`);const C=m9(b),S=m.useRef(!0);m.useEffect(()=>{const{bindI18n:E,bindI18nStore:T}=s;S.current=!0,!d&&!a&&(e.lng?vk(i,e.lng,u,()=>{S.current&&y(g)}):gk(i,u,()=>{S.current&&y(g)})),d&&C&&C!==b&&S.current&&y(g);const I=()=>{S.current&&y(g)};return E&&i&&i.on(E,I),T&&i&&i.store.on(T,I),()=>{S.current=!1,E&&i&&E.split(" ").forEach(A=>i.off(A,I)),T&&i&&T.split(" ").forEach(A=>i.store.off(A,I))}},[i,b]),m.useEffect(()=>{S.current&&d&&y(p)},[i,c,d]);const w=[v,i,d];if(w.t=v,w.i18n=i,w.ready=d,d||!d&&!a)return w;throw new Promise(E=>{e.lng?vk(i,e.lng,u,()=>E()):gk(i,u,()=>E())})},c2=V([]),bk=new Map,qc=t=>{let e=bk.get(t);return e||(e=V(n=>n(c2).includes(t)),bk.set(t,e),e)};function ve(t){return D(qc(t))}function et(t){return st().get(qc(t))}function Xo(t){return D(qc(t))}function Zs(t){return st().get(qc(t))}function Hv(t){const e=Xo("kill-domain-referrer");return t==="html"?e?"noopener noreferrer":"noopener":e?"noopener,noreferrer":"noopener"}function ea(t){const e=t.split("://");return e.length===1?`https://${t}`:e[0]==="http"?`https://${e[1]}`:t}function v9(t){return t==="."||t==="!"||t==="?"}function y9(t){return t===" "||t===`
`||t==="	"}function b9(t){let e=t.length-1;for(;e>=0&&y9(t[e]);)e-=1;return[t.slice(0,e+1),t.slice(e+1)]}function C9(t,e,n){return t.slice(0,n)+e+t.slice(n)}const S9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-banner-Dtr5ysxQ.webp",E9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-copied-popup-BRVm_KWU.webp",w9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-engaging-popup-YSBImXns.webp",T9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-secondday-popup--nxha975.webp",I9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-setting-TTFEOcbN.webp",_9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-think-deeper-popup-FHodYGgC.webp",A9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-card-DH3zTT3T.webp",k9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-popup-D7hBD_1Q.webp",x9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-discover-strip-DnlsnV3g.webp",R9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-banner-CqsoJ8gk.webp",P9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-menu-item-C25mGU_p.webp",N9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-banner-CKv2a8_f.webp",O9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-copied-popup-M4nhJM3H.webp",M9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-engaging-popup-B-vXLUhP.webp",L9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-secondday-popup-DBikSjcg.webp",D9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-setting-D2OBsvlS.webp",j9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-think-deeper-popup-D5tA7N2r.webp",U9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-card-CwLVOvcv.webp",F9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-popup-DM6aMFdv.webp",B9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-discover-strip-flsYDh7H.webp",H9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-banner-C2lNCEe_.webp",z9="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-menu-item-BzBe-XWV.webp",Ck="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-shopping-Dm2se5Rq.png",V9={appLayout:{showSettings:!0,showCookieBanner:!0,showSettingsRelyOnChatDetailLayout:!0,showMobileCrossSelling:!0},surfaceQueryParam:null,showScrollbarOnHover:!1,dailyBriefingOcid:"cp_web_daily",persistThemeChoice:!0,entraRedirectModalBehaviour:"replace",redirectBackEnabled:!0,crossPromotion:{discoverStrip:{dark:x9,light:B9,fontSize:"m"},settingMenuItem:{dark:P9,light:z9},settingBanner:{dark:R9,light:H9},aggressive:{banner:{dark:S9,light:N9},setting:{dark:I9,light:D9},card:{thumbsUp:{dark:A9,light:U9}},popup:{secondDay:{dark:T9,light:L9},thumbsUp:{dark:k9,light:F9},copied:{dark:E9,light:O9},engaging:{dark:w9,light:M9},thinkDeeper:{dark:_9,light:j9}}}},proSubscription:{enabled:!0,manageRefId:"cmc",urlParams:{client:"cmc",ocids:{ActionsLimit:{freeTrial:"cmmmcpyae96",buy:"cmm46gj0qnu"},VoiceLimit:{freeTrial:"cmm0ghcr8ka",buy:"cmmxki6wg02"},Settings:{freeTrial:"cmma4vbm2dq",buy:"cmmugsiwg58"},ChatReasoningLimit:{freeTrial:"cmmtjssvrv9",buy:"cmmzn5kdy9p"},MarketSelect:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652",market:"none"},RedirectFromAuth0Account:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652"}}},upsellFromAuth0:{navigateToProSubPageAfterLogin:!0}},referralEnabled:!0,adsEnabled:!0,adsShowroomEnabled:!0,thinkDeeperFreemiumEnabled:!0,monitorAccountChangesAcrossTabs:!0,shopping:{upsell:{banner:{light:Ck,dark:Ck}}},sidebarNavigation:!0,showChatDetail:!0,enableAuth0:!0,settingsOverrides:{shouldShowActivityHistory:!0,shouldShowMemoryDelete:!0},enableCustom1DS:!0,actions:{enableActions:()=>Promise.resolve(!0)},landingPage:{enableLandingRoute:!0,enableCentralComposer:!0,enableStarterPrompts:!0,enableAutoSuggest:!0,enableWidgets:!0,enablePromptedGreetings:!0,shouldFetchWidgetsData:!0,regexForAutoSuggest:/\S+\s+/},supportsYouTubeVideos:!0,useMSALPwBApp:!0},Ga=class Ga{constructor(){Z(this,"cfg",V9)}static instance(){return Ga.singleton||(Ga.singleton=new Ga),Ga.singleton}config(){return this.cfg}setConfig(e){this.cfg=e}};Z(Ga,"singleton",null);let be=Ga;const $9=/^(?:(?:https?):\/\/)?(?:(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.))+[a-z]{2,}(?:\/[\w.-]*)*\/?(?:\?[^\s#]*)?(?:#[^\s]*)?$/,G9=/\b((https?:\/\/|www\.)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})([/?#][\w\-._~:/?#@!$&'()*+,;=%]*)?(?=[\s<>()"'.,!?)}\]“”‘’《》「」『』【】]|$)/gi;function l2(t){return $9.test(t)}function q9(t){const[e,n]=b9(t),r=v9(e[e.length-1]),o=r?e.slice(0,-1):e;if(l2(o)){const i=r?e[e.length-1]:"";return{url:ea(o),word:o,suffix:`${i}${n}`}}return{word:t}}function og(t){let e="";try{e=new URL(t).hostname}catch{}return e}function K9(t,e,n){const{overwrite:r}=n??{};try{const o=new URL(t);for(const[i,s]of Object.entries(e))r&&o.searchParams.delete(i),o.searchParams.append(i,s);return o.toString()}catch{}return t}function tf(t){const{formCodeParamOnLinks:e}=be.instance().config();return e?K9(t,{form:e}):t}function W9(t){return t.replace(/[.,!?]+$/,"")}function Y9(t,e){return!t||e<=0?!1:t[e-1]==="@"||/[\w.-]+@/.test(t.slice(Math.max(0,e-20),e+1))}function iAe(t){const e=[];if(!t)return e;for(const n of t.matchAll(G9)){const r=n[0],{index:o}=n;if(o<0||Y9(t,o))continue;const i=W9(r),s=ea(i),a=o+i.length;e.push({url:s,from:o,to:a})}return e}const ta=m.forwardRef((t,e)=>{const{children:n,href:r,className:o,title:i,"aria-controls":s,"aria-expanded":a,"aria-haspopup":c,"aria-label":u,id:d,target:f,onClick:p,onPointerDown:g,onFocus:v}=t,y=Hv("html");return h.jsx("a",{id:d,ref:e,"aria-controls":s,"aria-expanded":a,"aria-haspopup":c,"aria-label":u,className:o,title:i,href:r&&tf(r),target:f??"_blank",rel:y,onClick:p,onPointerDown:g,onFocus:v,children:n})});ta.displayName="Link";const Q9="SN:ROOT",J9=m.createContext(null);function X9(){return m.useContext(J9)}const Jw=m.createContext(Q9);Jw.displayName="FocusContext";function Z9(){return m.useContext(Jw)}function qd(){}function e7({focusable:t=!0,saveLastFocusedChild:e=!0,trackChildren:n=!1,autoRestoreFocus:r=!0,forceFocus:o=!1,isFocusBoundary:i=!1,focusBoundaryDirections:s,focusKey:a,preferredChildFocusKey:c,onEnterPress:u=qd,onEnterRelease:d=qd,onArrowPress:f=()=>!0,onArrowRelease:p=qd,onFocus:g=qd,onBlur:v=qd}){const y=X9(),b=m.useCallback(P=>{P&&u(P)},[u]),C=m.useCallback(()=>{d()},[d]),S=m.useCallback((P,k)=>f(P,k),[f]),w=m.useCallback(P=>{p(P)},[p]),E=m.useCallback((P,k)=>{g(P,k)},[g]),T=m.useCallback((P,k)=>{v(P,k)},[v]),I=m.useRef(null),[A,_]=m.useState(!1),[j,R]=m.useState(!1),$=Z9(),U=m.useMemo(()=>y?a??crypto.randomUUID():void 0,[a,y]),se=m.useCallback((P={})=>{U&&(y==null||y.setFocus(U,P))},[U,y]);return m.useEffect(()=>{const P=I.current;return P&&U&&(y==null||y.addFocusable({focusKey:U,node:P,parentFocusKey:$,preferredChildFocusKey:c,onEnterPress:b,onEnterRelease:C,onArrowPress:S,onArrowRelease:w,onFocus:E,onBlur:T,onUpdateFocus:(k=!1)=>_(k),onUpdateHasFocusedChild:(k=!1)=>R(k),saveLastFocusedChild:e,trackChildren:n,isFocusBoundary:i,focusBoundaryDirections:s,autoRestoreFocus:r,forceFocus:o,focusable:t})),()=>{U&&(y==null||y.removeFocusable({focusKey:U}))}},[]),m.useEffect(()=>{const P=I.current;P&&U&&(y==null||y.updateFocusable(U,{node:P,preferredChildFocusKey:c,focusable:t,isFocusBoundary:i,focusBoundaryDirections:s,onEnterPress:b,onEnterRelease:C,onArrowPress:S,onArrowRelease:w,onFocus:E,onBlur:T}))},[U,c,t,i,s,b,C,S,w,E,T,y]),{ref:I,focusSelf:se,focused:A,hasFocusedChild:j,focusKey:U}}function rd(t,...e){const n=e7({onEnterPress:()=>{var o;(o=n.ref.current)==null||o.click()},onFocus:()=>{var o,i;(o=n.ref.current)==null||o.focus(),t.scrollIntoViewOnFocus&&((i=n.ref.current)==null||i.scrollIntoView({block:"nearest"}))},onBlur:()=>{var o;(o=n.ref.current)==null||o.blur()},...t}),r=t7(...e,n.ref);return{focusable:n,refCallback:r}}function t7(...t){return e=>{for(const n of t)n&&(typeof n=="function"?n(e):n.current=e)}}function u2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=u2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function G(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=u2(t))&&(r&&(r+=" "),r+=e);return r}const Xw="-",n7=t=>{const e=o7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(Xw);return a[0]===""&&a.length!==1&&a.shift(),d2(a,e)||r7(s)},getConflictingClassGroupIds:(s,a)=>{const c=n[s]||[];return a&&r[s]?[...c,...r[s]]:c}}},d2=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?d2(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(Xw);return(s=e.validators.find(({validator:a})=>a(i)))==null?void 0:s.classGroupId},Sk=/^\[(.+)\]$/,r7=t=>{if(Sk.test(t)){const e=Sk.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},o7=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return s7(Object.entries(t.classGroups),n).forEach(([i,s])=>{lE(s,r,i,e)}),r},lE=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:Ek(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(i7(o)){lE(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{lE(s,Ek(e,i),n,r)})})},Ek=(t,e)=>{let n=t;return e.split(Xw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},i7=t=>t.isThemeGetter,s7=(t,e)=>e?t.map(([n,r])=>{const o=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([s,a])=>[e+s,a])):i);return[n,o]}):t,a7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},h2="!",c7=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],i=e.length,s=a=>{const c=[];let u=0,d=0,f;for(let b=0;b<a.length;b++){let C=a[b];if(u===0){if(C===o&&(r||a.slice(b,b+i)===e)){c.push(a.slice(d,b)),d=b+i;continue}if(C==="/"){f=b;continue}}C==="["?u++:C==="]"&&u--}const p=c.length===0?a:a.substring(d),g=p.startsWith(h2),v=g?p.substring(1):p,y=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:s}):s},l7=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},u7=t=>({cache:a7(t.cacheSize),parseClassName:c7(t),...n7(t)}),d7=/\s+/,h7=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,i=[],s=t.trim().split(d7);let a="";for(let c=s.length-1;c>=0;c-=1){const u=s[c],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let v=!!g,y=r(v?p.substring(0,g):p);if(!y){if(!v){a=u+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=u+(a.length>0?" "+a:a);continue}v=!1}const b=l7(d).join(":"),C=f?b+h2:b,S=C+y;if(i.includes(S))continue;i.push(S);const w=o(y,v);for(let E=0;E<w.length;++E){const T=w[E];i.push(C+T)}a=u+(a.length>0?" "+a:a)}return a};function f7(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=f2(e))&&(r&&(r+=" "),r+=n);return r}const f2=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=f2(t[r]))&&(n&&(n+=" "),n+=e);return n};function p7(t,...e){let n,r,o,i=s;function s(c){const u=e.reduce((d,f)=>f(d),t());return n=u7(u),r=n.cache.get,o=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=h7(c,n);return o(c,d),d}return function(){return i(f7.apply(null,arguments))}}const sn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},p2=/^\[(?:([a-z-]+):)?(.+)\]$/i,m7=/^\d+\/\d+$/,g7=new Set(["px","full","screen"]),v7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,y7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,b7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,S7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$i=t=>uu(t)||g7.has(t)||m7.test(t),ks=t=>od(t,"length",x7),uu=t=>!!t&&!Number.isNaN(Number(t)),$b=t=>od(t,"number",uu),Kd=t=>!!t&&Number.isInteger(Number(t)),E7=t=>t.endsWith("%")&&uu(t.slice(0,-1)),ft=t=>p2.test(t),xs=t=>v7.test(t),w7=new Set(["length","size","percentage"]),T7=t=>od(t,w7,m2),I7=t=>od(t,"position",m2),_7=new Set(["image","url"]),A7=t=>od(t,_7,P7),k7=t=>od(t,"",R7),Wd=()=>!0,od=(t,e,n)=>{const r=p2.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},x7=t=>y7.test(t)&&!b7.test(t),m2=()=>!1,R7=t=>C7.test(t),P7=t=>S7.test(t),N7=()=>{const t=sn("colors"),e=sn("spacing"),n=sn("blur"),r=sn("brightness"),o=sn("borderColor"),i=sn("borderRadius"),s=sn("borderSpacing"),a=sn("borderWidth"),c=sn("contrast"),u=sn("grayscale"),d=sn("hueRotate"),f=sn("invert"),p=sn("gap"),g=sn("gradientColorStops"),v=sn("gradientColorStopPositions"),y=sn("inset"),b=sn("margin"),C=sn("opacity"),S=sn("padding"),w=sn("saturate"),E=sn("scale"),T=sn("sepia"),I=sn("skew"),A=sn("space"),_=sn("translate"),j=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ft,e],U=()=>[ft,e],se=()=>["",$i,ks],P=()=>["auto",uu,ft],k=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],N=()=>["solid","dashed","dotted","double","none"],x=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",ft],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[uu,ft];return{cacheSize:500,separator:":",theme:{colors:[Wd],spacing:[$i,ks],blur:["none","",xs,ft],brightness:Q(),borderColor:[t],borderRadius:["none","","full",xs,ft],borderSpacing:U(),borderWidth:se(),contrast:Q(),grayscale:te(),hueRotate:Q(),invert:te(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[E7,ks],inset:$(),margin:$(),opacity:Q(),padding:U(),saturate:Q(),scale:Q(),sepia:te(),skew:Q(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",ft]}],container:["container"],columns:[{columns:[xs]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...k(),ft]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kd,ft]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ft]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",Kd,ft]}],"grid-cols":[{"grid-cols":[Wd]}],"col-start-end":[{col:["auto",{span:["full",Kd,ft]},ft]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Wd]}],"row-start-end":[{row:["auto",{span:[Kd,ft]},ft]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ft]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ft,e]}],"min-w":[{"min-w":[ft,e,"min","max","fit"]}],"max-w":[{"max-w":[ft,e,"none","full","min","max","fit","prose",{screen:[xs]},xs]}],h:[{h:[ft,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ft,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ft,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xs,ks]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$b]}],"font-family":[{font:[Wd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ft]}],"line-clamp":[{"line-clamp":["none",uu,$b]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$i,ft]}],"list-image":[{"list-image":["none",ft]}],"list-style-type":[{list:["none","disc","decimal",ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...N(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$i,ks]}],"underline-offset":[{"underline-offset":["auto",$i,ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...k(),I7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},A7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...N(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:N()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...N()]}],"outline-offset":[{"outline-offset":[$i,ft]}],"outline-w":[{outline:[$i,ks]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[$i,ks]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xs,k7]}],"shadow-color":[{shadow:[Wd]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...x(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":x()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",xs,ft]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ft]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",ft]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Kd,ft]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[$i,ks,$b]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},O7=p7(N7);function bt(...t){return O7(G(t))}const $f="overflow-hidden",bs="backdrop-blur-2xl backdrop-saturate-200",Zw="bg-white/70 dark:bg-slate-800/70",Fi=G($f,bs,Zw),M7=G($f,bs),L7=G(bs,Zw),D7="bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]",j7="dark:bg-white/70  bg-slate-800/70",U7=G($f,bs,j7);G(bs,Zw);const g2="bg-accent-100/60 dark:bg-slate-800/50",F7=G(bs,g2),Ws=G($f,bs,g2),B7="bg-acrylic-thin-fallback-light/95 dark:bg-acrylic-thin-fallback-dark/[92]",v2="dark:bg-accent-900/60 bg-slate-800/50";G(bs,v2);const H7=G($f,bs,v2),nf="relative flex items-center",Do="text-foreground-800 fill-foreground-800 active:text-foreground-600 active:fill-foreground-600 dark:active:text-foreground-650 dark:active:fill-foreground-650",wk="text-slate-200 fill-slate-200 active:text-slate-300 active:fill-slate-300 dark:text-stone-800 dark:fill-stone-800 dark:active:text-stone-600 dark:active:fill-stone-600",z7="text-foreground-250 fill-foreground-250 active:text-foreground-350 active:fill-foreground-350 dark:text-foreground-750 dark:fill-foreground-750 dark:active:text-foreground-650 dark:active:fill-foreground-650",V7="text-accent-550 fill-accent-550 active:text-accent-450/80 active:fill-accent-450/80 dark:text-accent-850 dark:fill-accent-850 dark:active:text-accent-700 dark:active:fill-accent-700",Pp="shadow-button-light dark:shadow-button-dark",Tk="dark:shadow-button-light shadow-button-dark",$7="shadow-button-strong-light dark:shadow-button-dark",G7="text-cocoa-550 safe-hover:text-caramel-450 dark:text-slate-300 dark:active:text-slate-200",q7="bg-white/70 safe-hover:bg-caramel-200 active:bg-caramel-200/20 dark:bg-slate-450/30 dark:safe-hover:bg-midnight-800 dark:active:bg-midnight-800/20",K7="border-[0.5px] border-transparent safe-hover:border-caramel-400 dark:safe-hover:border-midnight-350",W7="text-caramel-600 fill-caramel-600 active:text-caramel-400 active:fill-caramel-400 dark:text-slate-200 dark:fill-text-slate-200 dark:active:text-slate-100 dark:active:fill-slate-100",Y7="bg-caramel-200 safe-hover:bg-caramel-300 active:bg-caramel-300 dark:bg-slate-650 dark:safe-hover:bg-slate-400 dark:active:bg-slate-400",Gb="bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-black/30 dark:active:bg-black/20",mc={default:`${Do} ${Pp} bg-white/70 safe-hover:bg-white active:bg-white/60 dark:bg-slate-450/30 dark:safe-hover:bg-slate-450/40 dark:active:bg-slate-450/20`,strong:`${z7} ${$7} bg-stone-800 safe-hover:bg-black active:bg-stone-750 dark:bg-slate-600 dark:safe-hover:bg-slate-550 dark:active:bg-slate-600/80`,accent:`${V7} bg-accent-250 safe-hover:bg-accent-300 active:bg-accent-200 dark:bg-accent-550 dark:safe-hover:bg-accent-450 dark:active:bg-accent-600/80`,"overlay-bright":`${Do} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"overlay-bright-inverted":`${Do} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed":`${Do} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed-inverted":`${Do} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"subtle-bright":`${Do} bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,"subtle-bright-inverted":`${Do} ${Gb}`,"subtle-dimmed":`${Do} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-black/30 dark:active:bg-black/20`,"subtle-dimmed-inverted":`${Do} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,acrylic:`${Do} ${Pp} ${Gb}`,"acrylic-inverted":`${wk} ${Tk} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,"acrylic-thin":`${Do} ${Pp} ${Gb}`,"acrylic-thin-inverted":`${wk} ${Tk} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,chip:`${G7} ${q7} ${Pp} ${K7}`,alert:"bg-system-red-600 safe-hover:bg-system-red-650 active:bg-system-red-550","composer-selected":`${W7} ${Y7}`},y2={acrylic:`${Fi}`,"acrylic-inverted":`${U7}`,"acrylic-thin":`${Ws}`,"acrylic-thin-inverted":`${H7}`};function Q7(t){return t in y2}const J7={start:"justify-start",center:"justify-center",end:"justify-end"},eT={"28-xxs":"text-xs","32-xs":"text-xs","36-sm":"text-xs","40-base":"text-sm","48-lg":"text-base","56-xl":"text-base","64-xxl":"text-base"},Us={"28-xxs":"gap-x-1.5","32-xs":"gap-x-1.5","36-sm":"gap-x-1.5","40-base":"gap-x-2","48-lg":"gap-x-3","56-xl":"gap-x-3","64-xxl":"gap-x-3"},tT={"28-xxs":`min-h-7 min-w-8 px-3 py-1 ${Us["28-xxs"]}`,"32-xs":`min-h-8 min-w-8 px-2.5 py-1 ${Us["32-xs"]}`,"36-sm":`min-h-9 min-w-9 px-2.5 py-1 ${Us["36-sm"]}`,"40-base":`min-h-10 min-w-10 px-3 py-2 ${Us["40-base"]}`,"48-lg":`min-h-12 min-w-12 px-3 py-2.5 ${Us["48-lg"]}`,"56-xl":`min-h-14 min-w-14 px-4 py-3.5 ${Us["56-xl"]}`,"64-xxl":`min-h-16 min-w-16 p-4 ${Us["64-xxl"]}`},X7={"28-xxs":"size-7","32-xs":"size-8","36-sm":"size-9","40-base":"size-10","48-lg":"size-12","56-xl":"size-14","64-xxl":"size-16"},uE={"28-xxs":"rounded-lg before:rounded-lg","32-xs":"rounded-lg before:rounded-lg","36-sm":"rounded-xl before:rounded-xl","40-base":"rounded-xl before:rounded-xl","48-lg":"rounded-3xl before:rounded-3xl","56-xl":"rounded-4xl before:rounded-4xl","64-xxl":"rounded-4xl before:rounded-4xl"},Z7={none:"",regular:"border border-solid border-stone-350 dark:border-slate-600",strong:"border border-solid border-2 border-stroke-750"},Ik="rounded-full before:rounded-full",eH="opacity-40 pointer-events-none",zv="before:absolute before:inset-0 before:pointer-events-none before:border before:border-transparent before:contrast-more:border-2 outline-2 outline-offset-1 focus-visible:z-[1] focus-visible:outline focus-visible:outline-stroke-900",Ue=m.forwardRef((t,e)=>{const{children:n,onClick:r,onFocus:o,onBlur:i,onKeyDown:s,onKeyUp:a,href:c,className:u,title:d,variant:f="rect",alignment:p="center",color:g="default",outline:v="none",size:y="40-base",disabled:b,id:C,role:S,testId:w,spatialNavigationAutofocus:E=!1,"aria-controls":T,"aria-expanded":I,"aria-haspopup":A,"aria-pressed":_,"aria-label":j,"aria-selected":R,onPointerDown:$}=t,U=f==="circle"||f==="square",se=f==="circle"||f==="pill",P=bt(nf,mc[g],eT[y],J7[p],U?X7[y]:tT[y],se?Ik:uE[y],zv,b&&eH,Z7[v],u);let k=n;if(Q7(g)){const M=bt(y2[g],se?Ik:uE[y]);k=h.jsxs(h.Fragment,{children:[h.jsx("div",{className:bt("absolute inset-0",M)}),h.jsx("div",{className:`relative ${nf} ${Us[y]}`,children:n})]})}const{refCallback:N,focusable:x}=rd({autoRestoreFocus:!0,forceFocus:!0},e);return c!==void 0?h.jsx(ta,{id:C,onPointerDown:$,"aria-controls":T,"aria-expanded":I,"aria-haspopup":A,href:c,ref:x.ref,onClick:r,title:d,className:P,"data-testid":w,"aria-label":j,"aria-selected":R,children:k}):h.jsx("button",{onPointerDown:$,ref:N,id:C,"aria-controls":T,"aria-expanded":I,"aria-haspopup":A,"aria-pressed":_,"aria-selected":R,type:"button",className:P,title:d,role:S,disabled:b,onClick:r,onFocus:o,onBlur:i,onKeyDown:s,onKeyUp:a,"data-testid":w,"data-spatial-navigation-autofocus":E,"aria-label":j,"data-spatial-focus-key":x.focusKey,children:k})});Ue.displayName="Button";function tH({reason:t,onReload:e}){const{t:n}=Fe();return h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.accountChanged")}),h.jsx("p",{className:"pb-7",children:n(t==="login"?"authentication.signedInOtherTab":"authentication.signedOutOtherTab")}),h.jsx(Ue,{onClick:e,title:n("authentication.reloadToContinue"),variant:"pill",size:"48-lg",className:"w-full",children:n("authentication.reloadToContinue")})]})}const nT=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t},m.createElement("path",{fill:"currentColor",d:"M15.144 5.885c.62-.777 1.042-1.82.931-2.885-.909.045-2.018.6-2.66 1.377-.576.665-1.087 1.752-.954 2.772 1.02.089 2.04-.51 2.683-1.264ZM16.064 7.349c-1.482-.089-2.742.84-3.45.84-.707 0-1.79-.796-2.963-.774-1.525.022-2.94.884-3.714 2.256-1.592 2.744-.42 6.814 1.128 9.049.752 1.105 1.658 2.323 2.852 2.279 1.128-.044 1.57-.73 2.94-.73 1.371 0 1.77.73 2.963.708 1.238-.022 2.013-1.106 2.764-2.213.863-1.26 1.216-2.477 1.238-2.544-.022-.022-2.388-.93-2.41-3.65-.022-2.28 1.858-3.363 1.946-3.43-1.061-1.57-2.72-1.747-3.294-1.791Z"})),sAe=Object.freeze(Object.defineProperty({__proto__:null,default:nT},Symbol.toStringTag,{value:"Module"})),rT=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...t},m.createElement("g",{clipPath:"url(#a)"},m.createElement("path",{fill:"#4285F4",d:"M20.5 12.2a8 8 0 0 0-.2-1.8h-8.1v3.3H17c-.1.8-.7 2-1.8 3l2.5 2 .2.1a9 9 0 0 0 2.6-6.6Z"}),m.createElement("path",{fill:"#34A853",d:"M12.2 21c2.3 0 4.3-.8 5.7-2.2l-2.7-2.2a5.2 5.2 0 0 1-8-2.8l-2.7 2.1v.1c1.4 3 4.3 5 7.7 5Z"}),m.createElement("path",{fill:"#FBBC05",d:"M7.2 13.8a5.7 5.7 0 0 1 0-3.6L4.5 7.8a9.2 9.2 0 0 0 0 8.1l2.7-2.2Z"}),m.createElement("path",{fill:"#EB4335",d:"M12.2 6.5c1.6 0 2.7.7 3.3 1.3L18 5.4A8.2 8.2 0 0 0 12.2 3C8.8 3 5.9 5 4.4 8l2.8 2.2a5.3 5.3 0 0 1 5-3.7Z"})),m.createElement("defs",null,m.createElement("clipPath",{id:"a"},m.createElement("path",{fill:"#fff",d:"M3.5 3h17v18h-17z"})))),aAe=Object.freeze(Object.defineProperty({__proto__:null,default:rT},Symbol.toStringTag,{value:"Module"})),Vv=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...t},m.createElement("path",{fill:"#F25022",d:"M12.05 3H3.5v8.55h8.55V3Z"}),m.createElement("path",{fill:"#7FBA00",d:"M21.5 3h-8.55v8.55h8.55V3Z"}),m.createElement("path",{fill:"#00A4EF",d:"M12.05 12.45H3.5V21h8.55v-8.55Z"}),m.createElement("path",{fill:"#FFB900",d:"M21.5 12.45h-8.55V21h8.55v-8.55Z"})),cAe=Object.freeze(Object.defineProperty({__proto__:null,default:Vv},Symbol.toStringTag,{value:"Module"})),b2="140e65af-45d1-4427-bf08-3e7295db6836/ChatAI.ReadWrite",C2={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowNativeBroker:!1},cache:{cacheLocation:"localStorage"}},oT={scopes:[b2],extraQueryParameters:{lw:"1",coa:"1",nopa:"2",fl:"easi2_nowld",cobrandid:"8c0b039e-5a73-4399-9b56-7e237be2cd06"},prompt:"select_account",redirectUri:typeof window<"u"?window.location.origin:void 0},_k={scopes:["User.Read"]},nH={scopes:["OneDrive.ReadWrite"],authority:"https://login.microsoftonline.com/consumers"},iT={graphMeApiSuffix:"/me",graphMeImageApiSuffix:"/me/photo/$value",graphMeLicenseDetails:"/me/licenseDetails"},S2={appName:"copilot_studio",enableMATS:!0,appVersion:"0.0.0"},rH="IalDS3vRtEI5X0zvsmGG7zJP9UrHTcei",oH="auth.copilot.microsoft.com",E2="https://copilot.microsoft.com",iH={clientId:rH,domain:oH,cacheLocation:"localstorage",useRefreshTokens:!0,useRefreshTokensFallback:!0},w2="openid profile email offline_access ChatAI.ReadWrite",T2=typeof window<"u"?window.location.origin:void 0,rf={authorizationParams:{audience:E2,scope:w2,redirect_uri:T2}},sH={authorizationParams:{audience:E2,scope:w2,redirect_uri:T2,prompt:"select_account"}},dE="cp-pro";function aH(t){switch(t){case"login":return oT;case"graph":return _k;case"oneDrive":return nH;default:return _k}}function Kc(){return!!be.instance().config().enableAuth0}var $v=wB();const Ys=()=>{},un=Ys(),qb=Object,De=t=>t===un,Er=t=>typeof t=="function",no=(t,e)=>({...t,...e}),cH=t=>Er(t.then),Np=new WeakMap;let lH=0;const of=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let o,i;if(qb(t)===t&&!r&&n!=RegExp){if(o=Np.get(t),o)return o;if(o=++lH+"~",Np.set(t,o),n==Array){for(o="@",i=0;i<t.length;i++)o+=of(t[i])+",";Np.set(t,o)}if(n==qb){o="#";const s=qb.keys(t).sort();for(;!De(i=s.pop());)De(t[i])||(o+=i+":"+of(t[i])+",");Np.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},bo=new WeakMap,Kb={},Op={},sT="undefined",Gv=typeof window!=sT,hE=typeof document!=sT,uH=()=>Gv&&typeof window.requestAnimationFrame!=sT,fi=(t,e)=>{const n=bo.get(t);return[()=>!De(e)&&t.get(e)||Kb,r=>{if(!De(e)){const o=t.get(e);e in Op||(Op[e]=o),n[5](e,no(o,r),o||Kb)}},n[6],()=>!De(e)&&e in Op?Op[e]:!De(e)&&t.get(e)||Kb]};let fE=!0;const dH=()=>fE,[pE,mE]=Gv&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ys,Ys],hH=()=>{const t=hE&&document.visibilityState;return De(t)||t!=="hidden"},fH=t=>(hE&&document.addEventListener("visibilitychange",t),pE("focus",t),()=>{hE&&document.removeEventListener("visibilitychange",t),mE("focus",t)}),pH=t=>{const e=()=>{fE=!0,t()},n=()=>{fE=!1};return pE("online",e),pE("offline",n),()=>{mE("online",e),mE("offline",n)}},mH={isOnline:dH,isVisible:hH},gH={initFocus:fH,initReconnect:pH},gc=!Gc.useId,ls=!Gv||"Deno"in window,aT=t=>uH()?window.requestAnimationFrame(t):setTimeout(t,1),To=ls?m.useEffect:m.useLayoutEffect,Wb=typeof navigator<"u"&&navigator.connection,Ak=!ls&&Wb&&(["slow-2g","2g"].includes(Wb.effectiveType)||Wb.saveData),us=t=>{if(Er(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?of(t):"",[t,e]};let vH=0;const vc=()=>++vH,I2=0,_2=1,A2=2,yH=3;var wr={__proto__:null,ERROR_REVALIDATE_EVENT:yH,FOCUS_EVENT:I2,MUTATE_EVENT:A2,RECONNECT_EVENT:_2};async function qv(...t){const[e,n,r,o]=t,i=no({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let s=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const u=p=>typeof a=="function"?a(p):a!==!1,d=i.throwOnError;if(Er(n)){const p=n,g=[],v=e.keys();for(const y of v)!/^\$(inf|sub)\$/.test(y)&&p(e.get(y)._k)&&g.push(y);return Promise.all(g.map(f))}return f(n);async function f(p){const[g]=us(p);if(!g)return;const[v,y]=fi(e,g),[b,C,S,w]=bo.get(e),E=()=>{const se=b[g];return(Er(i.revalidate)?i.revalidate(v().data,p):i.revalidate!==!1)&&(delete S[g],delete w[g],se&&se[0])?se[0](A2).then(()=>v().data):v().data};if(t.length<3)return E();let T=r,I;const A=vc();C[g]=[A,0];const _=!De(c),j=v(),R=j.data,$=j._c,U=De($)?R:$;if(_&&(c=Er(c)?c(U,R):c,y({data:c,_c:U})),Er(T))try{T=T(U)}catch(se){I=se}if(T&&cH(T))if(T=await T.catch(se=>{I=se}),A!==C[g][0]){if(I)throw I;return T}else I&&_&&u(I)&&(s=!0,y({data:U,_c:un}));if(s&&!I)if(Er(s)){const se=s(T,U);y({data:se,error:un,_c:un})}else y({data:T,error:un,_c:un});if(C[g][1]=vc(),Promise.resolve(E()).then(()=>{y({_c:un})}),I){if(d)throw I;return}return T}}const kk=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},bH=(t,e)=>{if(!bo.has(t)){const n=no(gH,e),r={},o=qv.bind(un,t);let i=Ys;const s={},a=(d,f)=>{const p=s[d]||[];return s[d]=p,p.push(f),()=>p.splice(p.indexOf(f),1)},c=(d,f,p)=>{t.set(d,f);const g=s[d];if(g)for(const v of g)v(f,p)},u=()=>{if(!bo.has(t)&&(bo.set(t,[r,{},{},{},o,c,a]),!ls)){const d=n.initFocus(setTimeout.bind(un,kk.bind(un,r,I2))),f=n.initReconnect(setTimeout.bind(un,kk.bind(un,r,_2)));i=()=>{d&&d(),f&&f(),bo.delete(t)}}};return u(),[t,o,u,i]}return[t,bo.get(t)[4]]},CH=(t,e,n,r,o)=>{const i=n.errorRetryCount,s=o.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!De(i)&&s>i||setTimeout(r,a,o)},SH=(t,e)=>of(t)==of(e),[cT,EH]=bH(new Map),wH=no({onLoadingSlow:Ys,onSuccess:Ys,onError:Ys,onErrorRetry:CH,onDiscarded:Ys,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ak?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ak?5e3:3e3,compare:SH,isPaused:()=>!1,cache:cT,mutate:EH,fallback:{}},mH),TH=(t,e)=>{const n=no(t,e);if(e){const{use:r,fallback:o}=t,{use:i,fallback:s}=e;r&&i&&(n.use=r.concat(i)),o&&s&&(n.fallback=no(o,s))}return n},IH=m.createContext({}),k2="$inf$",x2=Gv&&window.__SWR_DEVTOOLS_USE__,_H=x2?window.__SWR_DEVTOOLS_USE__:[],AH=()=>{x2&&(window.__SWR_DEVTOOLS_REACT__=Gc)},R2=t=>Er(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],lT=()=>no(wH,m.useContext(IH)),kH=t=>(e,n,r)=>t(e,n&&((...i)=>{const[s]=us(e),[,,,a]=bo.get(cT);if(s.startsWith(k2))return n(...i);const c=a[s];return De(c)?n(...i):(delete a[s],c)}),r),xH=_H.concat(kH),uT=t=>function(...n){const r=lT(),[o,i,s]=R2(n),a=TH(r,s);let c=t;const{use:u}=a,d=(u||[]).concat(xH);for(let f=d.length;f--;)c=d[f](c);return c(o,i||a.fetcher||null,a)},dT=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}},P2=(t,e)=>(...n)=>{const[r,o,i]=R2(n),s=(i.use||[]).concat(e);return t(r,o,{...i,use:s})};AH();const xk=Gc.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),Yb={dedupe:!0},RH=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[g,v,y,b]=bo.get(r),[C,S]=us(t),w=m.useRef(!1),E=m.useRef(!1),T=m.useRef(C),I=m.useRef(e),A=m.useRef(n),_=()=>A.current,j=()=>_().isVisible()&&_().isOnline(),[R,$,U,se]=fi(r,C),P=m.useRef({}).current,k=De(s)?n.fallback[C]:s,N=(H,ae)=>{for(const Ee in P){const L=Ee;if(L==="data"){if(!o(H[L],ae[L])&&(!De(H[L])||!o(fe,ae[L])))return!1}else if(ae[L]!==H[L])return!1}return!0},x=m.useMemo(()=>{const H=!C||!e?!1:De(a)?_().isPaused()||i?!1:De(c)?!0:c:a,ae=ge=>{const He=no(ge);return delete He._k,H?{isValidating:!0,isLoading:!0,...He}:He},Ee=R(),L=se(),de=ae(Ee),Se=Ee===L?de:ae(L);let ie=de;return[()=>{const ge=ae(R());return N(ge,ie)?(ie.data=ge.data,ie.isLoading=ge.isLoading,ie.isValidating=ge.isValidating,ie.error=ge.error,ie):(ie=ge,ge)},()=>Se]},[r,C]),M=$v.useSyncExternalStore(m.useCallback(H=>U(C,(ae,Ee)=>{N(Ee,ae)||H()}),[r,C]),x[0],x[1]),te=!w.current,Y=g[C]&&g[C].length>0,Q=M.data,ee=De(Q)?k:Q,oe=M.error,Ce=m.useRef(ee),fe=p?De(Q)?Ce.current:Q:ee,Pe=Y&&!De(oe)?!1:te&&!De(a)?a:_().isPaused()?!1:i?De(ee)?!1:c:De(ee)||c,ze=!!(C&&e&&te&&Pe),nt=De(M.isValidating)?ze:M.isValidating,J=De(M.isLoading)?ze:M.isLoading,pe=m.useCallback(async H=>{const ae=I.current;if(!C||!ae||E.current||_().isPaused())return!1;let Ee,L,de=!0;const Se=H||{},ie=!y[C]||!Se.dedupe,ge=()=>gc?!E.current&&C===T.current&&w.current:C===T.current,He={isValidating:!1,isLoading:!1},Xe=()=>{$(He)},ct=()=>{const je=y[C];je&&je[1]===L&&delete y[C]},lt={isValidating:!0};De(R().data)&&(lt.isLoading=!0);try{if(ie&&($(lt),n.loadingTimeout&&De(R().data)&&setTimeout(()=>{de&&ge()&&_().onLoadingSlow(C,n)},n.loadingTimeout),y[C]=[ae(S),vc()]),[Ee,L]=y[C],Ee=await Ee,ie&&setTimeout(ct,n.dedupingInterval),!y[C]||y[C][1]!==L)return ie&&ge()&&_().onDiscarded(C),!1;He.error=un;const je=v[C];if(!De(je)&&(L<=je[0]||L<=je[1]||je[1]===0))return Xe(),ie&&ge()&&_().onDiscarded(C),!1;const Qe=R().data;He.data=o(Qe,Ee)?Qe:Ee,ie&&ge()&&_().onSuccess(Ee,C,n)}catch(je){ct();const Qe=_(),{shouldRetryOnError:dt}=Qe;Qe.isPaused()||(He.error=je,ie&&ge()&&(Qe.onError(je,C,Qe),(dt===!0||Er(dt)&&dt(je))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||j())&&Qe.onErrorRetry(je,C,Qe,Ut=>{const Ft=g[C];Ft&&Ft[0]&&Ft[0](wr.ERROR_REVALIDATE_EVENT,Ut)},{retryCount:(Se.retryCount||0)+1,dedupe:!0})))}return de=!1,Xe(),!0},[C,r]),X=m.useCallback((...H)=>qv(r,T.current,...H),[]);if(To(()=>{I.current=e,A.current=n,De(Q)||(Ce.current=Q)}),To(()=>{if(!C)return;const H=pe.bind(un,Yb);let ae=0;const L=dT(C,g,(de,Se={})=>{if(de==wr.FOCUS_EVENT){const ie=Date.now();_().revalidateOnFocus&&ie>ae&&j()&&(ae=ie+_().focusThrottleInterval,H())}else if(de==wr.RECONNECT_EVENT)_().revalidateOnReconnect&&j()&&H();else{if(de==wr.MUTATE_EVENT)return pe();if(de==wr.ERROR_REVALIDATE_EVENT)return pe(Se)}});return E.current=!1,T.current=C,w.current=!0,$({_k:S}),Pe&&(De(ee)||ls?H():aT(H)),()=>{E.current=!0,L()}},[C]),To(()=>{let H;function ae(){const L=Er(u)?u(R().data):u;L&&H!==-1&&(H=setTimeout(Ee,L))}function Ee(){!R().error&&(d||_().isVisible())&&(f||_().isOnline())?pe(Yb).then(ae):ae()}return ae(),()=>{H&&(clearTimeout(H),H=-1)}},[u,d,f,C]),m.useDebugValue(fe),i&&De(ee)&&C){if(!gc&&ls)throw new Error("Fallback data is required when using suspense in SSR.");I.current=e,A.current=n,E.current=!1;const H=b[C];if(!De(H)){const ae=X(H);xk(ae)}if(De(oe)){const ae=pe(Yb);De(fe)||(ae.status="fulfilled",ae.value=!0),xk(ae)}else throw oe}return{mutate:X,get data(){return P.data=!0,fe},get error(){return P.error=!0,oe},get isValidating(){return P.isValidating=!0,nt},get isLoading(){return P.isLoading=!0,J}}},PH=uT(RH),Rk=gc?t=>{t()}:Gc.startTransition,NH=t=>{const[,e]=m.useState({}),n=m.useRef(!1),r=m.useRef(t),o=m.useRef({data:!1,error:!1,isValidating:!1}),i=m.useCallback(s=>{let a=!1;const c=r.current;for(const u in s){const d=u;c[d]!==s[d]&&(c[d]=s[d],o.current[d]&&(a=!0))}a&&!n.current&&e({})},[]);return To(()=>(n.current=!1,()=>{n.current=!0})),[r,o.current,i]},OH=()=>(t,e,n={})=>{const{mutate:r}=lT(),o=m.useRef(t),i=m.useRef(e),s=m.useRef(n),a=m.useRef(0),[c,u,d]=NH({data:un,error:un,isMutating:!1}),f=c.current,p=m.useCallback(async(v,y)=>{const[b,C]=us(o.current);if(!i.current)throw new Error("Can’t trigger the mutation: missing fetcher.");if(!b)throw new Error("Can’t trigger the mutation: missing key.");const S=no(no({populateCache:!1,throwOnError:!0},s.current),y),w=vc();a.current=w,d({isMutating:!0});try{const E=await r(b,i.current(C,{arg:v}),no(S,{throwOnError:!0}));return a.current<=w&&(Rk(()=>d({data:E,isMutating:!1,error:void 0})),S.onSuccess==null||S.onSuccess.call(S,E,b,S)),E}catch(E){if(a.current<=w&&(Rk(()=>d({error:E,isMutating:!1})),S.onError==null||S.onError.call(S,E,b,S),S.throwOnError))throw E}},[]),g=m.useCallback(()=>{a.current=vc(),d({data:un,error:un,isMutating:!1})},[]);return To(()=>{o.current=t,i.current=e,s.current=n}),{trigger:p,reset:g,get data(){return u.data=!0,f.data},get error(){return u.error=!0,f.error},get isMutating(){return u.isMutating=!0,f.isMutating}}},hT=P2(PH,OH);var N2=Symbol.for("immer-nothing"),Pk=Symbol.for("immer-draftable"),Lt=Symbol.for("immer-state");function Co(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Nu=Object.getPrototypeOf;function Ou(t){return!!t&&!!t[Lt]}function ds(t){var e;return t?O2(t)||Array.isArray(t)||!!t[Pk]||!!((e=t.constructor)!=null&&e[Pk])||Wv(t)||Yv(t):!1}var MH=Object.prototype.constructor.toString();function O2(t){if(!t||typeof t!="object")return!1;const e=Nu(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===MH}function sf(t,e){Kv(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Kv(t){const e=t[Lt];return e?e.type_:Array.isArray(t)?1:Wv(t)?2:Yv(t)?3:0}function gE(t,e){return Kv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function M2(t,e,n){const r=Kv(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function LH(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Wv(t){return t instanceof Map}function Yv(t){return t instanceof Set}function Wn(t){return t.copy_||t.base_}function vE(t,e){if(Wv(t))return new Map(t);if(Yv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=O2(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Lt];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const s=o[i],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(Nu(t),r)}else{const r=Nu(t);if(r!==null&&n)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function fT(t,e=!1){return Qv(t)||Ou(t)||!ds(t)||(Kv(t)>1&&(t.set=t.add=t.clear=t.delete=DH),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>fT(r,!0))),t}function DH(){Co(2)}function Qv(t){return Object.isFrozen(t)}var yE={};function yc(t){const e=yE[t];return e||Co(0,t),e}function jH(t,e){yE[t]||(yE[t]=e)}var af;function ig(){return af}function UH(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Nk(t,e){e&&(yc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function bE(t){CE(t),t.drafts_.forEach(FH),t.drafts_=null}function CE(t){t===af&&(af=t.parent_)}function Ok(t){return af=UH(af,t)}function FH(t){const e=t[Lt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Mk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Lt].modified_&&(bE(e),Co(4)),ds(t)&&(t=sg(e,t),e.parent_||ag(e,t)),e.patches_&&yc("Patches").generateReplacementPatches_(n[Lt].base_,t,e.patches_,e.inversePatches_)):t=sg(e,n,[]),bE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==N2?t:void 0}function sg(t,e,n){if(Qv(e))return e;const r=e[Lt];if(!r)return sf(e,(o,i)=>Lk(t,r,e,o,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return ag(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,s=!1;r.type_===3&&(i=new Set(o),o.clear(),s=!0),sf(i,(a,c)=>Lk(t,r,o,a,c,n,s)),ag(t,o,!1),n&&t.patches_&&yc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Lk(t,e,n,r,o,i,s){if(Ou(o)){const a=i&&e&&e.type_!==3&&!gE(e.assigned_,r)?i.concat(r):void 0,c=sg(t,o,a);if(M2(n,r,c),Ou(c))t.canAutoFreeze_=!1;else return}else s&&n.add(o);if(ds(o)&&!Qv(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;sg(t,o),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&ag(t,o)}}function ag(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&fT(e,n)}function BH(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:ig(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=pT;n&&(o=[r],i=cf);const{revoke:s,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=s,a}var pT={get(t,e){if(e===Lt)return t;const n=Wn(t);if(!gE(n,e))return HH(t,n,e);const r=n[e];return t.finalized_||!ds(r)?r:r===Qb(t.base_,e)?(Jb(t),t.copy_[e]=lf(r,t)):r},has(t,e){return e in Wn(t)},ownKeys(t){return Reflect.ownKeys(Wn(t))},set(t,e,n){const r=L2(Wn(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const o=Qb(Wn(t),e),i=o==null?void 0:o[Lt];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(LH(n,o)&&(n!==void 0||gE(t.base_,e)))return!0;Jb(t),Ji(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Qb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Jb(t),Ji(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Wn(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Co(11)},getPrototypeOf(t){return Nu(t.base_)},setPrototypeOf(){Co(12)}},cf={};sf(pT,(t,e)=>{cf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});cf.deleteProperty=function(t,e){return cf.set.call(this,t,e,void 0)};cf.set=function(t,e,n){return pT.set.call(this,t[0],e,n,t[0])};function Qb(t,e){const n=t[Lt];return(n?Wn(n):t)[e]}function HH(t,e,n){var o;const r=L2(e,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function L2(t,e){if(!(e in t))return;let n=Nu(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Nu(n)}}function Ji(t){t.modified_||(t.modified_=!0,t.parent_&&Ji(t.parent_))}function Jb(t){t.copy_||(t.copy_=vE(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var zH=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const s=this;return function(c=i,...u){return s.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&Co(6),r!==void 0&&typeof r!="function"&&Co(7);let o;if(ds(e)){const i=Ok(this),s=lf(e,void 0);let a=!0;try{o=n(s),a=!1}finally{a?bE(i):CE(i)}return Nk(i,r),Mk(o,i)}else if(!e||typeof e!="object"){if(o=n(e),o===void 0&&(o=e),o===N2&&(o=void 0),this.autoFreeze_&&fT(o,!0),r){const i=[],s=[];yc("Patches").generateReplacementPatches_(e,o,i,s),r(i,s)}return o}else Co(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,c=>e(c,...a));let r,o;return[this.produce(e,n,(s,a)=>{r=s,o=a}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ds(t)||Co(8),Ou(t)&&(t=VH(t));const e=Ok(this),n=lf(t,void 0);return n[Lt].isManual_=!0,CE(e),n}finishDraft(t,e){const n=t&&t[Lt];(!n||!n.isManual_)&&Co(9);const{scope_:r}=n;return Nk(r,e),Mk(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const o=e[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(e=e.slice(n+1));const r=yc("Patches").applyPatches_;return Ou(t)?r(t,e):this.produce(t,o=>r(o,e))}};function lf(t,e){const n=Wv(t)?yc("MapSet").proxyMap_(t,e):Yv(t)?yc("MapSet").proxySet_(t,e):BH(t,e);return(e?e.scope_:ig()).drafts_.push(n),n}function VH(t){return Ou(t)||Co(10,t),D2(t)}function D2(t){if(!ds(t)||Qv(t))return t;const e=t[Lt];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=vE(t,e.scope_.immer_.useStrictShallowCopy_)}else n=vE(t,!0);return sf(n,(r,o)=>{M2(n,r,D2(o))}),e&&(e.finalized_=!1),n}function $H(){class t extends Map{constructor(c,u){super(),this[Lt]={type_:2,parent_:u,scope_:u?u.scope_:ig(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:c,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Wn(this[Lt]).size}has(c){return Wn(this[Lt]).has(c)}set(c,u){const d=this[Lt];return s(d),(!Wn(d).has(c)||Wn(d).get(c)!==u)&&(n(d),Ji(d),d.assigned_.set(c,!0),d.copy_.set(c,u),d.assigned_.set(c,!0)),this}delete(c){if(!this.has(c))return!1;const u=this[Lt];return s(u),n(u),Ji(u),u.base_.has(c)?u.assigned_.set(c,!1):u.assigned_.delete(c),u.copy_.delete(c),!0}clear(){const c=this[Lt];s(c),Wn(c).size&&(n(c),Ji(c),c.assigned_=new Map,sf(c.base_,u=>{c.assigned_.set(u,!1)}),c.copy_.clear())}forEach(c,u){const d=this[Lt];Wn(d).forEach((f,p,g)=>{c.call(u,this.get(p),p,this)})}get(c){const u=this[Lt];s(u);const d=Wn(u).get(c);if(u.finalized_||!ds(d)||d!==u.base_.get(c))return d;const f=lf(d,u);return n(u),u.copy_.set(c,f),f}keys(){return Wn(this[Lt]).keys()}values(){const c=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=c.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const c=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=c.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function e(a,c){return new t(a,c)}function n(a){a.copy_||(a.assigned_=new Map,a.copy_=new Map(a.base_))}class r extends Set{constructor(c,u){super(),this[Lt]={type_:3,parent_:u,scope_:u?u.scope_:ig(),modified_:!1,finalized_:!1,copy_:void 0,base_:c,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Wn(this[Lt]).size}has(c){const u=this[Lt];return s(u),u.copy_?!!(u.copy_.has(c)||u.drafts_.has(c)&&u.copy_.has(u.drafts_.get(c))):u.base_.has(c)}add(c){const u=this[Lt];return s(u),this.has(c)||(i(u),Ji(u),u.copy_.add(c)),this}delete(c){if(!this.has(c))return!1;const u=this[Lt];return s(u),i(u),Ji(u),u.copy_.delete(c)||(u.drafts_.has(c)?u.copy_.delete(u.drafts_.get(c)):!1)}clear(){const c=this[Lt];s(c),Wn(c).size&&(i(c),Ji(c),c.copy_.clear())}values(){const c=this[Lt];return s(c),i(c),c.copy_.values()}entries(){const c=this[Lt];return s(c),i(c),c.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(c,u){const d=this.values();let f=d.next();for(;!f.done;)c.call(u,f.value,f.value,this),f=d.next()}}function o(a,c){return new r(a,c)}function i(a){a.copy_||(a.copy_=new Set,a.base_.forEach(c=>{if(ds(c)){const u=lf(c,a);a.drafts_.set(c,u),a.copy_.add(u)}else a.copy_.add(c)}))}function s(a){a.revoked_&&Co(3,JSON.stringify(Wn(a)))}jH("MapSet",{proxyMap_:e,proxySet_:o})}var oo=new zH,ma=oo.produce;oo.produceWithPatches.bind(oo);oo.setAutoFreeze.bind(oo);oo.setUseStrictShallowCopy.bind(oo);oo.applyPatches.bind(oo);oo.createDraft.bind(oo);oo.finishDraft.bind(oo);function mT(t){const e=V(t,(n,r,o)=>r(e,ma(n(e),typeof o=="function"?o:()=>o)));return e}function ga(t,e){const n=Te(t);return m.useCallback(r=>n(ma(r)),[n])}function GH(t,e){return[D(t),ga(t)]}const Gf={Namibia:"NA","South Africa":"ZA",Cameroon:"CM",Japan:"JP",Ghana:"GH",Ethiopia:"ET","United States":"US","United Arab Emirates":"AE",Bahrain:"BH",Djibouti:"DJ",Algeria:"DZ",Egypt:"EG","Western Sahara":"EH",Eritrea:"ER",Israel:"IL",Iraq:"IQ",Jordan:"JO",Comoros:"KM",Kuwait:"KW",Lebanon:"LB",Libya:"LY",Morocco:"MA",Mauritania:"MR",Oman:"OM","Palestinian Territories":"PS",Qatar:"QA","Saudi Arabia":"SA",Sudan:"SD",Somalia:"SO","South Sudan":"SS",Syria:"SY",Chad:"TD",Tunisia:"TN",Yemen:"YE",Chile:"CL",India:"IN",Tanzania:"TZ",Spain:"ES",Azerbaijan:"AZ",Russia:"RU",Belarus:"BY",Zambia:"ZM",Bulgaria:"BG",Mali:"ML",Bangladesh:"BD","China mainland":"CN",France:"FR","Bosnia & Herzegovina":"BA",Andorra:"AD",Italy:"IT",Philippines:"PH",Uganda:"UG",Iran:"IR",Czechia:"CZ","United Kingdom":"GB",Denmark:"DK",Greenland:"GL",Kenya:"KE",Austria:"AT",Belgium:"BE",Switzerland:"CH",Germany:"DE",Liechtenstein:"LI",Luxembourg:"LU",Niger:"NE",Maldives:"MV",Senegal:"SN",Bhutan:"BT",Togo:"TG",Cyprus:"CY",Greece:"GR","Antigua & Barbuda":"AG",Anguilla:"AI",Albania:"AL",Argentina:"AR","American Samoa":"AS",Australia:"AU",Barbados:"BB",Burundi:"BI",Bermuda:"BM",Brunei:"BN",Brazil:"BR",Bahamas:"BS",Botswana:"BW",Belize:"BZ",Canada:"CA","Cocos (Keeling) Islands":"CC","Cook Islands":"CK",Colombia:"CO","Cape Verde":"CV","Christmas Island":"CX","Diego Garcia":"DG",Dominica:"DM",Estonia:"EE",Finland:"FI",Fiji:"FJ","Falkland Islands":"FK",Micronesia:"FM",Grenada:"GD",Guernsey:"GG",Gibraltar:"GI",Gambia:"GM",Guam:"GU",Guyana:"GY","Hong Kong":"HK",Hungary:"HU",Indonesia:"ID",Ireland:"IE","Isle of Man":"IM","Chagos Archipelago":"IO",Jersey:"JE",Jamaica:"JM",Kiribati:"KI","St. Kitts & Nevis":"KN","South Korea":"KR","Cayman Islands":"KY","St. Lucia":"LC",Liberia:"LR",Lesotho:"LS",Lithuania:"LT",Latvia:"LV",Madagascar:"MG","Marshall Islands":"MH","Myanmar (Burma)":"MM",Macao:"MO","Northern Mariana Islands":"MP",Montserrat:"MS",Malta:"MT",Mauritius:"MU",Malawi:"MW",Mexico:"MX",Malaysia:"MY","Norfolk Island":"NF",Nigeria:"NG",Netherlands:"NL",Norway:"NO",Nauru:"NR",Niue:"NU","New Zealand":"NZ","Papua New Guinea":"PG",Pakistan:"PK",Poland:"PL","Pitcairn Islands":"PN","Puerto Rico":"PR",Portugal:"PT",Palau:"PW",Rwanda:"RW","Solomon Islands":"SB",Seychelles:"SC",Sweden:"SE",Singapore:"SG","St. Helena":"SH",Slovenia:"SI",Slovakia:"SK","Sierra Leone":"SL","Sint Maarten":"SX",Eswatini:"SZ","Turks & Caicos Islands":"TC",Thailand:"TH",Tokelau:"TK",Tonga:"TO",Türkiye:"TR","Trinidad & Tobago":"TT",Tuvalu:"TV",Taiwan:"TW",Ukraine:"UA","U.S. Outlying Islands":"UM","St. Vincent & Grenadines":"VC","British Virgin Islands":"VG","U.S. Virgin Islands":"VI",Vanuatu:"VU",Samoa:"WS",Zimbabwe:"ZW",Bolivia:"BO","Caribbean Netherlands":"BQ","Costa Rica":"CR",Cuba:"CU",Curaçao:"CW","Dominican Republic":"DO","Ceuta & Melilla":"EA",Ecuador:"EC","Equatorial Guinea":"GQ",Guatemala:"GT",Honduras:"HN",Haiti:"HT","Canary Islands":"IC",Nicaragua:"NI",Panama:"PA",Peru:"PE",Paraguay:"PY","El Salvador":"SV",Uruguay:"UY",Venezuela:"VE",Afghanistan:"AF","Burkina Faso":"BF",Guinea:"GN","Guinea-Bissau":"GW","Faroe Islands":"FO",Benin:"BJ","St. Barthélemy":"BL","Congo - Kinshasa":"CD","Central African Republic":"CF","Congo - Brazzaville":"CG","Côte d'Ivoire":"CI",Gabon:"GA","French Guiana":"GF",Guadeloupe:"GP",Monaco:"MC","St. Martin":"MF",Martinique:"MQ","New Caledonia":"NC","French Polynesia":"PF","St. Pierre & Miquelon":"PM",Réunion:"RE","Wallis & Futuna":"WF",Mayotte:"YT",Croatia:"HR",Armenia:"AM",Iceland:"IS","San Marino":"SM","Vatican City":"VA",Georgia:"GE",Kazakhstan:"KZ",Cambodia:"KH","North Korea":"KP",Kyrgyzstan:"KG",Angola:"AO",Laos:"LA",Mozambique:"MZ","North Macedonia":"MK",Mongolia:"MN","Svalbard & Jan Mayen":"SJ",Nepal:"NP",Aruba:"AW",Suriname:"SR","São Tomé & Príncipe":"ST","Timor-Leste":"TL",Moldova:"MD",Romania:"RO","Sri Lanka":"LK",Kosovo:"XK",Montenegro:"ME",Serbia:"RS","Åland Islands":"AX",Tajikistan:"TJ",Turkmenistan:"TM",Uzbekistan:"UZ",Vietnam:"VN"},j2=["blowing-dust","blowing-sand","blowing-snow","clear","clear-occasional-rain-or-thunderstorms","clear-then-cloudy","clear-then-occasional-rain","clear-then-occasional-snow","clear-then-rain","clear-then-rain-or-snow","clear-then-rain-or-thunderstorms","clear-then-snow","clear-then-snow-or-rain","clear-then-thunderstorms","clear-with-isolated-snow","clear-with-isolated-thunderstorms","clear-with-occasional-clouds","clear-with-occasional-rain","clear-with-occasional-rain-or-snow","clear-with-occasional-snow","clear-with-occasional-snow-or-rain","cloudy","cloudy-and-occasionally-clear","cloudy-occasional-rain-or-thunderstorms","cloudy-then-clear","cloudy-then-occasional-rain","cloudy-then-occasional-snow","cloudy-then-occasionally-clear","cloudy-then-rain","cloudy-then-rain-or-snow","cloudy-then-rain-or-thunderstorms","cloudy-then-snow","cloudy-then-snow-or-rain","cloudy-with-isolated-rain","cloudy-with-occasional-rain","cloudy-with-occasional-rain-or-snow","cloudy-with-occasional-snow","cloudy-with-occasional-snow-or-rain","cloudy-with-thundersnow-at-times","drifting-sand","drifting-snow","drizzle","duststorm","fair","fog","freezing-drizzle","freezing-fog","freezing-rain","hail","haze","heavy-drizzle","heavy-rain","heavy-snow","heavy-thunderstorms","ice-pellets","light-drizzle","light-fog","light-freezing-drizzle","light-freezing-rain","light-hail","light-rain","light-rain-and-snow","light-rain-and-snow-shower","light-rain-shower","light-snow","light-snow-shower","mostly-clear","mostly-cloudy","mostly-sunny","partly-cloudy","partly-sunny","patchy-fog","rain","rain-and-occasionally-clear","rain-and-occasionally-cloudy","rain-and-snow","rain-and-snow-shower","rain-or-snow","rain-or-snow-then-clear","rain-or-snow-then-cloudy","rain-showers","rain-then-clear","rain-then-cloudy","rain-then-occasional-snow","rain-turning-to-snow","rain-with-occasional-snow","severe-duststorm","sleet","smoke","snow","snow-and-occasionally-clear","snow-and-occasionally-cloudy","snow-or-rain","snow-or-rain-then-clear","snow-or-rain-then-cloudy","snow-showers","snow-then-clear","snow-then-cloudy","snow-then-rain","squalls","sunny","thundersnow","thunderstorms","unknown","windy-rainstorm","windy-with-heavy-snow"],qH=["adult","teen"],KH=["twenty-four-hours","one-day","five-days","one-week","one-month","one-year","five-years","max"],WH=["pro","m365-basic","m365-personal-classic","m365-family-classic","m365-personal","m365-family-admin","m365-family-guest","m365-premium-admin","m365-premium-guest"],YH=["direct","apple","google","retail"],QH=["guest","free","m365-personal","pro","m365-premium"],JH=["python"],XH=5,ZH=10240,lAe=100,ez=15e3,ai=8,qt={mediaViewer:"z-10",composer:"z-10",composerBottomSlot:"z-20",composerCoachmark:"z-30",chatScrollToBottomButton:"z-10",babylonCharacter:"z-10",citations:"z-20",settings:"z-30",modalBackground:"z-30",modal:"z-40",sidebar:"z-40",toastNotification:"z-50",dropdownMenuOverModal:"z-50",pages:{warning:"z-10",chat:"z-20"},shopping:{navigation:"z-10",overlay:"z-30"},headerIcon:"z-30",default:"z-0"},_o={default:.15,slow:.5,composerButton:.2,settings:.1,audio:{available:.5,unavailable:2,deepLinkLanding:.5},suggestions:.2,dailyBriefing:{background:.5,sourcePopoverScale:.2,sourcePopoverOpacity:.15}},uAe=.25,dAe=2,hAe=0,tz=1.5,nz=2e3,rz=.25,rt={opacity:0},Ot={opacity:1},oz=.2,iz=.025,fAe={initial:rt,animate:{...Ot,transition:{delayChildren:oz,staggerChildren:iz}}},pAe={initial:rt,animate:Ot},gT={willChange:"auto"},cg="9188040d-6c67-4c5b-b112-36a304b66dad",Xb="copilot.cloud.microsoft",mAe=G("mt-px text-end uppercase text-foreground-450 text-2xs dark:text-foreground-600"),gAe="flex items-center justify-between text-start",sz=["Austria","Belgium","Brazil","Bulgaria","Canada","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Netherlands","Norway","China mainland","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland","Türkiye","United Kingdom"],Jv=sz.map(t=>Gf[t]),az=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],cz=az.map(t=>Gf[t]),lz=["Belarus","China mainland","Lebanon","Macao","Russia","Venezuela","North Korea","Cuba","Syria","Iran"],uz=lz.map(t=>Gf[t]),dz="https://account.live.com/ep",hz="Think Deeper",vAe=1500,lg=24*60*60*1e3,fz=5,U2=451,pz="Not allowed child account",vT="LEGALLY_UNAVAILABLE_STATUS",SE=3,Zb=[80,100,110,125,150],Xv=100,mz=1e3,F2=!1,gz=!1;async function vz(t){return new Promise(e=>{let n=!1;t.catch(r=>{r instanceof Error?(n=!0,e(`Type: ${r.name}, Message: ${r.message}, Stack: ${r.stack}`)):(n=!0,e(`Type: ${typeof r}, Value: ${JSON.stringify(r)}`))}),setTimeout(()=>{n||e("Promise.catch wasn't called. The Promise is not rejected.")},1e3)})}class yz{constructor(){Z(this,"latestClientExperimentationAssignmentRequestId",null);Z(this,"latestApiExperimentationAssignmentRequestId",null)}getTraceIdAnalytics(){return{TraceId_LastClientAssignment:this.latestClientExperimentationAssignmentRequestId,TraceId_Latest:this.latestApiExperimentationAssignmentRequestId}}trackClientExperimentationAssignment(e){const n=this.getTraceIdFromResponseHeaders(e);n&&(this.latestClientExperimentationAssignmentRequestId=n)}trackLatestApiAssignment(e){const n=this.getTraceIdFromResponseHeaders(e.headers);n&&(this.latestApiExperimentationAssignmentRequestId=n)}trackLatestChatConnectedAssignment(e){const{requestId:n}=e;this.latestApiExperimentationAssignmentRequestId=n}getTraceIdFromResponseHeaders(e){return(e.get("x-ceto-ref")??"").split("|")[0]??null}}const Zv=new yz;function yT(){return"b2d7d74"}function bz(){return`mscmc@${yT().substring(0,7)}`}function nr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ni(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function bT(t,e){const n=nr(t);return isNaN(e)?Ni(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function B2(t,e){const n=nr(t);if(isNaN(e))return Ni(t,NaN);if(!e)return n;const r=n.getDate(),o=Ni(t,n.getTime());o.setMonth(n.getMonth()+e+1,0);const i=o.getDate();return r>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}const H2=6048e5,Cz=864e5,yAe=6e4,Sz=36e5,bAe=43200,CAe=1440,SAe=60;let Ez={};function ey(){return Ez}function Mu(t,e){var a,c,u,d;const n=ey(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,o=nr(t),i=o.getDay(),s=(i<r?7:0)+i-r;return o.setDate(o.getDate()-s),o.setHours(0,0,0,0),o}function ug(t){return Mu(t,{weekStartsOn:1})}function z2(t){const e=nr(t),n=e.getFullYear(),r=Ni(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=ug(r),i=Ni(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const s=ug(i);return e.getTime()>=o.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function dg(t){const e=nr(t);return e.setHours(0,0,0,0),e}function Dk(t){const e=nr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function xm(t,e){const n=dg(t),r=dg(e),o=+n-Dk(n),i=+r-Dk(r);return Math.round((o-i)/Cz)}function wz(t){const e=z2(t),n=Ni(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ug(n)}function Tz(t,e){return B2(t,e*12)}function CT(t,e){const n=dg(t),r=dg(e);return+n==+r}function Iz(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function V2(t){if(!Iz(t)&&typeof t!="number")return!1;const e=nr(t);return!isNaN(Number(e))}function _z(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Az(t,e){return+nr(t)-+nr(e)}function kz(t,e,n){const r=Az(t,e)/Sz;return _z(n==null?void 0:n.roundingMethod)(r)}function xz(t){const e=nr(t),n=Ni(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Rz={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pz=(t,e,n)=>{let r;const o=Rz[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function eC(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Nz={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Oz={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mz={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lz={date:eC({formats:Nz,defaultWidth:"full"}),time:eC({formats:Oz,defaultWidth:"full"}),dateTime:eC({formats:Mz,defaultWidth:"full"})},Dz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jz=(t,e,n,r)=>Dz[t];function Yd(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):s;o=t.formattingValues[a]||t.formattingValues[s]}else{const s=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[s]}const i=t.argumentCallback?t.argumentCallback(e):e;return o[i]}}const Uz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fz={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bz={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hz={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$z=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Gz={ordinalNumber:$z,era:Yd({values:Uz,defaultWidth:"wide"}),quarter:Yd({values:Fz,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yd({values:Bz,defaultWidth:"wide"}),day:Yd({values:Hz,defaultWidth:"wide"}),dayPeriod:Yd({values:zz,defaultWidth:"wide",formattingValues:Vz,defaultFormattingWidth:"wide"})};function Qd(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(o);if(!i)return null;const s=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?Kz(a,f=>f.test(s)):qz(a,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function qz(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Kz(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Wz(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],i=e.match(t.parsePattern);if(!i)return null;let s=t.valueCallback?t.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const a=e.slice(o.length);return{value:s,rest:a}}}const Yz=/^(\d+)(th|st|nd|rd)?/i,Qz=/\d+/i,Jz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xz={any:[/^b/i,/^(a|c)/i]},Zz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eV={any:[/1/i,/2/i,/3/i,/4/i]},tV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},oV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aV={ordinalNumber:Wz({matchPattern:Yz,parsePattern:Qz,valueCallback:t=>parseInt(t,10)}),era:Qd({matchPatterns:Jz,defaultMatchWidth:"wide",parsePatterns:Xz,defaultParseWidth:"any"}),quarter:Qd({matchPatterns:Zz,defaultMatchWidth:"wide",parsePatterns:eV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qd({matchPatterns:tV,defaultMatchWidth:"wide",parsePatterns:nV,defaultParseWidth:"any"}),day:Qd({matchPatterns:rV,defaultMatchWidth:"wide",parsePatterns:oV,defaultParseWidth:"any"}),dayPeriod:Qd({matchPatterns:iV,defaultMatchWidth:"any",parsePatterns:sV,defaultParseWidth:"any"})},cV={code:"en-US",formatDistance:Pz,formatLong:Lz,formatRelative:jz,localize:Gz,match:aV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lV(t){const e=nr(t);return xm(e,xz(e))+1}function uV(t){const e=nr(t),n=+ug(e)-+wz(e);return Math.round(n/H2)+1}function $2(t,e){var d,f,p,g;const n=nr(t),r=n.getFullYear(),o=ey(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??o.firstWeekContainsDate??((g=(p=o.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,s=Ni(t,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const a=Mu(s,e),c=Ni(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=Mu(c,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function dV(t,e){var a,c,u,d;const n=ey(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=$2(t,e),i=Ni(t,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),Mu(i,e)}function hV(t,e){const n=nr(t),r=+Mu(n,e)-+dV(n,e);return Math.round(r/H2)+1}function zt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Rs={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return zt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):zt(n+1,2)},d(t,e){return zt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return zt(t.getHours()%12||12,e.length)},H(t,e){return zt(t.getHours(),e.length)},m(t,e){return zt(t.getMinutes(),e.length)},s(t,e){return zt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return zt(o,e.length)}},yl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jk={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Rs.y(t,e)},Y:function(t,e,n,r){const o=$2(t,r),i=o>0?o:1-o;if(e==="YY"){const s=i%100;return zt(s,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):zt(i,e.length)},R:function(t,e){const n=z2(t);return zt(n,e.length)},u:function(t,e){const n=t.getFullYear();return zt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return zt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return zt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Rs.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return zt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=hV(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):zt(o,e.length)},I:function(t,e,n){const r=uV(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):zt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Rs.d(t,e)},D:function(t,e,n){const r=lV(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):zt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return zt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return zt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return zt(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=yl.noon:r===0?o=yl.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=yl.evening:r>=12?o=yl.afternoon:r>=4?o=yl.morning:o=yl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Rs.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Rs.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Rs.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Rs.s(t,e)},S:function(t,e){return Rs.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Fk(r);case"XXXX":case"XX":return La(r);case"XXXXX":case"XXX":default:return La(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Fk(r);case"xxxx":case"xx":return La(r);case"xxxxx":case"xxx":default:return La(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Uk(r,":");case"OOOO":default:return"GMT"+La(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Uk(r,":");case"zzzz":default:return"GMT"+La(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return zt(r,e.length)},T:function(t,e,n){const r=t.getTime();return zt(r,e.length)}};function Uk(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+e+zt(i,2)}function Fk(t,e){return t%60===0?(t>0?"-":"+")+zt(Math.abs(t)/60,2):La(t,e)}function La(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=zt(Math.trunc(r/60),2),i=zt(r%60,2);return n+o+e+i}const Bk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},G2=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},fV=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return Bk(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Bk(r,e)).replace("{{time}}",G2(o,e))},pV={p:G2,P:fV},mV=/^D+$/,gV=/^Y+$/,vV=["D","DD","YY","YYYY"];function yV(t){return mV.test(t)}function bV(t){return gV.test(t)}function CV(t,e,n){const r=SV(t,e,n);if(console.warn(r),vV.includes(t))throw new RangeError(r)}function SV(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const EV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,TV=/^'([^]*?)'?$/,IV=/''/g,_V=/[a-zA-Z]/;function du(t,e,n){var d,f,p,g,v,y,b,C;const r=ey(),o=(n==null?void 0:n.locale)??r.locale??cV,i=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((y=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((C=(b=r.locale)==null?void 0:b.options)==null?void 0:C.weekStartsOn)??0,a=nr(t);if(!V2(a))throw new RangeError("Invalid time value");let c=e.match(wV).map(S=>{const w=S[0];if(w==="p"||w==="P"){const E=pV[w];return E(S,o.formatLong)}return S}).join("").match(EV).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const w=S[0];if(w==="'")return{isToken:!1,value:AV(S)};if(jk[w])return{isToken:!0,value:S};if(w.match(_V))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:S}});o.localize.preprocessor&&(c=o.localize.preprocessor(a,c));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:o};return c.map(S=>{if(!S.isToken)return S.value;const w=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&bV(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&yV(w))&&CV(w,e,String(t));const E=jk[w[0]];return E(a,w,o.localize,u)}).join("")}function AV(t){const e=t.match(TV);return e?e[1].replace(IV,"'"):t}function EE(t,e){const n=nr(t),r=nr(e);return n.getTime()>r.getTime()}function hg(t,e){return bT(t,-e)}function kV(t,e){return Tz(t,-13)}function xV(t){return document.cookie.split(";").find(e=>e.trim().startsWith(`${t}=`))}function uf(t){const e=xV(t),n=e==null?void 0:e.split("=")[1];if(n)return decodeURIComponent(n)}function Hk(t,e,n={}){const{expireDays:r,path:o="/",domain:i,secure:s=!0,host:a}=n;let c=t;s&&!i&&o==="/"&&a&&(c=`__Host-${t}`);let u=`${c}=${encodeURIComponent(e)}; path=${o}`;if(r){const d=bT(new Date,r);u+=`; expires=${d.toUTCString()}`}i&&(u+=`; domain=${i}`),s&&(u+="; secure"),document.cookie=u}const Ll={name:"CMCCP",expirationDays:365},ty={name:"BCP"},RV="3PAdsOptOut";function q2(){return uf(Ll.name)??uf(ty.name)}function zk(t,e){const{analytics:n,advertising:r,socialMedia:o}=t,i=new URLSearchParams;i.set("AD",r?"1":"0"),i.set("AL",n?"1":"0"),i.set("SM",o?"1":"0");const s=bT(new Date,e);return i.set("expires",s.getTime().toString()),i.toString()}function PV(t){Hk(Ll.name,zk(t,Ll.expirationDays),{expireDays:Ll.expirationDays}),Hk(ty.name,zk(t,Ll.expirationDays),{expireDays:Ll.expirationDays})}function qf(){const t=uf(ty.name);if(!t)return{advertising:!1,analytics:!1,socialMedia:!1};const e=new URLSearchParams(t),n=e.get("AD")==="1",r=e.get("AL")==="1",o=e.get("SM")==="1";return{advertising:n,analytics:r,socialMedia:o}}function K2(){const t=uf(RV)!=="1";return navigator.globalPrivacyControl?!1:t}const qa=class qa{constructor(){Z(this,"listeners",new Map)}static getInstance(){return qa.instance||(qa.instance=new qa),qa.instance}on(e,n){var r;this.listeners.has(e)||this.listeners.set(e,[]),(r=this.listeners.get(e))==null||r.push(n)}emit(e,n){const r=this.listeners.get(e);if(r)for(const o of r)o(n)}off(e,n){const r=this.listeners.get(e);r&&this.listeners.set(e,r.filter(o=>o!==n))}};Z(qa,"instance",null);let wE=qa;const Kt=wE.getInstance();function NV(t){let e="unknown";try{const n=/(?:CopilotNative|BingNative|MicrosoftLauncher)\/([0-9]+(?:\.[0-9]+)*(?:-[a-zA-Z0-9]+)?)/,r=t==null?void 0:t.match(n);if(r!=null&&r[1]){const[,o]=r;e=o}return e}catch{return e}}function sa(t,e){sessionStorage.setItem(t,e)}function Wo(t){return sessionStorage.getItem(t)}function OV(t){return Wo(t)==="true"}function W2(t){sessionStorage.removeItem(t)}function gn(t){return new URLSearchParams(window.location.search).get(t)}function Zr(t){const e=new URL(window.location.href);e.searchParams.delete(t),window.history.replaceState(null,"",e)}function MV(){const t=gn("ocid")??gn("OCID"),e=gn("msclkid"),n=gn("gclid"),r={};return t&&(r.OCID=t),e&&(r.msclkid=e),n&&(r.gclid=n),r}function Y2(){Zr("ocid"),Zr("OCID"),Zr("msclkid"),Zr("gclid")}function LV(){const t=gn("form");if(t)return Zr("form"),t;const e=gn("FORM");return e&&Zr("FORM"),e}function DV(){return gn("alias")}function jV(){const t=gn("chat-mode");return t&&Zr("chat-mode"),t}function UV(){const t=gn("q");return t&&Zr("q"),t}function FV(){const t=gn("prompt");return t&&Zr("prompt"),t}function BV(){const t=gn("sandbox");return t&&Zr("sandbox"),t==="1"}function HV(){if(typeof window>"u")return!1;const t=gn("disable-all-features");return t!==null&&t!=="0"&&t!=="false"}function EAe(){return gn("payflow-correlationId")}function zV(t){return t==="VoiceLimit"||t==="Settings"||t==="ChatReasoningLimit"}function wAe(){const t=gn("entry-point")??"";return zV(t)?t:"Unknown"}function TAe(){const t=gn("campaign");return t?(sa("campaignId",t),t):null}function IAe(){const t=gn("referral-code");return t?(sa("referralCode",t),t):null}function VV(){return gn("charid")}function _Ae(){const t=gn("pff");return t&&Zr("pff"),t}function AAe(){const t=gn("pfah");return t&&Zr("pfah"),t}function kAe(){const t=gn("pfcid");return t&&Zr("pfcid"),t}function $V(){return gn("intent")}function xAe(){return[]}function Kf(t){const e=typeof navigator<"u"?navigator.userAgent:null;return e?t.test(e):!1}function Q2(){return Kf(/BingSapphire/gi)}function GV(){return Kf(/NewsSapphire/gi)}function J2(){return!!(navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Macintosh/i.test(navigator.userAgent)&&"ontouchend"in document)}function X2(){return J2()||Kf(/iPad|iPhone|Android|iPod/gi)}function qV(){return Kf(/Android/gi)}function KV(){return J2()||Kf(/iPhone|iPad|iPod/gi)}const WV={"thumbs-up":"thumbsUp","thumbs-down":"thumbsDown",report:"reportMessage"},Vk="homepage";class YV{constructor(e={}){Z(this,"analytics",null);Z(this,"features");Z(this,"picassoId",null);Z(this,"anid",null);Z(this,"formCode",null);Z(this,"landingPage",Vk);Z(this,"trafficAlias",null);Z(this,"settings",null);Z(this,"isAADUser",null);Z(this,"isNewUser",null);Z(this,"accountType",null);Z(this,"referrer",null);Z(this,"deviceInfo",null);Z(this,"isInitializing",!1);Z(this,"pendingEvents",[]);Z(this,"initRetryCount",0);Z(this,"maxRetries");Z(this,"maxPendingEvents");Z(this,"delay");Z(this,"onInitializeError");this.maxRetries=e.maxRetries??3,this.maxPendingEvents=e.maxPendingEvents??1e3,this.delay=e.delay??0,this.onInitializeError=e.onInitializeError}ensureInitialized(){!this.isInitialized&&!this.isInitializing&&(this.isInitializing=!0,this.initialize())}get isInitialized(){return this.analytics!==null&&this.analytics.isInitialized()}get currentEnv(){return"prod"}get initializationFailed(){return this.initRetryCount>=this.maxRetries}setFeatures(e){this.features=e.join(",")}setAnid(e){this.anid=e}setIsNewUser(e){this.isNewUser===null&&(this.isNewUser=e)}setIsAad(e){this.isAADUser=e}setSettings(e){this.settings={...this.settings,...e}}getPicassoId(){return this.picassoId}setPicassoId(e){this.picassoId=e}setFormCode(e){this.formCode=e}getFormCode(){return this.formCode}setDeviceInfo(e){this.deviceInfo=e}setLandingPage(e){this.landingPage===Vk&&(this.landingPage=e)}getLandingPage(){return this.landingPage}isValidLowercaseUserAccountType(e){return["msa","aad","apple","google"].includes(e)}setUserAccountType(e){if(!e){this.accountType=null;return}const n=e.toLowerCase();this.isValidLowercaseUserAccountType(n)?this.accountType=n:this.accountType=null}processFormCode(){const e=LV();this.formCode=e}processAlias(){const e=DV();e&&(this.trafficAlias=e)}processReferrer(){this.referrer===null&&typeof document<"u"&&(this.referrer=document.referrer)}initialize(){this.isInitialized||(this.processFormCode(),this.processAlias(),this.processReferrer(),this.dynamicInitialization().catch(()=>{}))}async dynamicInitialization(){var n,r;this.delay>0&&await new Promise(o=>{setTimeout(o,this.delay)});const e=await q(()=>import("./Index-DCV8xu7u.js"),__vite__mapDeps([0,1])).catch(o=>o instanceof Error?o:new Error(`Failed to load @microsoft/1ds-analytics-js: ${o}`));if(e instanceof Error)(n=this.onInitializeError)==null||n.call(this,e),this.initRetryCount+=1,this.initRetryCount>=this.maxRetries&&((r=this.onInitializeError)==null||r.call(this,new Error("ApplicationInsights initialization: Max retries reached")),this.pendingEvents.length=0);else{const{ApplicationInsights:o}=e;this.analytics=new o;const i={instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0};this.analytics.initialize(i,[]),this.flushPendingEvents()}this.isInitializing=!1}flushPendingEvents(){for(let e=0,n=this.pendingEvents.length;e<n;e+=1){const r=this.pendingEvents[e];r&&this.trackEventInternal(r)}this.pendingEvents.length=0}getPlatformSurface(e){if(e==="pageseditor"){if(qV())return"android";if(KV())return"ios"}return e}getFixEventProperties(){const e=this.getPlatformSurface("cmc");return{appName:`CopilotN-${this.currentEnv}-web-${e}`,appVersion:yT(),surface:e,surfaceVersion:NV(navigator.userAgent),accountType:this.accountType,userMuid:uf("MUID"),userAnid:this.anid,userPicassoId:this.picassoId,userFlightIds:this.features,trafficAlias:this.trafficAlias,eventInfo_entryPoint:this.formCode,eventInfo_surfaceVisible:document.visibilityState==="visible",isAADUser:this.isAADUser,isNewUser:this.isNewUser,pathname:window.location.pathname,referrer:this.referrer,"UserInfo.Id":this.picassoId,...Zv.getTraceIdAnalytics(),...this.settings,...this.deviceInfo}}trackEvent(e){if(!this.initializationFailed){if(this.pendingEvents.length>=this.maxPendingEvents){console.warn(`Analytics pending events queue is full (${this.maxPendingEvents}). Dropping event: ${JSON.stringify(e)}`);return}if(this.ensureInitialized(),this.isInitializing||!this.isInitialized){this.pendingEvents.push(e);return}this.trackEventInternal(e)}}trackEventInternal(e){const n=this.getFixEventProperties(),r=qf(),o=K2();if(!this.analytics){console.error("Failed to initialize AnalyticsService.");return}const i={name:e.name,data:{...n,...e.data},ext:{web:{consentDetails:JSON.stringify({Required:!0,Analytics:r.analytics,SocialMedia:r.socialMedia,Advertising:r.advertising,GPC_DataSharingOptIn:o})}}};(e.data.eventName==="copilotCompose"||e.data.eventName==="copilotAudioInput")&&Kt.emit("composer:send-query",{isNewUser:this.isNewUser,event:e.data}),this.analytics.track(i)}}const K=new YV({maxRetries:3,maxPendingEvents:1e3,delay:200,onInitializeError:t=>{console.error("AnalyticsService initialization error:",t)}});function Z2(t,e){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ErrorBoundary",eventInfo_errorName:t.name,eventInfo_errorMessage:t.message,eventInfo_errorStack:t.stack??"",eventInfo_componentStack:e.componentStack??""}}),q(async()=>{const{captureReactException:n}=await import("./vendor-DSjS2lFR.js").then(r=>r.aj);return{captureReactException:n}},[]).then(({captureReactException:n})=>n(t,e))}function df(t,e,n=!1){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"APIResponseParseError",eventInfo_apiUrl:e,eventInfo_errors:JSON.stringify(t.format()),eventInfo_safe:n}})}async function $k(t){const e=await vz(t.promise);K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"UnhandledRejection",eventInfo_reason:`${t.reason}`,eventInfo_customData:e}})}function QV(t,e,n){try{new URL(ea(t)).hostname}catch(r){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"invalidCitationURL",eventInfo_url:t,eventInfo_errorMessage:r instanceof Error?r.message:"",eventInfo_conversationId:e,eventInfo_messageId:n}})}}function eM(t){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"PlaybackApiError",eventInfo_errorMessage:t instanceof Error?t.message:"",eventInfo_details:"An error occurred during media playback tracking api call."}})}function JV(t,e,n=void 0){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"InvalidJsonResponse",eventInfo_apiUrl:n,eventInfo_errorMessage:t.message,eventInfo_errorCode:e.statusText,eventInfo_details:JSON.stringify(Object.fromEntries(e.headers.entries()))}})}const tM=25,nM=25,XV=1e3,ZV=6e3,e$=2500,t$=5,n$=250,r$=25,RAe=3,o$=["mica","aqua","erin"];function rM(t){switch(t){case"mica":case"aqua":case"erin":return t;default:return null}}function i$(t,e){switch(t){case"mica":return e("characterAnimation.characterNameMica");case"aqua":return e("characterAnimation.characterNameAqua");case"erin":return e("characterAnimation.characterNameErin");default:return""}}function s$(t,e){return(n,r)=>{K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CharacterError",eventInfo_details:`animatingMessageId: ${t}, characterId: ${e}, name: ${n.name}, info: ${r.componentStack}`,eventInfo_errorMessage:n.message}}),Z2(n,r)}}$H();const id=V(!1),ST=V(void 0),dr=V("chat"),In=V(new Map),mt=V(void 0),ET=V(null),oM=V(null),Po=V(t=>{const e=t(mt);if(e)return t(In).get(e)}),a$=Vw(Po,t=>(t==null?void 0:t.streamingState)==="streaming",(t,e)=>t===e),PAe=t=>Vw(In,e=>{var n;return((n=e.get(t))==null?void 0:n.streamingState)==="streaming"},(e,n)=>e===n),Oh=V(!1),Yo=V(new Map),NAe=V([]);V([]);const OAe=t=>V(e=>e(Yo).get(t)),Bi=V(t=>{var e;return((e=t(Po))==null?void 0:e.history)??[]}),wT=V(t=>{const e=t(In);for(const n of e.values())if(!n.title&&!n.history.length&&n.isNew)return n.id}),TT=V(new Map),Sh=V(void 0),ny=V([]),iM=V(!1),IT=V(t=>{var e;return rM((e=t(Po))==null?void 0:e.characterId)}),ic=V("idle"),sM=V(!1),Cs=V(null),c$=V("idle"),Mh=V("checking-availability"),l$=V(null),aM=V([]),bc=V(null),_T=V(null),AT=V([]),u$=V(t=>t(bc)===0),kT=V(null),cM=V(null),d$=V(null),Lh=V(!1),lM=V(!1),uM=V(ZH),hf=V(void 0),h$=V(!0),dM=V(null),f$=V(t=>!!t(dM));V(null);const sd=V(!1);V(null);const xT=V(void 0),p$=V(void 0),m$=V(t=>{const e=t(Po);return e==null?void 0:e.suggestedFollowup}),MAe=V(void 0),hM=V(null),LAe=V(!1),g$=V(!1),RT=V(void 0),DAe=V(!1),jAe=V(void 0),fM=V(null),PT=V(!1),ad=V(void 0),UAe=mT({}),ry=V(void 0),jr=V("chat-only"),FAe=V(null),BAe=V(null),HAe=V(null),v$=V(null),pM=V({}),NT=V(!1),mM=V(null),es=V(null),gM=V({data:void 0,isLoading:!1}),y$=V(t=>t(gM).data),b$=V(t=>t(gM).isLoading),Rm=V(!1),C$=["m365-personal","m365-family-admin"],vM=["m365-family-guest","m365-premium-guest","m365-premium-admin"],S$=["m365-personal","m365-family-admin"],Gk=["pro","m365-premium-admin","m365-family-admin","m365-personal","m365-personal-classic","m365-premium-guest","m365-family-guest","m365-family-classic","m365-basic"];function E$(t,e=!1){return t.length===0?e?"buypremium":"buym365":t.some(n=>n.tier==="pro")?"buypremium":t.some(n=>vM.includes(n.tier))?null:t.some(n=>S$.includes(n.tier))||e?"upgradepremium":"upgradem365"}function zAe(t){return t.length>0&&!t.some(e=>e.tier==="pro")}function VAe(t){return t.some(e=>C$.includes(e.tier))&&!t.some(e=>vM.includes(e.tier))}function w$(t){return t.slice().sort((e,n)=>Gk.indexOf(e.tier)-Gk.indexOf(n.tier))}function $Ae(t){const e=t.find(n=>n.tier==="pro");return(e==null?void 0:e.isAutoRenew)??!1}const oy="ellie",yM=[oy],qk=l.union([l.enum(yM),l.undefined()]),T$=l.object({model:l.literal("vasa"),eyesOpenRatio:l.array(l.number()).min(1),eyesPose:l.array(l.number()).min(6),jawPose:l.array(l.number()).length(3),neckPose:l.array(l.number()).length(3),rotation:l.array(l.number()).length(3),translation:l.array(l.number()).length(3),viseme:l.array(l.number()).min(10)}),I$=l.object({model:l.literal("spda2e"),poseDiffusion:l.array(l.number())}),Zo=l.object({partId:l.string()}),OT=l.object({event:l.literal("invokeAction"),actionId:l.string()}),_$=l.enum(JH),A$=l.object({type:l.literal("code"),language:_$,content:l.string()}),k$=l.object({type:l.literal("file"),url:l.string().url(),name:l.string(),contentType:l.string()}),x$=l.discriminatedUnion("type",[A$,k$]),bM=l.union([l.literal("running"),l.literal("completed"),l.literal("failed")]),R$=l.object({title:l.string(),status:bM}),TE=l.object({status:bM,title:l.string(),steps:l.array(R$),artifacts:l.array(x$)}),P$=Zo.extend({type:l.literal("activity"),activity:TE,activities:l.array(TE).optional()}),Lr=l.object({amount:l.number(),currency:l.string().nullable(),currencySymbol:l.string().nullable()}),N$=l.enum(["current-search-term","recent-searches","age","gender","website-visits","interests","custom-audience","similar-audience","profile-targeting"]);l.enum(["multimedia","product","tourActivity","propertyPromotion","text","miniShowroom","mainShowroom","showroom","organic"]);const O$=l.enum(["top","bottom","left","right"]),M$=l.object({adDomain:l.string(),advertiser:l.object({name:l.string(),country:l.string()}),isVerified:l.boolean(),selectionReasons:l.array(N$)}),Wc=l.object({url:l.string(),urlPingSuffix:l.string()}),Oi=l.object({url:l.string(),width:l.number().nullish(),height:l.number().nullish(),link:Wc.nullish(),impressionToken:l.string().nullish()}),L$=l.object({downPayment:l.string(),description:l.string()}),D$=l.object({rating:l.number(),link:Wc,impressionToken:l.string()}),Wf=l.object({businessName:l.string(),image:Oi,impressionToken:l.string().nullish()}),CM=l.object({text:l.string(),url:l.string(),urlPingSuffix:l.string()}),j$=l.object({title:l.string(),text:l.string(),url:l.string(),layout:l.enum(["inline","overlay"])}),Yc=l.object({impressionToken:l.string(),selectionCriteria:M$}),iy=l.object({rowIndex:l.number().int(),columnIndex:l.number().int(),textPosition:O$,imagesPerRow:l.number().int()}),SM=Yc.extend({type:l.literal("multimedia"),description:l.string(),title:l.string(),displayUrl:l.string(),link:Wc,image:Oi.nullish(),images:l.array(Oi).nullish(),logo:Wf.nullish(),action:CM.nullish(),layout:iy.nullish()});Yc.extend({type:l.literal("organic"),description:l.string(),title:l.string(),link:l.string(),image:Oi,layout:iy});const sy=l.object({category:l.string(),value:l.string()}),MT=Yc.extend({type:l.literal("product"),offer:l.object({seller:l.string(),link:Wc,price:Lr,lowPrice:Lr.nullish(),item:l.object({name:l.string(),image:Oi})}),tags:l.array(sy).nullish(),shipping:l.object({isFree:l.boolean(),description:l.string()}).nullish(),productRating:D$.nullish(),installment:L$.nullish(),pricePerUnit:l.string().nullish(),energyRating:l.string().nullish(),layout:iy.nullish()}),EM=Yc.extend({type:l.literal("tourActivity"),title:l.string(),domain:l.string(),startingPrice:Lr,image:Oi,link:Wc,tags:l.array(sy).nullish()}),wM=Yc.extend({type:l.literal("propertyPromotion"),title:l.string(),domain:l.string(),price:Lr,image:Oi,link:Wc,tags:l.array(sy).nullish()}),U$=Yc.extend({type:l.literal("text"),title:l.string(),description:l.string(),displayUrl:l.string(),link:Wc,image:Oi.nullish(),logo:Wf.nullish(),disclaimer:j$.nullish()}),F$=Yc.extend({type:l.literal("miniShowroom"),title:l.string(),description:l.string(),displayUrl:l.string(),image:Oi,logo:Wf.nullish()}),B$=l.object({ad:l.union([MT,SM]),adId:l.string().nullish()}),H$=l.object({isLoading:l.boolean().nullish()}),TM=H$.extend({type:l.literal("mainShowroom"),id:l.string(),brandId:l.string(),title:l.string().nullish(),description:l.string().nullish(),backgroundColor:l.number().int().nullish(),images:l.array(Oi).nullish(),logo:Wf.nullish(),slotAds:l.array(B$).nullish(),action:CM.nullish(),layout:iy.nullish()}),z$=l.union([SM,MT,EM,wM,U$,F$,TM]);l.union([MT,EM,wM]);const IM=l.object({pageLoadPingUrl:l.string(),visibilityPingUrlBase:l.string(),clickPingUrlBase:l.string()}),tC=l.object({tagsSupported:l.boolean()});l.object({supportedTypes:l.array(l.enum(["multimedia","product","tourActivity","propertyPromotion","text","showroom","miniShowroom","mainShowroom"])),product:tC.nullish(),propertyPromotion:tC.nullish(),tourActivity:tC.nullish(),optOutOfPersonalization:l.boolean().nullish()});l.object({showroom:l.object({brandId:l.string(),brandName:l.string().nullish(),adId:l.string().nullish()})});const V$=l.object({brandBackground:l.number().int().nullish(),brandLogo:Wf,conversationId:l.string(),theme:l.enum(["light","dark"]).nullish(),viewMode:l.enum(["cardView","extendedView"]),rguid:l.string().nullish(),rlink:l.string().nullish(),messageId:l.string(),triggerAt:l.number(),mainShowroomAdId:l.string().nullish()});V$.extend({brandId:l.string(),adId:l.string().nullish()});l.object({brandId:l.string(),brandName:l.string().nullish(),messageId:l.string(),conversationId:l.string(),visible:l.boolean()});const $$=l.object({requestId:l.string(),ads:l.array(TM),instrumentation:IM}),G$=l.object({selectedTag:sy.nullish(),collapsed:l.boolean().nullish(),showroomData:l.array(l.object({requestUrl:l.string(),response:$$})).nullish()}),q$=G$.extend({type:l.literal("ads"),requestId:l.string(),summary:l.string(),ads:l.array(z$).nullish(),instrumentation:IM}),K$=l.object({type:l.literal("computerUseFeedback")}),cd=l.union([l.literal("startTask"),l.literal("pauseTask"),l.literal("resumeTask"),l.literal("cancelTask"),l.literal("takeTaskControl"),l.literal("releaseTaskControl")]),W$=l.union([l.literal("bringAgentTabsToForeground"),l.literal("failedTask"),l.literal("completedTask"),l.literal("moveAgentTabsToBackground"),l.literal("showConsentDialog")]);l.union([cd,W$]);const Y$=l.union([l.literal("allSessionInfo"),l.literal("activeSessionInfo"),l.literal("failedTask"),l.literal("completedTask")]);l.union([cd,Y$]);const Q$=l.union([l.literal("allSessionInfo"),l.literal("activeSessionInfo"),l.literal("failedTask"),l.literal("completedTask")]);l.union([cd,Q$]);const _M=l.union([l.literal("askUserInput"),l.literal("safetyRiskDetected"),l.literal("userTakeControl"),l.literal("giveBackControl"),l.literal("resumeFromInput"),l.literal("resumeFromRisk"),l.literal("pauseByClick"),l.literal("resumeByClick"),l.literal("taskCompleted")]),J$=l.object({reason:_M,title:l.string().optional(),text:l.string().optional()}),ld=l.object({taskId:l.string()}),X$=ld.extend({type:l.literal("startTask")}),Z$=ld.extend({type:l.literal("pauseTask")}),eG=ld.extend({type:l.literal("resumeTask")}),tG=ld.extend({type:l.literal("cancelTask")}),nG=ld.extend({type:l.literal("takeTaskControl")}),rG=ld.extend({type:l.literal("releaseTaskControl")}),AM=l.object({title:l.string(),instruction:l.object({text:l.string(),websites:l.array(l.object({url:l.string().url(),iconUrl:l.string().url().optional()}))})}),GAe=AM.extend({id:l.string()});AM.extend({isActive:l.boolean()});const oG=l.object({name:l.string(),url:l.string().nullish(),description:l.string().nullish(),phoneNumber:l.string().nullish(),smsNumber:l.string().nullish(),chatUrl:l.string().nullish(),whatsAppUrl:l.string().nullish()}),iG=l.object({type:l.literal("safetyHelpline"),countryEmergencyNumber:l.string().nullable(),helplines:l.array(oG)}),sG=l.object({type:l.literal("file"),url:l.string().url(),name:l.string(),contentType:l.string()}),aG=l.object({name:l.string(),disclaimerUrl:l.string(),url:l.string()}),kM=l.object({price:l.number().nullish(),changeInPercentage:l.number().nullish(),changeInAmount:l.number().nullish()}),xM=l.object({id:l.string(),symbol:l.string(),displayName:l.string(),price:l.number(),previousClosePrice:l.number(),changeInPercentage:l.number(),changeInAmount:l.number(),updatedAt:l.string(),iconUrl:l.string(),provider:aG,isFollowed:l.boolean().nullish()}),cG=l.object({priceOpen:l.number().nullish(),priceHigh:l.number().nullish(),priceLow:l.number().nullish(),price52wHigh:l.number().nullish(),price52wLow:l.number().nullish()}),Yf=xM.extend({intradayPricing:cG,isMarketLastSale:l.boolean(),exchangeTimeZoneId:l.string().nullish(),isMarketRegularHours:l.boolean().optional(),lastUpdatedAt:l.string(),tradingDayEndAt:l.string(),accumulatedVolume:l.number().nullish()}),lG=Yf.extend({securityType:l.literal("stock"),marketCap:l.number().nullish(),marketCapCurrency:l.string().nullish(),averageVolume:l.number().nullish(),peRatio:l.number().nullish(),postMarket:kM.nullish()}),uG=Yf.extend({securityType:l.literal("etf"),netAssets:l.number().nullish(),expenseRatio:l.number().nullish(),yieldPercent:l.number().nullish(),postMarket:kM.nullish()}),dG=Yf.extend({securityType:l.literal("index")}),hG=xM.extend({securityType:l.literal("fund"),price52wHigh:l.number().nullish(),price52wLow:l.number().nullish(),netAssets:l.number().nullish(),expenseRatio:l.number().nullish(),yieldPercent:l.number().nullish(),oneYearReturn:l.number().nullish()}),RM=l.object({amount:l.number().nullish(),currency:l.string().nullish(),currencySymbol:l.string().nullish()}),Kk=l.object({value:RM,fullName:l.string().nullish()}),fG=l.object({oneMonth:l.number().nullish(),sixMonths:l.number().nullish(),oneYear:l.number().nullish()}),pG=Yf.extend({securityType:l.literal("currencyExchange"),fromCurrency:Kk,toCurrency:Kk,percentageReturns:fG}),mG=Yf.extend({securityType:l.literal("cryptocurrency"),marketDominancePercentage:l.number().nullish(),circulatingSupply:l.number().nullish(),maxSupply:l.number().nullish(),oneYearReturn:l.number().nullish(),marketCap:RM,marketCapCurrency:l.string().nullish()}),gG=l.enum(KH),vG=l.object({price:l.number(),volume:l.number(),at:l.string()}),Wk=l.array(vG),yG=l.object({afterHoursSeries:Wk,series:Wk,chartType:gG}),bG=l.discriminatedUnion("securityType",[lG,uG,dG,hG,pG,mG]),CG=l.object({currency:l.string(),instrument:bG,chart:yG.optional()}),SG=CG.extend({type:l.literal("financeChart")}),EG=l.discriminatedUnion("type",[SG]),wG=l.object({id:l.string()}),TG=l.array(wG),qAe=l.object({entities:TG}),IG=l.object({type:l.literal("generativeUI"),markup:l.string(),data:l.record(l.string(),l.any())}),PM=l.object({image:l.object({url:l.string(),thumbnailUrl:l.string(),altText:l.string(),width:l.number(),height:l.number()}),source:l.object({title:l.string(),url:l.string(),iconUrl:l.string().nullable()})}),_G=l.object({type:l.literal("image"),images:l.array(PM)}),AG=l.object({type:l.literal("inlineImage"),title:l.string(),description:l.string()}).merge(PM),kG=l.object({type:l.literal("inlineVideo"),title:l.string(),description:l.string(),video:l.object({url:l.string(),thumbnailUrl:l.string(),title:l.string(),isShort:l.boolean()}),source:l.object({url:l.string(),iconUrl:l.string().optional()})}),xG=l.object({name:l.string(),logoUrl:l.string().nullable(),postUrl:l.string()}),RG=l.object({title:l.string(),companyName:l.string(),companyLogoUrl:l.string().nullable(),postedAt:l.string(),location:l.string(),providers:l.array(xG),description:l.string(),salary:l.string().nullable(),type:l.string().nullable(),locationType:l.string().nullable(),tags:l.array(l.string()).nullable()}),PG=l.object({type:l.literal("job"),jobs:l.array(RG)}),NG=l.object({type:l.literal("localEntity"),entities:l.array(l.object({name:l.string(),phoneNumber:l.string().nullish(),url:l.string().nullish(),reviews:l.array(l.object({count:l.number(),rating:l.number(),providerName:l.string(),providerIconUrl:l.string().nullish(),url:l.string()})),location:l.object({address:l.string().nullish(),latitude:l.number(),longitude:l.number()}),photos:l.array(l.object({url:l.string(),altText:l.string().nullish(),providerName:l.string().nullish(),providerUrl:l.string()})),category:l.string().nullish(),price:l.string().nullish()}))}),OG=l.object({providerName:l.string(),url:l.string().nullish(),thumbnailUrl:l.string(),providerOptions:l.array(l.string()).nullish(),source:l.object({url:l.string(),name:l.string()}).nullish()}),MG=l.object({sourceName:l.string(),maxRating:l.number(),rating:l.number(),url:l.string()}),LG=l.object({url:l.string(),source:l.object({url:l.string(),name:l.string()}).nullish()}),Yk=l.object({url:l.string().nullish(),name:l.string().nullish()}),DG={thumbnail:l.object({url:l.string(),source:Yk.nullish()}),source:Yk.nullish()},jG=l.object({type:l.literal("mediaSpotlight"),title:l.string(),label:l.string().nullish(),description:l.string(),thumbnail:LG,facts:l.record(l.string(),l.string()).nullish(),criticRatings:l.array(MG).nullish(),watchLinks:l.array(OG).nullish(),featuredVideo:l.object(DG).nullish()}),UG=l.union([l.literal("docx"),l.literal("xlsx"),l.literal("pptx"),l.literal("one"),l.literal("pdf"),l.literal("txt")]),FG=l.object({id:l.string(),type:l.literal("oneDrive"),name:l.string(),lastModifiedAt:l.string(),url:l.string(),webDavUrl:l.string().optional(),contentType:UG,size:l.number()}),BG=l.object({type:l.literal("m365"),items:l.array(FG)}),HG=l.object({name:l.string(),url:l.string(),width:l.number().optional(),height:l.number().optional(),thumbnailUrl:l.string().optional()}),zG=l.object({images:l.array(HG)}),VG=zG.extend({type:l.literal("phoneImages")}),$G=l.object({qrCodeUrl:l.string(),linkDeviceUrl:l.string()}),GG=$G.extend({type:l.literal("phoneLinking")}),qG=l.union([l.literal("executing"),l.literal("completed"),l.literal("failed")]),LT=l.object({deviceName:l.string().optional(),state:qG.optional(),disabled:l.boolean().optional(),completedAt:l.string().optional()}),KG=l.enum(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),WG=LT.extend({triggerAt:l.string(),repeatDays:l.array(KG).optional().nullable()}),YG=WG.extend({type:l.literal("phoneAlarm")}),QG=LT.extend({seconds:l.number()}),JG=QG.extend({type:l.literal("phoneTimer")}),XG=LT.extend({actionId:l.string(),text:l.string(),phoneNumber:l.string().nullable().optional(),contactName:l.string().nullable().optional(),deviceName:l.string().optional()}),ZG=XG.extend({type:l.literal("phoneSendMessage")}),eq=OT.extend({actionName:l.literal("phone_send_message"),parameters:l.object({text:l.string(),phoneNumber:l.string().nullable().optional(),contactName:l.string().nullable().optional()})}),tq=l.discriminatedUnion("type",[GG,VG,YG,JG,ZG]),nq=l.object({type:l.literal("quiz"),title:l.string(),quiz:l.array(l.object({type:l.literal("singleSelect"),question:l.string(),options:l.array(l.string()),answer:l.number(),topics:l.array(l.string()).nullable(),explanation:l.string()}))}),rq=l.object({value:l.number(),count:l.number().nullish(),maxRating:l.number().nullish()}),oq=l.object({hours:l.number(),minutes:l.number()}),NM=l.object({name:l.string(),quantity:l.number().nullish(),unit:l.string().nullish()}),iq=l.object({title:l.string(),url:l.string().url(),source:l.string(),imageUrl:l.string().url().nullish(),rating:rq.nullish(),serving:l.number().nullish(),calories:l.number().nullish(),cookingTime:oq.nullish(),instructions:l.array(l.string()).nullish(),ingredients:l.array(NM).nullish()}),sq=l.object({type:l.literal("recipe"),recipes:l.array(iq)});l.object({title:l.string(),url:l.string().url(),ingredients:l.array(NM),instructions:l.array(l.string()).nullish(),imageUrl:l.string().url().nullish(),messageId:l.string().nullish()});const OM=l.object({url:l.string().url(),name:l.string(),imageUrl:l.string().url().optional(),images:l.array(l.string().url()).optional(),price:Lr,seller:l.string()}),MM=l.object({value:l.number(),count:l.number()}).nullish(),aq=OM.extend({type:l.literal("shopping"),id:l.string(),rating:MM}),cq=OM.extend({isNotificationEnabled:l.boolean().nullish(),offerId:l.string(),currentPrice:Lr.nullish(),percentageDrop:l.number(),durationInWeeks:l.number()}),LM=l.object({title:l.string().nullish(),url:l.string().url()}),lq=l.enum(["textual","visual"]),uq=l.object({displayName:l.string(),value:l.string(),isActive:l.boolean(),isSelected:l.boolean(),thumbnailImage:LM.nullish()}),dq=l.object({id:l.string(),displayName:l.string(),filterValues:l.array(uq),filterType:lq}),hq=l.object({id:l.string().nullish(),groupId:l.string().nullish(),brandGroupId:l.string().nullish()}),fq=l.object({displayName:l.string(),values:l.array(l.string())}),DM=l.object({offerUrl:l.string(),domain:l.string()}),pq=l.object({summary:l.string(),attributions:l.array(DM)}),mq=l.object({pros:l.array(l.string()).nullish(),cons:l.array(l.string()).nullish(),attributions:l.array(DM)}),gq=l.discriminatedUnion("type",[l.object({type:l.literal("buyWithMerchant"),checkoutUrl:l.string().nullish(),merchant:l.string().nullish()}),l.object({type:l.literal("buyWithCopilot"),merchantProvider:l.string().nullish(),storeId:l.string().nullish()})]),DT=l.object({product:hq,offerId:l.string(),url:l.string().url(),name:l.string(),description:l.string(),images:l.array(LM),filters:l.array(dq).nullish(),specifications:l.array(fq).nullish(),review:pq.nullish(),prosAndCons:mq.nullish(),price:Lr,discountPrice:Lr.nullish(),seller:l.string(),sellerLogoUrl:l.string().url().nullish(),brandName:l.string().nullish(),rating:MM.nullish(),checkoutOption:gq.nullish(),curation:l.string().nullish()}),vq=l.object({type:l.literal("shoppingProducts"),products:l.array(DT)}),jM=l.union([l.literal("lowest-price"),l.literal("free-shipping")]),yq=l.object({offerName:l.string(),offerId:l.string(),url:l.string().url(),price:Lr,discountPrice:Lr.nullish(),seller:l.string(),sellerLogoUrl:l.string().url().nullish(),tags:l.array(jM).nullish()}),KAe=l.object({error:l.string(),message:l.string()}),bq=l.object({minPrice:Lr,maxPrice:Lr,averagePrice:Lr,timePeriodInDays:l.number()}),UM=l.object({date:l.coerce.date(),price:Lr}),Cq=l.object({daily:UM.array()}),Sq=l.object({label:l.string(),prompt:l.string()}),Eq=l.object({scenario:l.literal("priceHistory"),priceHistory:l.object({dailyPrices:UM.array(),type:l.union([l.literal("increase"),l.literal("decrease")]),percentage:l.number()})}),wq=l.discriminatedUnion("scenario",[Eq]),WAe=DT.extend({otherBuyingOptions:l.array(yq),priceInsight:bq.nullish(),tags:l.array(jM).nullish(),priceHistory:Cq.nullish(),conversationStarters:l.array(Sq).nullish(),nudge:wq.nullish()}),YAe=l.object({products:cq.array()}),Tq=l.object({category:l.string(),curationGroupId:l.string(),position:l.union([l.literal("top"),l.literal("middle"),l.literal("bottom")]).nullish()}),Pm=DT.extend({curationInfo:Tq.nullish()});l.object({product:Pm,messageId:l.string(),allProducts:l.array(Pm).nullish(),accessories:l.array(Pm).nullish()});const Iq=l.object({type:l.literal("shoppingCurated"),title:l.string().optional(),products:l.array(Pm),groupType:l.string().nullish()}),_q=l.discriminatedUnion("type",[aq,vq,Iq]),QAe=l.object({emailNotificationEnabled:l.boolean()}),Aq=l.object({name:l.string(),url:l.string().url(),offerId:l.string()}),kq=l.object({url:l.string().url(),source:l.string()}),xq=l.object({reason:l.string(),references:l.array(kq)}),Rq=l.enum(["buy-now","buy-later"]),JAe=l.object({whenToBuy:Rq,seller:Aq,supportingReasons:l.array(xq)});l.object({isPDP:l.boolean(),name:l.string().nullish(),image:l.string().url().nullish(),base64_image:l.string().nullish(),price_currency:l.string().nullish(),price_value:l.coerce.number().nullish(),"aggregateRating/ratingValue":l.union([l.string(),l.nan()]).nullish(),"aggregateRating/reviewCount":l.union([l.string(),l.nan()]).nullish()});l.object({name:l.string().optional(),rating:l.object({value:l.number(),count:l.number()}).optional(),images:l.array(l.object({url:l.string()})).optional(),price:l.object({amount:l.number(),currency:l.string().nullable(),currencySymbol:l.string().nullable()}).optional()});const Pq=l.enum(["home","away"]),Qc=l.enum(["win","loss","tie","no-game"]),FM=l.enum(["pre-game","in-progress","final","postponed","delayed","abandoned","cancelled"]),Nq=l.enum(["test","odi","t20"]),Oq=l.enum(["test","limited-overs","super-over"]),Mq=l.enum([...FM.options,"drinks","dinner","tea","lunch","innings-break","super-over","toss","stumps","strategic-timeout","forfeited"]),Lq=l.enum([...FM.options,"bye","retired","forfeited","unscheduled","suspended"]),Dq=l.enum(["men-singles","men-doubles","women-singles","women-doubles","mixed-doubles"]),jq=l.enum(["round-of256","round-of128","round-of64","round-of32","round-of16","quarter-final","semi-final","final"]),BM=l.object({name:l.string(),city:l.string().nullish()}),Uq=l.object({name:l.string(),thumbnailUrl:l.string().nullish(),seasonPhase:l.string(),seasonStartsAt:l.string().nullish(),seasonEndsAt:l.string().nullish(),leagueId:l.string()}),Fq=l.object({type:l.literal("league"),league:Uq}),fg=l.object({name:l.string(),thumbnailUrl:l.string().nullish()}),Bq=l.object({type:l.literal("team"),team:fg}),Hq=l.object({type:l.literal("matchup"),matchup:l.object({teamA:fg,teamB:fg})}),Qf=l.discriminatedUnion("type",[Fq,Bq,Hq]),zq=l.object({name:l.string(),alias:l.string().nullish(),thumbnailUrl:l.string().nullish()}),kr=zq.extend({primaryColorHex:l.string().nullish(),venueType:Pq.nullish(),previousGameOutcomes:l.array(Qc).nullish(),seed:l.number().nullish()}),jT=kr.extend({winProbability:l.number().nullish()}),UT=l.object({wins:l.number(),losses:l.number(),overtimeLosses:l.number().nullish()}),Vq=jT.extend({record:UT.nullish()}),$q=l.object({playerName:l.string(),clock:l.object({minutes:l.number(),seconds:l.number()})}),Gq=l.object({ballPossessionPercentage:l.number().nullish(),goals:l.array($q).nullish()}),HM=kr.extend({gameStats:Gq,score:l.string()}),qq=HM.extend({gameOutcome:Qc}),Kq=l.object({wins:l.number(),participantName:l.string()}),Wq=l.enum(["final","not-started","in-progress"]),Yq=l.enum(["national-championship","first-four","first-round","second-round","sweet16","elite-eight","final-four","final"]),Qq=l.object({state:Wq,winsInfo:l.array(Kq).nullish(),gameNumber:l.number().nullish(),conference:l.string().nullish()}),Jq=Qq.extend({phase:Yq}),FT=l.object({name:l.string(),score:l.string()}),Xq=l.object({current:l.number(),total:l.number(),aggregatedScores:l.array(FT).nullish()}),BT=l.object({startsAt:l.string(),status:l.string(),leagueName:l.string(),legInfo:Xq.nullish(),leagueId:l.string().nullish(),gameId:l.string().nullish(),startTimeToBeAnnounced:l.boolean().nullish()}),Jc=BT.extend({week:l.number().nullish()}),Xc=BT.extend({name:l.string().nullish(),seasonPhase:l.string(),bracket:Jq.nullish()}),Zq=Jc.extend({status:l.literal("pre-game"),participants:l.array(jT)}),eK=Xc.extend({status:l.literal("pre-game"),participants:l.array(Vq)}),ay=l.object({minutes:l.number(),seconds:l.number()}),tK=l.enum(["quarter","half","extra","penalties","shoot-out","overtime","inning","period"]),nK=l.enum(["top","bottom"]),Jf=l.object({type:tK,period:l.number(),division:nK.nullish()}),HT=l.object({clock:ay,description:l.string(),team:fg,participantScores:l.array(FT).nullish()}),rK=HT.extend({type:l.enum(["score-change","yellow-card","red-card"])}),oK=HT.extend({type:l.enum(["three-point-made","two-point-made","touchdown","field-goal","extra-point","safety","two-point-conversion","blocked-punt-safety","blocked-field-goal-safety","fumble-safety"])}),iK=Jc.extend({status:l.literal("in-progress"),participants:l.array(HM),clock:ay,currentPlayingPeriod:Jf,timeline:l.object({events:l.array(rK)}).nullish()}),zT=l.object({url:l.string(),thumbnailUrl:l.string(),title:l.string(),durationInSeconds:l.number().nullish()}),sK=Jc.extend({status:l.literal("final"),participants:l.array(qq),videos:l.array(zT).nullish()}),aK=Jc.extend({status:l.literal("postponed"),participants:l.array(kr)}),cK=Jc.extend({status:l.literal("delayed"),participants:l.array(kr)}),lK=Jc.extend({status:l.literal("abandoned"),participants:l.array(kr)}),uK=Jc.extend({status:l.literal("cancelled"),participants:l.array(kr)}),IE=l.discriminatedUnion("status",[Zq,iK,sK,lK,uK,cK,aK]),zM=l.object({playingPeriod:Jf,score:l.string()}),VM=kr.extend({playingPeriodScores:l.array(zM).nullish(),score:l.string(),record:UT}),dK=VM.extend({gameOutcome:Qc}),hK=Xc.extend({status:l.literal("in-progress"),participants:l.array(VM),clock:ay,currentPlayingPeriod:Jf,timeline:l.object({events:l.array(oK)}).nullish()}),fK=Xc.extend({status:l.literal("final"),participants:l.array(dK),videos:l.array(zT).nullish()}),pK=Xc.extend({status:l.literal("postponed"),participants:l.array(kr)}),mK=Xc.extend({status:l.literal("delayed"),participants:l.array(kr)}),gK=Xc.extend({status:l.literal("abandoned"),participants:l.array(kr)}),vK=Xc.extend({status:l.literal("cancelled"),participants:l.array(kr)}),_E=l.discriminatedUnion("status",[eK,hK,fK,gK,vK,mK,pK]),yK=l.object({type:l.literal("sportsSchedule"),sport:l.enum(["basketball","ice-hockey","football"]),games:l.array(_E),header:Qf.nullish(),heroGame:_E.nullish()}),bK=l.object({type:l.literal("sportsSchedule"),sport:l.literal("soccer"),games:l.array(IE),header:Qf.nullish(),heroGame:IE.nullish()}),CK=l.object({type:l.literal("sportsGame"),sport:l.enum(["basketball","ice-hockey","football"]),game:_E}),SK=l.object({type:l.literal("sportsGame"),sport:l.literal("soccer"),game:IE}),Zc=BT.extend({seasonPhase:l.string()}),EK=l.object({hits:l.number(),errors:l.number(),runs:l.number()}),wK=HT.extend({type:l.enum(["conversion"]),playingPeriod:Jf,participantScores:l.array(FT)}),$M=jT.extend({record:UT.nullish()}),GM=$M.extend({playingPeriodScores:l.array(zM).nullish(),score:l.string(),gameStats:EK.nullish()}),TK=GM.extend({gameOutcome:Qc}),IK=Zc.extend({status:l.literal("pre-game"),participants:l.array($M)}),_K=Zc.extend({status:l.literal("in-progress"),participants:l.array(GM),clock:ay,currentPlayingPeriod:Jf,timeline:l.object({events:l.array(wK)}).nullish()}),AK=Zc.extend({status:l.literal("final"),participants:l.array(TK),videos:l.array(zT).nullish()}),kK=Zc.extend({status:l.literal("postponed"),participants:l.array(kr)}),xK=Zc.extend({status:l.literal("delayed"),participants:l.array(kr)}),RK=Zc.extend({status:l.literal("abandoned"),participants:l.array(kr)}),PK=Zc.extend({status:l.literal("cancelled"),participants:l.array(kr)}),AE=l.discriminatedUnion("status",[IK,_K,AK,kK,xK,RK,PK]),NK=l.object({type:l.literal("sportsSchedule"),sport:l.literal("baseball"),games:l.array(AE),header:Qf.nullish(),heroGame:AE.nullish()}),OK=l.object({type:l.literal("sportsGame"),sport:l.literal("baseball"),game:AE}),qM=l.object({ballsFaced:l.number(),runsScored:l.number(),isBatting:l.boolean()}),KM=l.object({oversBowled:l.string(),wicketsTaken:l.number(),runsConceded:l.number(),isBowling:l.boolean()}),MK=qM.extend({type:l.literal("batting")}),LK=KM.extend({type:l.literal("bowling")}),DK=l.object({name:l.string(),stats:l.discriminatedUnion("type",[MK,LK])}),jK=l.object({playerName:l.string(),teamName:l.string(),battingStats:l.array(qM).nullish(),bowlingStats:l.array(KM).nullish()}),UK=l.object({current:l.number(),required:l.number().nullish()}),FK=l.object({name:l.string(),currentMatch:l.number(),totalMatches:l.number(),roundName:l.string().nullish(),equation:l.string().nullish()}),WM=l.object({type:Oq,runs:l.number(),wickets:l.number(),oversPlayed:l.string(),isFollowedOn:l.boolean(),isDeclared:l.boolean()}),VT=l.object({name:l.string(),alias:l.string().nullish(),thumbnailUrl:l.string().nullish()}),BK=VT.extend({previousGameOutcomes:l.array(Qc).nullish()}),HK=VT.extend({inningScores:l.array(WM).nullish(),playersStats:l.array(DK).nullish(),yetToBat:l.boolean()}),zK=VT.extend({gameOutcome:Qc,didNotBat:l.boolean(),inningScores:l.array(WM).nullish()}),VK=l.object({startsAt:l.string(),startTimeToBeAnnounced:l.boolean(),tossInfo:l.string().nullish(),participants:l.array(BK),type:l.literal("pre")}),$K=l.object({gameSummary:l.string(),runRate:UK.nullish(),participants:l.array(HK),type:l.literal("live")}),GK=l.object({startsAt:l.string(),gameSummary:l.string(),playerOfTheMatch:jK.nullish(),participants:l.array(zK),type:l.literal("final")}),qK=l.discriminatedUnion("type",[VK,$K,GK]),kE=l.object({gameId:l.string(),leagueId:l.string(),venue:BM.nullish(),format:Nq,status:Mq,seriesInfo:FK,phase:qK}),KK=l.object({type:l.literal("sportsGame"),sport:l.literal("cricket"),game:kE}),WK=l.object({type:l.literal("sportsSchedule"),sport:l.literal("cricket"),games:l.array(kE),header:Qf.nullish(),heroGame:kE.nullable()}),YK=l.object({name:l.string(),countryFlagThumbnailUrl:l.string().nullish(),seed:l.number().nullish()}),QK=l.object({points:l.number(),isServing:l.boolean(),tieBreakerPoints:l.number().nullish(),currentGamePoints:l.string().nullish(),setWon:l.boolean().nullish()}),YM=l.object({players:l.array(YK)}),JK=YM,QM=YM.extend({setPoints:l.array(QK)}),XK=QM.extend({gameOutcome:Qc}),ZK=l.object({type:l.literal("pre"),participants:l.array(JK)}),eW=l.object({type:l.literal("live"),participants:l.array(QM)}),tW=l.object({type:l.literal("final"),participants:l.array(XK)}),nW=l.discriminatedUnion("type",[ZK,eW,tW]),Qk=l.object({gameId:l.string(),leagueId:l.string(),status:Lq,startsAt:l.string().datetime().nullish(),startTimeToBeAnnounced:l.boolean(),venue:BM.nullish(),matchType:Dq,round:jq.nullish(),phase:nW}),rW=l.object({type:l.literal("sportsSchedule"),sport:l.literal("tennis"),games:l.array(Qk),header:Qf.nullish(),heroGame:Qk.nullish()}),oW=l.union([yK,bK,NK,WK,rW]),iW=l.discriminatedUnion("sport",[SK,CK,OK,KK]),sW=l.union([oW,iW]),aW=l.object({title:l.string(),description:l.string(),startTime:l.number(),endTime:l.number()}),cW=l.object({video:l.object({url:l.string(),thumbnailUrl:l.string(),duration:l.number(),title:l.string(),isShort:l.boolean()}),source:l.object({url:l.string(),iconUrl:l.string().optional()}),bestMomentIndex:l.number().optional(),moments:l.array(aW).optional()}),lW=l.object({type:l.literal("video"),videos:l.array(cW)}),uW=l.enum(["c","f"]),dW=l.enum(["mm","cm","in"]),hW=l.enum(["hPa","inHg","mb","mmHg"]),fW=l.enum(["bft","kph","mph","ms"]),pW=l.enum(["m","km","mi"]),mW=l.object({temperature:uW,height:dW,pressure:hW.optional(),speed:fW.optional(),distance:pW.optional()}),$T=l.enum(j2),gW=l.enum(["rain","snow"]),GT=l.object({type:gW,amount:l.number(),chance:l.number()}),vW=l.object({current:l.number(),high:l.number().optional(),low:l.number().optional()}),yW=l.object({at:l.string(),state:$T,summary:l.string(),description:l.string().optional(),temperature:vW,precipitation:GT.optional()}),JM=l.object({high:l.number(),low:l.number()}),bW=l.object({date:l.string(),state:$T,temperature:JM,precipitation:GT.optional()}),CW=l.object({at:l.string(),state:$T,temperature:JM,precipitation:GT.optional()}),SW=l.object({daily:l.array(bW),hourly:l.array(CW).optional()}),EW=l.object({type:l.literal("weather"),location:l.string(),units:mW,spotlight:yW.optional(),forecast:SW}),ff=l.enum(j2),wW=l.object({type:l.literal("weatherTemperatureHourly"),location:l.string(),unit:l.union([l.literal("f"),l.literal("c")]),spotlight:l.object({date:l.string(),state:ff,summary:l.string(),temperature:l.number().optional(),high:l.number(),low:l.number()}),forecast:l.array(l.object({at:l.string(),state:ff,temperature:l.number(),precipitationChance:l.number()}))}),TW=l.object({type:l.literal("weatherTemperatureDaily"),location:l.string(),unit:l.union([l.literal("f"),l.literal("c")]),forecast:l.array(l.object({date:l.string(),state:ff,high:l.number(),low:l.number(),precipitationChance:l.number()}))}),XM=l.union([l.literal("rain"),l.literal("snow")]),ZM=l.union([l.literal("in"),l.literal("mm")]),IW=l.object({type:l.literal("weatherPrecipitationHourly"),location:l.string(),unit:ZM,precipitationType:XM,spotlight:l.object({date:l.string(),summary:l.string(),amount:l.number(),chance:l.number()}),forecast:l.array(l.object({at:l.string(),state:ff,amount:l.number(),chance:l.number()}))}),_W=l.object({type:l.literal("weatherPrecipitationDaily"),location:l.string(),unit:ZM,precipitationType:XM,forecast:l.array(l.object({date:l.string(),state:ff,amount:l.number(),chance:l.number()}))}),AW=l.union([EW,wW,TW,IW,_W]),eL=l.union([q$,EG,IG,_G,AG,PG,NG,BG,jG,tq,nq,sG,iG,_q,kG,sW,lW,AW,sq,K$]),Ps=l.object({light:l.string(),dark:l.string()}),kW=l.object({foreground1:Ps,foreground2:Ps,accent:Ps,shape:Ps,shapeInverse:Ps,background1:Ps,background2:Ps,background3:Ps}),Jk=l.object({name:l.enum(["ginto-copilot-nord-bold","ginto-copilot-nord-medium-italic","ginto-copilot-480","kari-regular"]),url:l.string().url()}),xW=l.object({name:l.string(),url:l.string().url()}),Lu=l.object({url:l.string().url()}),Du=l.object({urlLight:l.string().url(),urlDark:l.string().url()}),xE=l.object({url:l.string().url()}),ud=l.object({type:l.string(),title:l.string()}),RW=ud.extend({type:l.literal("coverPage"),content:l.string(),template:l.enum(["image-background","fuzzy-image"]),image0:Lu,sticker0:Du.nullish(),sticker1:Du.nullish()}),PW=ud.extend({type:l.literal("heroImage"),content:l.string(),template:l.enum(["noisy-circle","macaron","wavy-shape"]),image0:Lu}),NW=ud.extend({type:l.literal("stickerSheet"),content:l.string(),template:l.enum(["sticker1","sticker2"]),sticker0:Du,sticker1:Du,accent0:xE,accent1:xE}),OW=ud.extend({type:l.literal("simpleText"),content:l.string(),template:l.string().nullish()}),MW=ud.extend({type:l.literal("photoJournal"),content:l.string().nullish(),template:l.enum(["shapes-only","shapes-accents"]),variation:l.enum(["shape-group1","shape-group2"]),label0:l.string(),label1:l.string(),image0:Lu,image1:Lu,sticker0:Du.nullish(),accent0:xE.nullish()}),LW=ud.extend({type:l.literal("endPage"),content:l.string(),template:l.enum(["wide-cards","tall-cards"]),variation:l.enum(["shape-group1","shape-group2"]),questions:l.array(l.string()),image0:Lu,image1:Lu.nullish(),sticker0:Du}),DW=l.object({type:l.literal("shareDefault"),template:l.string().nullish()}),jW=l.discriminatedUnion("type",[RW,PW,NW,OW,MW,LW,DW]),UW=l.object({id:l.string(),modifiedAt:l.string(),theme:kW,font:Jk,fontHandwriting:Jk.nullish(),masks:l.array(xW),sections:l.array(jW)}),FW=l.object({type:l.literal("chatAboutNarrative"),narrativeId:l.string(),messageIndex:l.number()}),BW=l.object({type:l.literal("createPage"),messageId:l.string()}),HW=l.object({type:l.literal("appendToPage"),messageId:l.string(),pageId:l.string()}),zW=l.object({id:l.string(),conversationId:l.string()}),XAe=l.object({title:l.string().nullish(),content:l.string().nullish(),conversationId:l.string()}),VW=Zo.extend({type:l.literal("page"),page:l.object({id:l.string(),conversationId:l.string(),title:l.string().nullish()})}),$W=l.object({id:l.string(),title:l.string().nullish(),updatedAt:l.string(),conversationId:l.string().optional(),type:l.enum(["page","sharedPage"]).optional()}),GW=l.object({results:l.array($W),next:l.string().nullish()}),ZAe=l.object({title:l.string().nullish(),content:l.string().nullish(),page:l.object({id:l.string()}).nullable()}),eke=l.object({id:l.string(),url:l.string()}),qW=l.enum(["page-count-exceeded","page-content-length-exceeded"]),KW=l.object({errorCode:qW}),WW=l.object({prompt:l.string()}),qT=l.literal("executeTask"),YW=l.object({type:qT,taskId:l.string(),context:WW.optional()}),QW=l.string(),JW=l.object({currentConversationId:l.string().nullable(),isNewUser:l.boolean(),banExpiresAt:l.string().nullable(),remainingTurns:l.number().nullable(),features:l.array(QW),allowBeta:l.boolean().nullish()}),XW=l.object({id:l.string(),name:l.string(),previewUrl:l.string(),voicemails:l.array(l.string())}),ZW=l.object({id:l.string(),backgroundImageUrl:l.string()}),eY=l.object({id:l.string(),name:l.string(),location:ZW.nullish()}),ki=l.object({type:l.string(),label:l.string()}),tY=l.array(ki),nY=l.object({positive:l.array(ki),negative:l.array(ki)}),ri=l.union([tY,nY]),Ia=l.object({type:l.string(),label:l.string(),subOptions:l.array(ki).nullish()}),tL=l.object({local:ri,ads:ri,video:ri,image:ri,sports:ri,job:ri,shopping:ri,finance:ri,quiz:ri,weather:ri}),rY=l.object({positive:l.array(ki).nullish(),negative:l.array(ki)});tL.keyof();const nL=l.object({newsArticle:l.array(Ia),newsVideo:l.array(Ia),newsGem:l.array(Ia),chat:l.array(Ia),dailyBriefing:l.array(Ia),podcast:l.array(Ia),default:l.array(Ia)});nL.keyof();const oY=l.object({computerUse:l.array(ki)}),iY=l.object({text:l.array(ki),image:l.array(ki),call:l.array(ki),card:tL,showroom:rY.nullish(),discover:nL.nullish(),task:oY.nullish()}),sY=l.object({signInPrompts:l.array(l.number()),voices:l.array(XW),maxTextMessageLength:l.number(),feedbackOptions:iY,characters:l.array(eY).nullish(),pageLimit:l.number(),maxPageContentLength:l.number(),maxPageTitleLength:l.number()});l.object({hasVisionAccess:l.boolean(),allowedDomains:l.array(l.string()).nullable(),allowedDomainSuffixes:l.array(l.string()).nullable(),blockedDomains:l.array(l.string()).nullable(),blockedDomainSuffixes:l.array(l.string()).nullable()});const Xk=l.object({url:l.string(),duration:l.number()}),aY=l.object({title:l.string(),image:l.string(),url:l.string(),createdAt:l.string()}),cY=l.object({publisherName:l.string(),publisherIcon:l.string(),articles:l.array(aY)}),Zk=l.object({url:l.string(),foregroundColor:l.string(),backgroundColor:l.string()}),e1=l.object({name:l.string(),foregroundColor:l.string(),backgroundColor:l.string(),altText:l.string().nullish(),url:l.string()}),lY=l.object({landscape:e1,portrait:e1}),uY=l.object({id:l.string(),title:l.string(),image:l.object({landscape:Zk,portrait:Zk}),audio:l.record(l.string(),Xk),transitionMusic:Xk.nullable(),sources:l.array(cY)}),rL=l.object({topics:l.array(l.object({id:l.string(),label:l.string(),imageUrl:l.string(),isFollowed:l.boolean()}))}),dY=l.object({position:l.number(),chapterId:l.string()}),oL=l.object({isAvailable:l.boolean(),podcastId:l.string(),chapters:l.array(uY),topics:rL.optional(),playback:dY}),hY=l.object({positionInSeconds:l.number(),chapterId:l.string()}),fY=l.object({id:l.string(),title:l.string(),topic:l.string().nullable().optional(),image:lY,audio:l.object({name:l.string(),duration:l.number()})}),pg=l.object({isAvailable:l.boolean(),podcastId:l.string(),chapters:l.array(fY),playback:hY}),pY=l.enum(QH),mY=l.enum(WH),gY=l.enum(YH),vY=l.object({channel:gY,tier:mY,isAutoRenew:l.boolean()}),iL=l.object({id:l.string(),firstName:l.string().nullable(),anid:l.string().nullable(),isPro:l.boolean(),isDeprecated:l.boolean().nullish(),inEeaPlusRegion:l.boolean(),regionCode:l.enum(Object.values(Gf)),isHistoryMigrationPending:l.boolean(),isEligibleForFreeTrial:l.boolean().optional(),phoneLink:l.object({deviceName:l.string().nullable()}).nullable(),ageGroup:l.enum(qH).nullable(),allowedToggles:l.object({textTraining:l.boolean(),voiceTraining:l.boolean(),personalization:l.boolean()}),remainingCalls:l.object({reasoning:l.number(),podcastGeneration:l.number(),research:l.number()}).nullish(),accountTier:pY.nullish(),subscriptions:l.array(vY).nullish()}),yY=l.object({preferredVoice:l.string().nullable(),preferredCharacter:l.string().nullable().optional(),optOutOfTraining:l.boolean(),optInToVoiceTraining:l.boolean(),optOutOfPersonalization:l.boolean(),optOutOfPhoneConnection:l.boolean(),optInToGenerativeUI:l.boolean().optional(),allowBiometricDataUse:l.boolean().optional(),allowOneDriveAccess:l.boolean().optional(),features:l.object({suggestedFollowups:l.boolean().optional()}).nullish()}),sL=l.object({errorCode:l.union([l.literal("attachment-too-large"),l.literal("unsupported-content-type"),l.literal("empty-attachment"),l.literal("content-blocked"),l.literal("rate-limit-exceeded"),l.literal("not-signed-in")])}),bY=l.union([l.object({url:l.string()}),sL]),aL=l.union([l.object({id:l.string()}),sL]),CY=l.object({id:l.string(),title:l.string().optional(),updatedAt:l.string(),characterId:l.string().nullable().optional(),continuedAt:l.string().nullable()}),SY=l.object({results:l.array(CY),next:l.string().nullable()}),EY=l.object({id:l.string()}),cL=l.union([l.literal("thumbs-down"),l.literal("thumbs-up"),l.null()]),cy=l.union([l.literal("running"),l.literal("completed"),l.literal("failed"),l.literal("cancelled"),l.literal("pending"),l.literal("paused")]),wY=l.union([l.literal("research"),l.literal("computerUse"),l.literal("podcast")]),TY=l.object({type:l.literal("chainOfThought"),text:l.string()}),IY=l.object({type:l.literal("query"),text:l.string()}),_Y=l.object({type:l.literal("citation"),title:l.string(),url:l.string()}),AY=l.discriminatedUnion("type",[TY,IY,_Y]),lL=l.object({title:l.string(),url:l.string(),position:l.number(),iconUrl:l.string().nullish(),publisher:l.string().nullish()}),kY=l.object({id:l.string(),title:l.string().nullish(),contents:l.array(AY).nullish(),inlineCitations:l.array(lL).nullish(),partialOutput:l.array(l.string()).nullish(),finalResponse:l.string().nullish(),type:l.literal("research"),status:cy,prompt:l.string().optional()}),uL=l.object({url:l.string(),createdAt:l.string()}),xY=l.object({type:l.literal("computerUse"),title:l.string().nullish(),conversationId:l.string().nullish(),id:l.string(),status:cy,lastScreenshot:uL.nullish(),updatedAt:l.string().nullish()}),dL=l.object({id:l.string(),title:l.string().nullish(),thumbnail:l.object({name:l.string().nullish()}).nullish()}),RY=l.object({type:l.literal("podcast"),id:l.string(),podcast:dL.nullish(),status:cy,updatedAt:l.string().nullish()}),hL=l.discriminatedUnion("type",[kY,xY,RY]),KT=l.object({id:l.string(),title:l.string().optional(),conversationId:l.string().optional(),updatedAt:l.string(),status:cy,type:wY}),PY=KT.extend({type:l.literal("research")}),NY=KT.extend({type:l.literal("computerUse"),screenshot:l.string().nullish(),lastScreenshot:uL.nullish(),chainOfThought:l.array(l.string()).nullish(),computerAction:l.string().nullish(),statusChange:J$.optional(),lastUserCommand:cd.optional(),reaction:cL.optional(),activeTabFaviconUrl:l.string().nullish(),activeTabTitle:l.string().nullish(),isReplaying:l.boolean().nullish()}),OY=KT.extend({type:l.literal("podcast"),podcast:dL.nullish()}),MY=l.discriminatedUnion("type",[PY,NY,OY]),tke=l.object({results:l.array(MY),next:l.string().nullable()}),Xf=l.union([l.literal("report"),...cL.options]),LY=l.union([l.literal("generating"),l.literal("generated"),l.literal("failed"),l.literal("non-complete")]),fL=l.object({id:l.string(),createdAt:l.string()}),DY=l.object({index:l.string(),title:l.string(),url:l.string(),iconUrl:l.string().nullable(),publisher:l.string().nullable()}),jY=Zo.extend({type:l.literal("image"),url:l.string().optional(),prompt:l.string().optional().nullable(),isPartiallyLoading:l.boolean().optional(),reaction:Xf.optional(),partialGenerationStep:l.number().optional(),status:LY.optional(),progressionText:l.string().nullable().optional()}),UY=Zo.extend({type:l.literal("citation"),...lL.shape}),FY=Zo.extend({type:l.literal("text"),text:l.string(),citations:l.array(DY).optional(),reaction:Xf.optional()}),BY=Zo.extend({type:l.literal("task"),task:hL.nullish(),reaction:Xf.optional()}),HY=Zo.extend({type:l.literal("card"),card:eL,reaction:Xf.optional()}),zY=Zo.extend({type:l.literal("deleted"),partType:l.enum(["page","task"])}),VY=Zo.extend({type:l.literal("error"),text:l.string()}),$Y=l.object({text:l.string(),lastSubActionScreenshotUrl:l.string().nullish()}),GY=Zo.extend({type:l.literal("chainOfThought"),text:l.string(),screenshotUrl:l.string().nullish(),reaction:Xf.optional(),partId:l.string(),items:l.array($Y).optional(),subAction:l.string().optional()}),qY=Zo.extend({type:l.literal("memoryUpdateMessagePart"),text:l.string(),icon:l.union([l.literal("remember"),l.literal("forget")]).nullish()}),KY=l.discriminatedUnion("type",[FY,jY,VW,UY,VY,HY,BY,zY,GY,P$,qY]),WY=l.object({type:l.literal("text"),text:l.string()}),YY=l.object({type:l.literal("browserTabs"),tabs:l.array(l.object({title:l.string().optional(),url:l.string().optional(),id:l.number().optional(),favIconUrl:l.string().optional(),windowId:l.number()}))}),QY=l.object({type:l.literal("image"),url:l.string()}),JY=l.object({type:l.literal("document"),partId:l.string(),fileName:l.string(),contentType:l.string()});l.object({type:l.literal("document"),attachmentId:l.string()});const XY=l.union([cd,qT]);l.union([l.literal("createPage"),l.literal("appendToPage"),l.literal("promptCharacterSpeech"),cd,l.literal("chatAboutNarrative"),qT]);const ZY=l.object({type:l.literal("promptCharacterSpeech")}),eQ=l.discriminatedUnion("type",[BW,HW,X$,Z$,eG,tG,nG,rG,ZY,FW,YW]),tQ=l.object({type:l.literal("command"),command:eQ}),nQ=l.object({type:l.literal("dailyBriefing"),chapterId:l.string()}),rQ=l.object({type:l.literal("greeting"),greetingMessage:l.string()}),oQ=l.discriminatedUnion("type",[nQ,rQ]);l.object({type:l.literal("reference"),reference:oQ});const iQ=l.discriminatedUnion("type",[WY,QY,JY,tQ,YY]),sQ=l.union([l.literal("chat"),l.literal("smart"),l.literal("reasoning"),l.literal("research"),l.literal("computerUse")]),aQ=fL.extend({author:l.literal("ai"),content:l.array(KY),mode:sQ.optional()}),cQ=fL.extend({author:l.literal("human"),content:l.array(iQ)}),pL=l.discriminatedUnion("author",[aQ,cQ]),mL=l.object({results:l.array(pL),next:l.string().nullable()}),lQ=l.object({messages:l.array(pL),conversationTitle:l.string()}),nke=l.object({url:l.string()}),uQ=l.object({conversation:l.object({id:l.string(),title:l.string()})});l.object({qc:l.object({q:l.string(),gt:l.string(),sc:l.string()}),s:l.array(l.object({st:l.string(),t:l.string()}))});const WT=l.union([l.literal("active"),l.literal("banned"),l.literal("ineligible")]),YT=l.union([l.literal("active"),l.literal("not-started"),l.literal("expired"),l.literal("paused")]),dQ=l.union([l.literal("not-started"),l.literal("completed"),l.literal("ineligible")]),hQ=l.object({id:l.string(),type:l.string(),points:l.number()}),fQ=l.object({redeemableCount:l.number(),redeemedCount:l.number(),skus:l.array(hQ)}),rke=l.object({userStatus:WT,status:YT,startAt:l.string(),endAt:l.string(),referralCode:l.string().nullish(),referralTaskStatus:dQ.nullish(),rewards:fQ.nullish()}),oke=l.object({userStatus:WT.nullish(),programStatus:YT}),ike=l.object({userStatus:WT.nullish(),programStatus:YT,lastRequestTime:l.string(),userId:l.string()}),nC=l.enum(["prefillComposer","sendMessage","deepLink"]),QT=l.discriminatedUnion("type",[l.object({type:l.literal(nC.enum.prefillComposer),prompt:l.string()}),l.object({type:l.literal(nC.enum.sendMessage),prompt:l.string()}),l.object({type:l.literal(nC.enum.deepLink),uri:l.string()})]),pQ=l.object({id:l.string(),text:l.string(),action:QT}),mQ=l.object({id:l.string(),text:l.string(),thumbnail:l.object({url:l.string(),altText:l.string()}),action:QT}),gQ=l.object({id:l.string(),text:l.string(),action:QT}),vQ=l.discriminatedUnion("type",[l.object({type:l.literal("text"),id:l.literal("conversation-starter"),title:l.string().nullish(),items:l.array(pQ)}),l.object({type:l.literal("textAndImage"),id:l.union([l.literal("feature-discovery"),l.literal("kickstarter"),l.literal("image-generation")]),title:l.string().nullish(),items:l.array(mQ)}),l.object({type:l.literal("textAndGreeting"),id:l.string(),title:l.string().nullish(),greeting:l.string().nullish(),items:l.array(gQ)})]),yQ=l.object({widgets:l.array(vQ)}),bQ=l.object({dPPRank:l.string()}),CQ=l.object({query:l.string(),source:l.string(),metadata:bQ});l.object({suggestedQueries:l.array(CQ),url:l.string()});const SQ=l.union([l.string(),l.number(),l.boolean(),l.null()]),pf=l.lazy(()=>l.union([SQ,l.array(pf),l.record(pf)])),EQ=l.object({op:l.literal("add"),path:l.string(),value:pf}),wQ=l.object({op:l.literal("remove"),path:l.string()}),TQ=l.object({op:l.literal("replace"),path:l.string(),value:pf}),IQ=l.object({op:l.literal("move"),from:l.string(),path:l.string()}),_Q=l.object({op:l.literal("copy"),from:l.string(),path:l.string()}),AQ=l.object({op:l.literal("test"),path:l.string(),value:pf}),kQ=l.discriminatedUnion("op",[EQ,wQ,TQ,IQ,_Q,AQ]),t1=l.array(kQ),xQ=l.union([l.literal("event-not-recognized"),l.literal("over-turn-limit"),l.literal("unknown-error"),l.literal("message-too-large"),l.literal("invalid-event"),l.literal("empty-message"),l.literal("empty-text"),l.literal("text-too-long"),l.literal("multiple-text-parts"),l.literal("multiple-image-parts"),l.literal("too-many-messages"),l.literal("over-reasoning-quota"),l.literal("over-task-quota"),l.literal("page-content-length-exceeded"),l.literal("page-count-exceeded"),l.literal("character-out-of-capacity"),l.string()]),RQ=l.union([l.literal("blocked"),l.literal("not-signed-in"),l.literal("failed"),l.string()]),gL=l.union([l.literal("quiz"),l.literal("generative-ui")]),vL=l.union([l.literal("throttled"),l.literal("throttled-non-pro"),l.literal("time-expired"),l.literal("time-expired-non-pro"),l.literal("not-in-flight"),l.literal("error"),l.literal("signed-out"),l.literal("region-not-available"),l.literal("time-expired-month"),l.literal("time-expired-month-non-pro")]),PQ=l.object({voice:l.string().optional(),speed:l.number().min(50).max(200).optional()}).partial(),n1=l.number().min(0).max(200).default(100),r1=l.union([l.literal("standard"),l.literal("character")]),o1=l.discriminatedUnion("event",[OT,l.object({event:l.literal("pong"),id:l.string()}),l.object({event:l.literal("connected"),id:l.string(),requestId:l.string()}),l.object({event:l.literal("received"),conversationId:l.string(),messageId:l.string(),createdAt:l.string()}),l.object({event:l.literal("emojiReaction"),messageId:l.string(),emoji:l.string()}),l.object({event:l.literal("startMessage"),conversationId:l.string(),messageId:l.string(),createdAt:l.string()}),l.object({event:l.literal("appendText"),messageId:l.string(),text:l.string(),partId:l.string()}),l.object({event:l.literal("replaceText"),messageId:l.string(),text:l.string(),partId:l.string()}),l.object({event:l.literal("titleUpdate"),conversationId:l.string(),title:l.string()}),l.object({event:l.literal("generatingImage"),messageId:l.string(),prompt:l.string(),partId:l.string(),progressionText:l.string().nullable().optional()}),l.object({id:l.string(),event:l.literal("generatingImages"),messageId:l.string(),partIds:l.array(l.string()),prompt:l.string()}),l.object({event:l.literal("imageGenerated"),messageId:l.string(),url:l.string(),partId:l.string()}),l.object({event:l.literal("partialImageGenerated"),messageId:l.string(),url:l.string(),partId:l.string(),content:l.string()}),l.object({event:l.literal("page"),messageId:l.string(),partId:l.string(),page:l.object({id:l.string(),conversationId:l.string(),title:l.string().nullish()})}),l.object({event:l.literal("challenge")}),l.object({event:l.literal("imageGenerationFailed"),messageId:l.string(),errorCode:RQ,partId:l.string()}),l.object({id:l.string(),event:l.literal("generatingCard"),messageId:l.string(),partId:l.string(),type:gL}),l.object({id:l.string(),event:l.literal("cardGenerationFailed"),messageId:l.string(),partId:l.string()}),l.object({event:l.literal("transcriptEvent")}),l.object({event:l.literal("audioStart"),conversationId:l.string()}),l.object({event:l.literal("audio"),audio:l.string()}),l.object({event:l.literal("audioStartFailed"),reason:vL}),l.object({event:l.literal("audioTimeRemaining"),seconds:l.number()}),l.object({event:l.literal("callTerminated"),reason:l.string().optional()}),l.object({event:l.literal("audioEnd")}),l.object({event:l.literal("audioConfig"),options:PQ}),l.object({event:l.literal("interruptAudio")}),l.object({event:l.literal("speechEndDetected")}),l.object({event:l.literal("citation"),messageId:l.string(),url:l.string(),title:l.string(),partId:l.string(),iconUrl:l.string().nullable(),publisher:l.string().nullable()}),l.object({event:l.literal("chainOfThought"),messageId:l.string(),partId:l.string(),text:l.string()}),l.object({event:l.literal("turnLimitReached"),id:l.string()}),l.object({event:l.literal("done"),messageId:l.string()}),l.object({event:l.literal("error"),errorCode:xQ}),l.object({event:l.literal("card"),messageId:l.string(),partId:l.string(),card:eL}),l.object({event:l.literal("banned"),expiresAt:l.string()}),l.object({id:l.string(),event:l.literal("suggestedFollowups"),messageId:l.string(),suggestions:l.array(l.string())}),l.object({event:l.literal("taskStart"),id:l.string(),messageId:l.string(),partId:l.string(),task:hL}),l.object({event:l.literal("taskUpdate"),id:l.string().nullish(),taskId:l.string(),update:t1}),l.object({event:l.literal("startSuggestion"),id:l.string(),pageId:l.string(),suggestionId:l.string(),editTargets:l.array(l.object({startIndex:l.number(),endIndex:l.number()}))}),l.object({event:l.literal("appendSuggestion"),id:l.string(),pageId:l.string(),suggestionId:l.string(),text:l.string()}),l.object({event:l.literal("characterAnimation"),id:l.string(),offsetInMilliseconds:l.number().nullable().optional(),frame:l.discriminatedUnion("model",[T$,I$]).nullable().optional()}),l.object({event:l.literal("setCallType"),callType:r1}),l.object({event:l.literal("callTypeChanged"),callType:r1}),l.object({event:l.literal("activityStart"),activity:TE,id:l.string(),messageId:l.string(),partId:l.string()}),l.object({event:l.literal("activityUpdate"),id:l.string(),messageId:l.string(),partId:l.string(),update:t1}),l.object({event:l.literal("memoryUpdate"),messageId:l.string(),partId:l.string(),text:l.string(),icon:l.union([l.literal("remember"),l.literal("forget")]).nullish()})]),yL={kNotPresent:0};function ske(t){return typeof t=="object"&&t!==null&&"eventName"in t&&"requestId"in t&&(!("isOutgoing"in t)||!t.isOutgoing)&&"args"in t}const i1="mobileCrossSellingLastClosed",rC="mobilePromoCountClose",mg="hasBeenAuthenticated",gg="colorTheme",JT="newConversationsStarted",mf="timeOfNewConversationThreshold",s1="hasCorrectedPersonalizationSettings",RE="banAppealSubmitted",NQ="hideDeleteConversationModal",OQ="hasBeenPromptedForLocation",MQ="hasSeenCharacter",a1="voiceAppearanceId",LQ="hasSeenAppearance",DQ="hasSeenAppearanceOnVoiceCall",jQ="hasDismissedAppearanceModal",PE="crossPromoFirstVisit",XT="crossPromoDiscoverStripLastClosed",vg="crossPromoDiscoverStripCountClose",ake="crossPromoStripGetAppIsClicked",c1="reviewActiveDays",NE="reviewPromptResponse",bL="userSidebarOpen",cke="referralEligibilityStatus",lke="referralHasSeenEntryNewBadge",uke="coachmark.pagesEditThisResponse",UQ="coachmark.smartMode",OE="isEagerMSALEnabled",CL="isMsalSilentSsoEnabled",SL="user.UserFirstName",ME="loginStartTime",LE="reauthLoginFlag",dke="subscription.m365SubscriberFRE",l1="userConversationVoiceSpeed",DE="authModuleRefactor",FQ="copilotBeta",jE="isCMCMSALPwBEnabled";function rr(t,e){typeof window<"u"&&localStorage.setItem(t,e)}function pn(t){return typeof window<"u"?localStorage.getItem(t):null}function ro(t){typeof window<"u"&&localStorage.removeItem(t)}function so(t,e){const n=pn(t);if(!n)return null;try{const r=JSON.parse(n);return e.parse(r)}catch{return null}}function Ei(t,e,n){try{e.parse(n),rr(t,JSON.stringify(n))}catch{}}function ly(t){const{key:e,schema:n,initialValue:r}=t;return TB(e,r,{getItem:()=>so(e,n)??r,setItem:(i,s)=>{s===void 0?ro(e):Ei(e,n,s)},removeItem:()=>ro(e)},{getOnInit:!0})}const hr=V(void 0),uy=V(t=>t(hr)!==void 0),EL=ly({key:SL,schema:l.string().optional(),initialValue:void 0}),wL=V(t=>{const e=t(hr),n=t(EL);return e===void 0?n:e.firstName??e.givenName}),TL=V(t=>{var e;return(e=t(hr))==null?void 0:e.id}),Zf=V(void 0),hke=V(t=>t(ny).find(e=>e.id===t(Zf))),fke=V(t=>{var r,o;const e=t(ny),n=t(Zf)??((r=e[0])==null?void 0:r.id);return(o=e.find(i=>i.id===n))==null?void 0:o.voicemails}),IL=ly({key:l1,schema:n1,initialValue:so(l1,n1)??Xv}),Cc=ly({key:a1,schema:qk,initialValue:so(a1,qk)??void 0}),_L=V(null),ep=V(null),AL=V(t=>t(AT).find(e=>e.id===t(ep))),pke=V(!1),mke=V(yL.kNotPresent);V(yL.kNotPresent);const kL=V(void 0),ZT=V(!1),eI=V(void 0),BQ=V(!1),xL=V(void 0),HQ=V(!1),tI=V(null),nI=V(null),zQ=V(!0),gke=V(!1),vke=V(!1),tp=V(t=>{const e=t(hr),n=t(qc("cmc-m365-sku")),r=!!(e!=null&&e.isPro),o=(e==null?void 0:e.subscriptions)??[];return n&&o.some(i=>i.tier==="pro")||r}),VQ=V(t=>{var e;return(e=t(hr))==null?void 0:e.isStudent});V(t=>{var e;return(e=t(hr))==null?void 0:e.inEeaPlusRegion});const ao=V(void 0),$Q=V(!1);V(t=>{const e=t(ao);return e&&cz.includes(e)});const RL=V(void 0),dy=V(t=>{var e;return((e=t(hr))==null?void 0:e.isEligibleForFreeTrial)??!1}),PL=V(void 0),rI=V(t=>{var e;return((e=t(hr))==null?void 0:e.ageGroup)==="teen"}),GQ=V(t=>{var e;return(e=t(hr))==null?void 0:e.allowedToggles.personalization}),qQ=V(t=>{var e;return(e=t(hr))==null?void 0:e.allowedToggles.textTraining}),KQ=V(t=>{var e;return(e=t(hr))==null?void 0:e.allowedToggles.voiceTraining}),NL=V(!1),OL=V(null),ML=V(t=>{var e;return((e=t(hr))==null?void 0:e.subscriptions)??[]}),WQ=V(t=>{const e=t(ML);return w$(e)[0]}),UE=V(0),LL=V(void 0),hy=V(!1),oI=V(t=>{const e=t(y$),n=t(b$),r=t(LL),o=t(hy);if(!(n||o))return e||r}),dd=V(t=>{const e=t(oI),n=t(UE);if(!e||e.length===0)return;const r=Math.max(0,Math.min(n,e.length-1));return e[r]}),iI=V(t=>{const e=t(dd),n=t(hy),r=t(oI);return n||!r?null:(e==null?void 0:e.type)==="textAndGreeting"?e.greeting??null:null}),YQ=V(!1),DL=V(!1),QQ=V(t=>{const e=t(dd);return e==null?void 0:e.title}),JQ=V(t=>{const e=t(dd);return e==null?void 0:e.id}),XQ=V(t=>{const e=t(dd),n=e==null?void 0:e.id;return n==="feature-discovery"||n==="image-generation"||n==="kickstarter"}),ZQ=V(null,(t,e)=>{const n=t(oI),r=t(UE);if(!n||n.length<=1)return;const o=(r+1)%n.length;e(UE,o)}),eJ=V(void 0),tJ=V(void 0),sI=V(!1),yke=mT(new Map);V(void 0);const nJ=V(null);function fy(){const t=D(Bi),e=D(Po);return t.length===0&&!!(e!=null&&e.isNew)}function py(){const t=D(sI),e=D(tJ),r=fy()&&!!e;return{isContextualShoppingCardExpanded:t,showShoppingCardInNewChat:r,shoppingProductMetadata:e}}function rJ(t){if(!t.length)return;const e=Wo("greetingIndex"),n=t.length,r=e?(parseInt(e,10)+1)%n:0;return sa("greetingIndex",r.toString()),t[r]}const aI=V(!1),oJ=V(!1),jL=st(),iJ=["chat.launchMessage.authenticatedV3Type1","chat.launchMessage.authenticatedV3Type2","chat.launchMessage.authenticatedV3Type3"],sJ=["chat.launchMessage.unauthenticatedV3Type1","chat.launchMessage.unauthenticatedV3Type2","chat.launchMessage.unauthenticatedV3Type3"],aJ=["chat.launchMessage.authenticatedV4Type1","chat.launchMessage.authenticatedV4Type2","chat.launchMessage.authenticatedV4Type3","chat.launchMessage.authenticatedV4Type4","chat.launchMessage.authenticatedV4Type5","chat.launchMessage.authenticatedV4Type6","chat.launchMessage.authenticatedV4Type7","chat.launchMessage.authenticatedV4Type8","chat.launchMessage.authenticatedV4Type9","chat.launchMessage.authenticatedV4Type10"],cJ=["chat.launchMessage.unauthenticatedV4Type1","chat.launchMessage.unauthenticatedV4Type2","chat.launchMessage.unauthenticatedV4Type3","chat.launchMessage.unauthenticatedV4Type4","chat.launchMessage.unauthenticatedV4Type5","chat.launchMessage.unauthenticatedV4Type6","chat.launchMessage.unauthenticatedV4Type7","chat.launchMessage.unauthenticatedV4Type8","chat.launchMessage.unauthenticatedV4Type9","chat.launchMessage.unauthenticatedV4Type10"];function lJ(){jL.set(aI,!0)}function uJ(){jL.set(aI,!1)}function UL(){const{t}=Fe(),e=D(aI),n=D(wL),r=D(JQ),o=D(iI),i=D(QQ),s=ve("landing-rotating-greeting"),{showShoppingCardInNewChat:a}=py(),u=m.useCallback(()=>a?n?["chat.launchMessage.authenticatedShoppingType1"]:["chat.launchMessage.unauthenticatedShoppingType1"]:r&&["feature-discovery","image-generation"].includes(r)?n?["chat.launchMessage.authenticatedWidgets"]:["chat.launchMessage.unauthenticatedWidgets"]:n?s?aJ:iJ:s?cJ:sJ,[n,s,a,r])(),d=m.useMemo(()=>rJ(u),[u]),f=Number(Wo("greetingIndex"))||0,p=m.useCallback(()=>i||(r==="feature-discovery"?t("chat.launchMessage.subheadingFeatureDiscoveryWidget"):r==="image-generation"?t("chat.launchMessage.subheadingImageGenWidget"):null),[i,r,t]);return{launchGreetingShown:e,greetingKey:d,widgetGreeting:o,widgetSubheading:p(),greetingIndex:f}}async function dJ({from:t,to:e,params:n,search:r,state:o}){var s;e.startsWith("/chats/")||st().set(ET,null);let i=e;e==="/"&&((s=be.instance().config().landingPage)!=null&&s.enableLandingRoute)&&(i="/discover"),await Tp.navigate({to:i,params:n,state:a=>({...a,from:t,...o}),search:r})}function co(){return dJ}function hJ(t,e="all"){const n=m.useRef(t),r=m.useMemo(()=>{const o=n.current.map(qc);return V(i=>e==="all"?o.every(s=>i(s)):o.some(s=>i(s)))},[e]);return D(r)}function fJ(t,e="all"){return e==="all"?t.every(n=>et(n)):t.some(n=>et(n))}const FL=["character-animation-spda2e","character-animation-vasa"];function my(){return hJ(FL,"any")}function pJ(){const t=D(Cc);return my()&&!!t}function FE(){const t=st().get(Cc);return fJ(FL,"any")&&!!t}function Mp(t){return yM.includes(t)}function gt(t){return st().get(t)}function gy(){const t=co(),e=Uv(),{location:n}=e.state,r=my(),o=Te(Cc);return m.useCallback(async({conversationId:i=gt(mt),talk:s=!1,enableAppearance:a=!1}={})=>{i&&(r&&a&&o(oy),await t({to:`/chats/$conversationId${s?"/talk":""}`,params:{conversationId:i},from:n.pathname,search:n.search?Object.fromEntries(new URLSearchParams(n.search)):{}}))},[t,r,n.search,n.pathname,o])}const ut=t=>typeof t=="string",Jd=()=>{let t,e;const n=new Promise((r,o)=>{t=r,e=o});return n.resolve=t,n.reject=e,n},u1=t=>t==null?"":""+t,mJ=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},gJ=/###/g,d1=t=>t&&t.indexOf("###")>-1?t.replace(gJ,"."):t,h1=t=>!t||ut(t),Dh=(t,e,n)=>{const r=ut(e)?e.split("."):e;let o=0;for(;o<r.length-1;){if(h1(t))return{};const i=d1(r[o]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++o}return h1(t)?{}:{obj:t,k:d1(r[o])}},f1=(t,e,n)=>{const{obj:r,k:o}=Dh(t,e,Object);if(r!==void 0||e.length===1){r[o]=n;return}let i=e[e.length-1],s=e.slice(0,e.length-1),a=Dh(t,s,Object);for(;a.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),a=Dh(t,s,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},vJ=(t,e,n,r)=>{const{obj:o,k:i}=Dh(t,e,Object);o[i]=o[i]||[],o[i].push(n)},yg=(t,e)=>{const{obj:n,k:r}=Dh(t,e);if(n)return n[r]},yJ=(t,e,n)=>{const r=yg(t,n);return r!==void 0?r:yg(e,n)},BL=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ut(t[r])||t[r]instanceof String||ut(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):BL(t[r],e[r],n):t[r]=e[r]);return t},bl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var bJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const CJ=t=>ut(t)?t.replace(/[&<>"'\/]/g,e=>bJ[e]):t;class SJ{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const EJ=[" ",",","?","!",";"],wJ=new SJ(20),TJ=(t,e,n)=>{e=e||"",n=n||"";const r=EJ.filter(s=>e.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const o=wJ.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let i=!o.test(t);if(!i){const s=t.indexOf(n);s>0&&!o.test(t.substring(0,s))&&(i=!0)}return i},BE=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let o=t;for(let i=0;i<r.length;){if(!o||typeof o!="object")return;let s,a="";for(let c=i;c<r.length;++c)if(c!==i&&(a+=n),a+=r[c],s=o[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<r.length-1)continue;i+=c-i+1;break}o=s}return o},bg=t=>t&&t.replace("_","-"),IJ={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let _J=class HE{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||IJ,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,o){return o&&!this.debug?null:(ut(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new HE(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new HE(this.logger,e)}};var wi=new _J;class vy{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(s=>{let[a,c]=s;for(let u=0;u<c;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[a,c]=s;for(let u=0;u<c;u++)a.apply(a,[e,...r])})}}class p1 extends vy{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,s=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):ut(r)&&i?a.push(...r.split(i)):a.push(r)));const c=yg(this.data,a);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),c||!s||!ut(r)?c:BE(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,o){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(s?r.split(s):r)),e.indexOf(".")>-1&&(a=e.split("."),o=n,n=a[1]),this.addNamespaces(n),f1(this.data,a,o),i.silent||this.emit("added",e,n,r,o)}addResources(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(ut(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});o.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,o,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),o=r,r=n,n=a[1]),this.addNamespaces(n);let c=yg(this.data,a)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?BL(c,r,i):c={...c,...r},f1(this.data,a,c),s.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var HL={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,o){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,o))}),e}};const m1={};class Cg extends vy{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),mJ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=wi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const s=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!TJ(e,r,o);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==o||r===o&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(o)}return ut(i)&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(e[e.length-1],n),c=a[a.length-1],u=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(d){const E=n.nsSeparator||this.options.nsSeparator;return o?{res:`${c}${E}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${E}${s}`}return o?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:s}const f=this.resolve(e,n);let p=f&&f.res;const g=f&&f.usedKey||s,v=f&&f.exactUsedKey||s,y=Object.prototype.toString.apply(p),b=["[object Number]","[object Function]","[object RegExp]"],C=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,w=!ut(p)&&typeof p!="boolean"&&typeof p!="number";if(S&&p&&w&&b.indexOf(y)<0&&!(ut(C)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,p,{...n,ns:a}):`key '${s} (${this.language})' returned an object instead of string.`;return o?(f.res=E,f.usedParams=this.getUsedParamsDetails(n),f):E}if(i){const E=Array.isArray(p),T=E?[]:{},I=E?v:g;for(const A in p)if(Object.prototype.hasOwnProperty.call(p,A)){const _=`${I}${i}${A}`;T[A]=this.translate(_,{...n,joinArrays:!1,ns:a}),T[A]===_&&(T[A]=p[A])}p=T}}else if(S&&ut(C)&&Array.isArray(p))p=p.join(C),p&&(p=this.extendTranslation(p,e,n,r));else{let E=!1,T=!1;const I=n.count!==void 0&&!ut(n.count),A=Cg.hasDefaultValue(n),_=I?this.pluralResolver.getSuffix(u,n.count,n):"",j=n.ordinal&&I?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",R=I&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),$=R&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${j}`]||n.defaultValue;!this.isValidLookup(p)&&A&&(E=!0,p=$),this.isValidLookup(p)||(T=!0,p=s);const se=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T?void 0:p,P=A&&$!==p&&this.options.updateMissing;if(T||E||P){if(this.logger.log(P?"updateKey":"missingKey",u,c,s,P?$:p),i){const M=this.resolve(s,{...n,keySeparator:!1});M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let k=[];const N=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&N&&N[0])for(let M=0;M<N.length;M++)k.push(N[M]);else this.options.saveMissingTo==="all"?k=this.languageUtils.toResolveHierarchy(n.lng||this.language):k.push(n.lng||this.language);const x=(M,te,Y)=>{const Q=A&&Y!==p?Y:se;this.options.missingKeyHandler?this.options.missingKeyHandler(M,c,te,Q,P,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(M,c,te,Q,P,n),this.emit("missingKey",M,c,te,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?k.forEach(M=>{const te=this.pluralResolver.getSuffixes(M,n);R&&n[`defaultValue${this.options.pluralSeparator}zero`]&&te.indexOf(`${this.options.pluralSeparator}zero`)<0&&te.push(`${this.options.pluralSeparator}zero`),te.forEach(Y=>{x([M],s+Y,n[`defaultValue${Y}`]||$)})}):x(k,s,$))}p=this.extendTranslation(p,e,n,f,r),T&&p===s&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${s}`),(T||E)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${s}`:s,E?p:void 0):p=this.options.parseMissingKeyHandler(p))}return o?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(e,n,r,o,i){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=ut(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let f=r.replace&&!ut(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||o.usedLng,r),u){const p=e.match(this.interpolator.nestingRegexp),g=p&&p.length;d<g&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];return i&&i[0]===g[0]&&!r.context?(s.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):s.translate(...g,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,c=ut(a)?[a]:a;return e!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(e=HL.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,i,s,a;return ut(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,n),d=u.key;o=d;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=n.count!==void 0&&!ut(n.count),g=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),v=n.context!==void 0&&(ut(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(b=>{this.isValidLookup(r)||(a=b,!m1[`${y[0]}-${b}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(m1[`${y[0]}-${b}`]=!0,this.logger.warn(`key "${o}" for languages "${y.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(C=>{if(this.isValidLookup(r))return;s=C;const S=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(S,d,C,b,n);else{let E;p&&(E=this.pluralResolver.getSuffix(C,n.count,n));const T=`${this.options.pluralSeparator}zero`,I=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(S.push(d+E),n.ordinal&&E.indexOf(I)===0&&S.push(d+E.replace(I,this.options.pluralSeparator)),g&&S.push(d+T)),v){const A=`${d}${this.options.contextSeparator}${n.context}`;S.push(A),p&&(S.push(A+E),n.ordinal&&E.indexOf(I)===0&&S.push(A+E.replace(I,this.options.pluralSeparator)),g&&S.push(A+T))}}let w;for(;w=S.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(C,b,w,n))}))})}),{res:r,usedKey:o,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,o):this.resourceStore.getResource(e,n,r,o)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ut(e.replace);let o=r?e.replace:e;if(r&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const i of n)delete o[i]}return o}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const oC=t=>t.charAt(0).toUpperCase()+t.slice(1);class g1{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=wi.create("languageUtils")}getScriptPartFromCode(e){if(e=bg(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=bg(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ut(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let o=Intl.getCanonicalLocales(e)[0];if(o&&this.options.lowerCaseLng&&(o=o.toLowerCase()),o)return o}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(o=>o.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=oC(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=oC(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=oC(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&(i.indexOf("-")>0&&o.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===o||i.indexOf(o)===0&&o.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ut(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),o=[],i=s=>{s&&(this.isSupportedCode(s)?o.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return ut(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ut(e)&&i(this.formatLanguageCode(e)),r.forEach(s=>{o.indexOf(s)<0&&i(this.formatLanguageCode(s))}),o}}let AJ=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],kJ={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const xJ=["v1","v2","v3"],RJ=["v4"],v1={zero:0,one:1,two:2,few:3,many:4,other:5},PJ=()=>{const t={};return AJ.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:kJ[e.fc]}})}),t};class NJ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=wi.create("pluralResolver"),(!this.options.compatibilityJSON||RJ.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=PJ(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=bg(e==="dev"?"en":e),o=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:o});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];const s=new Intl.PluralRules(r,{type:o});return this.pluralRulesCache[i]=s,s}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(o=>`${n}${o}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((o,i)=>v1[o]-v1[i]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):r.numbers.map(o=>this.getSuffix(e,o,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(e,r);return o?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:this.getSuffixRetroCompatible(o,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let o=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));const i=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?`_plural_${o.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!xJ.includes(this.options.compatibilityJSON)}}const y1=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=yJ(t,e,n);return!i&&o&&ut(n)&&(i=BE(t,n,r),i===void 0&&(i=BE(e,n,r))),i},iC=t=>t.replace(/\$/g,"$$$$");class OJ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=wi.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:v,nestingSuffixEscaped:y,nestingOptionsSeparator:b,maxReplaces:C,alwaysFormat:S}=e.interpolation;this.escape=n!==void 0?n:CJ,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=i?bl(i):s||"{{",this.suffix=a?bl(a):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?bl(p):g||bl("$t("),this.nestingSuffix=v?bl(v):y||bl(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=C||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,o){let i,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const C=y1(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,r,{...o,...n,interpolationkey:g}):C}const v=g.split(this.formatSeparator),y=v.shift().trim(),b=v.join(this.formatSeparator).trim();return this.format(y1(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),b,r,{...o,...n,interpolationkey:y})};this.resetRegExp();const d=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,f=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>iC(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?iC(this.escape(g)):iC(g)}].forEach(g=>{for(a=0;i=g.regex.exec(e);){const v=i[1].trim();if(s=u(v),s===void 0)if(typeof d=="function"){const b=d(e,i,o);s=ut(b)?b:""}else if(o&&Object.prototype.hasOwnProperty.call(o,v))s="";else if(f){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),s="";else!ut(s)&&!this.useRawValueToEscape&&(s=u1(s));const y=g.safeValue(s);if(e=e.replace(i[0],y),f?(g.regex.lastIndex+=s.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,i,s;const a=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const f=c.split(new RegExp(`${d}[ ]*{`));let p=`{${f[1]}`;c=f[0],p=this.interpolate(p,s);const g=p.match(/'/g),v=p.match(/"/g);(g&&g.length%2===0&&!v||v.length%2!==0)&&(p=p.replace(/'/g,'"'));try{s=JSON.parse(p),u&&(s={...u,...s})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${d}${p}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;o=this.nestingRegexp.exec(e);){let c=[];s={...r},s=s.replace&&!ut(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const d=o[1].split(this.formatSeparator).map(f=>f.trim());o[1]=d.shift(),c=d,u=!0}if(i=n(a.call(this,o[1].trim(),s),s),i&&o[0]===e&&!ut(i))return i;ut(i)||(i=u1(i)),i||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),i=""),u&&(i=c.reduce((d,f)=>this.format(d,f,r.lng,{...r,interpolationkey:o[1].trim()}),i.trim())),e=e.replace(o[0],i),this.regexp.lastIndex=0}return e}}const MJ=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);e==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},Cl=t=>{const e={};return(n,r,o)=>{let i=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(i={...i,[o.interpolationkey]:void 0});const s=r+JSON.stringify(i);let a=e[s];return a||(a=t(bg(r),o),e[s]=a),a(n)}};class LJ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=wi.create("formatter"),this.options=e,this.formats={number:Cl((n,r)=>o=>new Intl.NumberFormat(n,{...r}).format(o)),currency:Cl((n,r)=>o=>new Intl.NumberFormat(n,{...r,style:"currency"}).format(o)),datetime:Cl((n,r)=>o=>new Intl.DateTimeFormat(n,{...r}).format(o)),relativetime:Cl((n,r)=>o=>new Intl.RelativeTimeFormat(n,{...r}).format(o,r.range||"day")),list:Cl((n,r)=>o=>new Intl.ListFormat(n,{...r}).format(o))},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Cl(n)}format(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,c)=>{const{formatName:u,formatOptions:d}=MJ(c);if(this.formats[u]){let f=a;try{const p=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},g=p.locale||p.lng||o.locale||o.lng||r;f=this.formats[u](a,g,{...d,...o,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const DJ=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class jJ extends vy{constructor(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=wi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,o.backend,o)}queueLoad(e,n,r,o){const i={},s={},a={},c={};return e.forEach(u=>{let d=!0;n.forEach(f=>{const p=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?s[p]===void 0&&(s[p]=!0):(this.state[p]=1,d=!1,s[p]===void 0&&(s[p]=!0),i[p]===void 0&&(i[p]=!0),c[f]===void 0&&(c[f]=!0)))}),d||(a[u]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const o=e.split("|"),i=o[0],s=o[1];n&&this.emit("failedLoading",i,s,n),!n&&r&&this.store.addResourceBundle(i,s,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(c=>{vJ(c.loaded,[i],s),DJ(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{a[u]||(a[u]={});const d=c.loaded[u];d.length&&d.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:o,wait:i,callback:s});return}this.readingCalls++;const a=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&d&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,o+1,i*2,s)},i);return}s(u,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(e,n);u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}return}return c(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ut(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ut(n)&&(n=[n]);const i=this.queueLoad(e,n,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${n}loading namespace ${i} for language ${o} failed`,s),!s&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${o}`,a),this.loaded(e,s,a)})}saveMissing(e,n,r,o,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...s,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,n,r,o,c):d=u(e,n,r,o),d&&typeof d.then=="function"?d.then(f=>a(null,f)).catch(a):a(null,d)}catch(d){a(d)}else u(e,n,r,o,a,c)}!e||!e[0]||this.store.addResource(e[0],n,r,o)}}}const b1=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ut(t[1])&&(e.defaultValue=t[1]),ut(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),C1=t=>(ut(t.ns)&&(t.ns=[t.ns]),ut(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ut(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Lp=()=>{},UJ=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class gf extends vy{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=C1(e),this.services={},this.logger=wi,this.modules={external:[]},UJ(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ut(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=b1();this.options={...o,...this.options,...C1(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?wi.init(i(this.modules.logger),this.options):wi.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=LJ);const f=new g1(this.options);this.store=new p1(this.options.resources,this.options);const p=this.services;p.logger=wi,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new NJ(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(p.formatter=i(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new OJ(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new jJ(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),b=1;b<v;b++)y[b-1]=arguments[b];e.emit(g,...y)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Cg(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),b=1;b<v;b++)y[b-1]=arguments[b];e.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Lp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=Jd(),u=()=>{const d=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(p),r(f,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lp;const o=ut(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};o?s(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload&&this.options.preload.forEach(a=>s(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const o=Jd();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Lp),this.services.backendConnector.reload(e,n,i=>{o.resolve(),r(i)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&HL.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const o=Jd();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},s=(c,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},a=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=ut(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,d=>{s(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),o}getFixedT(e,n,r){var o=this;const i=function(s,a){let c;if(typeof a!="object"){for(var u=arguments.length,d=new Array(u>2?u-2:0),f=2;f<u;f++)d[f-2]=arguments[f];c=o.options.overloadTranslationOptionHandler([s,a].concat(d))}else c={...a};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const p=o.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(s)?g=s.map(v=>`${c.keyPrefix}${p}${v}`):g=c.keyPrefix?`${c.keyPrefix}${p}${s}`:s,o.t(g,c)};return ut(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const u=this.services.backendConnector.state[`${a}|${c}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,e)&&(!o||s(i,e)))}loadNamespaces(e,n){const r=Jd();return this.options.ns?(ut(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Jd();ut(e)&&(e=[e]);const o=this.options.preload||[],i=e.filter(s=>o.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=o.concat(i),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new g1(b1());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new gf(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lp;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},i=new gf(o);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new p1(this.store.data,o),i.services.resourceStore=i.store),i.translator=new Cg(i.services,o),i.translator.on("*",function(a){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];i.emit(a,...u)}),i.init(o,n),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const It=gf.createInstance();It.createInstance=gf.createInstance;It.createInstance;It.dir;It.init;It.loadResources;It.reloadResources;It.use;It.changeLanguage;It.getFixedT;const ce=It.t,bke=It.exists;It.setDefaultNamespace;It.hasLoadedNamespace;It.loadNamespaces;It.loadLanguages;function FJ(){const t=D(Yo),e=D(mt);return m.useMemo(()=>{if(e){for(const n of t.values())if(n.conversationId===e)return n}},[e,t])}function BJ(){const t=st(),e=t.get(Yo),n=t.get(mt);if(n){for(const r of e.values())if(r.conversationId===n)return r}}function zL(t){const{tasks:e,conversationId:n,taskType:r}=t;for(const o of e.values())if(o.conversationId===n){if(r&&o.type!==r)continue;return o.id}return""}const VL=["completed","failed","cancelled"];function HJ(t){return t.content.find(e=>{var r;if(e.type!=="task")return!1;const n=(r=e.task)==null?void 0:r.status;return n&&!VL.includes(n)})}function zJ(t){for(let e=t.length-1;e>=0;e-=1){const n=t[e];if(n&&n.type==="task")return n}}function cI(t){for(const e of t){const n=HJ(e);if(n)return{message:e,part:n}}return null}const hd=st();function $n(t,e,n=!1){const r=t.at(-1),o=t.find(({id:i})=>i===e);if((n||(r==null?void 0:r.id)===(o==null?void 0:o.id))&&(o==null?void 0:o.author)==="ai")return o}function VJ(t,e){const n=t.find(({author:r})=>r==="human");if((n==null?void 0:n.id)===e&&n.author==="human")return n}function $L(t){const e=t.at(-1);if((e==null?void 0:e.author)==="ai")return e}function _a(t,e){return t.find(n=>n.partId===e)}function $J(t){for(let e=t.length-1;e>=0;e-=1){const n=t[e];if(n&&n.type==="text")return n}}function GL(t){if(!t)return null;const e=hd.get(In).get(t);if(!e)return null;const{history:n}=e;return cI(n)}function Yt(t,e){hd.set(In,n=>ma(n,r=>{const o=r.get(t);o&&e(o.history)}))}function lI(t,e){hd.set(Yo,n=>ma(n,r=>{const o=r.get(t);o&&e(o)}))}function Hs(t,e){hd.set(In,n=>ma(n,r=>{const o=r.get(t);o&&e(o)}))}function Dl(t,e){hd.set(TT,n=>{const r=new Map(n);return r.set(t,e),r})}function GJ(t){hd.set(dr,t)}function Dp(t,e){const n={type:"error",text:t,partId:"0"},r=Math.random().toString(),o={id:r,createdAt:new Date().toISOString(),author:"ai",content:[n],mode:"chat"};Dl(e,r),Yt(e,i=>{i.push(o)}),Hs(e,i=>{i.streamingState="idle"})}function qJ(t){if(et("ceo"))for(const e of t.content)e.type==="activity"&&e.activity.status==="running"&&(e.activity.status="completed")}async function KJ(t){var r;const e=(r=t.body)==null?void 0:r.getReader();if(!e)return 0;let n=0;try{const o=performance.now();for(;performance.now()-o<2e3;){const{value:i,done:s}=await e.read();if(s)break;n+=i.byteLength}return n}catch{return 0}}const WJ="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/meshopt_decoder-3Kt66jYv.js",Nn=class Nn{static async loadLibraries(){const[e,,n]=await Promise.all([q(()=>import("./index-OhEAv8OR.js").then(r=>r.c),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,1,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168])),q(()=>import("./index-DChXJ4aZ.js").then(r=>r.b),__vite__mapDeps([169,170,3,4,22,6,7,12,171,172,23,24,1,93,173,174,143,32,33,94,30,175,145,176,153,177,178,179,180,152,97,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,9,10,11,202,203,204,205,35,36,206,207,208,209,210])),q(()=>import("./math.scalar.functions-C0i4R8fp.js").then(r=>r.f),[])]);e.MeshoptCompression.Configuration={decoder:{url:WJ}},Nn.Core=e,Nn.Math=n,Nn.isInitialized=!0}static async loadViewerLibraries(){const e=await q(()=>import("./index-DGmIBWJZ.js").then(n=>n.i),__vite__mapDeps([211,13,3,4,8,171,212]));Nn.Viewer=e}static async loadDebugLibraries(){await Nn.loadLibraries(),await q(()=>import("./babylon.inspector.bundle-Chu2ZWkp.js").then(e=>e.b),__vite__mapDeps([213,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,170,171,172,169,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,214,212,215,216]))}static isLoaded(){return Nn.isInitialized}static getCore(){return Nn.throwIfNotInitialized("Core"),Nn.Core}static getMath(){return Nn.throwIfNotInitialized("Core"),Nn.Math}static getViewer(){return Nn.throwIfNotInitialized("Viewer"),Nn.Viewer}static throwIfNotInitialized(e){if(!Nn.isInitialized)throw new Error(`Libraries ${e} are not loaded yet. Call loadLibraries first.`)}};Z(Nn,"Core"),Z(Nn,"Math"),Z(Nn,"Viewer"),Z(Nn,"isInitialized",!1);let ju=Nn;function Cke(t){const e=t.split(/[\\/]/),n=e.pop();return{basePath:`${e.join("/")}/`,fileName:n??""}}function Ske(t,e){K.trackEvent({name:"interaction",data:{eventName:"characterAnimation",eventInfo_characterAnimationState:t,eventInfo_characterId:e}})}function Eke(t,e){const{Texture:n}=ju.getCore();return new Promise((r,o)=>{const i=new n(t,e,!1,!1,1,()=>{r(i)},o)})}function wke(t){const{Vector3:e}=ju.getCore();return new e(t[0],t[1]??0,t[2]??0)}function Tke(t){return Math.max(...t)-Math.min(...t)}function Ike(t){return t*Math.PI/180}function _ke(t){const{Clamp:e}=ju.getMath();return e(t,0,1)}function YJ(t,e,n){return Math.abs(t-e)>n?e:t}function Ake(t,e,n=.01,r=.2){const{MoveTowards:o}=ju.getMath();return o(t,YJ(t,e,n),r)}let S1;function Xd(...t){S1===void 0&&(S1=et("babylon-debug"))}class QJ{constructor(){Z(this,"resourceObserver");Z(this,"entries",[]);Z(this,"keyword",null);this.resourceObserver=new PerformanceObserver(e=>{this.handleResources(e)})}trackStart(e){this.keyword=e,this.resourceObserver.observe({type:"resource",buffered:!1})}trackEnd(){const{entries:e}=this,n=e[e.length-1];return this.resourceObserver.disconnect(),this.entries=[],this.keyword=null,n?{name:n.name,duration:Math.round(n.duration)}:null}handleResources(e){if(this.keyword)for(const n of e.getEntries())n.name.includes(this.keyword)&&this.entries.push(n)}}class JJ{constructor(e=!0){Z(this,"interactTime",0);Z(this,"voiceChatToggledTime",0);Z(this,"speechEndDetectedTime",0);Z(this,"startMessageTime",0);Z(this,"mountedTime",0);Z(this,"libsLoadedTime",0);Z(this,"sceneInitializedTime",0);Z(this,"interactSource","");Z(this,"currentConversationId","");Z(this,"currentMessageId","");Z(this,"visualizerEnabled",!1);Z(this,"loadedEnd",!1);Z(this,"voiceChatToggledOn",!1);Z(this,"resourceMonitor",new QJ);Z(this,"isVoiceCall");Z(this,"resetLoading",()=>{Xd("%c[] -> resetAppearanceEvent"),this.interactTime=0,this.visualizerEnabled=!1,this.loadedEnd=!1});Z(this,"isAvailable",()=>this.isVoiceCall?FE()&&this.voiceChatToggledOn&&this.interactTime>0:FE()&&this.mountedTime>0);Z(this,"trackLoadingEvent",e=>{if(!this.isAvailable())return;const{eventName:n,duration:r,characterId:o,networkDuration:i}=e;if(o&&!Mp(o))return;const a=["voiceChatToggled","appearanceVisible","appearanceLoadingComplete"].includes(n),c=!pn(LQ);K.trackEvent({name:"system",data:{eventName:n,eventInfo_duration:Math.round(r),eventInfo_conversationId:this.currentConversationId,eventInfo_firstTime:c,eventInfo_characterId:o,eventInfo_trigger:a?this.interactSource:void 0,eventInfo_networkDuration:i,eventInfo_customData:JSON.stringify({isVoiceCall:this.isVoiceCall})}}),Xd(`%c[] -> ${n} : `,"color: #691dc6",Math.round(r),c?"firstTime":"",o?`characterId: ${o}`:"",`isVoiceCall: ${this.isVoiceCall===!0}`)});Z(this,"onUserInteract",e=>{this.resetLoading(),this.interactTime=performance.now(),this.interactSource=e,Xd("%c[] -> onUserInteract","color: #222222")});Z(this,"onVoiceChatToggled",(e,n)=>{if(e==="end")this.voiceChatToggledOn=!1,this.speechEndDetectedTime=0,this.resourceMonitor.trackEnd();else{this.voiceChatToggledOn=!0,this.voiceChatToggledTime=performance.now(),this.currentConversationId=n??"";const r=this.voiceChatToggledTime-this.interactTime;this.trackLoadingEvent({eventName:"voiceChatToggled",duration:r})}});Z(this,"onMounted",()=>{this.mountedTime=performance.now();let e;this.isVoiceCall?e=this.mountedTime-this.voiceChatToggledTime:(this.interactTime=this.mountedTime,e=0),this.trackLoadingEvent({eventName:"appearanceMounted",duration:e})});Z(this,"onUnmounted",()=>{this.resourceMonitor.trackEnd()});Z(this,"onBabylonLibrariesLoaded",e=>{if(!Mp(e))return;this.libsLoadedTime=performance.now();const n=this.libsLoadedTime-this.mountedTime;this.trackLoadingEvent({eventName:"appearanceBabylonLoaded",duration:n,characterId:e})});Z(this,"onSceneInitializationStart",e=>{Mp(e)&&this.resourceMonitor.trackStart(".glb")});Z(this,"onSceneInitialized",e=>{if(!Mp(e))return;this.sceneInitializedTime=performance.now();const n=this.sceneInitializedTime-this.libsLoadedTime,r=this.resourceMonitor.trackEnd();Xd("%c[] -> monitorResult : ","color: #5bb173",r),this.trackLoadingEvent({eventName:"appearanceSceneInitialized",duration:n,characterId:e,networkDuration:r?r.duration:void 0}),this.trackLoadingEvent({eventName:"appearanceLoadingComplete",duration:this.sceneInitializedTime-this.interactTime,characterId:e}),this.loadedEnd=!0,this.checkEnd()});Z(this,"onVisualizerEnabled",()=>{if(this.visualizerEnabled)return;this.visualizerEnabled=!0;const e=Math.round(performance.now()-this.interactTime);this.trackLoadingEvent({eventName:"appearanceVisible",duration:e}),this.checkEnd()});Z(this,"checkEnd",()=>{this.visualizerEnabled&&this.loadedEnd&&this.resetLoading()});Z(this,"onStartMessage",(e,n)=>{this.currentMessageId=e,this.startMessageTime=n});Z(this,"onSpeechEndDetected",e=>{this.speechEndDetectedTime=e});Z(this,"onAnimationStart",()=>{const e=Math.round(performance.now()-(this.speechEndDetectedTime||this.startMessageTime));K.trackEvent({name:"system",data:{eventName:"copilotAnimationStart",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:e}}),Xd("%c[] -> onAnimationStart : ","color: #691dc6",Math.round(e))});this.isVoiceCall=e}}const sC=new Map,XJ=(t=!0)=>(sC.has(t)||sC.set(t,new JJ(t)),sC.get(t)),Sg=XJ(!0),ZJ=1e3;function qL(t){(t.source==="audioCallButton"||t.source==="characterTalkToggleButton")&&Sg.onUserInteract(t.source)}function Sn(t){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:t.source,eventInfo_clickScenario:t.scenario,eventInfo_clickDestination:t.destination,eventInfo_conversationId:t.conversationId,eventInfo_podcastId:t.podcastId,eventInfo_messageId:t.messageId,eventInfo_mode:t.chatMode,eventInfo_messageType:t.messageType,eventInfo_cardType:t.cardType,eventInfo_merchantPlatform:t.merchantPlatform,eventInfo_additionalData:t.additionalData?JSON.stringify(t.additionalData):void 0}}),qL(t)}function at(t){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_pageName:t.pageName,eventInfo_sectionName:t.sectionName,eventInfo_clickSource:t.source,eventInfo_clickScenario:t.scenario,eventInfo_clickDestination:t.destination,eventInfo_conversationId:t.conversationId,eventInfo_customData:t.customData}}),qL(t)}function fd(t){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionScenario:t.scenario,eventInfo_impressionPage:t.page,eventInfo_impressionElement:t.element,eventInfo_status:t.status,eventInfo_customData:t.customData}})}function Sc(t){K.trackEvent({name:"health",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:t.feature,eventInfo_scenario:t.scenario,eventInfo_duration:t.duration,eventInfo_customData:t.customData}})}function aa(t){K.trackEvent({name:"health",data:{eventName:"copilotError",eventInfo_feature:t.feature,eventInfo_scenario:t.scenario,eventInfo_errorType:t.errorType,eventInfo_errorMessage:t.errorMessage,eventInfo_exception:t.exception,eventInfo_customData:t.customData}})}function eX(t){K.trackEvent({name:"interaction",data:{eventName:"copilotSettingChange",eventInfo_settingName:t.settingName,eventInfo_settingOldValue:t.oldValue,eventInfo_settingNewValue:t.newValue}})}function kke(t,e=ZJ){let n;function r(){n=window.setTimeout(()=>{t()},e)}function o(){window.clearTimeout(n)}return{onHoverStart:r,onHoverEnd:o}}function KL(t,e,n,r){setTimeout(async()=>{try{const{status:o}=r,i=await KJ(r),s=r.headers.get("x-ceto-ref")??"";K.trackEvent({name:"apiresponse",data:{eventName:"copilotApiResponse",eventInfo_path:t,eventInfo_method:e,eventInfo_status:o,eventInfo_duration:n,eventInfo_responseContentLength:i,eventInfo_cetoRef:s}})}catch{}},0)}function E1(){performance.mark("userSession-end",{startTime:performance.now()});const{duration:t}=performance.measure("userSession-duration","startupTime-begin","userSession-end");K.trackEvent({name:"system",data:{eventName:"copilotExitEvent",eventInfo_duration:t}})}const gi=st(),tX="MissingUrlFromApi";function nX(t,e){const n=gi.get(Yo).get(t);return(n==null?void 0:n.type)==="computerUse"&&!n.lastUserCommand&&rX(n)&&e.some(o=>o.op==="replace"&&o.path==="/status"&&o.value==="paused")?zE(e,["userTakeControl","pauseByClick"]):!1}function WL(t){return t==="paused"||t==="running"||t==="pending"}function rX(t){var e,n;return t.status==="paused"&&(((e=t.statusChange)==null?void 0:e.reason)==="safetyRiskDetected"||((n=t.statusChange)==null?void 0:n.reason)==="askUserInput")}function oX(t){var e;return t.status==="paused"&&((e=t.statusChange)==null?void 0:e.reason)==="safetyRiskDetected"}function iX(t){var e;return t.status==="paused"&&((e=t.statusChange)==null?void 0:e.reason)==="userTakeControl"&&t.lastUserCommand==="takeTaskControl"}function aC(t,e=!1){return t.map(n=>({type:"chainOfThought",text:n.text,screenshotUrl:e?tX:null,reaction:null,partId:Math.random().toString()}))}function zE(t,e){return t.some(n=>{if(n.op==="replace"&&n.path==="/statusChange"){const{value:r}=n;if(typeof r=="object"&&r!==null&&"reason"in r){const{reason:o}=r;if(typeof o=="string"){const i=_M.safeParse(o);return i.success&&e.includes(i.data)}}}return!1})}function sX(t,e){const n=gi.get(Yo).get(t);if((n==null?void 0:n.type)==="computerUse"){const{conversationId:r,status:o,statusChange:i}=n;if(!r)return;if(o==="cancelled"&&Yt(r,d=>{const f=w1(t,"cancelTask");d.push(f)}),zE(e,["giveBackControl"])?Yt(r,d=>{const f=w1(t,"takeTaskControl");d.push(f)}):(i==null?void 0:i.reason)==="giveBackControl"&&T1(t),zE(e,["taskCompleted"])&&Yt(r,d=>{const f={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",content:[{type:"card",partId:Math.random().toString(),card:{type:"computerUseFeedback"}}]};d.push(f)}),i)switch(i.reason){case"askUserInput":case"safetyRiskDetected":{o==="paused"?(i.reason==="askUserInput"&&Sc({feature:"computerUse",scenario:"askUserInput",customData:JSON.stringify({id:n.id,conversationId:n.conversationId})}),r===gi.get(mt)||gi.set(mM,{title:n.title&&n.title!==""?ce("actions.alertTitleTemplate",{conversationName:n.title}):ce("actions.defaultAlertTitle"),subTitle:i.reason==="safetyRiskDetected"?ce("actions.safetyRiskAlertSubTitle"):ce("actions.askUserInputAlertSubTitle"),conversationId:n.conversationId??"",onClick:{action:"SWITCH_CONVERSATION"}}),lI(t,f=>{"lastUserCommand"in f&&(f.lastUserCommand=void 0)})):T1(t);break}}const c=e.filter(d=>d.op==="add"&&d.path==="/chainOfThought/-").map(d=>({text:"value"in d?d.value:""}));c.length>0&&Yt(r,d=>{if(d.length===0)return;const f=I1(d);if(f)f.push(...aC(c));else{const p={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",content:aC(c)};d.push(p)}}),e.filter(d=>d.op==="replace"&&d.path==="/computerAction").length>0&&Yt(r,d=>{const f=I1(d);f&&f.push(...aC([{text:n.computerAction??""}],!0))})}}function w1(t,e){return{id:Math.random().toString(),createdAt:new Date().toISOString(),author:"human",content:[{type:"command",command:{type:e,taskId:t}}]}}function T1(t){lI(t,e=>{"statusChange"in e&&(e.statusChange=void 0)})}function I1(t){const e=t.at(-1);if(e&&e.author==="ai"&&e.content.find(n=>n.type==="chainOfThought"))return e.content}function xke(t){const e=BJ();return(e==null?void 0:e.type)==="computerUse"?e.status!=="running"&&!e.isReplaying?!0:!t:!0}function Rke(t){return!!(et("labs-actions-replay")&&t&&t.type==="computerUse"&&!WL(t.status))}function Pke(t){return{cancelTask:"copilotActionsCancelTask",takeTaskControl:"copilotActionsTakeControl",startTask:void 0,pauseTask:void 0,resumeTask:void 0,releaseTaskControl:void 0}[t]}function YL(t,e){return zL({tasks:t,conversationId:e,taskType:"computerUse"})!==""}function QL(t){return zL({tasks:gi.get(Yo),conversationId:t,taskType:"computerUse"})}function aX(t,e){if(t===e&&gi.set(jr,"side-by-side"),!et("actions-auto-open-L2")||!t)return;const r=gi.get(mt);r&&gi.set(ET,r),gi.set(mt,t),gi.set(jr,"side-by-side")}function JL(){const t=ga(In),[e,n]=tt(mt),[r,o]=tt(ET),i=Te(dr),s=Te(jr),a=D(Yo),c=D(wT),u=gy(),d=Te(sd);return m.useCallback(f=>{var b,C;const{id:p,shouldNavigateToChat:g=!0,shouldClearParentConversation:v=!0}=f;v&&e!==r&&o(null),n(p),d(!1),t(S=>{const w=S.get(p);if(w!=null&&w.history.length&&(w.isNew=!1),w!=null&&w.history.some(E=>E.content.some(T=>T.type==="card"&&T.card.type==="ads"))){for(const E of w.history)if(E.author==="ai"&&E.content.some(T=>T.type==="card"&&T.card.type==="ads")){const T=E.content.filter(I=>I.type!=="card"||I.card.type!=="ads");E.content=T}}}),c&&c!==p&&t(S=>{S.delete(c)});const y=((C=(b=GL(p))==null?void 0:b.part.task)==null?void 0:C.type)==="research";i(y?"research":"chat"),YL(a,p)?s("side-by-side"):s("chat-only"),g&&u({conversationId:p})},[e,r,n,d,t,c,i,a,o,s,u])}const za={UNDEFINED:"0",CHILD:"1",ADULT:"3",NOT_ADULT:"4",CHILD_NO_PARENTAL_CONSENT_REQUIRED:"5"},cX=l.object({name:l.string(),email:l.string(),ageGroup:l.enum([za.UNDEFINED,za.CHILD,za.ADULT,za.NOT_ADULT,za.CHILD_NO_PARENTAL_CONSENT_REQUIRED]),sub:l.string()}),Bo={LOGIN_START:"auth0:loginStart",LOGIN_SUCCESS:"auth0:loginSuccess",LOGIN_FAILURE:"auth0:loginFailure",LOGOUT_SUCCESS:"auth0:logoutSuccess",LOGOUT_FAILURE:"auth0:logoutFailure",ACQUIRE_TOKEN_FAILURE:"auth0:acquireTokenFailure",REAUTH_START:"auth0:reauthStart",REAUTH_SUCCESS:"auth0:reauthSuccess",INITIALIZE_START:"auth0:initializeStart",INITIALIZE_END:"auth0:initializeEnd"};function pi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}var Va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dI(t,e){return t(e={exports:{}},e.exports),e.exports}var Da=dI(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(){var o=this;this.locked=new Map,this.addToLocked=function(i,s){var a=o.locked.get(i);a===void 0?s===void 0?o.locked.set(i,[]):o.locked.set(i,[s]):s!==void 0&&(a.unshift(s),o.locked.set(i,a))},this.isLocked=function(i){return o.locked.has(i)},this.lock=function(i){return new Promise(function(s,a){o.isLocked(i)?o.addToLocked(i,s):(o.addToLocked(i),s())})},this.unlock=function(i){var s=o.locked.get(i);if(s!==void 0&&s.length!==0){var a=s.pop();o.locked.set(i,s),a!==void 0&&setTimeout(a,0)}else o.locked.delete(i)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();e.default=function(){return n.getInstance()}});uI(Da);var lX=uI(dI(function(t,e){var n=Va&&Va.__awaiter||function(d,f,p,g){return new(p||(p=Promise))(function(v,y){function b(w){try{S(g.next(w))}catch(E){y(E)}}function C(w){try{S(g.throw(w))}catch(E){y(E)}}function S(w){w.done?v(w.value):new p(function(E){E(w.value)}).then(b,C)}S((g=g.apply(d,f||[])).next())})},r=Va&&Va.__generator||function(d,f){var p,g,v,y,b={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(S){return function(w){return function(E){if(p)throw new TypeError("Generator is already executing.");for(;b;)try{if(p=1,g&&(v=2&E[0]?g.return:E[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,E[1])).done)return v;switch(g=0,v&&(E=[2&E[0],v.value]),E[0]){case 0:case 1:v=E;break;case 4:return b.label++,{value:E[1],done:!1};case 5:b.label++,g=E[1],E=[0];continue;case 7:E=b.ops.pop(),b.trys.pop();continue;default:if(v=b.trys,!((v=v.length>0&&v[v.length-1])||E[0]!==6&&E[0]!==2)){b=0;continue}if(E[0]===3&&(!v||E[1]>v[0]&&E[1]<v[3])){b.label=E[1];break}if(E[0]===6&&b.label<v[1]){b.label=v[1],v=E;break}if(v&&b.label<v[2]){b.label=v[2],b.ops.push(E);break}v[2]&&b.ops.pop(),b.trys.pop();continue}E=f.call(d,b)}catch(T){E=[6,T],g=0}finally{p=v=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([S,w])}}},o=Va;Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key",s={key:function(d){return n(o,void 0,void 0,function(){return r(this,function(f){throw new Error("Unsupported")})})},getItem:function(d){return n(o,void 0,void 0,function(){return r(this,function(f){throw new Error("Unsupported")})})},clear:function(){return n(o,void 0,void 0,function(){return r(this,function(d){return[2,window.localStorage.clear()]})})},removeItem:function(d){return n(o,void 0,void 0,function(){return r(this,function(f){throw new Error("Unsupported")})})},setItem:function(d,f){return n(o,void 0,void 0,function(){return r(this,function(p){throw new Error("Unsupported")})})},keySync:function(d){return window.localStorage.key(d)},getItemSync:function(d){return window.localStorage.getItem(d)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(d){return window.localStorage.removeItem(d)},setItemSync:function(d,f){return window.localStorage.setItem(d,f)}};function a(d){return new Promise(function(f){return setTimeout(f,d)})}function c(d){for(var f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",p="",g=0;g<d;g++)p+=f[Math.floor(Math.random()*f.length)];return p}var u=function(){function d(f){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+c(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=f,d.waiters===void 0&&(d.waiters=[])}return d.prototype.acquireLock=function(f,p){return p===void 0&&(p=5e3),n(this,void 0,void 0,function(){var g,v,y,b,C,S,w;return r(this,function(E){switch(E.label){case 0:g=Date.now()+c(4),v=Date.now()+p,y=i+"-"+f,b=this.storageHandler===void 0?s:this.storageHandler,E.label=1;case 1:return Date.now()<v?[4,a(30)]:[3,8];case 2:return E.sent(),b.getItemSync(y)!==null?[3,5]:(C=this.id+"-"+f+"-"+g,[4,a(Math.floor(25*Math.random()))]);case 3:return E.sent(),b.setItemSync(y,JSON.stringify({id:this.id,iat:g,timeoutKey:C,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,a(30)];case 4:return E.sent(),(S=b.getItemSync(y))!==null&&(w=JSON.parse(S)).id===this.id&&w.iat===g?(this.acquiredIatSet.add(g),this.refreshLockWhileAcquired(y,g),[2,!0]):[3,7];case 5:return d.lockCorrector(this.storageHandler===void 0?s:this.storageHandler),[4,this.waitForSomethingToChange(v)];case 6:E.sent(),E.label=7;case 7:return g=Date.now()+c(4),[3,1];case 8:return[2,!1]}})})},d.prototype.refreshLockWhileAcquired=function(f,p){return n(this,void 0,void 0,function(){var g=this;return r(this,function(v){return setTimeout(function(){return n(g,void 0,void 0,function(){var y,b,C;return r(this,function(S){switch(S.label){case 0:return[4,Da.default().lock(p)];case 1:return S.sent(),this.acquiredIatSet.has(p)?(y=this.storageHandler===void 0?s:this.storageHandler,(b=y.getItemSync(f))===null?(Da.default().unlock(p),[2]):((C=JSON.parse(b)).timeRefreshed=Date.now(),y.setItemSync(f,JSON.stringify(C)),Da.default().unlock(p),this.refreshLockWhileAcquired(f,p),[2])):(Da.default().unlock(p),[2])}})})},1e3),[2]})})},d.prototype.waitForSomethingToChange=function(f){return n(this,void 0,void 0,function(){return r(this,function(p){switch(p.label){case 0:return[4,new Promise(function(g){var v=!1,y=Date.now(),b=!1;function C(){if(b||(window.removeEventListener("storage",C),d.removeFromWaiting(C),clearTimeout(S),b=!0),!v){v=!0;var w=50-(Date.now()-y);w>0?setTimeout(g,w):g(null)}}window.addEventListener("storage",C),d.addToWaiting(C);var S=setTimeout(C,Math.max(0,f-Date.now()))})];case 1:return p.sent(),[2]}})})},d.addToWaiting=function(f){this.removeFromWaiting(f),d.waiters!==void 0&&d.waiters.push(f)},d.removeFromWaiting=function(f){d.waiters!==void 0&&(d.waiters=d.waiters.filter(function(p){return p!==f}))},d.notifyWaiters=function(){d.waiters!==void 0&&d.waiters.slice().forEach(function(f){return f()})},d.prototype.releaseLock=function(f){return n(this,void 0,void 0,function(){return r(this,function(p){switch(p.label){case 0:return[4,this.releaseLock__private__(f)];case 1:return[2,p.sent()]}})})},d.prototype.releaseLock__private__=function(f){return n(this,void 0,void 0,function(){var p,g,v,y;return r(this,function(b){switch(b.label){case 0:return p=this.storageHandler===void 0?s:this.storageHandler,g=i+"-"+f,(v=p.getItemSync(g))===null?[2]:(y=JSON.parse(v)).id!==this.id?[3,2]:[4,Da.default().lock(y.iat)];case 1:b.sent(),this.acquiredIatSet.delete(y.iat),p.removeItemSync(g),Da.default().unlock(y.iat),d.notifyWaiters(),b.label=2;case 2:return[2]}})})},d.lockCorrector=function(f){for(var p=Date.now()-5e3,g=f,v=[],y=0;;){var b=g.keySync(y);if(b===null)break;v.push(b),y++}for(var C=!1,S=0;S<v.length;S++){var w=v[S];if(w.includes(i)){var E=g.getItemSync(w);if(E!==null){var T=JSON.parse(E);(T.timeRefreshed===void 0&&T.timeAcquired<p||T.timeRefreshed!==void 0&&T.timeRefreshed<p)&&(g.removeItemSync(w),C=!0)}}}C&&d.notifyWaiters()},d.waiters=void 0,d}();e.default=u}));const uX={timeoutInSeconds:60},XL={name:"auth0-spa-js",version:"2.1.3"},ZL=()=>Date.now();class Zn extends Error{constructor(e,n){super(n),this.error=e,this.error_description=n,Object.setPrototypeOf(this,Zn.prototype)}static fromPayload({error:e,error_description:n}){return new Zn(e,n)}}let dX=class eD extends Zn{constructor(e,n,r,o=null){super(e,n),this.state=r,this.appState=o,Object.setPrototypeOf(this,eD.prototype)}},VE=class tD extends Zn{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,tD.prototype)}},hX=class nD extends VE{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,nD.prototype)}},fX=class rD extends Zn{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,rD.prototype)}},pX=class oD extends Zn{constructor(e,n,r){super(e,n),this.mfa_token=r,Object.setPrototypeOf(this,oD.prototype)}},iD=class sD extends Zn{constructor(e,n){super("missing_refresh_token",`Missing Refresh Token (audience: '${_1(e,["default"])}', scope: '${_1(n)}')`),this.audience=e,this.scope=n,Object.setPrototypeOf(this,sD.prototype)}};function _1(t,e=[]){return t&&!e.includes(t)?t:""}const Nm=()=>window.crypto,cC=()=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(Nm().getRandomValues(new Uint8Array(43))).forEach(n=>e+=t[n%t.length]),e},A1=t=>btoa(t),$E=t=>{var{clientId:e}=t,n=pi(t,["clientId"]);return new URLSearchParams((r=>Object.keys(r).filter(o=>r[o]!==void 0).reduce((o,i)=>Object.assign(Object.assign({},o),{[i]:r[i]}),{}))(Object.assign({client_id:e},n))).toString()},k1=t=>(e=>decodeURIComponent(atob(e).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))(t.replace(/_/g,"/").replace(/-/g,"+")),mX=async(t,e)=>{const n=await fetch(t,e);return{ok:n.ok,json:await n.json()}},gX=async(t,e,n)=>{const r=new AbortController;let o;return e.signal=r.signal,Promise.race([mX(t,e),new Promise((i,s)=>{o=setTimeout(()=>{r.abort(),s(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(o)})},vX=async(t,e,n,r,o,i,s)=>{return a={auth:{audience:e,scope:n},timeout:o,fetchUrl:t,fetchOptions:r,useFormData:s},c=i,new Promise(function(u,d){const f=new MessageChannel;f.port1.onmessage=function(p){p.data.error?d(new Error(p.data.error)):u(p.data),f.port1.close()},c.postMessage(a,[f.port2])});var a,c},yX=async(t,e,n,r,o,i,s=1e4)=>o?vX(t,e,n,r,s,o,i):gX(t,r,s);async function bX(t,e){var{baseUrl:n,timeout:r,audience:o,scope:i,auth0Client:s,useFormData:a}=t,c=pi(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const u=a?$E(c):JSON.stringify(c);return await async function(d,f,p,g,v,y,b){let C,S=null;for(let _=0;_<3;_++)try{C=await yX(d,p,g,v,y,b,f),S=null;break}catch(j){S=j}if(S)throw S;const w=C.json,{error:E,error_description:T}=w,I=pi(w,["error","error_description"]),{ok:A}=C;if(!A){const _=T||`HTTP error. Unable to fetch ${d}`;throw E==="mfa_required"?new pX(E,_,I.mfa_token):E==="missing_refresh_token"?new iD(p,g):new Zn(E||"request_error",_)}return I}(`${n}/oauth/token`,r,o||"default",i,{method:"POST",body:u,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(s||XL))}},e,a)}const jp=(...t)=>{return(e=t.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};let Ya=class GE{constructor(e,n="@@auth0spajs@@",r){this.prefix=n,this.suffix=r,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[n,r,o,i]=e.split("::");return new GE({clientId:r,scope:i,audience:o},n)}static fromCacheEntry(e){const{scope:n,audience:r,client_id:o}=e;return new GE({scope:n,audience:r,clientId:o})}},CX=class{set(e,n){localStorage.setItem(e,JSON.stringify(n))}get(e){const n=window.localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}},aD=class{constructor(){this.enclosedCache=function(){let e={};return{set(n,r){e[n]=r},get(n){const r=e[n];if(r)return r},remove(n){delete e[n]},allKeys:()=>Object.keys(e)}}()}},SX=class{constructor(e,n,r){this.cache=e,this.keyManifest=n,this.nowProvider=r||ZL}async setIdToken(e,n,r){var o;const i=this.getIdTokenCacheKey(e);await this.cache.set(i,{id_token:n,decodedToken:r}),await((o=this.keyManifest)===null||o===void 0?void 0:o.add(i))}async getIdToken(e){const n=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!n&&e.scope&&e.audience){const r=await this.get(e);return!r||!r.id_token||!r.decodedToken?void 0:{id_token:r.id_token,decodedToken:r.decodedToken}}if(n)return{id_token:n.id_token,decodedToken:n.decodedToken}}async get(e,n=0){var r;let o=await this.cache.get(e.toKey());if(!o){const a=await this.getCacheKeys();if(!a)return;const c=this.matchExistingCacheKey(e,a);c&&(o=await this.cache.get(c))}if(!o)return;const i=await this.nowProvider(),s=Math.floor(i/1e3);return o.expiresAt-n<s?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await((r=this.keyManifest)===null||r===void 0?void 0:r.remove(e.toKey()))):o.body}async set(e){var n;const r=new Ya({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(r.toKey(),o),await((n=this.keyManifest)===null||n===void 0?void 0:n.add(r.toKey()))}async clear(e){var n;const r=await this.getCacheKeys();r&&(await r.filter(o=>!e||o.includes(e)).reduce(async(o,i)=>{await o,await this.cache.remove(i)},Promise.resolve()),await((n=this.keyManifest)===null||n===void 0?void 0:n.clear()))}async wrapCacheEntry(e){const n=await this.nowProvider();return{body:e,expiresAt:Math.floor(n/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new Ya({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,n){return n.filter(r=>{var o;const i=Ya.fromKey(r),s=new Set(i.scope&&i.scope.split(" ")),a=((o=e.scope)===null||o===void 0?void 0:o.split(" "))||[],c=i.scope&&a.reduce((u,d)=>u&&s.has(d),!0);return i.prefix==="@@auth0spajs@@"&&i.clientId===e.clientId&&i.audience===e.audience&&c})[0]}},EX=class{constructor(e,n,r){this.storage=e,this.clientId=n,this.cookieDomain=r,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}};const Zd=t=>typeof t=="number",wX=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],TX=t=>{if(!t.id_token)throw new Error("ID token is required but missing");const e=(i=>{const s=i.split("."),[a,c,u]=s;if(s.length!==3||!a||!c||!u)throw new Error("ID token could not be decoded");const d=JSON.parse(k1(c)),f={__raw:i},p={};return Object.keys(d).forEach(g=>{f[g]=d[g],wX.includes(g)||(p[g]=d[g])}),{encoded:{header:a,payload:c,signature:u},header:JSON.parse(k1(a)),claims:f,user:p}})(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${t.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${t.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==t.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but found "${e.claims.aud}"`);if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${t.nonce}", found "${e.claims.nonce}"`)}if(t.max_age&&!Zd(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!Zd(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Zd(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=t.leeway||60,r=new Date(t.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+n),r>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${r}) is after expiration time (${o})`);if(e.claims.nbf!=null&&Zd(e.claims.nbf)){const i=new Date(0);if(i.setUTCSeconds(e.claims.nbf-n),r<i)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${r}) is before ${i}`)}if(e.claims.auth_time!=null&&Zd(e.claims.auth_time)){const i=new Date(0);if(i.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),r>i)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${r}) is after last auth at ${i}`)}if(t.organization){const i=t.organization.trim();if(i.startsWith("org_")){const s=i;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(s!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_id}"`)}else{const s=i.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(s!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_name}"`)}}return e};var Qa=dI(function(t,e){var n=Va&&Va.__assign||function(){return n=Object.assign||function(c){for(var u,d=1,f=arguments.length;d<f;d++)for(var p in u=arguments[d])Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p]);return c},n.apply(this,arguments)};function r(c,u){if(!u)return"";var d="; "+c;return u===!0?d:d+"="+u}function o(c,u,d){return encodeURIComponent(c).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(u).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(f){if(typeof f.expires=="number"){var p=new Date;p.setMilliseconds(p.getMilliseconds()+864e5*f.expires),f.expires=p}return r("Expires",f.expires?f.expires.toUTCString():"")+r("Domain",f.domain)+r("Path",f.path)+r("Secure",f.secure)+r("SameSite",f.sameSite)}(d)}function i(c){for(var u={},d=c?c.split("; "):[],f=/(%[\dA-F]{2})+/gi,p=0;p<d.length;p++){var g=d[p].split("="),v=g.slice(1).join("=");v.charAt(0)==='"'&&(v=v.slice(1,-1));try{u[g[0].replace(f,decodeURIComponent)]=v.replace(f,decodeURIComponent)}catch{}}return u}function s(){return i(document.cookie)}function a(c,u,d){document.cookie=o(c,u,n({path:"/"},d))}e.__esModule=!0,e.encode=o,e.parse=i,e.getAll=s,e.get=function(c){return s()[c]},e.set=a,e.remove=function(c,u){a(c,"",n(n({},u),{expires:-1}))}});uI(Qa),Qa.encode,Qa.parse,Qa.getAll;var IX=Qa.get,cD=Qa.set,lD=Qa.remove;const jl={get(t){const e=IX(t);if(e!==void 0)return JSON.parse(e)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0,sameSite:"none"}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),cD(t,JSON.stringify(e),r)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),lD(t,n)}},_X={get(t){return jl.get(t)||jl.get(`_legacy_${t}`)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),cD(`_legacy_${t}`,JSON.stringify(e),r),jl.save(t,e,n)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),lD(t,n),jl.remove(t,e),jl.remove(`_legacy_${t}`,e)}},AX={get(t){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(t);return e!=null?JSON.parse(e):void 0},save(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove(t){sessionStorage.removeItem(t)}};function kX(t,e,n){var r=e===void 0?null:e,o=function(c,u){var d=atob(c);if(u){for(var f=new Uint8Array(d.length),p=0,g=d.length;p<g;++p)f[p]=d.charCodeAt(p);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return d}(t,n!==void 0&&n),i=o.indexOf(`
`,10)+1,s=o.substring(i)+(r?"//# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var x1,R1,P1,lC,xX=(x1="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",R1=null,P1=!1,function(t){return lC=lC||kX(x1,R1,P1),new Worker(lC,t)});const uC={};let RX=class{constructor(e,n){this.cache=e,this.clientId=n,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var n;const r=new Set(((n=await this.cache.get(this.manifestKey))===null||n===void 0?void 0:n.keys)||[]);r.add(e),await this.cache.set(this.manifestKey,{keys:[...r]})}async remove(e){const n=await this.cache.get(this.manifestKey);if(n){const r=new Set(n.keys);return r.delete(e),r.size>0?await this.cache.set(this.manifestKey,{keys:[...r]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}};const PX={memory:()=>new aD().enclosedCache,localstorage:()=>new CX},N1=t=>PX[t],O1=t=>{const{openUrl:e,onRedirect:n}=t,r=pi(t,["openUrl","onRedirect"]);return Object.assign(Object.assign({},r),{openUrl:e===!1||e?e:n})},dC=new lX;let NX=class{constructor(e){let n,r;if(this.userCache=new aD().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await dC.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!Nm())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(Nm().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)r=e.cache;else{if(n=e.cacheLocation||"memory",!N1(n))throw new Error(`Invalid cache location "${n}"`);r=N1(n)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?jl:_X,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(s=>`auth0.${s}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:AX;var i;this.scope=jp("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new EX(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||ZL,this.cacheManager=new SX(r,r.allKeys?void 0:new RX(r,this.options.clientId),this.nowProvider),this.domainUrl=(i=this.options.domain,/^https?:\/\//.test(i)?i:`https://${i}`),this.tokenIssuer=((s,a)=>s?s.startsWith("https://")?s:`https://${s}/`:`${a}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&n==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new xX)}_url(e){const n=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||XL)));return`${this.domainUrl}${e}&auth0Client=${n}`}_authorizeUrl(e){return this._url(`/authorize?${$E(e)}`)}async _verifyIdToken(e,n,r){const o=await this.nowProvider();return TX({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:n,organization:r,leeway:this.options.leeway,max_age:(i=this.options.authorizationParams.max_age,typeof i!="string"?i:parseInt(i,10)||void 0),now:o});var i}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,n,r){const o=A1(cC()),i=A1(cC()),s=cC(),a=(d=>{const f=new Uint8Array(d);return(p=>{const g={"+":"-","/":"_","=":""};return p.replace(/[+/=]/g,v=>g[v])})(window.btoa(String.fromCharCode(...Array.from(f))))})(await(async d=>await Nm().subtle.digest({name:"SHA-256"},new TextEncoder().encode(d)))(s)),c=((d,f,p,g,v,y,b,C)=>Object.assign(Object.assign(Object.assign({client_id:d.clientId},d.authorizationParams),p),{scope:jp(f,p.scope),response_type:"code",response_mode:C||"query",state:g,nonce:v,redirect_uri:b||d.authorizationParams.redirect_uri,code_challenge:y,code_challenge_method:"S256"}))(this.options,this.scope,e,o,i,a,e.redirect_uri||this.options.authorizationParams.redirect_uri||r,n==null?void 0:n.response_mode),u=this._authorizeUrl(c);return{nonce:i,code_verifier:s,scope:c.scope,audience:c.audience||"default",redirect_uri:c.redirect_uri,state:o,url:u}}async loginWithPopup(e,n){var r;if(e=e||{},!(n=n||{}).popup&&(n.popup=(a=>{const c=window.screenX+(window.innerWidth-400)/2,u=window.screenY+(window.innerHeight-600)/2;return window.open(a,"auth0:authorize:popup",`left=${c},top=${u},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!n.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);n.popup.location.href=o.url;const i=await(a=>new Promise((c,u)=>{let d;const f=setInterval(()=>{a.popup&&a.popup.closed&&(clearInterval(f),clearTimeout(p),window.removeEventListener("message",d,!1),u(new fX(a.popup)))},1e3),p=setTimeout(()=>{clearInterval(f),u(new hX(a.popup)),window.removeEventListener("message",d,!1)},1e3*(a.timeoutInSeconds||60));d=function(g){if(g.data&&g.data.type==="authorization_response"){if(clearTimeout(p),clearInterval(f),window.removeEventListener("message",d,!1),a.popup.close(),g.data.response.error)return u(Zn.fromPayload(g.data.response));c(g.data.response)}},window.addEventListener("message",d)}))(Object.assign(Object.assign({},n),{timeoutInSeconds:n.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==i.state)throw new Zn("state_mismatch","Invalid state");const s=((r=e.authorizationParams)===null||r===void 0?void 0:r.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:i.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:s})}async getUser(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var n;const r=O1(e),{openUrl:o,fragment:i,appState:s}=r,a=pi(r,["openUrl","fragment","appState"]),c=((n=a.authorizationParams)===null||n===void 0?void 0:n.organization)||this.options.authorizationParams.organization,u=await this._prepareAuthorizeUrl(a.authorizationParams||{}),{url:d}=u,f=pi(u,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},f),{appState:s}),c&&{organization:c}));const p=i?`${d}#${i}`:d;o?await o(p):window.location.assign(p)}async handleRedirectCallback(e=window.location.href){const n=e.split("?").slice(1);if(n.length===0)throw new Error("There are no query params available for parsing.");const{state:r,code:o,error:i,error_description:s}=(f=>{f.indexOf("#")>-1&&(f=f.substring(0,f.indexOf("#")));const p=new URLSearchParams(f);return{state:p.get("state"),code:p.get("code")||void 0,error:p.get("error")||void 0,error_description:p.get("error_description")||void 0}})(n.join("")),a=this.transactionManager.get();if(!a)throw new Zn("missing_transaction","Invalid state");if(this.transactionManager.remove(),i)throw new dX(i,s||i,r,a.appState);if(!a.code_verifier||a.state&&a.state!==r)throw new Zn("state_mismatch","Invalid state");const c=a.organization,u=a.nonce,d=a.redirect_uri;return await this._requestToken(Object.assign({audience:a.audience,scope:a.scope,code_verifier:a.code_verifier,grant_type:"authorization_code",code:o},d?{redirect_uri:d}:{}),{nonceIn:u,organization:c}),{appState:a.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var n;const r=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:jp(this.scope,(n=e.authorizationParams)===null||n===void 0?void 0:n.scope)})}),o=await((i,s)=>{let a=uC[s];return a||(a=i().finally(()=>{delete uC[s],a=null}),uC[s]=a),a})(()=>this._getTokenSilently(r),`${this.options.clientId}::${r.authorizationParams.audience}::${r.authorizationParams.scope}`);return e.detailedResponse?o:o==null?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:n}=e,r=pi(e,["cacheMode"]);if(n!=="off"){const o=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(o)return o}if(n!=="cache-only"){if(!await(async(o,i=3)=>{for(let s=0;s<i;s++)if(await o())return!0;return!1})(()=>dC.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new VE;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),n!=="off"){const u=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(u)return u}const o=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(r):await this._getTokenFromIFrame(r),{id_token:i,access_token:s,oauthTokenScope:a,expires_in:c}=o;return Object.assign(Object.assign({id_token:i,access_token:s},a?{scope:a}:null),{expires_in:c})}finally{await dC.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},n={}){var r;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:jp(this.scope,(r=e.authorizationParams)===null||r===void 0?void 0:r.scope)})});return n=Object.assign(Object.assign({},uX),n),await this.loginWithPopup(o,n),(await this.cacheManager.get(new Ya({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const n=e.logoutParams||{},{federated:r}=n,o=pi(n,["federated"]),i=r?"&federated":"";return this._url(`/v2/logout?${$E(Object.assign({clientId:e.clientId},o))}`)+i}async logout(e={}){const n=O1(e),{openUrl:r}=n,o=pi(n,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const i=this._buildLogoutUrl(o);r?await r(i):r!==!1&&window.location.assign(i)}async _getTokenFromIFrame(e){const n=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),r=this.cookieStorage.get(this.orgHintCookieName);r&&!n.organization&&(n.organization=r);const{url:o,state:i,nonce:s,code_verifier:a,redirect_uri:c,scope:u,audience:d}=await this._prepareAuthorizeUrl(n,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new Zn("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const f=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,p=await((v,y,b=60)=>new Promise((C,S)=>{const w=window.document.createElement("iframe");w.setAttribute("width","0"),w.setAttribute("height","0"),w.style.display="none";const E=()=>{window.document.body.contains(w)&&(window.document.body.removeChild(w),window.removeEventListener("message",T,!1))};let T;const I=setTimeout(()=>{S(new VE),E()},1e3*b);T=function(A){if(A.origin!=y||!A.data||A.data.type!=="authorization_response")return;const _=A.source;_&&_.close(),A.data.response.error?S(Zn.fromPayload(A.data.response)):C(A.data.response),clearTimeout(I),window.removeEventListener("message",T,!1),setTimeout(E,2e3)},window.addEventListener("message",T,!1),window.document.body.appendChild(w),w.setAttribute("src",v)}))(o,this.domainUrl,f);if(i!==p.state)throw new Zn("state_mismatch","Invalid state");const g=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:a,code:p.code,grant_type:"authorization_code",redirect_uri:c,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:s,organization:n.organization});return Object.assign(Object.assign({},g),{scope:u,oauthTokenScope:g.scope,audience:d})}catch(f){throw f.error==="login_required"&&this.logout({openUrl:!1}),f}}async _getTokenUsingRefreshToken(e){const n=await this.cacheManager.get(new Ya({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(n&&n.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new iD(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const r=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const i=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:n&&n.refresh_token,redirect_uri:r}),o&&{timeout:o}));return Object.assign(Object.assign({},i),{scope:e.authorizationParams.scope,oauthTokenScope:i.scope,audience:e.authorizationParams.audience||"default"})}catch(i){if((i.message.indexOf("Missing Refresh Token")>-1||i.message&&i.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw i}}async _saveEntryInCache(e){const{id_token:n,decodedToken:r}=e,o=pi(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:r}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",n=await this.cacheManager.getIdToken(new Ya({clientId:this.options.clientId,audience:e,scope:this.scope})),r=this.userCache.get("@@user@@");return n&&n.id_token===(r==null?void 0:r.id_token)?r:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:e,audience:n,clientId:r}){const o=await this.cacheManager.get(new Ya({scope:e,audience:n,clientId:r}),60);if(o&&o.access_token){const{access_token:i,oauthTokenScope:s,expires_in:a}=o,c=await this._getIdTokenFromCache();return c&&Object.assign(Object.assign({id_token:c.id_token,access_token:i},s?{scope:s}:null),{expires_in:a})}}async _requestToken(e,n){const{nonceIn:r,organization:o}=n||{},i=await bX(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),s=await this._verifyIdToken(i.id_token,r,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},i),{decodedToken:s,scope:e.scope,audience:e.audience||"default"}),i.scope?{oauthTokenScope:i.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||s.claims.org_id),Object.assign(Object.assign({},i),{decodedToken:s})}};async function OX(t){const e=new NX(t);return await e.checkSession(),e}const uD=V(!1),Un=V(null),pd=V(t=>{const e=t(Un);return e?e.accountType==="AAD":!1}),Uke=V(t=>{const e=t(Un);return e?e.accountType==="MSA":!1}),MX=V(t=>t(Un)!==null),zo=V(null),LX=V(!0);function Qs(t,e){st().set(t,e)}function dD(t,e,n){return n!==void 0?n:e&&!t}function xr(){const t=D(RL),e=D(pd),n=!!D(Un);return dD(e,n,t)}function qE(){const t=st(),e=t.get(RL),n=t.get(pd),r=!!t.get(Un);return dD(n,r,e)}const KE="authInitStartTime";function hD(t,e){qE()&&aa({feature:"api",scenario:e,errorType:"missingToken",errorMessage:`User is authenticated but no token was available for ${e==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:t})})}function hI(t){const{providerType:e,apiName:n,extraInfo:r}=t,o=Date.now().toString();sa(KE,o),K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_providerType:e,...r})}})}function fI(t){const{providerType:e,apiName:n,extraInfo:r}=t,o=Date.now(),i=Wo(KE);if(i){const s=parseFloat(i),a=o-s;sessionStorage.removeItem(KE),K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_duration:a,eventInfo_customData:JSON.stringify({eventInfo_providerType:e,...r})}})}}function fD(t){const{authWorkflowAccountType:e,interactionType:n,correlationId:r,prompt:o,redirectUri:i,apiName:s,extraInfo:a}=t,c=Date.now().toString();rr(ME,c),K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:s,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",eventInfo_interactionType:n??"",eventInfo_correlationId:r??"",eventInfo_prompt:o??"",eventInfo_redirectUri:i??"",...a})}})}function WE(t){const{authWorkflowAccountType:e,isMSA:n,authority:r,correlationId:o,interactionType:i,apiName:s,extraInfo:a}=t,c=Date.now(),u=pn(ME);let d;if(u){const f=parseFloat(u);d=c-f,ro(ME)}K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:s,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",eventInfo_interactionType:i,eventInfo_correlationId:o,eventInfo_authority:r,eventInfo_isMSA:n??!1,...a}),eventInfo_duration:d??0}})}function pD(t){const{providerType:e,apiName:n,extraInfo:r}=t;K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_providerType:e,...r})}})}function Om(t){const{authWorkflowAccountType:e,apiName:n,duration:r,extraInfo:o}=t;K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:r??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e,...o})}})}function Eg(t){const{authWorkflowAccountType:e,apiName:n,errorMessage:r,errorType:o,errorExtraInfo:i,errorCode:s,extraInfo:a}=t;K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!1,eventInfo_apiName:n,eventInfo_errorType:o,eventInfo_errorMessage:r,eventInfo_errorCode:s,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",...a,...i})}})}function hC(t){const{authWorkflowAccountType:e,apiName:n}=t;rr(LE,"1"),K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e})}})}function mD(t){const{authWorkflowAccountType:e,apiName:n,duration:r}=t,o=pn(LE);o==="1"&&ro(LE),o==="1"&&K.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:r??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e})}})}var Bf,Ks,Su,Zi;class el{constructor(e,n){on(this,Bf);on(this,Ks,null);on(this,Su);on(this,Zi,null);Mt(this,Bf,e),Mt(this,Su,n)}async get(e){return(me(this,Zi)===null||me(this,Su)&&(!me(this,Ks)||me(this,Ks)<Date.now()-me(this,Su)))&&(Mt(this,Zi,me(this,Bf).call(this,e)),Mt(this,Ks,Date.now())),me(this,Zi)}set(e){Mt(this,Zi,e),Mt(this,Ks,Date.now())}reset(){Mt(this,Zi,null),Mt(this,Ks,null)}get isInstantiated(){return me(this,Zi)!==null}}Bf=new WeakMap,Ks=new WeakMap,Su=new WeakMap,Zi=new WeakMap;const vo=new el(DX);async function DX(){hI({apiName:Bo.INITIALIZE_START,providerType:"auth0"});const t=await OX(iH);fI({apiName:Bo.INITIALIZE_END,providerType:"auth0"});const e=new Map([["on",null],["off",null],["cache-only",null]]);async function n(i,s){const a=performance.now();try{const c=await t.getTokenSilently(i),u=performance.now();return Sc({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:u-a,customData:JSON.stringify({cacheMode:i.cacheMode??"on"})}),c}catch(c){c instanceof Zn?(o({options:i,startTime:a,authWorkflowAccountType:s,errorType:c.error,errorMessage:c.error_description,exception:c.stack}),c.error==="login_required"&&Qs(zo,{reason:"token-expired",provider:"auth0"})):c instanceof Error?o({options:i,startTime:a,authWorkflowAccountType:s,errorType:c.name,errorMessage:c.message,exception:c.stack}):o({options:i,startTime:a,authWorkflowAccountType:s,errorType:"unknown",errorMessage:`${c}`});return}}async function r(i){const s=await t.getUser();if(!s)return;const a=s.sub&&s.sub.startsWith("google")?"google":"apple",c=i.cacheMode??"on",u=e.get(c);if(!u){const d=n(i,a);e.set(c,d);const f=await d;return e.set(c,null),f}return u}function o(i){const{startTime:s,options:a,authWorkflowAccountType:c,errorType:u,errorMessage:d,exception:f}=i;Eg({authWorkflowAccountType:c,apiName:Bo.ACQUIRE_TOKEN_FAILURE,errorType:u,errorMessage:d,errorExtraInfo:{eventInfo_providerType:"auth0",eventInfo_exception:f??"",cacheMode:a.cacheMode??"on",duration:performance.now()-s}})}return{auth0:t,getAuth0AccessToken:r}}function pI(t){const e=t.split(".")[1];if(e===void 0)return;const n=e.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{const o=JSON.parse(r);return cX.parse(o)}catch{return}}async function jX(t,e){const{getAuth0AccessToken:n}=await vo.get(),{authorizationParams:r}=rf,o={...r,dob:t,ctry:e},i=await n({authorizationParams:o,cacheMode:"off"});if(!i)return;const s=pI(i);if(s)return s}async function UX(){const{getAuth0AccessToken:t}=await vo.get(),e=await t(rf);if(!e)return;const n=pI(e);if(n){if(n.sub.startsWith("google"))return"Google";if(n.sub.startsWith("apple"))return"Apple"}}function FX(t){switch(t){case"apple":return"Apple";case"google":return"Google";default:return}}const jh=new BroadcastChannel("cp.broadcast");class BX{constructor(){Z(this,"hasTrackedRedirectError",!1);Z(this,"CODE_RE",/[?&]code=[^&]+/);Z(this,"STATE_RE",/[?&]state=[^&]+/);Z(this,"ERROR_RE",/[?&]error=[^&]+/)}async handleRedirect(){try{const{auth0:e}=await vo.get();if(!this.hasAuthParams())return null;const n=performance.now();await e.handleRedirectCallback();const r=performance.now();Sc({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:r-n});const o=await e.getUser();if(!o)return null;const i=o.sub?this.getTokenType(o.sub):void 0;return WE({apiName:Bo.LOGIN_SUCCESS,authWorkflowAccountType:i}),mD({apiName:Bo.REAUTH_SUCCESS,authWorkflowAccountType:i}),jh.postMessage({eventName:"auth0.accountAdded"}),{id:o.sub,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(o.sub)}}catch(e){this.trackRedirectErrorOncePerSession(e)}return null}async handleRedirectWithoutAccount(){try{const{auth0:e}=await vo.get();if(this.hasAuthParams()){const n=performance.now();await e.handleRedirectCallback();const r=performance.now();Sc({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:r-n});const o=await e.getUser();if(!o)return;const i=o.sub?this.getTokenType(o.sub):void 0;WE({apiName:Bo.LOGIN_SUCCESS,authWorkflowAccountType:i}),jh.postMessage({eventName:"auth0.accountAdded"})}}catch(e){this.trackRedirectErrorOncePerSession(e)}}async getCurrentActiveUserAccount(){const{auth0:e}=await vo.get(),n=await e.getUser();if(!n)return null;const{sub:r}=n;return r?{id:r,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(r)}:null}async maybeInitializeAccountWithToken(){const{auth0:e,getAuth0AccessToken:n}=await vo.get(),r=await n(rf);if(!r)return null;const o=await e.getUser();if(!o)return null;const i=o.sub;return{userAccount:{id:i,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(i)},authToken:{accessToken:r,tokenType:this.getTokenType(i)}}}async logIn(e){const{connection:n}=e;if(!n)throw new Error("connection in LoginOpts are required");const{auth0:r}=await vo.get();return fD({apiName:Bo.LOGIN_START,authWorkflowAccountType:e.connection??void 0}),r.loginWithRedirect({authorizationParams:{...sH.authorizationParams,connection:this.getConnectionFromTokenType(n)}})}async logOut(){const{auth0:e}=await vo.get(),n=await e.getUser(),r=n&&n.sub?this.getTokenType(n.sub):void 0;try{await e.logout({logoutParams:{returnTo:window.location.origin}}),jh.postMessage({eventName:"auth0.accountRemoved"}),pD({apiName:Bo.LOGOUT_SUCCESS,providerType:"auth0"})}catch(o){Eg({authWorkflowAccountType:r,apiName:Bo.LOGOUT_FAILURE,errorMessage:`${o}`,errorExtraInfo:{eventInfo_providerType:"auth0"}}),console.error("Auth0 logout failed:",o)}}async getAuthToken(){try{const{auth0:e,getAuth0AccessToken:n}=await vo.get(),r=await n(rf);if(!r)return;const o=await e.getUser();if(o){const i=o.sub,s=this.getTokenType(i);return{accessToken:r,tokenType:s}}}catch{return}}async getUserInfo(){const{auth0:e}=await vo.get(),n=await e.getUser();if(n)return{mail:n.email??"",givenName:n.given_name??"",surname:n.surname??"",imgSrc:n.picture,isStudent:!1}}async getUserInfoFromToken(e){const n=pI(e);if(!n)return;const{email:r,name:o}=n;return{mail:r,givenName:o.split(" ")[0]??"",surname:"",imgSrc:"",isStudent:!1}}supportsTokenType(e){return e==="apple"||e==="google"}getTokenType(e){return e.startsWith("google")?"google":"apple"}getAccountType(e){return e.startsWith("google")?"Google":"Apple"}getConnectionFromTokenType(e){return e==="apple"?"apple":"google-oauth2"}hasAuthParams(e=window.location.search){return(this.CODE_RE.test(e)||this.ERROR_RE.test(e))&&this.STATE_RE.test(e)}trackRedirectErrorOncePerSession(e){this.hasTrackedRedirectError||(K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"auth0HandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${e}`}}),Eg({apiName:Bo.LOGIN_FAILURE,errorExtraInfo:{eventInfo_providerType:"auth0"},errorMessage:`${e}`})),this.hasTrackedRedirectError=!0}}function vf(){return so(DE,l.boolean().nullable())===!0}var YE=function(t,e){return YE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},YE(t,e)};function Fke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");YE(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var M1=function(){return M1=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},M1.apply(this,arguments)};function Bke(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Qt(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):o(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Hke(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function zke(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vke(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function $ke(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Yr;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(Yr||(Yr={}));const HX="v1.0",zX="https://graph.microsoft.com/",VX=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class Ec extends Error{static setGraphClientError(e){let n;return e instanceof Error?n=e:(n=new Ec,n.customError=e),n}constructor(e){super(e),Object.setPrototypeOf(this,Ec.prototype)}}const $X=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],GX=t=>{const e=i=>i.replace(/\/+$/,""),n=i=>i.replace(/^\/+/,""),r=(i,s)=>[e(i),n(s)].join("/");return Array.prototype.slice.call(t).reduce(r)},fC=t=>{const e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t},gD=t=>yD(t),vD=(t,e)=>(e.forEach(n=>qX(n)),yD(t,e)),yD=(t,e=VX)=>{if(t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");const n=t.indexOf(":"),r=t.indexOf("/");let o="";if(r!==-1)return n!==-1&&n<r?(o=t.substring(0,n),e.has(o)):(o=t.substring(0,r),e.has(o))}return!1},qX=t=>{if(t.indexOf("/")!==-1)throw new Ec("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class wc{constructor(e=[]){this.middlewareOptions=new Map;for(const n of e){const r=n.constructor;this.middlewareOptions.set(r,n)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,n){this.middlewareOptions.set(e,n)}}const KX=()=>{let t="";for(let e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t},bD=(t,e,n)=>{let r=null;if(typeof Request<"u"&&t instanceof Request)r=t.headers.get(n);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)r=e.headers.get(n);else if(e.headers instanceof Array){const o=e.headers;for(let i=0,s=o.length;i<s;i++)if(o[i][0]===n){r=o[i][1];break}}else e.headers[n]!==void 0&&(r=e.headers[n]);return r},CD=(t,e,n,r)=>{if(typeof Request<"u"&&t instanceof Request)t.headers.set(n,r);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers({[n]:r});else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(n,r);else if(e.headers instanceof Array){let o=0;const i=e.headers.length;for(;o<i;o++){const s=e.headers[o];if(s[0]===n){s[1]=r;break}}o===i&&e.headers.push([n,r])}else Object.assign(e.headers,{[n]:r})},SD=(t,e,n,r)=>{typeof Request<"u"&&t instanceof Request?t.headers.append(n,r):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers({[n]:r}):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(n,r):e.headers instanceof Array?e.headers.push([n,r]):e.headers===void 0?e.headers={[n]:r}:e.headers[n]===void 0?e.headers[n]=r:e.headers[n]+=`, ${r}`)},WX=(t,e)=>Qt(void 0,void 0,void 0,function*(){const n=e.headers.get("Content-Type")?yield e.blob():yield Promise.resolve(void 0),{method:r,headers:o,referrer:i,referrerPolicy:s,mode:a,credentials:c,cache:u,redirect:d,integrity:f,keepalive:p,signal:g}=e;return new Request(t,{method:r,headers:o,body:n,referrer:i,referrerPolicy:s,mode:a,credentials:c,cache:u,redirect:d,integrity:f,keepalive:p,signal:g})});class YX{constructor(e,n){this.authenticationProvider=e,this.authenticationProviderOptions=n}}var Uu;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(Uu||(Uu={}));class na{constructor(){this.featureUsage=Uu.NONE}static updateFeatureUsageFlag(e,n){let r;e.middlewareControl instanceof wc?r=e.middlewareControl.getMiddlewareOptions(na):e.middlewareControl=new wc,typeof r>"u"&&(r=new na,e.middlewareControl.setMiddlewareOptions(na,r)),r.setFeatureUsage(n)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class yf{constructor(e){this.authenticationProvider=e}execute(e){return Qt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(gD(n)||e.customHosts&&vD(n,e.customHosts)){let r;e.middlewareControl instanceof wc&&(r=e.middlewareControl.getMiddlewareOptions(YX));let o,i;r&&(o=r.authenticationProvider,i=r.authenticationProviderOptions),o||(o=this.authenticationProvider);const a=`Bearer ${yield o.getAccessToken(i)}`;SD(e.request,e.options,yf.AUTHORIZATION_HEADER,a),na.updateFeatureUsageFlag(e,Uu.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[yf.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}yf.AUTHORIZATION_HEADER="Authorization";class QX{execute(e){return Qt(this,void 0,void 0,function*(){e.response=yield fetch(e.request,e.options)})}}class mn{constructor(e=mn.DEFAULT_DELAY,n=mn.DEFAULT_MAX_RETRIES,r=mn.defaultShouldRetry){if(e>mn.MAX_DELAY&&n>mn.MAX_MAX_RETRIES){const o=new Error(`Delay and MaxRetries should not be more than ${mn.MAX_DELAY} and ${mn.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e>mn.MAX_DELAY){const o=new Error(`Delay should not be more than ${mn.MAX_DELAY}`);throw o.name="MaxLimitExceeded",o}else if(n>mn.MAX_MAX_RETRIES){const o=new Error(`MaxRetries should not be more than ${mn.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e<0&&n<0){const o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(e<0){const o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(n<0){const o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(e,mn.MAX_DELAY),this.maxRetries=Math.min(n,mn.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return mn.MAX_DELAY}}mn.DEFAULT_DELAY=3;mn.DEFAULT_MAX_RETRIES=3;mn.MAX_DELAY=180;mn.MAX_MAX_RETRIES=10;mn.defaultShouldRetry=()=>!0;class ra{constructor(e=new mn){this.options=e}isRetry(e){return ra.RETRY_STATUS_CODES.indexOf(e.status)!==-1}isBuffered(e,n){const r=typeof e=="string"?n.method:e.method;return!((r===Yr.PUT||r===Yr.PATCH||r===Yr.POST)&&bD(e,n,"Content-Type")==="application/octet-stream")}getDelay(e,n,r){const o=()=>Number(Math.random().toFixed(3)),i=e.headers!==void 0?e.headers.get(ra.RETRY_AFTER_HEADER):null;let s;return i!==null?Number.isNaN(Number(i))?s=Math.round((new Date(i).getTime()-Date.now())/1e3):s=Number(i):s=n>=2?this.getExponentialBackOffTime(n)+r+o():r+o(),Math.min(s,this.options.getMaxDelay()+o())}getExponentialBackOffTime(e){return Math.round(1/2*(Math.pow(2,e)-1))}sleep(e){return Qt(this,void 0,void 0,function*(){const n=e*1e3;return new Promise(r=>setTimeout(r,n))})}getOptions(e){let n;return e.middlewareControl instanceof wc&&(n=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new mn,this.options)),n}executeWithRetry(e,n,r){return Qt(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(e),n<r.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&r.shouldRetry(r.delay,n,e.request,e.options,e.response)){++n,CD(e.request,e.options,ra.RETRY_ATTEMPT_HEADER,n.toString());const o=this.getDelay(e.response,n,r.delay);return yield this.sleep(o),yield this.executeWithRetry(e,n,r)}else return})}execute(e){return Qt(this,void 0,void 0,function*(){const r=this.getOptions(e);return na.updateFeatureUsageFlag(e,Uu.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,r)})}setNext(e){this.nextMiddleware=e}}ra.RETRY_STATUS_CODES=[429,503,504];ra.RETRY_ATTEMPT_HEADER="Retry-Attempt";ra.RETRY_AFTER_HEADER="Retry-After";class So{constructor(e=So.DEFAULT_MAX_REDIRECTS,n=So.defaultShouldRedirect){if(e>So.MAX_MAX_REDIRECTS){const r=new Error(`MaxRedirects should not be more than ${So.MAX_MAX_REDIRECTS}`);throw r.name="MaxLimitExceeded",r}if(e<0){const r=new Error("MaxRedirects should not be negative");throw r.name="MinExpectationNotMet",r}this.maxRedirects=e,this.shouldRedirect=n}}So.DEFAULT_MAX_REDIRECTS=5;So.MAX_MAX_REDIRECTS=20;So.defaultShouldRedirect=()=>!0;let md=class ja{constructor(e=new So){this.options=e}isRedirect(e){return ja.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1}hasLocationHeader(e){return e.headers.has(ja.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(ja.LOCATION_HEADER)}isRelativeURL(e){return e.indexOf("://")===-1}shouldDropAuthorizationHeader(e,n){const r=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=r.exec(e);let i,s;o!==null&&(i=o[0]);const a=r.exec(n);return a!==null&&(s=a[0]),typeof i<"u"&&typeof s<"u"&&i!==s}updateRequestUrl(e,n){return Qt(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?e:yield WX(e,n.request)})}getOptions(e){let n;return e.middlewareControl instanceof wc&&(n=e.middlewareControl.getMiddlewareOptions(So)),typeof n>"u"&&(n=Object.assign(new So,this.options)),n}executeWithRedirect(e,n,r){return Qt(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(e);const o=e.response;if(n<r.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&r.shouldRedirect(o)){if(++n,o.status===ja.STATUS_CODE_SEE_OTHER)e.options.method=Yr.GET,delete e.options.body;else{const i=this.getLocationHeader(o);!this.isRelativeURL(i)&&this.shouldDropAuthorizationHeader(o.url,i)&&delete e.options.headers[ja.AUTHORIZATION_HEADER],yield this.updateRequestUrl(i,e)}yield this.executeWithRedirect(e,n,r)}else return})}execute(e){return Qt(this,void 0,void 0,function*(){const r=this.getOptions(e);return e.options.redirect=ja.MANUAL_REDIRECT,na.updateFeatureUsageFlag(e,Uu.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,r)})}setNext(e){this.nextMiddleware=e}};md.REDIRECT_STATUS_CODES=[301,302,303,307,308];md.STATUS_CODE_SEE_OTHER=303;md.LOCATION_HEADER="Location";md.AUTHORIZATION_HEADER="Authorization";md.MANUAL_REDIRECT="manual";const JX="3.0.7";class Qr{execute(e){return Qt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(gD(n)||e.customHosts&&vD(n,e.customHosts)){let r=bD(e.request,e.options,Qr.CLIENT_REQUEST_ID_HEADER);r||(r=KX(),CD(e.request,e.options,Qr.CLIENT_REQUEST_ID_HEADER,r));let o=`${Qr.PRODUCT_NAME}/${JX}`,i;if(e.middlewareControl instanceof wc&&(i=e.middlewareControl.getMiddlewareOptions(na)),i){const s=i.getFeatureUsage();o+=` (${Qr.FEATURE_USAGE_STRING}=${s})`}SD(e.request,e.options,Qr.SDK_VERSION_HEADER,o)}else delete e.options.headers[Qr.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[Qr.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}Qr.CLIENT_REQUEST_ID_HEADER="client-request-id";Qr.SDK_VERSION_HEADER="SdkVersion";Qr.PRODUCT_NAME="graph-js";Qr.FEATURE_USAGE_STRING="featureUsage";function ED(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var L1;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(L1||(L1={}));var di;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(di||(di={}));var QE;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(QE||(QE={}));var wg;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(wg||(wg={}));var Tg;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(Tg||(Tg={}));class Uh{static parseDocumentResponse(e,n){return typeof DOMParser<"u"?new Promise((r,o)=>{e.text().then(i=>{try{const a=new DOMParser().parseFromString(i,n);r(a)}catch(s){o(s)}})}):Promise.resolve(e.body)}static convertResponse(e,n){return Qt(this,void 0,void 0,function*(){if(e.status===204)return Promise.resolve();let r;const o=e.headers.get("Content-type");switch(n){case di.ARRAYBUFFER:r=yield e.arrayBuffer();break;case di.BLOB:r=yield e.blob();break;case di.DOCUMENT:r=yield Uh.parseDocumentResponse(e,QE.TEXT_XML);break;case di.JSON:r=yield e.json();break;case di.STREAM:r=yield Promise.resolve(e.body);break;case di.TEXT:r=yield e.text();break;default:if(o!==null){const i=o.split(";")[0];new RegExp(Tg.DOCUMENT).test(i)?r=yield Uh.parseDocumentResponse(e,i):new RegExp(Tg.IMAGE).test(i)?r=e.blob():i===wg.TEXT_PLAIN?r=yield e.text():i===wg.APPLICATION_JSON?r=yield e.json():r=Promise.resolve(e.body)}else r=Promise.resolve(e.body);break}return r})}static getResponse(e,n,r){return Qt(this,void 0,void 0,function*(){if(n===di.RAW)return Promise.resolve(e);{const o=yield Uh.convertResponse(e,n);if(e.ok)if(typeof r=="function")r(null,o);else return o;else throw o}})}}class XX{constructor(e){this.provider=e}getAccessToken(){return Qt(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.provider((r,o)=>Qt(this,void 0,void 0,function*(){if(o)e(o);else{if(!r){const s="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";r=new Ec(s)}const i=yield Ec.setGraphClientError(r);n(i)}}))})})}}class Fh extends Error{constructor(e=-1,n,r){super(n||r&&r.message),Object.setPrototypeOf(this,Fh.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=r?r.stack:this.stack}}class Ig{static constructError(e,n,r){const o=new Fh(n,"",e);return e.name!==void 0&&(o.code=e.name),o.body=e.toString(),o.date=new Date,o.headers=r==null?void 0:r.headers,o}static constructErrorFromResponse(e,n,r){const o=e.error,i=new Fh(n,o.message);return i.code=o.code,o.innerError!==void 0&&(i.requestId=o.innerError["request-id"],i.date=new Date(o.innerError.date)),i.body=JSON.stringify(o),i.headers=r==null?void 0:r.headers,i}static getError(e=null,n=-1,r,o){return Qt(this,void 0,void 0,function*(){let i;if(e&&e.error?i=Ig.constructErrorFromResponse(e,n,o):e instanceof Error?i=Ig.constructError(e,n,o):(i=new Fh(n),i.body=e),typeof r=="function")r(i,null);else return i})}}class ZX{constructor(e,n,r){this.parsePath=o=>{if(o.indexOf("https://")!==-1){o=o.replace("https://","");const s=o.indexOf("/");s!==-1&&(this.urlComponents.host="https://"+o.substring(0,s),o=o.substring(s+1,o.length));const a=o.indexOf("/");a!==-1&&(this.urlComponents.version=o.substring(0,a),o=o.substring(a+1,o.length))}o.charAt(0)==="/"&&(o=o.substr(1));const i=o.indexOf("?");if(i===-1)this.urlComponents.path=o;else{this.urlComponents.path=o.substr(0,i);const s=o.substring(i+1,o.length).split("&");for(const a of s)this.parseQueryParameter(a)}},this.httpClient=e,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(r)}addCsvQueryParameter(e,n,r){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let o=[];r.length>1&&typeof n=="string"?o=Array.prototype.slice.call(r):typeof n=="string"?o.push(n):o=o.concat(n),this.urlComponents.oDataQueryParams[e]+=o.join(",")}buildFullUrl(){const e=GX([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,n=[];if(Object.keys(e.oDataQueryParams).length!==0)for(const r in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,r)&&n.push(r+"="+e.oDataQueryParams[r]);if(Object.keys(e.otherURLQueryParams).length!==0)for(const r in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,r)&&n.push(r+"="+e.otherURLQueryParams[r]);if(e.otherURLQueryOptions.length!==0)for(const r of e.otherURLQueryOptions)n.push(r);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1){const n=e.split("&");for(const r of n)this.parseQueryParamenterString(r)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.setURLComponentsQueryParamater(n,e[n]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const n=e.indexOf("="),r=e.substring(0,n),o=e.substring(n+1);this.setURLComponentsQueryParamater(r,o)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,n){if($X.indexOf(e)!==-1){const r=this.urlComponents.oDataQueryParams[e],o=r&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=o?r+","+n:n}else this.urlComponents.otherURLQueryParams[e]=n}isValidQueryKeyValuePair(e){const n=e.indexOf("=");return!(n===-1||e.indexOf("(")!==-1&&e.indexOf("(")<n)}updateRequestOptions(e){const n=Object.assign({},e.headers);if(this.config.fetchOptions!==void 0){const r=Object.assign({},this.config.fetchOptions);Object.assign(e,r),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(n,e.headers),Object.assign(n,this._headers),e.headers=n}send(e,n,r){var o;return Qt(this,void 0,void 0,function*(){let i;const s=new wc(this._middlewareOptions);this.updateRequestOptions(n);const a=(o=this.config)===null||o===void 0?void 0:o.customHosts;try{return i=(yield this.httpClient.sendRequest({request:e,options:n,middlewareControl:s,customHosts:a})).response,yield Uh.getResponse(i,this._responseType,r)}catch(c){if(c instanceof Ec)throw c;let u;throw i&&(u=i.status),yield Ig.getError(c,u,r,i)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const e=Object.keys(this._headers);for(const n of e)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(e,n){return this._headers[e]=n,this}headers(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._headers[n]=e[n]);return this}option(e,n){return this._options[e]=n,this}options(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._options[n]=e[n]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(e=!0){return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return Qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Yr.GET};return yield this.send(n,r,e)})}post(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:Yr.POST,body:fC(e)};return(e&&e.constructor&&e.constructor.name)==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),yield this.send(r,o,n)})}create(e,n){return Qt(this,void 0,void 0,function*(){return yield this.post(e,n)})}put(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:Yr.PUT,body:fC(e)};return yield this.send(r,o,n)})}patch(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:Yr.PATCH,body:fC(e)};return yield this.send(r,o,n)})}update(e,n){return Qt(this,void 0,void 0,function*(){return yield this.patch(e,n)})}delete(e){return Qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Yr.DELETE};return yield this.send(n,r,e)})}del(e){return Qt(this,void 0,void 0,function*(){return yield this.delete(e)})}getStream(e){return Qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Yr.GET};return this.responseType(di.STREAM),yield this.send(n,r,e)})}putStream(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:Yr.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(r,o,n)})}}class wD{constructor(...e){if(!e||!e.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...e)}setMiddleware(...e){e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]}parseMiddleWareArray(e){e.forEach((n,r)=>{r<e.length-1&&n.setNext(e[r+1])}),this.middleware=e[0]}sendRequest(e){return Qt(this,void 0,void 0,function*(){if(typeof e.request=="string"&&e.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(e),e})}}const eZ=()=>typeof process=="object"&&typeof ED=="function";class mI{static createWithAuthenticationProvider(e){const n=new yf(e),r=new ra(new mn),o=new Qr,i=new QX;if(n.setNext(r),eZ()){const s=new md(new So);r.setNext(s),s.setNext(o)}else r.setNext(o);return o.setNext(i),mI.createWithMiddleware(n)}static createWithMiddleware(...e){return new wD(...e)}}const tZ=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){const t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){const t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};class _g{static init(e){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=r==="authProvider"?new XX(e[r]):e[r]);return _g.initWithMiddleware(n)}static initWithMiddleware(e){return new _g(e)}constructor(e){this.config={baseUrl:zX,debugLogging:!1,defaultVersion:HX},tZ();for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);let n;if(e.authProvider!==void 0&&e.middleware!==void 0){const r=new Error;throw r.name="AmbiguityInInitialization",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",r}else if(e.authProvider!==void 0)n=mI.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new wD(...[].concat(e.middleware));else{const r=new Error;throw r.name="InvalidMiddlewareChain",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",r}this.httpClient=n}api(e){return new ZX(this.httpClient,this.config,e)}}const nZ=["CAREERCOACH_STUDENTS","EXCHANGESTANDARD_STUDENT","M365EDU_A3_STUDENT","M365EDU_A3_STUUSEBNFT","M365EDU_A3_STUUSEBNFT_RPA1","M365EDU_A5_STUDENT","M365EDU_A5_STUUSEBNFT","M365EDU_A5_NOPSTNCONF_STUUSEBNFT","OFFICESUBSCRIPTION_STUDENT","ATP_ENTERPRISE_STUDENT","ATP_ENTERPRISE_STUDENTS_USE_BENEFIT","POWER_BI_STANDARD_STUDENT","MCOEV_STUDENT","MEE_STUDENT","STANDARDWOFFPACK_STUDENT","STANDARDWOFFPACK_IW_STUDENT","ENTERPRISEPACKPLUS_STUDENT","ENTERPRISEPREMIUM_STUDENT","WIN10_ENT_A3_STU","MCO_TEAMS_EDU_HS_STUDENT","PROJECT_PROFESSIONAL_STUDENT","PROJECT_P1_STUDENT"];function rZ(t){return _g.init({authProvider:e=>{e(null,t)}})}async function pC(t,e){const n=performance.now(),r=await e;return K.trackEvent({name:"system",data:{eventName:"externalApiResponse",eventInfo_id:t,eventInfo_duration:performance.now()-n,eventInfo_service:"microsoft-graph"}}),r}async function oZ(t){return t.api(iT.graphMeApiSuffix).get()}async function iZ(t){try{const e=await t.api(iT.graphMeImageApiSuffix).get();return URL.createObjectURL(e)}catch{return}}async function sZ(t){const e=gt(pd);if(et("aad-student")&&e)try{const n=await t.api(iT.graphMeLicenseDetails).get();return n&&n.value.some(o=>o.skuPartNumber&&nZ.includes(o.skuPartNumber))}catch(n){return console.error("Error checking student status:",n),!1}else return!1}async function D1(t){const e=rZ(t),[n,r,o]=await Promise.all([pC("user",oZ(e)),pC("user_photo",iZ(e)),pC("is_student",sZ(e))]);return{...n,imgSrc:r,isStudent:o}}/*! @azure/msal-common v14.15.0 2024-09-20 */const le={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Up={CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},ca=[le.OPENID_SCOPE,le.PROFILE_SCOPE,le.OFFLINE_ACCESS_SCOPE],j1=[...ca,le.EMAIL_SCOPE],Ti={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Gn={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},oa={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Fp={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Yn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},U1={PLAIN:"plain",S256:"S256"},np={QUERY:"query",FRAGMENT:"fragment"},aZ={...np},TD={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Bp={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},lr={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},it={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},gI="appmetadata",cZ="client_info",Bh="1",Ag={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Kr={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Xn={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},jt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Hh={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},F1={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},B1={username:"username",password:"password"},Hp={httpSuccess:200,httpBadRequest:400},Sl={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},mC={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Fs={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},lZ={Pop:"pop"},uZ=300;/*! @azure/msal-common v14.15.0 2024-09-20 */const yy="unexpected_error",dZ="post_request_failed";/*! @azure/msal-common v14.15.0 2024-09-20 */const H1={[yy]:"Unexpected error in authentication.",[dZ]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class wt extends Error{constructor(e,n,r){const o=n?`${e}: ${n}`:e;super(o),Object.setPrototypeOf(this,wt.prototype),this.errorCode=e||le.EMPTY_STRING,this.errorMessage=n||le.EMPTY_STRING,this.subError=r||le.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function ID(t,e){return new wt(t,e?`${H1[t]} ${e}`:H1[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */const vI="client_info_decoding_error",_D="client_info_empty_error",yI="token_parsing_error",AD="null_or_empty_token",Qi="endpoints_resolution_error",kD="network_error",xD="openid_config_error",RD="hash_not_deserialized",Fu="invalid_state",PD="state_mismatch",kg="state_not_found",ND="nonce_mismatch",bI="auth_time_not_found",OD="max_age_transpired",hZ="multiple_matching_tokens",fZ="multiple_matching_accounts",MD="multiple_matching_appMetadata",LD="request_cannot_be_made",DD="cannot_remove_empty_scope",jD="cannot_append_scopeset",JE="empty_input_scopeset",pZ="device_code_polling_cancelled",mZ="device_code_expired",gZ="device_code_unknown_error",CI="no_account_in_silent_request",UD="invalid_cache_record",SI="invalid_cache_environment",XE="no_account_found",ZE="no_crypto_object",e0="unexpected_credential_type",vZ="invalid_assertion",yZ="invalid_client_credential",Ii="token_refresh_required",bZ="user_timeout_reached",FD="token_claims_cnf_required_for_signedjwt",BD="authorization_code_missing_from_server_response",HD="binding_key_not_removed",zD="end_session_endpoint_not_supported",EI="key_id_missing",CZ="no_network_connectivity",SZ="user_canceled",EZ="missing_tenant_id_error",pt="method_not_implemented",wZ="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.15.0 2024-09-20 */const z1={[vI]:"The client info could not be parsed/decoded correctly",[_D]:"The client info was empty",[yI]:"Token cannot be parsed",[AD]:"The token is null or empty",[Qi]:"Endpoints cannot be resolved",[kD]:"Network request failed",[xD]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[RD]:"The hash parameters could not be deserialized",[Fu]:"State was not the expected format",[PD]:"State mismatch error",[kg]:"State not found",[ND]:"Nonce mismatch error",[bI]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[OD]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[hZ]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[fZ]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[MD]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[LD]:"Token request cannot be made without authorization code or refresh token.",[DD]:"Cannot remove null or empty scope from ScopeSet",[jD]:"Cannot append ScopeSet",[JE]:"Empty input ScopeSet cannot be processed",[pZ]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[mZ]:"Device code is expired.",[gZ]:"Device code stopped polling for unknown reasons.",[CI]:"Please pass an account object, silent flow is not supported without account information",[UD]:"Cache record object was null or undefined.",[SI]:"Invalid environment when attempting to create cache entry",[XE]:"No account found in cache for given key.",[ZE]:"No crypto object detected.",[e0]:"Unexpected credential type.",[vZ]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[yZ]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ii]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[bZ]:"User defined timeout for device code polling reached",[FD]:"Cannot generate a POP jwt if the token_claims are not populated",[BD]:"Server response does not contain an authorization code to proceed",[HD]:"Could not remove the credential's binding key from storage.",[zD]:"The provided authority does not support logout",[EI]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[CZ]:"No network connectivity. Check your internet connection.",[SZ]:"User cancelled the flow.",[EZ]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[pt]:"This method has not been implemented",[wZ]:"The nested app auth bridge is disabled"};class gd extends wt{constructor(e,n){super(e,n?`${z1[e]}: ${n}`:z1[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,gd.prototype)}}function Ae(t,e){return new gd(t,e)}/*! @azure/msal-common v14.15.0 2024-09-20 */const xg={createNewGuid:()=>{throw Ae(pt)},base64Decode:()=>{throw Ae(pt)},base64Encode:()=>{throw Ae(pt)},base64UrlEncode:()=>{throw Ae(pt)},encodeKid:()=>{throw Ae(pt)},async getPublicKeyThumbprint(){throw Ae(pt)},async removeTokenBindingKey(){throw Ae(pt)},async clearKeystore(){throw Ae(pt)},async signJwt(){throw Ae(pt)},async hashString(){throw Ae(pt)}};/*! @azure/msal-common v14.15.0 2024-09-20 */var hn;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(hn||(hn={}));class Qo{constructor(e,n,r){this.level=hn.Info;const o=()=>{},i=e||Qo.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:hn.Info,this.correlationId=i.correlationId||le.EMPTY_STRING,this.packageName=n||le.EMPTY_STRING,this.packageVersion=r||le.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:hn.Info}}clone(e,n,r){return new Qo({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${hn[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,i,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:hn.Error,containsPii:!1,correlationId:n||le.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:hn.Error,containsPii:!0,correlationId:n||le.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:hn.Warning,containsPii:!1,correlationId:n||le.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:hn.Warning,containsPii:!0,correlationId:n||le.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:hn.Info,containsPii:!1,correlationId:n||le.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:hn.Info,containsPii:!0,correlationId:n||le.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:hn.Verbose,containsPii:!1,correlationId:n||le.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:hn.Verbose,containsPii:!0,correlationId:n||le.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:hn.Trace,containsPii:!1,correlationId:n||le.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:hn.Trace,containsPii:!0,correlationId:n||le.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.15.0 2024-09-20 */const VD="@azure/msal-common",wI="14.15.0";/*! @azure/msal-common v14.15.0 2024-09-20 */const bf={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net"};/*! @azure/msal-common v14.15.0 2024-09-20 */function tl(t,e){const n=TZ(t);try{const r=e(n);return JSON.parse(r)}catch{throw Ae(yI)}}function TZ(t){if(!t)throw Ae(AD);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw Ae(yI);return n[2]}function $D(t,e){if(e===0||Date.now()-3e5>t+e)throw Ae(OD)}/*! @azure/msal-common v14.15.0 2024-09-20 */function Mi(){return Math.round(new Date().getTime()/1e3)}function t0(t,e){const n=Number(t)||0;return Mi()+e>n}function IZ(t){return Number(t)>Mi()}/*! @azure/msal-common v14.15.0 2024-09-20 */function Ql(t){return[_Z(t),AZ(t),kZ(t),xZ(t),RZ(t)].join(lr.CACHE_KEY_SEPARATOR).toLowerCase()}function by(t,e,n,r,o){return{credentialType:it.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:o}}function Cy(t,e,n,r,o,i,s,a,c,u,d,f,p,g,v){var b,C;const y={homeAccountId:t,credentialType:it.ACCESS_TOKEN,secret:n,cachedAt:Mi().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:d||jt.BEARER};if(f&&(y.userAssertionHash=f),u&&(y.refreshOn=u.toString()),g&&(y.requestedClaims=g,y.requestedClaimsHash=v),((b=y.tokenType)==null?void 0:b.toLowerCase())!==jt.BEARER.toLowerCase())switch(y.credentialType=it.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case jt.POP:const S=tl(n,c);if(!((C=S==null?void 0:S.cnf)!=null&&C.kid))throw Ae(FD);y.keyId=S.cnf.kid;break;case jt.SSH:y.keyId=p}return y}function GD(t,e,n,r,o,i,s){const a={credentialType:it.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function TI(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function V1(t){return t?TI(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===it.ACCESS_TOKEN||t.credentialType===it.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function $1(t){return t?TI(t)&&t.hasOwnProperty("realm")&&t.credentialType===it.ID_TOKEN:!1}function G1(t){return t?TI(t)&&t.credentialType===it.REFRESH_TOKEN:!1}function _Z(t){return[t.homeAccountId,t.environment].join(lr.CACHE_KEY_SEPARATOR).toLowerCase()}function AZ(t){const e=t.credentialType===it.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(lr.CACHE_KEY_SEPARATOR).toLowerCase()}function kZ(t){return(t.target||"").toLowerCase()}function xZ(t){return(t.requestedClaimsHash||"").toLowerCase()}function RZ(t){return t.tokenType&&t.tokenType.toLowerCase()!==jt.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function PZ(t,e){const n=t.indexOf(Xn.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function NZ(t,e){let n=!1;t&&(n=t.indexOf(Hh.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function OZ({environment:t,clientId:e}){return[gI,t,e].join(lr.CACHE_KEY_SEPARATOR).toLowerCase()}function MZ(t,e){return e?t.indexOf(gI)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function LZ(t,e){return e?t.indexOf(Ag.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function q1(){return Mi()+Ag.REFRESH_TIME_SECONDS}function zp(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function gC(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function K1(t){return t.expiresAt<=Mi()}/*! @azure/msal-common v14.15.0 2024-09-20 */const qD="redirect_uri_empty",DZ="claims_request_parsing_error",KD="authority_uri_insecure",Eh="url_parse_error",WD="empty_url_error",YD="empty_input_scopes_error",QD="invalid_prompt_value",II="invalid_claims",JD="token_request_empty",XD="logout_request_empty",ZD="invalid_code_challenge_method",_I="pkce_params_missing",AI="invalid_cloud_discovery_metadata",e5="invalid_authority_metadata",t5="untrusted_authority",Sy="missing_ssh_jwk",n5="missing_ssh_kid",jZ="missing_nonce_authentication_header",UZ="invalid_authentication_header",r5="cannot_set_OIDCOptions",o5="cannot_allow_native_broker",i5="authority_mismatch";/*! @azure/msal-common v14.15.0 2024-09-20 */const FZ={[qD]:"A redirect URI is required for all calls, and none has been set.",[DZ]:"Could not parse the given claims request object.",[KD]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Eh]:"URL could not be parsed into appropriate segments.",[WD]:"URL was empty or null.",[YD]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[QD]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[II]:"Given claims parameter must be a stringified JSON object.",[JD]:"Token request was empty and not found in cache.",[XD]:"The logout request was null or undefined.",[ZD]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[_I]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[AI]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[e5]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[t5]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Sy]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[n5]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[jZ]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[UZ]:"Invalid authentication header provided",[r5]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[o5]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[i5]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Ey extends wt{constructor(e){super(e,FZ[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Ey.prototype)}}function Jt(t){return new Ey(t)}/*! @azure/msal-common v14.15.0 2024-09-20 */class qo{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(n[o(s)]=o(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class wn{constructor(e){const n=e?qo.trimArrayEntries([...e]):[],r=n?qo.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||le.EMPTY_STRING).split(" ");return new wn(r)}static createSearchScopes(e){const n=new wn(e);return n.containsOnlyOIDCScopes()?n.removeScope(le.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}validateInputScopes(e){if(!e||e.length<1)throw Jt(YD)}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new wn(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return j1.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw Ae(jD)}}removeScope(e){if(!e)throw Ae(DD);this.scopes.delete(e.trim())}removeOIDCScopes(){j1.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ae(JE);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw Ae(JE);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return n.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):le.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.15.0 2024-09-20 */function Rg(t,e){if(!t)throw Ae(_D);try{const n=e(t);return JSON.parse(n)}catch{throw Ae(vI)}}function Jl(t){if(!t)throw Ae(vI);const e=t.split(lr.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?le.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.15.0 2024-09-20 */function Pg(t,e){return!!t&&!!e&&t===e.split(".")[1]}function kI(t,e,n,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:u}=r,d=s||c||u||"";return{tenantId:d,localAccountId:o||i||"",name:a,isHomeTenant:Pg(d,t)}}else return{tenantId:n,localAccountId:e,isHomeTenant:Pg(n,t)}}function xI(t,e,n,r){let o=t;if(e){const{isHomeTenant:i,...s}=e;o={...t,...s}}if(n){const{isHomeTenant:i,...s}=kI(t.homeAccountId,t.localAccountId,t.tenantId,n);return o={...o,...s,idTokenClaims:n,idToken:r},o}return o}/*! @azure/msal-common v14.15.0 2024-09-20 */const Ho={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.15.0 2024-09-20 */function s5(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v14.15.0 2024-09-20 */const ns={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.15.0 2024-09-20 */class jn{generateAccountId(){return[this.homeAccountId,this.environment].join(lr.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return jn.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join(lr.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,n,r){var u,d,f,p,g,v;const o=new jn;n.authorityType===Ho.Adfs?o.authorityType=Bp.ADFS_ACCOUNT_TYPE:n.protocolMode===ns.AAD?o.authorityType=Bp.MSSTS_ACCOUNT_TYPE:o.authorityType=Bp.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=Rg(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||n&&n.getPreferredCache();if(!s)throw Ae(SI);o.environment=s,o.realm=(i==null?void 0:i.utid)||s5(e.idTokenClaims)||"",o.localAccountId=(i==null?void 0:i.uid)||((u=e.idTokenClaims)==null?void 0:u.oid)||((d=e.idTokenClaims)==null?void 0:d.sub)||"";const a=((f=e.idTokenClaims)==null?void 0:f.preferred_username)||((p=e.idTokenClaims)==null?void 0:p.upn),c=(g=e.idTokenClaims)!=null&&g.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=((v=e.idTokenClaims)==null?void 0:v.name)||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const y=kI(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[y]}return o}static createFromAccountInfo(e,n,r){var i;const o=new jn;return o.authorityType=e.authorityType||Bp.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=n,o.msGraphHost=r,o.tenantProfiles=Array.from(((i=e.tenantProfiles)==null?void 0:i.values())||[]),o}static generateHomeAccountId(e,n,r,o,i){if(!(n===Ho.Adfs||n===Ho.Dsts)){if(e)try{const s=Rg(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=n.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&o}}/*! @azure/msal-common v14.15.0 2024-09-20 */function a5(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Ng(t){if(!t||t.indexOf("=")<0)return null;try{const e=a5(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.error||n.error_description||n.state)return n}catch{throw Ae(RD)}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */class Et{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Jt(WD);e.includes("#")||(this._urlString=Et.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return qo.endsWith(n,"?")?n=n.slice(0,-1):qo.endsWith(n,"?/")&&(n=n.slice(0,-2)),qo.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Jt(Eh)}if(!e.HostNameAndPort||!e.PathSegments)throw Jt(Eh);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Jt(KD)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return Et.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===oa.COMMON||r[0]===oa.ORGANIZATIONS)&&(r[0]=e),Et.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Jt(Eh);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Jt(Eh);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===le.FORWARD_SLASH){const o=new Et(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Et(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Ng(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const c5={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},W1=c5.endpointMetadata,RI=c5.instanceDiscoveryMetadata,l5=new Set;RI.metadata.forEach(t=>{t.aliases.forEach(e=>{l5.add(e)})});function BZ(t,e){var o;let n;const r=t.canonicalAuthority;if(r){const i=new Et(r).getUrlComponents().HostNameAndPort;n=Y1(i,(o=t.cloudDiscoveryMetadata)==null?void 0:o.metadata,Kr.CONFIG,e)||Y1(i,RI.metadata,Kr.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function Y1(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const o=Og(e,t);if(o)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function HZ(t){return Og(RI.metadata,t)}function Og(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */const u5="cache_quota_exceeded",PI="cache_error_unknown";/*! @azure/msal-common v14.15.0 2024-09-20 */const vC={[u5]:"Exceeded cache storage capacity.",[PI]:"Unexpected error occurred when using cache storage."};class sc extends Error{constructor(e,n){const r=n||(vC[e]?vC[e]:vC[PI]);super(`${e}: ${r}`),Object.setPrototypeOf(this,sc.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Bu{constructor(e,n,r,o){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(VD,wI),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const n=this.getAllAccounts(e);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e){const n=this.getAccountsFilteredBy(e);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,n){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,n==null?void 0:n.tenantId,n))}getTenantedAccountInfoByFilter(e,n,r,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const a=this.getIdToken(e,n,r.tenantId);return a&&(s=tl(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=xI(e,r,s,a==null?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,n,r){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const s=this.getTokenKeys();if(n){const c=i.get(n);if(c)i=new Map([[n,c]]);else return[]}const a=[];return i.forEach(c=>{const u=this.getTenantedAccountInfoByFilter(o,s,c,r);u&&a.push(u)}),a}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var o,i,s,a;if(!e)throw Ae(UD);try{e.account&&this.setAccount(e.account),e.idToken&&(n==null?void 0:n.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(n==null?void 0:n.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(n==null?void 0:n.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(c){throw(o=this.commonLogger)==null||o.error("CacheManager.saveCacheRecord: failed"),c instanceof Error?((i=this.commonLogger)==null||i.errorPii(`CacheManager.saveCacheRecord: ${c.message}`,r),c.name==="QuotaExceededError"||c.name==="NS_ERROR_DOM_QUOTA_REACHED"||c.message.includes("exceeded the quota")?((s=this.commonLogger)==null||s.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new sc(u5)):new sc(c.name,c.message)):((a=this.commonLogger)==null||a.errorPii(`CacheManager.saveCacheRecord: ${c}`,r),new sc(PI))}}async saveAccessToken(e){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=wn.fromString(e.target),i=[];r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,n,!1))return;const a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,n)&&wn.fromString(a.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(s))}),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const n=this.getAccountKeys(),r=[];return n.forEach(o=>{var c;if(!this.isAccountKey(o,e.homeAccountId))return;const i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const s={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},a=(c=i.tenantProfiles)==null?void 0:c.filter(u=>this.tenantProfileMatchesFilter(u,s));a&&a.length===0||r.push(i)}),r}isAccountKey(e,n,r){return!(e.split(lr.CACHE_KEY_SEPARATOR).length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(lr.CACHE_KEY_SEPARATOR).length<6)return!1;const n=e.toLowerCase();if(n.indexOf(it.ID_TOKEN.toLowerCase())===-1&&n.indexOf(it.ACCESS_TOKEN.toLowerCase())===-1&&n.indexOf(it.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&n.indexOf(it.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(n.indexOf(it.REFRESH_TOKEN.toLowerCase())>-1){const r=`${it.REFRESH_TOKEN}${lr.CACHE_KEY_SEPARATOR}${this.clientId}${lr.CACHE_KEY_SEPARATOR}`,o=`${it.REFRESH_TOKEN}${lr.CACHE_KEY_SEPARATOR}${Bh}${lr.CACHE_KEY_SEPARATOR}`;if(n.indexOf(r.toLowerCase())===-1&&n.indexOf(o.toLowerCase())===-1)return!1}else if(n.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===it.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===jt.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}async removeAllAccounts(){const e=this.getAccountKeys(),n=[];e.forEach(r=>{n.push(this.removeAccount(r))}),await Promise.all(n)}async removeAccount(e){const n=this.getAccount(e,this.commonLogger);n&&(await this.removeAccountContext(n),this.removeItem(e))}async removeAccountContext(e){const n=this.getTokenKeys(),r=e.generateAccountId(),o=[];n.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),n.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),n.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),await Promise.all(o)}updateOutdatedCachedAccount(e,n,r){var o;if(n&&n.isSingleTenant()){(o=this.commonLogger)==null||o.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(d=>d.startsWith(n.homeAccountId)),s=[];i.forEach(d=>{const f=this.getCachedAccountEntity(d);f&&s.push(f)});const a=s.find(d=>Pg(d.realm,d.homeAccountId))||s[0];a.tenantProfiles=s.map(d=>({tenantId:d.realm,localAccountId:d.localAccountId,name:d.name,isHomeTenant:Pg(d.realm,d.homeAccountId)}));const c=Bu.toObject(new jn,{...a}),u=c.generateAccountKey();return i.forEach(d=>{d!==u&&this.removeOutdatedAccount(e)}),this.setAccount(c),r==null||r.verbose("Updated an outdated account entity in the cache"),c}return n}async removeAccessToken(e){const n=this.getAccessTokenCredential(e);if(n){if(n.credentialType.toLowerCase()===it.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&n.tokenType===jt.POP){const o=n.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw Ae(HD)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n)}),!0}readAccountFromCache(e){const n=jn.generateAccountCacheKey(e);return this.getAccount(n,this.commonLogger)}getIdToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:it.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(s,n),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let u=a;if(!r){const d=new Map;a.forEach((p,g)=>{p.realm===e.tenantId&&d.set(g,p)});const f=d.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(f===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;u=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((d,f)=>{this.removeIdToken(f)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n){const r=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,n,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");const a=wn.createSearchScopes(n.scopes),c=n.authenticationScheme||jt.BEARER,u=c.toLowerCase()!==jt.BEARER.toLowerCase()?it.ACCESS_TOKEN_WITH_AUTH_SCHEME:it.ACCESS_TOKEN,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},f=r&&r.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(v=>{if(this.accessTokenKeyMatchesFilter(v,d,!0)){const y=this.getAccessTokenCredential(v);y&&this.credentialMatchesFilter(y,d)&&p.push(y)}});const g=p.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(v=>{this.removeAccessToken(Ql(v))}),i&&s&&i.addFields({multiMatchedAT:p.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,n,r){const o=e.toLowerCase();if(n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&o.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&o.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const i=n.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const n=this.getTokenKeys(),r=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;const i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const s=n?Bh:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:it.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,u=[];c.forEach(f=>{if(this.refreshTokenKeyMatchesFilter(f,a)){const p=this.getRefreshTokenCredential(f);p&&this.credentialMatchesFilter(p,a)&&u.push(p)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&o&&i&&o.addFields({multiMatchedRT:d},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw Ae(MD);return o[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===Bh)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const o=BZ(this.staticAuthorityOptions,this.commonLogger);if(o.includes(n)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==it.ACCESS_TOKEN&&e.credentialType!==it.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:wn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(gI)!==-1}isAuthorityMetadata(e){return e.indexOf(Ag.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Ag.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class zZ extends Bu{setAccount(){throw Ae(pt)}getAccount(){throw Ae(pt)}getCachedAccountEntity(){throw Ae(pt)}setIdTokenCredential(){throw Ae(pt)}getIdTokenCredential(){throw Ae(pt)}setAccessTokenCredential(){throw Ae(pt)}getAccessTokenCredential(){throw Ae(pt)}setRefreshTokenCredential(){throw Ae(pt)}getRefreshTokenCredential(){throw Ae(pt)}setAppMetadata(){throw Ae(pt)}getAppMetadata(){throw Ae(pt)}setServerTelemetry(){throw Ae(pt)}getServerTelemetry(){throw Ae(pt)}setAuthorityMetadata(){throw Ae(pt)}getAuthorityMetadata(){throw Ae(pt)}getAuthorityMetadataKeys(){throw Ae(pt)}setThrottlingCache(){throw Ae(pt)}getThrottlingCache(){throw Ae(pt)}removeItem(){throw Ae(pt)}getKeys(){throw Ae(pt)}getAccountKeys(){throw Ae(pt)}getTokenKeys(){throw Ae(pt)}async clear(){throw Ae(pt)}updateCredentialCacheKey(){throw Ae(pt)}removeOutdatedAccount(){throw Ae(pt)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const d5={tokenRenewalOffsetSeconds:uZ,preventCorsPreflight:!1},VZ={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:hn.Info,correlationId:le.EMPTY_STRING},$Z={claimsBasedCachingEnabled:!1},GZ={async sendGetRequestAsync(){throw Ae(pt)},async sendPostRequestAsync(){throw Ae(pt)}},qZ={sku:le.SKU,version:wI,cpu:le.EMPTY_STRING,os:le.EMPTY_STRING},KZ={clientSecret:le.EMPTY_STRING,clientAssertion:void 0},WZ={azureCloudInstance:bf.None,tenant:`${le.DEFAULT_COMMON_TENANT}`},YZ={application:{appName:"",appVersion:""}};function QZ({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:d,persistencePlugin:f,serializableCache:p}){const g={...VZ,...n};return{authOptions:JZ(t),systemOptions:{...d5,...e},loggerOptions:g,cacheOptions:{...$Z,...r},storageInterface:o||new zZ(t.clientId,xg,new Qo(g)),networkInterface:i||GZ,cryptoInterface:s||xg,clientCredentials:a||KZ,libraryInfo:{...qZ,...c},telemetry:{...YZ,...u},serverTelemetryManager:d||null,persistencePlugin:f||null,serializableCache:p||null}}function JZ(t){return{clientCapabilities:[],azureCloudOptions:WZ,skipAuthorityMetadataCache:!1,instanceAware:!1,...t}}function n0(t){return t.authOptions.authority.options.protocolMode===ns.OIDC}/*! @azure/msal-common v14.15.0 2024-09-20 */class Li extends wt{constructor(e,n,r,o,i){super(e,n,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,Li.prototype)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class vi{static generateThrottlingStorageKey(e){return`${Hh.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n){var i;const r=vi.generateThrottlingStorageKey(n),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new Li(((i=o.errorCodes)==null?void 0:i.join(" "))||le.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,n,r){if(vi.checkResponseStatus(r)||vi.checkResponseForRetryAfter(r)){const o={throttleTime:vi.calculateThrottleTime(parseInt(r.headers[Ti.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(vi.generateThrottlingStorageKey(n),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ti.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Hh.DEFAULT_THROTTLE_TIME_SECONDS),r+Hh.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,o){const i={clientId:n,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class XZ{constructor(e,n){this.networkClient=e,this.cacheManager=n}async sendPostRequest(e,n,r){vi.preProcess(this.cacheManager,e);let o;try{o=await this.networkClient.sendPostRequestAsync(n,r)}catch(i){throw i instanceof wt?i:Ae(kD)}return vi.postProcess(this.cacheManager,e,o),o}}/*! @azure/msal-common v14.15.0 2024-09-20 */const eo={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.15.0 2024-09-20 */const Hu="client_id",ZZ="redirect_uri",Q1="response_type",eee="response_mode",tee="grant_type",nee="claims",ree="scope",oee="refresh_token",iee="state",see="nonce",aee="prompt",cee="code",lee="code_challenge",uee="code_challenge_method",dee="code_verifier",hee="client-request-id",fee="x-client-SKU",pee="x-client-VER",mee="x-client-OS",gee="x-client-CPU",vee="x-client-current-telemetry",yee="x-client-last-telemetry",bee="x-ms-lib-capability",Cee="x-app-name",See="x-app-ver",Eee="post_logout_redirect_uri",wee="id_token_hint",Tee="device_code",Iee="client_secret",_ee="client_assertion",Aee="client_assertion_type",J1="token_type",X1="req_cnf",kee="assertion",xee="requested_token_use",Z1="return_spa_code",Ree="nativebroker",Pee="logout_hint",Nee="sid",Oee="login_hint",Mee="domain_hint",Lee="x-client-xtra-sku";/*! @azure/msal-common v14.15.0 2024-09-20 */class Ul{static validateRedirectUri(e){if(!e)throw Jt(qD)}static validatePrompt(e){const n=[];for(const r in Yn)n.push(Yn[r]);if(n.indexOf(e)<0)throw Jt(QD)}static validateClaims(e){try{JSON.parse(e)}catch{throw Jt(II)}}static validateCodeChallengeParams(e,n){if(!e||!n)throw Jt(_I);this.validateCodeChallengeMethod(n)}static validateCodeChallengeMethod(e){if([U1.PLAIN,U1.S256].indexOf(e)<0)throw Jt(ZD)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class zh{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(Q1,encodeURIComponent(le.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(Q1,encodeURIComponent(`${le.TOKEN_RESPONSE_TYPE} ${le.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(eee,encodeURIComponent(e||aZ.QUERY))}addNativeBroker(){this.parameters.set(Ree,encodeURIComponent("1"))}addScopes(e,n=!0,r=ca){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=n?[...e||[],...r]:e||[],i=new wn(o);this.parameters.set(ree,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(Hu,encodeURIComponent(e))}addRedirectUri(e){Ul.validateRedirectUri(e),this.parameters.set(ZZ,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Ul.validateRedirectUri(e),this.parameters.set(Eee,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(wee,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(Mee,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(Oee,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Ti.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(Ti.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(Nee,encodeURIComponent(e))}addClaims(e,n){const r=this.addClientCapabilitiesToClaims(e,n);Ul.validateClaims(r),this.parameters.set(nee,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(hee,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(fee,e.sku),this.parameters.set(pee,e.version),e.os&&this.parameters.set(mee,e.os),e.cpu&&this.parameters.set(gee,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(Cee,e.appName),e!=null&&e.appVersion&&this.parameters.set(See,e.appVersion)}addPrompt(e){Ul.validatePrompt(e),this.parameters.set(`${aee}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(iee,encodeURIComponent(e))}addNonce(e){this.parameters.set(see,encodeURIComponent(e))}addCodeChallengeParams(e,n){if(Ul.validateCodeChallengeParams(e,n),e&&n)this.parameters.set(lee,encodeURIComponent(e)),this.parameters.set(uee,encodeURIComponent(n));else throw Jt(_I)}addAuthorizationCode(e){this.parameters.set(cee,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(Tee,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(oee,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(dee,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(Iee,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(_ee,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(Aee,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(kee,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(xee,encodeURIComponent(e))}addGrantType(e){this.parameters.set(tee,encodeURIComponent(e))}addClientInfo(){this.parameters.set(cZ,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([n,r])=>{!this.parameters.has(n)&&r&&this.parameters.set(n,r)})}addClientCapabilitiesToClaims(e,n){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw Jt(II)}return n&&n.length>0&&(r.hasOwnProperty(Fp.ACCESS_TOKEN)||(r[Fp.ACCESS_TOKEN]={}),r[Fp.ACCESS_TOKEN][Fp.XMS_CC]={values:n}),JSON.stringify(r)}addUsername(e){this.parameters.set(B1.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(B1.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(J1,jt.POP),this.parameters.set(X1,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(J1,jt.SSH),this.parameters.set(X1,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(vee,e.generateCurrentRequestHeaderValue()),this.parameters.set(yee,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(bee,Hh.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(Pee,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((n,r)=>{e.push(`${r}=${n}`)}),e.join("&")}}/*! @azure/msal-common v14.15.0 2024-09-20 */function Dee(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.15.0 2024-09-20 */function jee(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v14.15.0 2024-09-20 */function Uee(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v14.15.0 2024-09-20 */const O={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},Fee=new Map([[O.AcquireTokenByCode,"ATByCode"],[O.AcquireTokenByRefreshToken,"ATByRT"],[O.AcquireTokenSilent,"ATS"],[O.AcquireTokenSilentAsync,"ATSAsync"],[O.AcquireTokenPopup,"ATPopup"],[O.AcquireTokenRedirect,"ATRedirect"],[O.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[O.CryptoOptsSignJwt,"CryptoSignJwt"],[O.SilentCacheClientAcquireToken,"SltCacheClientAT"],[O.SilentIframeClientAcquireToken,"SltIframeClientAT"],[O.SilentRefreshClientAcquireToken,"SltRClientAT"],[O.SsoSilent,"SsoSlt"],[O.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[O.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[O.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[O.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[O.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[O.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[O.BrokerHandhshake,"BrokerHandshake"],[O.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[O.AcquireTokenByBroker,"ATByBroker"],[O.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[O.RefreshTokenClientAcquireToken,"RTClientAT"],[O.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[O.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[O.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[O.AcquireTokenFromCache,"ATFromCache"],[O.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[O.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[O.AcquireTokenBySilentIframe,"ATBySltIframe"],[O.InitializeBaseRequest,"InitBaseReq"],[O.InitializeSilentRequest,"InitSltReq"],[O.InitializeClientApplication,"InitClientApplication"],[O.SilentIframeClientTokenHelper,"SIClientTHelper"],[O.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[O.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[O.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[O.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[O.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[O.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[O.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[O.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[O.GetAuthCodeUrl,"GetAuthCodeUrl"],[O.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[O.HandleCodeResponse,"HandleCodeResp"],[O.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[O.AuthClientAcquireToken,"AuthClientAT"],[O.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[O.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[O.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[O.PopTokenGenerateCnf,"PopTGenCnf"],[O.PopTokenGenerateKid,"PopTGenKid"],[O.HandleServerTokenResponse,"HandleServerTRes"],[O.DeserializeResponse,"DeserializeRes"],[O.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[O.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[O.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[O.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[O.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[O.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[O.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[O.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[O.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[O.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[O.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[O.AcquireTokenByCodeAsync,"ATByCodeAsync"],[O.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[O.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[O.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[O.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[O.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[O.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[O.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[O.NativeGenerateAuthResult,"NtvGenAuthRes"],[O.RemoveHiddenIframe,"RemoveHiddenIframe"],[O.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[O.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[O.GeneratePkceCodes,"GenPkceCodes"],[O.GenerateCodeVerifier,"GenCodeVerifier"],[O.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[O.Sha256Digest,"Sha256Digest"],[O.GetRandomValues,"GetRandomValues"]]),r0={InProgress:1,Completed:2},Bee=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]);/*! @azure/msal-common v14.15.0 2024-09-20 */const nl=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}try{const a=t(...i);return s==null||s.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a}},Oe=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}return r==null||r.setPreQueueTime(e,o),t(...i).then(a=>(n.trace(`Returning result from ${e}`),s==null||s.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a})};/*! @azure/msal-common v14.15.0 2024-09-20 */class wy{constructor(e,n,r,o){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=o}async detectRegion(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(O.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=Sl.ENVIRONMENT_VARIABLE;else{const i=wy.IMDS_OPTIONS;try{const s=await Oe(this.getRegionFromIMDS.bind(this),O.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(le.IMDS_VERSION,i);if(s.status===Hp.httpSuccess&&(r=s.body,n.region_source=Sl.IMDS),s.status===Hp.httpBadRequest){const a=await Oe(this.getCurrentVersion.bind(this),O.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return n.region_source=Sl.FAILED_AUTO_DETECTION,null;const c=await Oe(this.getRegionFromIMDS.bind(this),O.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Hp.httpSuccess&&(r=c.body,n.region_source=Sl.IMDS)}}catch{return n.region_source=Sl.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=Sl.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(O.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${le.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,le.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(O.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${le.IMDS_ENDPOINT}?format=json`,e);return r.status===Hp.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}wy.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.15.0 2024-09-20 */class cr{constructor(e,n,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new wy(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(le.CIAM_AUTH_URL))return Ho.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case le.ADFS:return Ho.Adfs;case le.DSTS:return Ho.Dsts}return Ho.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Et(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ae(Qi)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ae(Qi)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ae(Qi)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ae(zD);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ae(Qi)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ae(Qi)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ae(Qi)}canReplaceTenant(e){return e.PathSegments.length===1&&!cr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Ho.Default&&this.protocolMode===ns.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new Et(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let u=i[c];if(c===0&&this.canReplaceTenant(o)){const d=new Et(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==d&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${d}`),u=d)}a!==u&&(n=n.replace(`/${u}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Ho.Adfs||this.protocolMode!==ns.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(O.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await Oe(this.updateCloudDiscoveryMetadata.bind(this),O.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await Oe(this.updateEndpointMetadata.bind(this),O.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(i=this.performanceClient)==null||i.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:q1(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==Kr.CACHE&&(r==null?void 0:r.source)!==Kr.CACHE&&(e.expiresAt=q1(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(O.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===Kr.HARDCODED_VALUES&&(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&n.metadata){const a=await Oe(this.updateMetadataWithRegionalInformation.bind(this),O.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);zp(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await Oe(this.getEndpointMetadataFromNetwork.bind(this),O.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(r=await Oe(this.updateMetadataWithRegionalInformation.bind(this),O.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),zp(e,r,!0),Kr.NETWORK;throw Ae(xD,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),zp(e,n,!1),{source:Kr.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return zp(e,o,!1),{source:Kr.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=K1(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Kr.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Et(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Jt(e5)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(O.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const o=await this.networkInterface.sendGetRequestAsync(n,e);return Dee(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in W1?W1[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(O.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(o=this.authorityOptions.azureRegionConfiguration)==null?void 0:o.azureRegion;if(n){if(n!==le.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=mC.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,cr.replaceWithRegionalInformation(e,n);const s=await Oe(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),O.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=mC.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,cr.replaceWithRegionalInformation(e,s);this.regionDiscoveryMetadata.region_outcome=mC.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(O.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await Oe(this.getCloudDiscoveryMetadataFromNetwork.bind(this),O.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return gC(e,r,!0),Kr.NETWORK;throw Jt(t5)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||le.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||le.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||le.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),gC(e,n,!1),Kr.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=HZ(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),gC(e,o,!1),Kr.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=K1(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Kr.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Ho.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),cr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Og(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Jt(AI)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),cr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(O.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${le.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,n);let s,a;if(jee(i.body))s=i.body,a=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(Uee(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===le.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Og(a,this.hostnameAndPort)}catch(i){if(i instanceof wt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=cr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&Et.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==bf.None){const o=n.tenant?n.tenant:le.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return le.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ae(Qi)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return l5.has(e)}static isPublicCloudAuthority(e){return le.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const o=new Et(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${n}.${le.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=Et.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=cr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=cr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=cr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const o=new Et(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(le.CIAM_AUTH_URL)){const i=o.HostNameAndPort.split(".")[0];n=`${n}${i}${le.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}cr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",oa.COMMON,oa.CONSUMERS,oa.ORGANIZATIONS]);function Hee(t){var o;const r=(o=new Et(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:o.toLowerCase();switch(r){case oa.COMMON:case oa.ORGANIZATIONS:case oa.CONSUMERS:return;default:return r}}function h5(t){return t.endsWith(le.FORWARD_SLASH)?t:`${t}${le.FORWARD_SLASH}`}function zee(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Jt(AI)}return{canonicalAuthority:t.authority?h5(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v14.15.0 2024-09-20 */async function f5(t,e,n,r,o,i,s){s==null||s.addQueueMeasurement(O.AuthorityFactoryCreateDiscoveredInstance,i);const a=cr.transformCIAMAuthority(h5(t)),c=new cr(a,e,n,r,o,i,s);try{return await Oe(c.resolveEndpointsAsync.bind(c),O.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw Ae(Qi)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class NI{constructor(e,n){this.config=QZ(e),this.logger=new Qo(this.config.loggerOptions,VD,wI),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new XZ(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Ti.CONTENT_TYPE]=le.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case eo.HOME_ACCOUNT_ID:try{const r=Jl(e.credential);n[Ti.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case eo.UPN:n[Ti.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,o,i,s){var c,u,d,f;s&&((c=this.performanceClient)==null||c.addQueueMeasurement(s,i));const a=await this.networkManager.sendPostRequest(o,e,{body:n,headers:r});return(f=this.performanceClient)==null||f.addFields({refreshTokenSize:((u=a.body.refresh_token)==null?void 0:u.length)||0,httpVerToken:((d=a.headers)==null?void 0:d[Ti.X_MS_HTTP_VERSION])||""},i),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async updateAuthority(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(O.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,o=await f5(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const n=new zh;return e.tokenQueryParameters&&n.addExtraQueryParameters(e.tokenQueryParameters),n.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */const Mg="no_tokens_found",p5="native_account_unavailable",OI="refresh_token_expired",Vee="interaction_required",$ee="consent_required",Gee="login_required",Ty="bad_token";/*! @azure/msal-common v14.15.0 2024-09-20 */const ex=[Vee,$ee,Gee,Ty],qee=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Kee={[Mg]:"No refresh token found in the cache. Please sign-in.",[p5]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[OI]:"Refresh token has expired.",[Ty]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class Ur extends wt{constructor(e,n,r,o,i,s,a,c){super(e,n,r),Object.setPrototypeOf(this,Ur.prototype),this.timestamp=o||le.EMPTY_STRING,this.traceId=i||le.EMPTY_STRING,this.correlationId=s||le.EMPTY_STRING,this.claims=a||le.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function tx(t,e,n){const r=!!t&&ex.indexOf(t)>-1,o=!!n&&qee.indexOf(n)>-1,i=!!e&&ex.some(s=>e.indexOf(s)>-1);return r||i||o}function o0(t){return new Ur(t,Kee[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */class Ko{static setRequestState(e,n,r){const o=Ko.generateLibraryState(e,r);return n?`${o}${le.RESOURCE_DELIM}${n}`:o}static generateLibraryState(e,n){if(!e)throw Ae(ZE);const r={id:e.createNewGuid()};n&&(r.meta=n);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,n){if(!e)throw Ae(ZE);if(!n)throw Ae(Fu);try{const r=n.split(le.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(le.RESOURCE_DELIM):le.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||le.EMPTY_STRING,libraryState:a}}catch{throw Ae(Fu)}}}/*! @azure/msal-common v14.15.0 2024-09-20 */const Wee={SW:"sw"};class Tc{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(O.PopTokenGenerateCnf,e.correlationId);const r=await Oe(this.generateKid.bind(this),O.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(O.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Wee.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,o){const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:u}=r,d=s?new Et(s):void 0,f=d==null?void 0:d.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Mi(),m:i==null?void 0:i.toUpperCase(),u:f==null?void 0:f.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:f==null?void 0:f.AbsolutePath,q:f!=null&&f.QueryString?[[],f.QueryString]:void 0,client_claims:a||void 0,...o},n,u,r.correlationId)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Yee{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.15.0 2024-09-20 */function Qee(t){var r,o;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(o=t.error_uri)==null?void 0:o.substring(n+e.length):void 0}class Ic{constructor(e,n,r,o,i,s,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,n){if(!e.state||!n)throw e.state?Ae(kg,"Cached State"):Ae(kg,"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw Ae(Fu,e.state)}try{o=decodeURIComponent(n)}catch{throw Ae(Fu,e.state)}if(r!==o)throw Ae(PD);if(e.error||e.error_description||e.suberror){const i=Qee(e);throw tx(e.error,e.error_description,e.suberror)?new Ur(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new Li(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||le.NOT_AVAILABLE} - Timestamp: ${e.timestamp||le.NOT_AVAILABLE} - Description: ${e.error_description||le.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||le.NOT_AVAILABLE} - Trace ID: ${e.trace_id||le.NOT_AVAILABLE}`,i=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,s=new Li(e.error,o,e.suberror,i,e.status);if(n&&e.status&&e.status>=Up.SERVER_ERROR_RANGE_START&&e.status<=Up.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(n&&e.status&&e.status>=Up.CLIENT_ERROR_RANGE_START&&e.status<=Up.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw tx(e.error,e.error_description,e.suberror)?new Ur(e.error,e.error_description,e.suberror,e.timestamp||le.EMPTY_STRING,e.trace_id||le.EMPTY_STRING,e.correlation_id||le.EMPTY_STRING,e.claims||le.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,n,r,o,i,s,a,c,u){var v;(v=this.performanceClient)==null||v.addQueueMeasurement(O.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=tl(e.id_token||le.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw Ae(ND);if(o.maxAge||o.maxAge===0){const y=d.auth_time;if(!y)throw Ae(bI);$D(y,o.maxAge)}}this.homeAccountIdentifier=jn.generateHomeAccountId(e.client_info||le.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,d);let f;i&&i.state&&(f=Ko.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const p=this.generateCacheRecord(e,n,r,o,d,s,i);let g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Yee(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),a&&!c&&p.account){const y=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(y,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Ic.generateAuthenticationResult(this.cryptoObj,n,p,!1,o,d,f,void 0,u)}await this.cacheStorage.saveCacheRecord(p,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return Ic.generateAuthenticationResult(this.cryptoObj,n,p,!1,o,d,f,e,u)}generateCacheRecord(e,n,r,o,i,s,a){const c=n.getPreferredCache();if(!c)throw Ae(SI);const u=s5(i);let d,f;e.id_token&&i&&(d=by(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),f=MI(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,u,a,void 0,this.logger));let p=null;if(e.access_token){const y=e.scope?wn.fromString(e.scope):new wn(o.scopes||[]),b=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,C=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,S=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,w=r+b,E=w+C,T=S&&S>0?r+S:void 0;p=Cy(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||n.tenant||"",y.printScopes(),w,E,this.cryptoObj.base64Decode,T,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){const b=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=r+b}g=GD(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,y)}let v=null;return e.foci&&(v={clientId:this.clientId,environment:c,familyId:e.foci}),{account:f,idToken:d,accessToken:p,refreshToken:g,appMetadata:v}}static async generateAuthenticationResult(e,n,r,o,i,s,a,c,u){var w,E,T,I,A;let d=le.EMPTY_STRING,f=[],p=null,g,v,y=le.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===jt.POP&&!i.popKid){const _=new Tc(e),{secret:j,keyId:R}=r.accessToken;if(!R)throw Ae(EI);d=await _.signPopToken(j,R,i)}else d=r.accessToken.secret;f=wn.fromString(r.accessToken.target).asArray(),p=new Date(Number(r.accessToken.expiresOn)*1e3),g=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(v=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(y=r.appMetadata.familyId===Bh?Bh:"");const b=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",C=(s==null?void 0:s.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const S=r.account?xI(r.account.getAccountInfo(),void 0,s,(w=r.idToken)==null?void 0:w.secret):null;return{authority:n.canonicalAuthority,uniqueId:b,tenantId:C,scopes:f,account:S,idToken:((E=r==null?void 0:r.idToken)==null?void 0:E.secret)||"",idTokenClaims:s||{},accessToken:d,fromCache:o,expiresOn:p,extExpiresOn:g,refreshOn:v,correlationId:i.correlationId,requestId:u||le.EMPTY_STRING,familyId:y,tokenType:((T=r.accessToken)==null?void 0:T.tokenType)||le.EMPTY_STRING,state:a?a.userRequestState:le.EMPTY_STRING,cloudGraphHostName:((I=r.account)==null?void 0:I.cloudGraphHostName)||le.EMPTY_STRING,msGraphHost:((A=r.account)==null?void 0:A.msGraphHost)||le.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function MI(t,e,n,r,o,i,s,a,c,u,d){d==null||d.verbose("setCachedAccount called");const p=t.getAccountKeys().find(C=>C.startsWith(n));let g=null;p&&(g=t.getAccount(p,d));const v=g||jn.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c==null?void 0:c.cloud_graph_host_name,msGraphHost:c==null?void 0:c.msgraph_host,nativeAccountId:u},e,r),y=v.tenantProfiles||[],b=a||v.realm;if(b&&!y.find(C=>C.tenantId===b)){const C=kI(n,v.localAccountId,b,o);y.push(C)}return v.tenantProfiles=y,v}/*! @azure/msal-common v14.15.0 2024-09-20 */async function m5(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v14.15.0 2024-09-20 */class g5 extends NI{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async getAuthCodeUrl(e){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(O.GetAuthCodeUrl,e.correlationId);const n=await Oe(this.createAuthCodeUrlQueryString.bind(this),O.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return Et.appendQueryString(this.authority.authorizationEndpoint,n)}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(O.AuthClientAcquireToken,e.correlationId),!e.code)throw Ae(LD);const r=Mi(),o=await Oe(this.executeTokenRequest.bind(this),O.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=(c=o.headers)==null?void 0:c[Ti.X_MS_REQUEST_ID],s=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),Oe(s.handleServerTokenResponse.bind(s),O.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,n,void 0,void 0,void 0,i)}handleFragmentResponse(e,n){if(new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,n),!e.code)throw Ae(BD);return e}getLogoutUri(e){if(!e)throw Jt(XD);const n=this.createLogoutUrlQueryString(e);return Et.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var u,d;(u=this.performanceClient)==null||u.addQueueMeasurement(O.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),o=Et.appendQueryString(e.tokenEndpoint,r),i=await Oe(this.createTokenRequestBody.bind(this),O.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let s;if(n.clientInfo)try{const f=Rg(n.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${f.uid}${lr.CLIENT_INFO_SEPARATOR}${f.utid}`,type:eo.HOME_ACCOUNT_ID}}catch(f){this.logger.verbose("Could not parse client info for CCS Header: "+f)}const a=this.createTokenRequestHeaders(s||n.ccsCredential),c={clientId:((d=n.tokenBodyParameters)==null?void 0:d.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return Oe(this.executePostToTokenEndpoint.bind(this),O.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(o,i,a,c,n.correlationId,O.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(O.AuthClientCreateTokenRequestBody,e.correlationId);const n=new zh;if(n.addClientId(((s=e.tokenBodyParameters)==null?void 0:s[Hu])||this.config.authOptions.clientId),this.includeRedirectUri?n.addRedirectUri(e.redirectUri):Ul.validateRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.oidcDefaultScopes),n.addAuthorizationCode(e.code),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!n0(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&n.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await m5(a.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(a.assertionType)}if(n.addGrantType(TD.AUTHORIZATION_CODE_GRANT),n.addClientInfo(),e.authenticationScheme===jt.POP){const a=new Tc(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Oe(a.generateCnf.bind(a),O.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(c)}else if(e.authenticationScheme===jt.SSH)if(e.sshJwk)n.addSshJwk(e.sshJwk);else throw Jt(Sy);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(r),(!qo.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities);let o;if(e.clientInfo)try{const a=Rg(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${a.uid}${lr.CLIENT_INFO_SEPARATOR}${a.utid}`,type:eo.HOME_ACCOUNT_ID}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case eo.HOME_ACCOUNT_ID:try{const a=Jl(o.credential);n.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case eo.UPN:n.addCcsUpn(o.credential);break}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Z1])&&n.addExtraQueryParameters({[Z1]:"1"}),n.createQueryString()}async createAuthCodeUrlQueryString(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(O.AuthClientCreateQueryString,e.correlationId);const n=new zh;n.addClientId(((s=e.extraQueryParameters)==null?void 0:s[Hu])||this.config.authOptions.clientId);const r=[...e.scopes||[],...e.extraScopesToConsent||[]];n.addScopes(r,!0,this.oidcDefaultScopes),n.addRedirectUri(e.redirectUri);const o=e.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(o),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),n0(this.config)||n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&n.addDomainHint(e.domainHint),e.prompt!==Yn.SELECT_ACCOUNT)if(e.sid&&e.prompt===Yn.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid);else if(e.account){const a=this.extractAccountSid(e.account);let c=this.extractLoginHint(e.account);if(c&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(c);try{const u=Jl(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===Yn.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(a);try{const u=Jl(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username);try{const u=Jl(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.addExtraQueryParams(e,n),e.nativeBroker&&(n.addNativeBroker(),e.authenticationScheme===jt.POP)){const a=new Tc(this.cryptoUtils);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Oe(a.generateCnf.bind(a),O.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(c)}return n.createQueryString()}createLogoutUrlQueryString(e){const n=new zh;return e.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&n.addCorrelationId(e.correlationId),e.idTokenHint&&n.addIdTokenHint(e.idTokenHint),e.state&&n.addState(e.state),e.logoutHint&&n.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,n),n.createQueryString()}addExtraQueryParams(e,n){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var n;return((n=e.idTokenClaims)==null?void 0:n.sid)||null}extractLoginHint(e){var n;return((n=e.idTokenClaims)==null?void 0:n.login_hint)||null}}/*! @azure/msal-common v14.15.0 2024-09-20 */const Jee=300;class i0 extends NI{constructor(e,n){super(e,n)}async acquireToken(e){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(O.RefreshTokenClientAcquireToken,e.correlationId);const n=Mi(),r=await Oe(this.executeTokenRequest.bind(this),O.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=(a=r.headers)==null?void 0:a[Ti.X_MS_REQUEST_ID],i=new Ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),Oe(i.handleServerTokenResponse.bind(i),O.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Jt(JD);if((r=this.performanceClient)==null||r.addQueueMeasurement(O.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ae(CI);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Oe(this.acquireTokenWithCachedRefreshToken.bind(this),O.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const i=o instanceof Ur&&o.errorCode===Mg,s=o instanceof Li&&o.errorCode===F1.INVALID_GRANT_ERROR&&o.subError===F1.CLIENT_MISMATCH_ERROR;if(i||s)return Oe(this.acquireTokenWithCachedRefreshToken.bind(this),O.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return Oe(this.acquireTokenWithCachedRefreshToken.bind(this),O.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(O.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=nl(this.cacheManager.getRefreshToken.bind(this.cacheManager),O.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,void 0,this.performanceClient,e.correlationId);if(!r)throw o0(Mg);if(r.expiresOn&&t0(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||Jee))throw o0(OI);const o={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||jt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:eo.HOME_ACCOUNT_ID}};try{return await Oe(this.acquireToken.bind(this),O.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(s){if(s instanceof Ur&&s.subError===Ty){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=Ql(r);this.cacheManager.removeRefreshToken(a)}throw s}}async executeTokenRequest(e,n){var c,u;(c=this.performanceClient)==null||c.addQueueMeasurement(O.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),o=Et.appendQueryString(n.tokenEndpoint,r),i=await Oe(this.createTokenRequestBody.bind(this),O.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:((u=e.tokenBodyParameters)==null?void 0:u.clientId)||this.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return Oe(this.executePostToTokenEndpoint.bind(this),O.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,O.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(O.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=e.correlationId,r=new zh;if(r.addClientId(((i=e.tokenBodyParameters)==null?void 0:i[Hu])||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),r.addGrantType(TD.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!n0(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addCorrelationId(n),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await m5(a.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(a.assertionType)}if(e.authenticationScheme===jt.POP){const a=new Tc(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Oe(a.generateCnf.bind(a),O.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(c)}else if(e.authenticationScheme===jt.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw Jt(Sy);if((!qo.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case eo.HOME_ACCOUNT_ID:try{const a=Jl(e.ccsCredential.credential);r.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case eo.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Xee extends NI{constructor(e,n){super(e,n)}async acquireToken(e){var n;try{const[r,o]=await this.acquireCachedToken({...e,scopes:(n=e.scopes)!=null&&n.length?e.scopes:[...ca]});return o===Fs.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new i0(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof gd&&r.errorCode===Ii)return new i0(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw r}}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(O.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Fs.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!qo.isEmptyObj(e.claims))throw this.setCacheOutcome(Fs.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ae(Ii);if(!e.account)throw Ae(CI);const r=e.account.tenantId||Hee(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(IZ(i.cachedAt)||t0(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Fs.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ae(Ii);i.refreshOn&&t0(i.refreshOn,0)&&(n=Fs.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Fs.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ae(Ii);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Oe(this.generateResultFromCacheRecord.bind(this),O.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),n]}setCacheOutcome(e,n){var r,o;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(o=this.performanceClient)==null||o.addFields({cacheOutcome:e},n),e!==Fs.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(O.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=tl(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const i=r==null?void 0:r.auth_time;if(!i)throw Ae(bI);$D(i,n.maxAge)}return Ic.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const Zee={sendGetRequestAsync:()=>Promise.reject(Ae(pt)),sendPostRequestAsync:()=>Promise.reject(Ae(pt))};/*! @azure/msal-common v14.15.0 2024-09-20 */const nx=",",v5="|";function ete(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=t,s=new Map([[0,[n,r]],[2,[o,i]]]);let a=[];if(e!=null&&e.length){if(a=e.split(nx),a.length<4)return e}else a=Array.from({length:4},()=>v5);return s.forEach((c,u)=>{var d,f;c.length===2&&((d=c[0])!=null&&d.length)&&((f=c[1])!=null&&f.length)&&tte({skuArr:a,index:u,skuName:c[0],skuVersion:c[1]})}),a.join(nx)}function tte(t){const{skuArr:e,index:n,skuName:r,skuVersion:o}=t;n>=e.length||(e[n]=[r,o].join(v5))}class Cf{constructor(e,n){this.cacheOutcome=Fs.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||le.EMPTY_STRING,this.wrapperVer=e.wrapperVer||le.EMPTY_STRING,this.telemetryCacheKey=Xn.CACHE_KEY+lr.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Xn.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const o=n.join(Xn.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Xn.VALUE_SEPARATOR);return[Xn.SCHEMA_VERSION,s,o].join(Xn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Cf.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(Xn.VALUE_SEPARATOR),o=e.errors.slice(0,n).join(Xn.VALUE_SEPARATOR),i=e.errors.length,s=n<i?Xn.OVERFLOW_TRUE:Xn.OVERFLOW_FALSE,a=[i,s].join(Xn.VALUE_SEPARATOR);return[Xn.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Xn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=Xn.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof wt?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(Xn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Cf.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{const o={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let n,r=0,o=0;const i=e.errors.length;for(n=0;n<i;n++){const s=e.failedRequests[2*n]||le.EMPTY_STRING,a=e.failedRequests[2*n+1]||le.EMPTY_STRING,c=e.errors[n]||le.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Xn.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||le.EMPTY_STRING),e.push(this.regionSource||le.EMPTY_STRING),e.push(this.regionOutcome||le.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return ete(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const y5="missing_kid_error",b5="missing_alg_error";/*! @azure/msal-common v14.15.0 2024-09-20 */const nte={[y5]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[b5]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class LI extends wt{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,LI.prototype)}}function rx(t){return new LI(t,nte[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */class DI{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw rx(y5);if(!e.alg)throw rx(b5);const n=new DI({typ:e.typ||lZ.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class s0{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class C5{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:r0.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new s0}}startPerformanceMeasurement(){return new s0}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v14.15.0 2024-09-20 */function rte(t,e,n){n&&n.push({name:e.get(t.name)||t.name})}function ote(t,e,n,r){if(!(n!=null&&n.length))return;const o=g=>g.length?g[g.length-1]:void 0,i=e.get(t.name)||t.name,s=o(n);if((s==null?void 0:s.name)!==i)return;const a=n==null?void 0:n.pop();if(!a)return;const c=r instanceof wt?r.errorCode:r instanceof Error?r.name:void 0,u=r instanceof wt?r.subError:void 0;c&&a.childErr!==c&&(a.err=c,u&&(a.subErr=u)),delete a.name,delete a.childErr;const d={...a,dur:t.durationMs};t.success||(d.fail=1);const f=o(n);if(!f)return{[i]:d};c&&(f.childErr=c);let p;if(!f[i])p=i;else{const g=Object.keys(f).filter(v=>v.startsWith(i)).length;p=`${i}_${g+1}`}return f[p]=d,f}function ite(t,e,n,r=5){var o,i;if(t instanceof Error){if(t instanceof wt){n.errorCode=t.errorCode,n.subErrorCode=t.subError,(t instanceof Li||t instanceof Ur)&&(n.serverErrorNo=t.errorNo);return}else if(t instanceof sc){n.errorCode=t.errorCode;return}else if((o=n.errorStack)!=null&&o.length){e.trace("PerformanceClient.addErrorStack: Stack already exist",n.correlationId);return}else if(!((i=t.stack)!=null&&i.length)){e.trace("PerformanceClient.addErrorStack: Input stack is empty",n.correlationId);return}}else{e.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",n.correlationId);return}t.stack&&(n.errorStack=ste(t.stack,r)),n.errorName=t.name}function ste(t,e){if(e<0)return[];const n=t.split(`
`)||[];if(n.length<2)return[];const r=[];for(let o=Math.max(n.length-e-1,1);o<n.length;o++){const i=n[o];if(r.length>=e)break;r.push(ate(i))}return r}function ate(t){const e=t.lastIndexOf(" ")+1;if(e<1)return t;const n=t.substring(e);let r=n.lastIndexOf("/");return r=r<0?n.lastIndexOf("\\"):r,r>=0?(t.substring(0,e)+"("+n.substring(r+1)+(n.charAt(n.length-1)===")"?"":")")).trimStart():t.trimStart()}class cte{constructor(e,n,r,o,i,s,a,c){this.authority=n,this.libraryName=o,this.libraryVersion=i,this.applicationTelemetry=s,this.clientId=e,this.logger=r,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=a||new Set;for(const u of Bee)this.intFields.add(u);this.abbreviations=c||new Map;for(const[u,d]of Fee)this.abbreviations.set(u,d)}startPerformanceMeasurement(e,n){return{}}getPreQueueTime(e,n){const r=this.preQueueTimeByCorrelationId.get(n);if(r){if(r.name!==e){this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${e}, unable to add queue measurement`);return}}else{this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${n}, unable to add queue measurement`);return}return r.time}calculateQueuedTime(e,n){return e<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${e}`),0):n<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${n}`),0):n<e?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):n-e}addQueueMeasurement(e,n,r,o){if(!n){this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${e}, cannot add queue measurement`);return}if(r===0)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${e} is ${r}`);else if(!r){this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${e}`);return}const i={eventName:e,queueTime:o?0:r,manuallyCompleted:o},s=this.queueMeasurements.get(n);if(s)s.push(i),this.queueMeasurements.set(n,s);else{this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${n} to queue measurements`);const a=[i];this.queueMeasurements.set(n,a)}this.preQueueTimeByCorrelationId.delete(n)}startMeasurement(e,n){var i,s;const r=n||this.generateId();n||this.logger.info(`PerformanceClient: No correlation id provided for ${e}, generating`,r),this.logger.trace(`PerformanceClient: Performance measurement started for ${e}`,r);const o={eventId:this.generateId(),status:r0.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:r,appName:(i=this.applicationTelemetry)==null?void 0:i.appName,appVersion:(s=this.applicationTelemetry)==null?void 0:s.appVersion};return this.cacheEventByCorrelationId(o),rte(o,this.abbreviations,this.eventStack.get(r)),{end:(a,c)=>this.endMeasurement({...o,...a},c),discard:()=>this.discardMeasurements(o.correlationId),add:a=>this.addFields(a,o.correlationId),increment:a=>this.incrementFields(a,o.correlationId),event:o,measurement:new s0}}endMeasurement(e,n){var u,d;const r=this.eventsByCorrelationId.get(e.correlationId);if(!r)return this.logger.trace(`PerformanceClient: Measurement not found for ${e.eventId}`,e.correlationId),null;const o=e.eventId===r.eventId;let i={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};e.durationMs=Math.round(e.durationMs||this.getDurationMs(e.startTimeMs));const s=JSON.stringify(ote(e,this.abbreviations,this.eventStack.get(r.correlationId),n));if(o?(i=this.getQueueInfo(e.correlationId),this.discardMeasurements(r.correlationId)):(u=r.incompleteSubMeasurements)==null||u.delete(e.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${e.name}: ${e.durationMs} ms`,e.correlationId),!o)return r[e.name+"DurationMs"]=Math.floor(e.durationMs),{...r};n&&ite(n,this.logger,r);let a={...r,...e},c=0;return(d=a.incompleteSubMeasurements)==null||d.forEach(f=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${f.name} found for ${e.name}`,a.correlationId),c++}),a.incompleteSubMeasurements=void 0,a={...a,queuedTimeMs:i.totalQueueTime,queuedCount:i.totalQueueCount,queuedManuallyCompletedCount:i.manuallyCompletedCount,status:r0.Completed,incompleteSubsCount:c,context:s},this.truncateIntegralFields(a),this.emitEvents([a],e.correlationId),a}addFields(e,n){this.logger.trace("PerformanceClient: Updating static fields");const r=this.eventsByCorrelationId.get(n);r?this.eventsByCorrelationId.set(n,{...r,...e}):this.logger.trace("PerformanceClient: Event not found for",n)}incrementFields(e,n){this.logger.trace("PerformanceClient: Updating counters");const r=this.eventsByCorrelationId.get(n);if(r)for(const o in e){if(!r.hasOwnProperty(o))r[o]=0;else if(isNaN(Number(r[o])))return;r[o]+=e[o]}else this.logger.trace("PerformanceClient: Event not found for",n)}cacheEventByCorrelationId(e){const n=this.eventsByCorrelationId.get(e.correlationId);n?(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} added/updated`,e.correlationId),n.incompleteSubMeasurements=n.incompleteSubMeasurements||new Map,n.incompleteSubMeasurements.set(e.eventId,{name:e.name,startTimeMs:e.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} started`,e.correlationId),this.eventsByCorrelationId.set(e.correlationId,{...e}),this.eventStack.set(e.correlationId,[]))}getQueueInfo(e){const n=this.queueMeasurements.get(e);n||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${e}`);let r=0,o=0,i=0;return n==null||n.forEach(s=>{r+=s.queueTime,o++,i+=s.manuallyCompleted?1:0}),{totalQueueTime:r,totalQueueCount:o,manuallyCompletedCount:i}}discardMeasurements(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e),this.logger.trace("PerformanceClient: QueueMeasurements discarded",e),this.queueMeasurements.delete(e),this.logger.trace("PerformanceClient: Pre-queue times discarded",e),this.preQueueTimeByCorrelationId.delete(e),this.logger.trace("PerformanceClient: Event stack discarded",e),this.eventStack.delete(e)}addPerformanceCallback(e){for(const[r,o]of this.callbacks)if(o.toString()===e.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${r}`),r;const n=this.generateId();return this.callbacks.set(n,e),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${n}`),n}removePerformanceCallback(e){const n=this.callbacks.delete(e);return n?this.logger.verbose(`PerformanceClient: Performance callback ${e} removed.`):this.logger.verbose(`PerformanceClient: Performance callback ${e} not removed.`),n}emitEvents(e,n){this.logger.verbose("PerformanceClient: Emitting performance events",n),this.callbacks.forEach((r,o)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${o}`,n),r.apply(null,[e])})}truncateIntegralFields(e){this.intFields.forEach(n=>{n in e&&typeof e[n]=="number"&&(e[n]=Math.floor(e[n]))})}getDurationMs(e){const n=Date.now()-e;return n<0?n:0}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const jI="pkce_not_created",S5="crypto_nonexistent",Iy="empty_navigate_uri",E5="hash_empty_error",UI="no_state_in_hash",w5="hash_does_not_contain_known_properties",T5="unable_to_parse_state",I5="state_interaction_type_mismatch",_5="interaction_in_progress",A5="popup_window_error",k5="empty_window_error",_c="user_cancelled",lte="monitor_popup_timeout",x5="monitor_window_timeout",R5="redirect_in_iframe",P5="block_iframe_reload",N5="block_nested_popups",ute="iframe_closed_prematurely",_y="silent_logout_unsupported",O5="no_account_error",dte="silent_prompt_value_error",M5="no_token_request_cache_error",L5="unable_to_parse_token_request_cache_error",FI="no_cached_authority_error",hte="auth_request_not_set_error",fte="invalid_cache_type",BI="non_browser_environment",Fl="database_not_open",Lg="no_network_connectivity",D5="post_request_failed",j5="get_request_failed",a0="failed_to_parse_response",U5="unable_to_load_token",HI="crypto_key_not_found",F5="auth_code_required",B5="auth_code_or_nativeAccountId_required",H5="spa_code_and_nativeAccountId_present",zI="database_unavailable",z5="unable_to_acquire_token_from_native_platform",V5="native_handshake_timeout",$5="native_extension_not_installed",rp="native_connection_not_established",G5="uninitialized_public_client_application",q5="native_prompt_not_supported",K5="invalid_base64_string",W5="invalid_pop_token_request";/*! @azure/msal-browser v3.26.1 2024-10-08 */const Gi="For more visit: aka.ms/msaljs/browser-errors",pte={[jI]:"The PKCE code challenge and verifier could not be generated.",[S5]:"The crypto object or function is not available.",[Iy]:"Navigation URI is empty. Please check stack trace for more info.",[E5]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Gi}`,[UI]:"Hash does not contain state. Please verify that the request originated from msal.",[w5]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Gi}`,[T5]:"Unable to parse state. Please verify that the request originated from msal.",[I5]:"Hash contains state but the interaction type does not match the caller.",[_5]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Gi}`,[A5]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[k5]:"window.open returned null or undefined window object.",[_c]:"User cancelled the flow.",[lte]:`Token acquisition in popup failed due to timeout.  ${Gi}`,[x5]:`Token acquisition in iframe failed due to timeout.  ${Gi}`,[R5]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[P5]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Gi}`,[N5]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[ute]:"The iframe being monitored was closed prematurely.",[_y]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[O5]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[dte]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[M5]:"No token request found in cache.",[L5]:"The cached token request could not be parsed.",[FI]:"No cached authority found.",[hte]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[fte]:"Invalid cache type",[BI]:"Login and token requests are not supported in non-browser environments.",[Fl]:"Database is not open!",[Lg]:"No network connectivity. Check your internet connection.",[D5]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[j5]:"Network request failed. Please check the network trace to determine root cause.",[a0]:"Failed to parse network response. Check network trace.",[U5]:"Error loading token to cache.",[HI]:"Cryptographic Key or Keypair not found in browser storage.",[F5]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[B5]:"An authorization code or nativeAccountId must be provided to this flow.",[H5]:"Request cannot contain both spa code and native account id.",[zI]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[z5]:`Unable to acquire token from native platform.  ${Gi}`,[V5]:"Timed out while attempting to establish connection to browser extension",[$5]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[rp]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Gi}`,[G5]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Gi}`,[q5]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[K5]:"Invalid base64 encoded string.",[W5]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true."};class vd extends wt{constructor(e){super(e,pte[e]),Object.setPrototypeOf(this,vd.prototype),this.name="BrowserAuthError"}}function Ge(t){return new vd(t)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Jr={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Xl={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},Ja={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Cn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},ox={GET:"GET",POST:"POST"},Ht={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Ns={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Vp={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ln={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var we;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(we||(we={}));const ix={scopes:ca},Y5="jwk",c0="msal.db",mte=1,gte=`${c0}.keys`,Mn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},vte=[Mn.Default,Mn.Skip,Mn.RefreshTokenAndNetwork],yte="msal.browser.log.level",bte="msal.browser.log.pii",Cte="msal.browser.performance.enabled";/*! @azure/msal-browser v3.26.1 2024-10-08 */function $p(t){return encodeURIComponent(VI(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Ay(t){return Q5(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function VI(t){return Q5(new TextEncoder().encode(t))}function Q5(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Ste="RSASSA-PKCS1-v1_5",J5="SHA-256",Ete=2048,wte=new Uint8Array([1,0,1]),sx="0123456789abcdef",ax=new Uint32Array(1),$I={name:Ste,hash:J5,modulusLength:Ete,publicExponent:wte};function Tte(t){if("crypto"in window)t.verbose("BrowserCrypto: modern crypto interface available");else throw t.error("BrowserCrypto: crypto interface is unavailable"),Ge(S5)}async function X5(t,e,n){e==null||e.addQueueMeasurement(O.Sha256Digest,n);const o=new TextEncoder().encode(t);return window.crypto.subtle.digest(J5,o)}function Ite(t){return window.crypto.getRandomValues(t)}function yC(){return window.crypto.getRandomValues(ax),ax[0]}function Di(){const t=Date.now(),e=yC()*1024+(yC()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=yC();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let s="";for(let a=0;a<n.length;a++)s+=sx.charAt(n[a]>>>4),s+=sx.charAt(n[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}async function _te(t,e){return window.crypto.subtle.generateKey($I,t,e)}async function bC(t){return window.crypto.subtle.exportKey(Y5,t)}async function Ate(t,e,n){return window.crypto.subtle.importKey(Y5,t,$I,e,n)}async function kte(t,e){return window.crypto.subtle.sign($I,t,e)}async function Z5(t){const e=await X5(t),n=new Uint8Array(e);return Ay(n)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const e3="storage_not_supported",xte="stubbed_public_client_application_called",t3="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.26.1 2024-10-08 */const Rte={[e3]:"Given storage configuration option was not supported.",[xte]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[t3]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class ky extends wt{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,ky.prototype)}}function n3(t){return new ky(t,Rte[t])}/*! @azure/msal-browser v3.26.1 2024-10-08 */function Pte(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function Nte(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function GI(){return window.parent!==window}function Ote(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Jr.POPUP_NAME_PREFIX}.`)===0}function Vo(){return window.location.href.split("?")[0].split("#")[0]}function Mte(){const e=new Et(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function Lte(){if(Et.hashContainsKnownProperties(window.location.hash)&&GI())throw Ge(P5)}function Dte(t){if(GI()&&!t)throw Ge(R5)}function jte(){if(Ote())throw Ge(N5)}function r3(){if(typeof window>"u")throw Ge(BI)}function qI(t){if(!t)throw Ge(G5)}function rs(t){r3(),Lte(),jte(),qI(t)}function cx(t,e){if(rs(t),Dte(e.system.allowRedirectInIframe),e.cache.cacheLocation===Cn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw n3(t3)}function o3(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function Eo(){return Di()}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Dg{navigateInternal(e,n){return Dg.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Dg.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},n.timeout)})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Ute{async sendGetRequestAsync(e,n){let r;try{r=await fetch(e,{method:ox.GET,headers:this.getFetchHeaders(n)})}catch{throw window.navigator.onLine?Ge(j5):Ge(Lg)}try{return{headers:this.getHeaderDict(r.headers),body:await r.json(),status:r.status}}catch{throw Ge(a0)}}async sendPostRequestAsync(e,n){const r=n&&n.body||le.EMPTY_STRING;let o;try{o=await fetch(e,{method:ox.POST,headers:this.getFetchHeaders(n),body:r})}catch{throw window.navigator.onLine?Ge(D5):Ge(Lg)}try{return{headers:this.getHeaderDict(o.headers),body:await o.json(),status:o.status}}catch{throw Ge(a0)}}getFetchHeaders(e){const n=new Headers;if(!(e&&e.headers))return n;const r=e.headers;return Object.keys(r).forEach(o=>{n.append(o,r[o])}),n}getHeaderDict(e){const n={};return e.forEach((r,o)=>{n[o]=r}),n}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Fte=6e4,jg=1e4,Bte=3e4,Hte=2e3;function zte({auth:t,cache:e,system:n,telemetry:r},o){const i={clientId:le.EMPTY_STRING,authority:`${le.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:le.EMPTY_STRING,authorityMetadata:le.EMPTY_STRING,redirectUri:le.EMPTY_STRING,postLogoutRedirectUri:le.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ns.AAD,OIDCOptions:{serverResponseType:np.FRAGMENT,defaultScopes:[le.OPENID_SCOPE,le.PROFILE_SCOPE,le.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:bf.None,tenant:le.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:Cn.SessionStorage,temporaryCacheLocation:Cn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Cn.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:hn.Info,piiLoggingEnabled:!1},u={...{...d5,loggerOptions:a,networkClient:o?new Ute:Zee,navigationClient:new Dg,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||Fte,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||jg,navigateFrameWait:0,redirectNavigationTimeout:Bte,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||Hte,pollIntervalMilliseconds:Jr.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},d={application:{appName:le.EMPTY_STRING,appVersion:le.EMPTY_STRING},client:new C5};if((t==null?void 0:t.protocolMode)!==ns.OIDC&&(t!=null&&t.OIDCOptions)&&new Qo(u.loggerOptions).warning(JSON.stringify(Jt(r5))),t!=null&&t.protocolMode&&t.protocolMode!==ns.AAD&&(u!=null&&u.allowNativeBroker))throw Jt(o5);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...s,...e},system:u,telemetry:{...d,...r}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Ug="@azure/msal-browser",Ac="3.26.1";/*! @azure/msal-browser v3.26.1 2024-10-08 */class KI{static loggerCallback(e,n){switch(e){case hn.Error:console.error(n);return;case hn.Info:console.info(n);return;case hn.Verbose:console.debug(n);return;case hn.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=zte(e,this.browserEnvironment);let n;try{n=window[Cn.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(yte),o=(c=n==null?void 0:n.getItem(bte))==null?void 0:c.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(hn).includes(r)?hn[r]:void 0;a&&(s.loggerCallback=KI.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new Qo(s,Ug,Ac),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class kc extends KI{getModuleName(){return kc.MODULE_NAME}getId(){return kc.ID}async initialize(){return this.available=typeof window<"u",this.available}}kc.MODULE_NAME="";kc.ID="StandardOperatingContext";/*! @azure/msal-browser v3.26.1 2024-10-08 */function xi(t){return new TextDecoder().decode(Vte(t))}function Vte(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Ge(K5)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class $te{constructor(){this.dbName=c0,this.version=mte,this.tableName=gte,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{const i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(Ge(zI)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Ge(Fl));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(Ge(Fl));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Ge(Fl));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),n()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(Ge(Fl));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{const a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),n(s)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Ge(Fl));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(c0),o=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),n(!1)))})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Fg{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,n){this.cache.set(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Gte{constructor(e){this.inMemoryCache=new Fg,this.indexedDBCache=new $te,this.logger=e}handleDatabaseAccessError(e){if(e instanceof vd&&e.errorCode===zI)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class xc{constructor(e,n){this.logger=e,Tte(e),this.cache=new Gte(this.logger),this.performanceClient=n}createNewGuid(){return Di()}base64Encode(e){return VI(e)}base64Decode(e){return xi(e)}base64UrlEncode(e){return $p(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var d;const n=(d=this.performanceClient)==null?void 0:d.startMeasurement(O.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await _te(xc.EXTRACTABLE,xc.POP_KEY_USAGES),o=await bC(r.publicKey),i={e:o.e,kty:o.kty,n:o.n},s=lx(i),a=await this.hashString(s),c=await bC(r.privateKey),u=await Ate(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:u,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,o){var w;const i=(w=this.performanceClient)==null?void 0:w.startMeasurement(O.CryptoOptsSignJwt,o),s=await this.cache.getItem(n);if(!s)throw Ge(HI);const a=await bC(s.publicKey),c=lx(a),u=$p(JSON.stringify({kid:n})),d=DI.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:u}),f=$p(d);e.cnf={jwk:JSON.parse(c)};const p=$p(JSON.stringify(e)),g=`${f}.${p}`,y=new TextEncoder().encode(g),b=await kte(s.privateKey,y),C=Ay(new Uint8Array(b)),S=`${g}.${C}`;return i&&i.end({success:!0}),S}async hashString(e){return Z5(e)}}xc.POP_KEY_USAGES=["sign","verify"];xc.EXTRACTABLE=!0;function lx(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Bg{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==Cn.LocalStorage&&e!==Cn.SessionStorage||!window[e])throw n3(e3)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,n){this.windowStorage.setItem(e,n)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function i3(t,e){if(!e)return null;try{return Ko.parseRequestState(t,e).libraryState.meta}catch{throw Ae(Fu)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class l0 extends Bu{constructor(e,n,r,o,i,s){super(e,r,o,i),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=n,this.logger=o,this.internalStorage=new Fg,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),n.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){switch(e){case Cn.LocalStorage:case Cn.SessionStorage:try{return new Bg(e)}catch(n){this.logger.verbose(n);break}}return this.cacheConfig.cacheLocation=Cn.MemoryStorage,new Fg}setupTemporaryCacheStorage(e,n){switch(n){case Cn.LocalStorage:case Cn.SessionStorage:try{return new Bg(e||Cn.SessionStorage)}catch(r){return this.logger.verbose(r),this.internalStorage}case Cn.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${le.CACHE_PREFIX}.${Gn.ID_TOKEN}`,n=`${le.CACHE_PREFIX}.${Gn.CLIENT_INFO}`,r=`${le.CACHE_PREFIX}.${Gn.ERROR}`,o=`${le.CACHE_PREFIX}.${Gn.ERROR_DESC}`,i=this.browserStorage.getItem(e),s=this.browserStorage.getItem(n),a=this.browserStorage.getItem(r),c=this.browserStorage.getItem(o),u=[i,s,a,c];[Gn.ID_TOKEN,Gn.CLIENT_INFO,Gn.ERROR,Gn.ERROR_DESC].forEach((f,p)=>{const g=u[p];g&&this.setTemporaryCache(f,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(Ns.ACCOUNT_KEYS),n=this.getItem(`${Ns.TOKEN_KEYS}.${this.clientId}`);if(e&&n){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case it.ID_TOKEN:if($1(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);const a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,it.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case it.ACCESS_TOKEN:case it.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(V1(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);const a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,it.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case it.REFRESH_TOKEN:if(G1(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);const a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,it.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);s&&jn.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,n){this.browserStorage.setItem(e,n)}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,n)}getCachedAccountEntity(e){const n=this.getItem(e);if(!n)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(n);return!r||!jn.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):Bu.toObject(new jn,r)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();this.setItem(n,JSON.stringify(e)),this.addAccountKeyToMap(n)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(Ns.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const n=this.getAccountKeys();n.indexOf(e)===-1?(n.push(e),this.setItem(Ns.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const n=this.getAccountKeys(),r=n.indexOf(e);r>-1?(n.splice(r,1),this.setItem(Ns.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,it.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,it.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,it.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${Ns.TOKEN_KEYS}.${this.clientId}`);if(e){const n=this.validateAndParseJson(e);if(n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,n){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(n){case it.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case it.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case it.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${n}`),Ae(e0)}this.setItem(`${Ns.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,n){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(n){case it.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case it.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case it.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${n}`),Ae(e0)}this.setItem(`${Ns.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,it.ID_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!$1(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,it.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=Ql(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,it.ID_TOKEN)}getAccessTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,it.ACCESS_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!V1(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,it.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=Ql(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,it.ACCESS_TOKEN)}getRefreshTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,it.REFRESH_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!G1(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,it.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=Ql(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,it.REFRESH_TOKEN)}getAppMetadata(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!MZ(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const n=OZ(e);this.setItem(n,JSON.stringify(e))}getServerTelemetry(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!PZ(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n))}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&LZ(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(Vp.WRAPPER_SKU,e),this.internalStorage.setItem(Vp.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(Vp.WRAPPER_SKU)||le.EMPTY_STRING,n=this.internalStorage.getItem(Vp.WRAPPER_VER)||le.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(){const e=this.generateCacheKey(Gn.ACTIVE_ACCOUNT_FILTERS),n=this.getItem(e);if(!n){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const o=this.generateCacheKey(Gn.ACTIVE_ACCOUNT),i=this.getItem(o);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}const r=this.validateAndParseJson(n);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const n=this.generateCacheKey(Gn.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(Gn.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(n,JSON.stringify(o)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(n),this.browserStorage.removeItem(r)}getThrottlingCache(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!NZ(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n))}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.getItemCookie(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===Cn.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,n,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,n))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(le.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(le.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,n){e.addQueueMeasurement(O.ClearTokensAndKeysWithClaims,n);const r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,n,r){let o=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=Lax;`;if(r){const i=this.getCookieExpirationTime(r);o+=`expires=${i};`}this.cacheConfig.secureCookies&&(o+="Secure;"),document.cookie=o}getItemCookie(e){const n=`${encodeURIComponent(e)}=`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(n)===0)return decodeURIComponent(i.substring(n.length,i.length))}return le.EMPTY_STRING}clearMsalCookies(){const e=`${le.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(r=>{for(;r.charAt(0)===" ";)r=r.substring(1);if(r.indexOf(e)===0){const o=r.split("=")[0];this.clearItemCookie(o)}})}clearItemCookie(e){this.setItemCookie(e,le.EMPTY_STRING,-1)}getCookieExpirationTime(e){const n=new Date;return new Date(n.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):qo.startsWith(e,le.CACHE_PREFIX)||qo.startsWith(e,Gn.ADAL_ID_TOKEN)?e:`${le.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:n}}=Ko.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Ht.AUTHORITY}.${n}`)}generateNonceKey(e){const{libraryState:{id:n}}=Ko.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Ht.NONCE_IDTOKEN}.${n}`)}generateStateKey(e){const{libraryState:{id:n}}=Ko.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Ht.REQUEST_STATE}.${n}`)}getCachedAuthority(e){const n=this.generateStateKey(e),r=this.getTemporaryCache(n);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,n,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,n,!1);const c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,r,!1),i){const u={credential:i.homeAccountId,type:eo.HOME_ACCOUNT_ID};this.setTemporaryCache(Ht.CCS_CREDENTIAL,JSON.stringify(u),!0)}else if(o){const u={credential:o,type:eo.UPN};this.setTemporaryCache(Ht.CCS_CREDENTIAL,JSON.stringify(u),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(n=>{n.indexOf(e)!==-1&&this.removeTemporaryItem(n)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Ht.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Ht.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Ht.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Ht.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(Ht.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(Ht.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const n=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(n);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||le.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(n=>{if(n.indexOf(Ht.REQUEST_STATE)===-1)return;const r=this.temporaryCacheStorage.getItem(n);if(!r)return;const o=i3(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const n=VI(JSON.stringify(e));this.setTemporaryCache(Ht.REQUEST_PARAMS,n,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(Ht.REQUEST_PARAMS,!0);if(!n)throw Ge(M5);let r;try{r=JSON.parse(xi(n))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),Ge(L5)}if(this.removeTemporaryItem(this.generateCacheKey(Ht.REQUEST_PARAMS)),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw Ge(FI);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Ht.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress();return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${le.CACHE_PREFIX}.${Ht.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const n=`${le.CACHE_PREFIX}.${Ht.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Ge(_5);this.setTemporaryCache(n,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(n)}getLegacyLoginHint(){const e=this.getTemporaryCache(Gn.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(Gn.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const n=this.getTemporaryCache(Gn.ID_TOKEN,!0);n&&(this.browserStorage.removeItem(this.generateCacheKey(Gn.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=n||e;if(r){const o=tl(r,xi);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,n){const r=Ql(n);if(e!==r){const o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(r,o),this.logger.verbose(`Updated an outdated ${n.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${n.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}async hydrateCache(e,n){var a,c,u;const r=by((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let o;n.claims&&(o=await this.cryptoImpl.hashString(n.claims));const i=Cy((u=e.account)==null?void 0:u.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,xi,void 0,e.tokenType,void 0,n.sshKid,n.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(o){if(o instanceof sc&&this.performanceClient&&r)try{const i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},r)}catch{}throw o}}}const qte=(t,e)=>{const n={cacheLocation:Cn.MemoryStorage,temporaryCacheLocation:Cn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new l0(t,n,xg,e)};/*! @azure/msal-browser v3.26.1 2024-10-08 */function Kte(t,e,n,r){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(r):[]}function Wte(t,e,n){if(e.trace("getAccount called"),Object.keys(t).length===0)return e.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(t);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function Yte(t,e,n){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:t});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function Qte(t,e,n){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:t});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function Jte(t,e,n){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:t});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Xte(t,e){e.setActiveAccount(t)}function Zte(t){return t.getActiveAccount()}/*! @azure/msal-browser v3.26.1 2024-10-08 */const ue={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.26.1 2024-10-08 */class s3{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Qo({})}addEventCallback(e,n,r){if(typeof window<"u"){const o=r||Eo();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(a.length===0||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class a3{constructor(e,n,r,o,i,s,a,c,u){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=u||Di(),this.logger=o.clone(Jr.MSAL_SKU,Ac,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){jn.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(jn.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri||Vo();return Et.getAbsoluteUrl(n,Vo())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Cf(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(O.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=n&&s?this.config.auth.authority.replace(Et.getDomainFromUrl(i),n.environment):i,c=cr.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=await Oe(f5,O.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(n&&!u.isAlias(n.environment))throw Jt(i5);return u}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const ene=32;async function tne(t,e,n){t.addQueueMeasurement(O.GeneratePkceCodes,n);const r=nl(nne,O.GenerateCodeVerifier,e,t,n)(t,e,n),o=await Oe(rne,O.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:o}}function nne(t,e,n){try{const r=new Uint8Array(ene);return nl(Ite,O.GetRandomValues,e,t,n)(r),Ay(r)}catch{throw Ge(jI)}}async function rne(t,e,n,r){e.addQueueMeasurement(O.GenerateCodeChallengeFromVerifier,r);try{const o=await Oe(X5,O.Sha256Digest,n,e,r)(t,e,r);return Ay(new Uint8Array(o))}catch{throw Ge(jI)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function WI(t,e,n,r){n.addQueueMeasurement(O.InitializeBaseRequest,t.correlationId);const o=t.authority||e.auth.authority,i=[...t&&t.scopes||[]],s={...t,correlationId:t.correlationId,authority:o,scopes:i};if(!s.authenticationScheme)s.authenticationScheme=jt.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===jt.SSH){if(!t.sshJwk)throw Jt(Sy);if(!t.sshKid)throw Jt(n5)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!qo.isEmptyObj(t.claims)&&(s.requestedClaimsHash=await Z5(t.claims)),s}async function one(t,e,n,r,o){r.addQueueMeasurement(O.InitializeSilentRequest,t.correlationId);const i=await Oe(WI,O.InitializeBaseRequest,o,r,t.correlationId)(t,n,r,o);return{...t,...i,account:e,forceRefresh:t.forceRefresh||!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class yd extends a3{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(O.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const n=await Oe(tne,O.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r={...e,redirectUri:e.redirectUri,code:le.EMPTY_STRING,codeVerifier:n.verifier};return e.codeChallenge=n.challenge,e.codeChallengeMethod=le.S256_CODE_CHALLENGE_METHOD,r}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||Di(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=Et.getAbsoluteUrl(e.postLogoutRedirectUri,Vo())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=Et.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Vo())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=Et.getAbsoluteUrl(Vo(),Vo())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(O.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await Oe(this.getClientConfiguration.bind(this),O.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new g5(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(O.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await Oe(this.getDiscoveredAuthority.bind(this),O.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:Jr.MSAL_SKU,version:Ac,cpu:le.EMPTY_STRING,os:le.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(O.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),o={interactionType:n},i=Ko.setRequestState(this.browserCrypto,e&&e.state||le.EMPTY_STRING,o),a={...await Oe(WI,O.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:i,nonce:e.nonce||Di(),responseMode:this.config.auth.OIDCOptions.serverResponseType},c=e.account||this.browserStorage.getActiveAccount();if(c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),!a.loginHint&&!c){const u=this.browserStorage.getLegacyLoginHint();u&&(a.loginHint=u)}return a}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const ine="ContentError",c3="user_switch";/*! @azure/msal-browser v3.26.1 2024-10-08 */const sne="USER_INTERACTION_REQUIRED",ane="USER_CANCEL",cne="NO_NETWORK",lne="PERSISTENT_ERROR",une="DISABLED",dne="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.26.1 2024-10-08 */const hne=-2147186943,fne={[c3]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class yi extends wt{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,yi.prototype),this.name="NativeAuthError",this.ext=r}}function Bl(t){if(t.ext&&t.ext.status&&(t.ext.status===lne||t.ext.status===une)||t.ext&&t.ext.error&&t.ext.error===hne)return!0;switch(t.errorCode){case ine:return!0;default:return!1}}function u0(t,e,n){if(n&&n.status)switch(n.status){case dne:return o0(p5);case sne:return new Ur(t,e);case ane:return Ge(_c);case cne:return Ge(Lg)}return new yi(t,fne[t]||e,n)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class l3 extends yd{async acquireToken(e){this.performanceClient.addQueueMeasurement(O.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(ln.acquireTokenSilent_silentFlow),r=await Oe(this.getClientConfiguration.bind(this),O.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new Xee(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const s=(await Oe(o.acquireCachedToken.bind(o),O.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof vd&&i.errorCode===HI&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n==null?void 0:n.account)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const CC={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class hu extends a3{constructor(e,n,r,o,i,s,a,c,u,d,f,p){var v;super(e,n,r,o,i,s,c,u,p),this.apiId=a,this.accountId=d,this.nativeMessageHandler=u,this.nativeStorageManager=f,this.silentCacheClient=new l3(e,this.nativeStorageManager,r,o,i,s,c,u,p),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const g=this.nativeMessageHandler.getExtensionId()===Xl.PREFERRED_EXTENSION_ID?"chrome":(v=this.nativeMessageHandler.getExtensionId())!=null&&v.length?"unknown":void 0;this.skus=Cf.makeExtraSkuString({libraryName:Jr.MSAL_SKU,libraryVersion:Ac,extensionName:g,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[Lee]:this.skus}}async acquireToken(e){this.performanceClient.addQueueMeasurement(O.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(O.NativeInteractionClientAcquireToken,e.correlationId),r=Mi();try{const o=await this.initializeNativeRequest(e);try{const u=await this.acquireTokensFromCache(this.accountId,o);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...i}=o,s={method:Ja.GetToken,request:i},a=await this.nativeMessageHandler.sendMessage(s),c=this.validateNativeResponse(a);return await this.handleNativeResponse(c,o,r).then(u=>(n.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),u)).catch(u=>{throw n.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}catch(o){throw o instanceof yi&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:wn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Ae(XE);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw Ae(XE);try{const o=this.createSilentCacheRequest(n,r),i=await this.silentCacheClient.acquireToken(o),s={...r,idTokenClaims:i==null?void 0:i.idTokenClaims,idToken:i==null?void 0:i.idToken};return{...i,account:s}}catch(o){throw o}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const o=await this.initializeNativeRequest(r),i={method:Ja.GetToken,request:o};try{const c=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof yi&&(this.serverTelemetryManager.setNativeBrokerErrorCode(c.errorCode),Bl(c)))throw c}this.browserStorage.setTemporaryCache(Ht.NATIVE_REQUEST,JSON.stringify(o),!0);const s={apiId:ln.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(a,s)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:o,...i}=r;o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ht.NATIVE_REQUEST));const s={method:Ja.GetToken,request:i},a=Mi();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const c=await this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(c);const u=this.handleNativeResponse(c,i,a);this.browserStorage.setInteractionInProgress(!1);const d=await u;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(c){throw this.browserStorage.setInteractionInProgress(!1),c}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=tl(e.id_token,xi),i=this.createHomeAccountIdentifier(e,o),s=(d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId}))==null?void 0:d.homeAccountId;if(i!==s&&e.account.id!==n.accountId)throw u0(c3);const a=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=MI(this.browserStorage,a,i,xi,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),u=await this.generateAuthenticationResult(e,n,o,c,a.canonicalAuthority,r);return this.cacheAccount(c),this.cacheNativeTokens(e,n,i,o,e.access_token,u.tenantId,r),u}createHomeAccountIdentifier(e,n){return jn.generateHomeAccountId(e.client_info||le.EMPTY_STRING,Ho.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return e.scope?wn.fromString(e.scope):wn.fromString(n.scope)}async generatePopAccessToken(e,n){if(n.tokenType===jt.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Tc(this.browserCrypto),o={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw Ae(EI);return r.signPopToken(e.access_token,n.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,n,r,o,i,s){const a=this.addTelemetryFromNativeResponse(e),c=e.scope?wn.fromString(e.scope):wn.fromString(n.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||le.EMPTY_STRING,f=u.TenantId||r.tid||le.EMPTY_STRING,p=xI(o.getAccountInfo(),void 0,r,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);const g=await this.generatePopAccessToken(e,n),v=n.tokenType===jt.POP?jt.POP:jt.BEARER;return{authority:i,uniqueId:d,tenantId:f,scopes:c.asArray(),account:p,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:v,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(n=>{this.logger.error(`Error occurred while removing account context from browser storage. ${n}`)})}cacheNativeTokens(e,n,r,o,i,s,a){const c=by(r,n.authority,e.id_token||"",n.clientId,o.tid||""),u=n.tokenType===jt.POP?le.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,d=a+u,f=this.generateScopes(e,n),p=Cy(r,n.authority,i,n.clientId,o.tid||s,f.printScopes(),d,0,xi,void 0,n.tokenType,void 0,n.keyId),g={idToken:c,accessToken:p};this.nativeStorageManager.saveCacheRecord(g,n.storeInCache)}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw ID(yy,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Et(n);r.validateAsUri();const{scopes:o,...i}=e,s=new wn(o||[]);s.appendScopes(ca);const a=()=>{switch(this.apiId){case ln.ssoSilent:case ln.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Yn.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case Yn.NONE:case Yn.CONSENT:case Yn.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Ge(q5)}},c={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(c.signPopToken&&e.popKid)throw Ge(W5);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=Xl.MATS_TELEMETRY,e.authenticationScheme===jt.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new Tc(this.browserCrypto);let f;if(c.keyId)f=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{const p=await Oe(d.generateCnf.bind(d),O.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);f=p.reqCnfString,c.keyId=p.kid,c.signPopToken=!0}c.reqCnf=f}return this.addRequestSKUs(c),c}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(CC.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(CC.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(Hu)){const n=e.extraParameters[Hu],r=e.redirectUri,o=e.extraParameters[CC.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:n,child_redirect_uri:r},e.redirectUri=o}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class _i{constructor(e,n,r,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(O.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const n={channel:Xl.CHANNEL_ID,extensionId:this.extensionId,responseId:Di(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(n)}`),this.messageChannel.port1.postMessage(n),new Promise((r,o)=>{this.resolvers.set(n.responseId,{resolve:r,reject:o})})}static async createProvider(e,n,r){e.trace("NativeMessageHandler - createProvider called.");try{const o=new _i(e,n,r,Xl.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{const i=new _i(e,n,r);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Xl.CHANNEL_ID,extensionId:this.extensionId,responseId:Di(),body:{method:Ja.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Ge(V5)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==Xl.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===Ja.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Ge($5))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if(i===Ja.Response){if(!r)return;const s=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(u0(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(u0(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw ID(yy,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(i===Ja.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,n,r,o){if(n.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case jt.BEARER:case jt.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class YI{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(O.HandleCodeResponse,n.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,n.state)}catch(o){throw o instanceof Li&&o.subError===_c?Ge(_c):o}return Oe(this.handleCodeResponseFromServer.bind(this),O.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(O.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Oe(this.authModule.updateAuthority.bind(this.authModule),O.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const i=this.createCcsCredentials(n);i&&(this.authCodeRequest.ccsCredential=i)}return await Oe(this.authModule.acquireToken.bind(this.authModule),O.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:eo.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:eo.UPN}:null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function u3(t,e,n){const r=Ng(t);if(!r)throw a5(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),Ge(w5)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Ge(E5));return r}function pne(t,e,n){if(!t.state)throw Ge(UI);const r=i3(e,t.state);if(!r)throw Ge(T5);if(r.interactionType!==n)throw Ge(I5)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class mne extends yd{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,a,u,d),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||ca,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n){var i;this.logger.verbose("acquireTokenPopupAsync called");const r=this.initializeServerTelemetryManager(ln.acquireTokenPopup),o=await Oe(this.initializeAuthorizationRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,we.Popup);o3(o.authority);try{const s=await Oe(this.initializeAuthorizationCodeRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),a=await Oe(this.createAuthCodeClient.bind(this),O.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),c=_i.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let u;c&&(u=this.performanceClient.startMeasurement(O.FetchAccountIdWithNativeBroker,e.correlationId));const d=await a.getAuthCodeUrl({...o,nativeBroker:c}),f=new YI(a,this.browserStorage,s,this.logger,this.performanceClient),p=this.initiateAuthRequest(d,n);this.eventHandler.emitEvent(ue.POPUP_OPENED,we.Popup,{popupWindow:p},null);const g=await this.monitorPopupForHash(p,n.popupWindowParent),v=nl(u3,O.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(g,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(vi.removeThrottle(this.browserStorage,this.config.auth.clientId,s),v.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),u&&u.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Ge(rp);const b=new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ln.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,v.accountId,this.nativeStorage,o.correlationId),{userRequestState:C}=Ko.parseRequestState(this.browserCrypto,o.state);return await b.acquireToken({...o,state:C,prompt:void 0})}return await f.handleCodeResponse(v,o)}catch(s){throw(i=n.popup)==null||i.close(),s instanceof wt&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}async logoutPopupAsync(e,n,r,o){var s,a,c,u;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(ue.LOGOUT_START,we.Popup,e);const i=this.initializeServerTelemetryManager(ln.logoutPopup);try{await this.clearCacheOnLogout(e.account);const d=await Oe(this.createAuthCodeClient.bind(this),O.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{d.authority.endSessionEndpoint}catch{if((s=e.account)!=null&&s.homeAccountId&&e.postLogoutRedirectUri&&d.authority.protocolMode===ns.OIDC){if(this.browserStorage.removeAccount((a=e.account)==null?void 0:a.homeAccountId),this.eventHandler.emitEvent(ue.LOGOUT_SUCCESS,we.Popup,e),o){const g={apiId:ln.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=Et.getAbsoluteUrl(o,Vo());await this.navigationClient.navigateInternal(v,g)}(c=n.popup)==null||c.close();return}}const f=d.getLogoutUri(e);this.eventHandler.emitEvent(ue.LOGOUT_SUCCESS,we.Popup,e);const p=this.openPopup(f,n);if(this.eventHandler.emitEvent(ue.POPUP_OPENED,we.Popup,{popupWindow:p},null),await this.monitorPopupForHash(p,n.popupWindowParent).catch(()=>{}),o){const g={apiId:ln.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=Et.getAbsoluteUrl(o,Vo());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${v}`),await this.navigationClient.navigateInternal(v,g)}else this.logger.verbose("No main window navigation requested")}catch(d){throw(u=n.popup)==null||u.close(),d instanceof wt&&(d.setCorrelationId(this.correlationId),i.cacheFailedRequest(d)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(ue.LOGOUT_FAILURE,we.Popup,null,d),this.eventHandler.emitEvent(ue.LOGOUT_END,we.Popup),d}this.eventHandler.emitEvent(ue.LOGOUT_END,we.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),Ge(Iy)}monitorPopupForHash(e,n){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(Ge(_c));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===np.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw Ge(k5);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),Ge(A5)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:o}){var g,v,y,b;const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=(g=r.popupSize)==null?void 0:g.width,d=(v=r.popupSize)==null?void 0:v.height,f=(y=r.popupPosition)==null?void 0:y.top,p=(b=r.popupPosition)==null?void 0:b.left;return(!u||u<0||u>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=Jr.POPUP_WIDTH),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),d=Jr.POPUP_HEIGHT),(!f||f<0||f>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,c/2-Jr.POPUP_HEIGHT/2+s)),(!p||p<0||p>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,a/2-Jr.POPUP_WIDTH/2+i)),o.open(e,n,`width=${u}, height=${d}, top=${f}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(we.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,n){return`${Jr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${Jr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class ux{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){n.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Ht.ORIGIN_URI,n.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Ht.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:ln.acquireTokenRedirect,timeout:n.redirectTimeout,noHistory:!1};if(typeof n.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),n.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await n.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await n.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Ge(Iy)}async handleCodeResponse(e,n){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const r=this.browserStorage.generateStateKey(n),o=this.browserStorage.getTemporaryCache(r);if(!o)throw Ae(kg,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,o)}catch(u){throw u instanceof Li&&u.subError===_c?Ge(_c):u}const s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await Oe(this.authModule.updateAuthority.bind(this.authModule),O.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId),i.nonce=a||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const u=this.checkCcsCredentials();u&&(this.authCodeRequest.ccsCredential=u)}const c=await this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(n),c}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(Ht.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function gne(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class vne extends yd{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,a,u,d),this.nativeStorage=c}async acquireToken(e){const n=await Oe(this.initializeAuthorizationRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,we.Redirect);this.browserStorage.updateCacheEntries(n.state,n.nonce,n.authority,n.loginHint||"",n.account||null);const r=this.initializeServerTelemetryManager(ln.acquireTokenRedirect),o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(n.state),this.eventHandler.emitEvent(ue.RESTORE_FROM_BFCACHE,we.Redirect))};try{const i=await Oe(this.initializeAuthorizationCodeRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(n),s=await Oe(this.createAuthCodeClient.bind(this),O.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),a=new ux(s,this.browserStorage,i,this.logger,this.performanceClient),c=await s.getAuthCodeUrl({...n,nativeBroker:_i.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),u=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${u}`),window.addEventListener("pageshow",o),await a.initiateAuthRequest(c,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:u,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(i){throw i instanceof wt&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(n.state),i}}async handleRedirectPromise(e="",n){const r=this.initializeServerTelemetryManager(ln.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(we.Redirect),gne()!=="back_forward"?n.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(Ht.ORIGIN_URI,!0)||le.EMPTY_STRING,a=Et.removeHashFromUrl(s),c=Et.removeHashFromUrl(window.location.href);if(a===c&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&Nte(s),await this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!GI()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Ht.URL_HASH,i,!0);const u={apiId:ln.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(!s||s==="null"){const f=Mte();this.browserStorage.setTemporaryCache(Ht.ORIGIN_URI,f,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=await this.navigationClient.navigateInternal(f,u)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),d=await this.navigationClient.navigateInternal(s,u);if(!d)return await this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,r);return null}catch(o){throw o instanceof wt&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(we.Redirect),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===np.QUERY?n=window.location.search:n=window.location.hash);let r=Ng(n);if(r){try{pne(r,this.browserCrypto,we.Redirect)}catch(i){return i instanceof wt&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return Pte(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const o=this.browserStorage.getTemporaryCache(Ht.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ht.URL_HASH)),o&&(r=Ng(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,n){const r=e.state;if(!r)throw Ge(UI);const o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ge(rp);const c=new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ln.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:u}=Ko.parseRequestState(this.browserCrypto,r);return c.acquireToken({...o,state:u,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(r)})}const i=this.browserStorage.getCachedAuthority(r);if(!i)throw Ge(FI);const s=await Oe(this.createAuthCodeClient.bind(this),O.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:i});return vi.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new ux(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)}async logout(e){var o,i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(ln.logout);try{this.eventHandler.emitEvent(ue.LOGOUT_START,we.Redirect,e),await this.clearCacheOnLogout(n.account);const s={apiId:ln.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await Oe(this.createAuthCodeClient.bind(this),O.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(a.authority.protocolMode===ns.OIDC)try{a.authority.endSessionEndpoint}catch{if((o=n.account)!=null&&o.homeAccountId){this.browserStorage.removeAccount((i=n.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(ue.LOGOUT_SUCCESS,we.Redirect,n);return}}const c=a.getLogoutUri(n);if(this.eventHandler.emitEvent(ue.LOGOUT_SUCCESS,we.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(c)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}}catch(s){throw s instanceof wt&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(ue.LOGOUT_FAILURE,we.Redirect,null,s),this.eventHandler.emitEvent(ue.LOGOUT_END,we.Redirect),s}this.eventHandler.emitEvent(ue.LOGOUT_END,we.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return Et.getAbsoluteUrl(n,Vo())}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function yne(t,e,n,r,o){if(e.addQueueMeasurement(O.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),Ge(Iy);return o?Oe(Cne,O.SilentHandlerLoadFrame,n,e,r)(t,o,e,r):nl(Sne,O.SilentHandlerLoadFrameSync,n,e,r)(t)}async function bne(t,e,n,r,o,i,s){return r.addQueueMeasurement(O.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<jg&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${jg}ms). This may result in timeouts.`);const u=window.setTimeout(()=>{window.clearInterval(d),c(Ge(x5))},e),d=window.setInterval(()=>{let f="";const p=t.contentWindow;try{f=p?p.location.href:""}catch{}if(!f||f==="about:blank")return;let g="";p&&(s===np.QUERY?g=p.location.search:g=p.location.hash),window.clearTimeout(u),window.clearInterval(d),a(g)},n)}).finally(()=>{nl(Ene,O.RemoveHiddenIframe,o,r,i)(t)})}function Cne(t,e,n,r){return n.addQueueMeasurement(O.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=d3();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=t,o(s)},e)})}function Sne(t){const e=d3();return e.src=t,e}function d3(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function Ene(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class wne extends yd{constructor(e,n,r,o,i,s,a,c,u,d,f){super(e,n,r,o,i,s,c,d,f),this.apiId=a,this.nativeStorage=u}async acquireToken(e){this.performanceClient.addQueueMeasurement(O.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==Yn.NONE&&n.prompt!==Yn.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${Yn.NONE}`),n.prompt=Yn.NONE):n.prompt=Yn.NONE;const r=await Oe(this.initializeAuthorizationRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,we.Silent);o3(r.authority);const o=this.initializeServerTelemetryManager(this.apiId);let i;try{return i=await Oe(this.createAuthCodeClient.bind(this),O.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),await Oe(this.silentTokenHelper.bind(this),O.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(s){if(s instanceof wt&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!i||!(s instanceof wt)||s.errorCode!==Jr.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);const a=await Oe(this.initializeAuthorizationRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,we.Silent);return await Oe(this.silentTokenHelper.bind(this),O.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,a)}}logout(){return Promise.reject(Ge(_y))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(O.SilentIframeClientTokenHelper,r);const o=await Oe(this.initializeAuthorizationCodeRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(n),i=await Oe(e.getAuthCodeUrl.bind(e),O.GetAuthCodeUrl,this.logger,this.performanceClient,r)({...n,nativeBroker:_i.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme)}),s=new YI(e,this.browserStorage,o,this.logger,this.performanceClient),a=await Oe(yne,O.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,u=await Oe(bne,O.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),d=nl(u3,O.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,c,this.logger);if(d.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ge(rp);const f=new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,d.accountId,this.browserStorage,r),{userRequestState:p}=Ko.parseRequestState(this.browserCrypto,n.state);return Oe(f.acquireToken.bind(f),O.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)({...n,state:p,prompt:n.prompt||Yn.NONE})}return Oe(s.handleCodeResponse.bind(s),O.HandleCodeResponse,this.logger,this.performanceClient,r)(d,n)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Tne extends yd{async acquireToken(e){this.performanceClient.addQueueMeasurement(O.SilentRefreshClientAcquireToken,e.correlationId);const n=await Oe(WI,O.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(ln.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Oe(i.acquireTokenByRefreshToken.bind(i),O.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})}logout(){return Promise.reject(Ge(_y))}async createRefreshTokenClient(e){const n=await Oe(this.getClientConfiguration.bind(this),O.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new i0(n,this.performanceClient)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Ine{constructor(e,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw Ge(BI);const o=n.id_token?tl(n.id_token,xi):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new cr(cr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||Di()):void 0,a=this.loadAccount(e,r.clientInfo||n.client_info||"",o,s),c=this.loadIdToken(n,a.homeAccountId,a.environment,a.realm),u=this.loadAccessToken(e,n,a.homeAccountId,a.environment,a.realm,r),d=this.loadRefreshToken(n,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:c,accessToken:u,refreshToken:d},o,s)}loadAccount(e,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const c=jn.createFromAccountInfo(e.account);return this.storage.setAccount(c),c}else if(!o||!n&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Ge(U5);const i=jn.generateHomeAccountId(n,o.authorityType,this.logger,this.cryptoObj,r),s=r==null?void 0:r.tid,a=MI(this.storage,o,i,xi,r,n,o.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=by(n,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(i),i}loadAccessToken(e,n,r,o,i,s){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const a=n.scope?wn.fromString(n.scope):new wn(e.scopes),c=s.expiresOn||n.expires_in+new Date().getTime()/1e3,u=s.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+new Date().getTime()/1e3,d=Cy(r,o,n.access_token,this.config.auth.clientId,i,a.printScopes(),c,u,xi);return this.storage.setAccessTokenCredential(d),d}loadRefreshToken(e,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=GD(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,n,r,o){var d,f,p;let i="",s=[],a=null,c;n!=null&&n.accessToken&&(i=n.accessToken.secret,s=wn.fromString(n.accessToken.target).asArray(),a=new Date(Number(n.accessToken.expiresOn)*1e3),c=new Date(Number(n.accessToken.extendedExpiresOn)*1e3));const u=n.account;return{authority:o?o.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:s,account:u.getAccountInfo(),idToken:((d=n.idToken)==null?void 0:d.secret)||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((f=n.refreshToken)==null?void 0:f.familyId)||"",tokenType:((p=n==null?void 0:n.accessToken)==null?void 0:p.tokenType)||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class _ne extends g5{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Ane extends yd{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,c,u,d),this.apiId=a}async acquireToken(e){if(!e.code)throw Ge(F5);const n=await Oe(this.initializeAuthorizationRequest.bind(this),O.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,we.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const o={...n,code:e.code},i=await Oe(this.getClientConfiguration.bind(this),O.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),s=new _ne(i);this.logger.verbose("Auth code client created");const a=new YI(s,this.browserStorage,o,this.logger,this.performanceClient);return await Oe(a.handleCodeResponseFromServer.bind(a),O.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(o){throw o instanceof wt&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(Ge(_y))}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function oi(t){const e=t==null?void 0:t.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function Gp(t,e){try{rs(t)}catch(n){throw e.end({success:!1},n),n}}class xy{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new xc(this.logger,this.performanceClient):xg,this.eventHandler=new s3(this.logger),this.browserStorage=this.isBrowserEnvironment?new l0(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,zee(this.config.auth),this.performanceClient):qte(this.config.auth.clientId,this.logger);const n={cacheLocation:Cn.MemoryStorage,temporaryCacheLocation:Cn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new l0(this.config.auth.clientId,n,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new Ine(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,n){const r=new xy(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(ue.INITIALIZE_END);return}const n=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(O.InitializeClientApplication,n);if(this.eventHandler.emitEvent(ue.INITIALIZE_START),r)try{this.nativeExtensionProvider=await _i.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await Oe(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),O.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,n)(this.performanceClient,n)),this.initialized=!0,this.eventHandler.emitEvent(ue.INITIALIZE_END),o.end({allowNativeBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),qI(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&_i.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r==null?void 0:r.correlationId:this.browserStorage.getTemporaryCache(Ht.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(O.AcquireTokenRedirect,i);this.eventHandler.emitEvent(ue.HANDLE_REDIRECT_START,we.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const c=new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ln.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=Oe(c.handleRedirectPromise.bind(c),O.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const c=this.createRedirectClient(i);a=Oe(c.handleRedirectPromise.bind(c),O.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(c=>(c?(n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(ue.LOGIN_SUCCESS,we.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_SUCCESS,we.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:oi(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(ue.HANDLE_REDIRECT_END,we.Redirect),c)).catch(c=>{const u=c;throw n.length>0?this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_FAILURE,we.Redirect,null,u):this.eventHandler.emitEvent(ue.LOGIN_FAILURE,we.Redirect,null,u),this.eventHandler.emitEvent(ue.HANDLE_REDIRECT_END,we.Redirect),s.end({success:!1},u),c})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(O.AcquireTokenPreRedirect,n);r.add({accountType:oi(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{const a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{const s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}const i=this.getAllAccounts().length>0;try{cx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_START,we.Redirect,e):this.eventHandler.emitEvent(ue.LOGIN_START,we.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ln.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof yi&&Bl(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof Ur)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),c}):s=this.createRedirectClient(n).acquireToken(e),await s}catch(s){throw r.end({success:!1},s),i?this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_FAILURE,we.Redirect,null,s):this.eventHandler.emitEvent(ue.LOGIN_FAILURE,we.Redirect,null,s),s}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(O.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:oi(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),Gp(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_START,we.Popup,e):this.eventHandler.emitEvent(ue.LOGIN_START,we.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative({...e,correlationId:n},ln.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,requestId:s.requestId,accountType:oi(s.account)}),s)).catch(s=>{if(s instanceof yi&&Bl(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e);if(s instanceof Ur)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):i=this.createPopupClient(n).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(ue.LOGIN_SUCCESS,we.Popup,s):this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_SUCCESS,we.Popup,s),r.end({success:!0,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:oi(s.account)}),s)).catch(s=>(o.length>0?this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_FAILURE,we.Popup,null,s):this.eventHandler.emitEvent(ue.LOGIN_FAILURE,we.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var i,s;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(O.SsoSilent,n),(i=this.ssoSilentMeasurement)==null||i.add({scenarioId:e.scenarioId,accountType:oi(e.account)}),Gp(this.initialized,this.ssoSilentMeasurement),(s=this.ssoSilentMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(ue.SSO_SILENT_START,we.Silent,r);let o;return this.canUseNative(r)?o=this.acquireTokenNative(r,ln.ssoSilent).catch(a=>{if(a instanceof yi&&Bl(a))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw a}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(a=>{var c;return this.eventHandler.emitEvent(ue.SSO_SILENT_SUCCESS,we.Silent,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!0,isNativeBroker:a.fromNativeBroker,requestId:a.requestId,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:oi(a.account)}),a}).catch(a=>{var c;throw this.eventHandler.emitEvent(ue.SSO_SILENT_FAILURE,we.Silent,null,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(O.AcquireTokenByCode,n);Gp(this.initialized,r),this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_BY_CODE_START,we.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Ge(H5);if(e.code){const o=e.code;let i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),i=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(s=>(this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_BY_CODE_SUCCESS,we.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:oi(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_BY_CODE_FAILURE,we.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),await i}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:n},ln.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof yi&&Bl(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:oi(o.account),success:!0}),o}else throw Ge(z5);else throw Ge(B5)}catch(o){throw this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_BY_CODE_FAILURE,we.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var o;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(O.AcquireTokenByCodeAsync,e.correlationId),(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>{var s;return(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var s;throw(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(O.AcquireTokenFromCache,e.correlationId),n){case Mn.Default:case Mn.AccessToken:case Mn.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return Oe(r.acquireToken.bind(r),O.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ae(Ii)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(O.AcquireTokenByRefreshToken,e.correlationId),n){case Mn.Default:case Mn.AccessTokenAndRefreshToken:case Mn.RefreshToken:case Mn.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return Oe(r.acquireToken.bind(r),O.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ae(Ii)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(O.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return Oe(n.acquireToken.bind(n),O.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return cx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return rs(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(n).logout(e)}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){return Kte(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return Wte(e,this.logger,this.browserStorage)}getAccountByUsername(e){return Yte(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return Qte(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return Jte(e,this.logger,this.browserStorage)}setActiveAccount(e){Xte(e,this.browserStorage)}getActiveAccount(){return Zte(this.browserStorage)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=jn.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Ge(rp);return new hu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,n){if(this.logger.trace("canUseNative called"),!_i.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Yn.NONE:case Yn.CONSENT:case Yn.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new mne(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new vne(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new wne(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ln.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new l3(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new Tne(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new Ane(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ln.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return r3(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){var n;try{(n=e.key)!=null&&n.includes(Gn.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(ue.ACTIVE_ACCOUNT_CHANGED);const r=e.newValue||e.oldValue;if(!r)return;const o=JSON.parse(r);if(typeof o!="object"||!jn.isAccountEntity(o))return;const s=Bu.toObject(new jn,o).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(ue.ACCOUNT_ADDED,void 0,s)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(ue.ACCOUNT_REMOVED,void 0,s))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Di():le.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||ix})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||ix})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(O.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Gp(this.initialized,r),this.logger.verbose("acquireTokenSilent called",n);const o=e.account||this.getActiveAccount();if(!o)throw Ge(O5);r.add({accountType:oi(o)});const i={clientId:this.config.auth.clientId,authority:e.authority||le.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n);const c=Oe(this.acquireTokenSilentAsync.bind(this),O.AcquireTokenSilentAsync,this.logger,this.performanceClient,n)({...e,correlationId:n},o).then(u=>(this.activeSilentTokenRequests.delete(s),r.end({success:!0,fromCache:u.fromCache,isNativeBroker:u.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:u.requestId,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),u)).catch(u=>{throw this.activeSilentTokenRequests.delete(s),r.end({success:!1},u),u});return this.activeSilentTokenRequests.set(s,c),{...await c,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),r.discard(),{...await a,state:e.state}}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(O.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_START,we.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const o=await Oe(one,O.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Mn.Default;return this.acquireTokenSilentNoIframe(o,i).catch(async a=>{if(kne(a,i))if(this.activeIframeRequest)if(i!==Mn.Skip){const[u,d]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${d}`,o.correlationId);const f=this.performanceClient.startMeasurement(O.AwaitConcurrentIframe,o.correlationId);f.add({awaitIframeCorrelationId:d});const p=await u;if(f.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${d} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${d} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),Oe(this.acquireTokenBySilentIframe.bind(this),O.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let u;return this.activeIframeRequest=[new Promise(d=>{u=d}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),Oe(this.acquireTokenBySilentIframe.bind(this),O.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(d=>(u(!0),d)).catch(d=>{throw u(!1),d}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_SUCCESS,we.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker,requestId:a.requestId},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_FAILURE,we.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return _i.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,ln.acquireTokenSilent_silentFlow).catch(async r=>{throw r instanceof yi&&Bl(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,Ae(Ii)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),Oe(this.acquireTokenFromCache.bind(this),O.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Mn.AccessToken)throw r;return this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_NETWORK_START,we.Silent,e),Oe(this.acquireTokenByRefreshToken.bind(this),O.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}}function kne(t,e){const n=!(t instanceof Ur&&t.subError!==Ty),r=t.errorCode===Jr.INVALID_GRANT_ERROR||t.errorCode===Ii,o=n&&r||t.errorCode===Mg||t.errorCode===OI,i=vte.includes(e);return o&&i}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function xne(t,e){const n=new kc(t);return await n.initialize(),xy.createController(n,e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */let Rne=class h3{static async createPublicClientApplication(e){const n=await xne(e);return new h3(e,n)}constructor(e,n){this.controller=n||new xy(new kc(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}};/*! @azure/msal-browser v3.26.1 2024-10-08 */class dx{constructor(e,n){const r=n&&n.loggerOptions||{};this.logger=new Qo(r,Ug,Ac),this.cryptoOps=new xc(this.logger),this.popTokenGenerator=new Tc(this.cryptoOps),this.shrParameters=e}async generatePublicKeyThumbprint(){const{kid:e}=await this.popTokenGenerator.generateKid(this.shrParameters);return e}async signRequest(e,n,r){return this.popTokenGenerator.signPayload(e,n,this.shrParameters,r)}async removeKeys(e){return this.cryptoOps.removeTokenBindingKey(e)}}function hx(){let t;try{t=window[Cn.SessionStorage];const e=t==null?void 0:t.getItem(Cte);if(Number(e)===1)return q(()=>import("./BrowserPerformanceMeasurement-CIsv1iQ0.js"),[])}catch{}}function Mm(){return typeof window<"u"&&typeof window.performance<"u"&&typeof window.performance.now=="function"}function Pne(t){if(!(!t||!Mm()))return Math.round(window.performance.now()-t)}class Nne extends cte{constructor(e,n,r){var o,i;super(e.auth.clientId,e.auth.authority||`${le.DEFAULT_AUTHORITY}`,new Qo(((o=e.system)==null?void 0:o.loggerOptions)||{},Ug,Ac),Ug,Ac,((i=e.telemetry)==null?void 0:i.application)||{appName:"",appVersion:""},n,r)}generateId(){return Di()}getPageVisibility(){var e;return((e=document.visibilityState)==null?void 0:e.toString())||null}deleteIncompleteSubMeasurements(e){var n;(n=hx())==null||n.then(r=>{const o=this.eventsByCorrelationId.get(e.event.correlationId),i=o&&o.eventId===e.event.eventId,s=[];i&&(o!=null&&o.incompleteSubMeasurements)&&o.incompleteSubMeasurements.forEach(a=>{s.push({...a})}),r.BrowserPerformanceMeasurement.flushMeasurements(e.event.correlationId,s)})}startMeasurement(e,n){var a;const r=this.getPageVisibility(),o=super.startMeasurement(e,n),i=Mm()?window.performance.now():void 0,s=(a=hx())==null?void 0:a.then(c=>new c.BrowserPerformanceMeasurement(e,o.event.correlationId));return s==null||s.then(c=>c.startMeasurement()),{...o,end:(c,u)=>{const d=o.end({...c,startPageVisibility:r,endPageVisibility:this.getPageVisibility(),durationMs:Pne(i)},u);return s==null||s.then(f=>f.endMeasurement()),this.deleteIncompleteSubMeasurements(o),d},discard:()=>{o.discard(),s==null||s.then(c=>c.flushMeasurement()),this.deleteIncompleteSubMeasurements(o)}}}setPreQueueTime(e,n){if(!Mm()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for ${e}`);return}if(!n){this.logger.trace(`BrowserPerformanceClient: correlationId for ${e} not provided, unable to set telemetry queue time`);return}const r=this.preQueueTimeByCorrelationId.get(n);r&&(this.logger.trace(`BrowserPerformanceClient: Incomplete pre-queue ${r.name} found`,n),this.addQueueMeasurement(r.name,n,void 0,!0)),this.preQueueTimeByCorrelationId.set(n,{name:e,time:window.performance.now()})}addQueueMeasurement(e,n,r,o){if(!Mm()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to add queue measurement for ${e}`);return}if(!n){this.logger.trace(`BrowserPerformanceClient: correlationId for ${e} not provided, unable to add queue measurement`);return}const i=super.getPreQueueTime(e,n);if(!i)return;const s=window.performance.now(),a=r||super.calculateQueuedTime(i,s);return super.addQueueMeasurement(e,n,a,o)}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const yt={...O,PairwiseBrokerApplicationInitializeBrokering:"pairwiseBrokerApplicationInitializeBrokering",BrokerClientApplicationHandleBrokerHandshake:"brokerClientApplicationHandleBrokerHandshake",BrokerClientApplicationBrokeredSSOSilentRequest:"brokerClientApplicationBrokeredSSOSilentRequest",BrokerClientApplicationBrokeredSilentRequest:"brokerClientApplicationBrokeredSilentRequest",EmbeddedClientApplicationSendSSOSilentRequest:"embeddedSSOSilent",EmbeddedClientApplicationSendPopupRequest:"embeddedPopup",EmbeddedClientApplicationSendRedirectRequest:"embeddedRedirect",EmbeddedClientApplicationHandleRedirectRequest:"embeddedHandleRedirect",EmbeddedClientApplicationSendSilentRefreshRequest:"embeddedSilentRefresh"},One=new Map([[yt.PairwiseBrokerApplicationInitializeBrokering,"PWBInitBrk"],[yt.BrokerClientApplicationHandleBrokerHandshake,"BrkClientHandeBrkHandshake"],[yt.BrokerClientApplicationBrokeredSSOSilentRequest,"BrkClientBrkSSOReq"],[yt.BrokerClientApplicationBrokeredSilentRequest,"BrkClientBrkSltReq"],[yt.EmbeddedClientApplicationSendSSOSilentRequest,"EmbClientSendSSOReq"],[yt.EmbeddedClientApplicationSendPopupRequest,"EmbClientSendPopupReq"],[yt.EmbeddedClientApplicationSendRedirectRequest,"EmbClientSendRedirectReq"],[yt.EmbeddedClientApplicationHandleRedirectRequest,"EmbClientHandleRedirectReq"],[yt.EmbeddedClientApplicationSendSilentRefreshRequest,"EmbClientSendSltRefreshReq"]]),Mne=new Set(["brokerInteractionTimeoutMs","brokerMessageTimeoutMs","brokerHandshakeTimeoutMs","brokerIframeTimeoutMs"]);var Lne="function",QI="object",JI="undefined",Vh="prototype",XI=Object,Dne=XI[Vh];/*! https://github.com/nevware21/ts-utils v0.11.5 */function Ss(t,e){return t||e}function Rr(t,e){return t[e]}var Xr=void 0,Dn=null,ZI="",Ry="function",op="object",os="prototype",d0="__proto__",Xa="undefined",Hg="constructor",e_="Symbol",jne="_polyfill",ac="length",zg="name",or="call",Py="toString",No=Ss(Object),t_=Rr(No,os),f3=Ss(String),rl=Rr(f3,os),Une=Ss(Math),p3=Ss(Array),m3=Rr(p3,os),hs=Rr(m3,"slice");function ir(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function Fne(t,e){var n=ir(t);return n.e?e:n.v}var SC;function Ny(t){return function(e){return typeof e===t}}function g3(t){var e="[object "+t+"]";return function(n){return!!(n&&Bne(n)===e)}}function Bne(t){return t_[Py].call(t)}function $t(t){return typeof t===Xa||t===Xa}function Hne(t){return!n_(t)}function Gt(t){return t===Dn||$t(t)}function zne(t){return t===Dn||!n_(t)}function n_(t){return!!t||t!==Xr}function Vne(t){return!SC&&(SC=["string","number","boolean",Xa,"symbol","bigint"]),t!==op&&SC.indexOf(t)!==-1}var ur=Ny("string"),Zt=Ny(Ry);function zu(t){return!t&&Gt(t)?!1:!!t&&typeof t===op}var Tt=Rr(p3,"isArray"),$ne=g3("Date"),la=Ny("number"),Rc=Ny("boolean"),Gne=g3("Error");function Vu(t){return!!(t&&t.then&&Zt(t.then))}function fx(t){return!(!t||Fne(function(){return!(t&&0+t)},!t))}var r_=Rr(No,"getOwnPropertyDescriptor");function Ao(t,e){return!!t&&t_.hasOwnProperty[or](t,e)}var fu=Ss(Rr(No,"hasOwn"),qne);function qne(t,e){return Ao(t,e)||!!r_(t,e)}function en(t,e,n){if(t&&zu(t)){for(var r in t)if(fu(t,r)&&e[or](t,r,t[r])===-1)break}}var qp={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function v3(t){var e={};if(e[qp.c]=!0,e[qp.e]=!0,t.l){e.get=function(){return t.l.v};var n=r_(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return en(t,function(r,o){e[qp[r]]=Hne(o)?e[qp[r]]:o}),e}var fs=Rr(No,"defineProperty"),Kne=Rr(No,"defineProperties");function fn(t,e,n){return fs(t,e,v3(n))}function y3(t,e){var n={};return en(e,function(r,o){n[r]=v3(o)}),Kne(t,n)}function b3(t,e,n,r,o){var i={};return en(t,function(s,a){Vg(i,s,e?a:s),Vg(i,a,s)}),r?r(i):i}function Vg(t,e,n,r){fs(t,e,{value:n,enumerable:!0,writable:!1})}var $o=Ss(f3),Wne="[object Error]";function Rt(t,e){var n=ZI,r=t_[Py][or](t);r===Wne&&(t={stack:$o(t.stack),message:$o(t.message),name:$o(t.name)});try{n=JSON.stringify(t,Dn,e?typeof e=="number"?e:4:Xr),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):Dn)||$o(t)}catch(o){n=" - "+Rt(o,e)}return r+": "+n}function go(t){throw new Error(t)}function Oo(t){throw new TypeError(t)}var C3=Rr(No,"freeze");function Yne(t){return t}function Qne(t){return t[d0]||Dn}var px=Rr(No,"assign"),is=Rr(No,"keys");function bd(t){return C3&&en(t,function(e,n){(Tt(n)||zu(n))&&bd(n)}),Pc(t)}var Pc=Ss(C3,Yne),h0=Ss(Rr(No,"getPrototypeOf"),Qne);function Jne(t){return b3(t,1,0,Pc)}function Xne(t){return b3(t,0,0,Pc)}function Zne(t){var e={};return en(t,function(n,r){Vg(e,n,r[1]),Vg(e,r[0],r[1])}),Pc(e)}function ere(t){return Zne(t)}var S3=Xne({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),mx="__tsUtils$gblCfg",EC;function E3(){var t;return typeof globalThis!==Xa&&(t=globalThis),!t&&typeof self!==Xa&&(t=self),!t&&typeof window!==Xa&&(t=window),!t&&typeof global!==Xa&&(t=global),t}function w3(){if(!EC){var t=ir(E3).v||{};EC=t[mx]=t[mx]||{}}return EC}var Oy=ip;function ip(t,e,n){var r=e?e[t]:Dn;return function(o){var i=(o?o[t]:Dn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?hs[or](s,1):s)}Oo('"'+$o(t)+'" not defined for '+Rt(o))}}function tre(t){return function(e){return e[t]}}var nre=Rr(Une,"max"),gx=Oy("slice",rl),bi=Oy("substring",rl),Hl=ip("substr",rl,rre);function rre(t,e,n){return Gt(t)&&Oo("Invalid "+Rt(t)),n<0?ZI:(e=e||0,e<0&&(e=nre(e+t[ac],0)),$t(n)?gx(t,e):gx(t,e,e+n))}function o_(t,e){return bi(t,0,e)}var vx="_urid",wC;function ore(){if(!wC){var t=w3();wC=t.gblSym=t.gblSym||{k:{},s:{}}}return wC}var Kp;function i_(t){var e={description:$o(t),toString:function(){return e_+"("+t+")"}};return e[jne]=!0,e}function ire(t){var e=ore();if(!fu(e.k,t)){var n=i_(t),r=is(e.s).length;n[vx]=function(){return r+"_"+n[Py]()},e.k[t]=n,e.s[n[vx]()]=$o(t)}return e.k[t]}function sre(t){!Kp&&(Kp={});var e,n=S3[t];return n&&(e=Kp[n]=Kp[n]||i_(e_+"."+n)),e}var An;function va(){An=w3()}function are(t){var e={};return!An&&va(),e.b=An.lzy,fs(e,"v",{configurable:!0,get:function(){var n=t();return An.lzy||fs(e,"v",{value:n}),e.b=An.lzy,n}}),e}function Mo(t){return fs({toJSON:function(){return t}},"v",{value:t})}var T3="window",$h;function My(t,e){var n;return function(){return!An&&va(),(!n||An.lzy)&&(n=Mo(ir(t,e).v)),n.v}}function Cd(t){return!An&&va(),(!$h||t===!1||An.lzy)&&($h=Mo(ir(E3).v||Dn)),$h.v}function kn(t,e){var n;if(!$h||e===!1?n=Cd(e):n=$h.v,n&&n[t])return n[t];if(t===T3)try{return window}catch{}return Dn}function I3(){return!!ps()}var ps=My(kn,["document"]);function cre(){return!!ya()}var ya=My(kn,[T3]);function lre(){return!!Hi()}var Hi=My(kn,["navigator"]),ure=My(function(){return!!ir(function(){return process&&(process.versions||{}).node}).v}),$u,TC;function Ly(){return $u=Mo(ir(kn,[e_]).v),$u}function dre(t){var e=(An.lzy?0:$u)||Ly();return e.v?e.v[t]:Xr}function hre(){return!!fre()}function fre(){return!An&&va(),((An.lzy?0:$u)||Ly()).v}function s_(t,e){var n=S3[t];!An&&va();var r=(An.lzy?0:$u)||Ly();return r.v?r.v[n||t]:sre(t)}function eh(t,e){!An&&va();var n=(An.lzy?0:$u)||Ly();return n.v?n.v(t):i_(t)}function a_(t){return!An&&va(),TC=(An.lzy?0:TC)||Mo(ir(dre,["for"]).v),(TC.v||ire)(t)}function f0(t){return!!t&&Zt(t.next)}function _3(t){return!zne(t)&&Zt(t[s_(3)])}var Wp;function c_(t,e,n){if(t&&(f0(t)||(!Wp&&(Wp=Mo(s_(3))),t=t[Wp.v]?t[Wp.v]():Dn),f0(t))){var r=Xr,o=Xr;try{for(var i=0;!(o=t.next()).done&&e[or](n||t,o.value,i,t)!==-1;)i++}catch(s){r={e:s},t.throw&&(o=Dn,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function Zl(t,e,n){return t.apply(e,n)}function Js(t,e){return!$t(e)&&t&&(Tt(e)?Zl(t.push,t,e):f0(e)||_3(e)?c_(e,function(n){t.push(n)}):t.push(e)),t}function Ye(t,e,n){if(t)for(var r=t[ac]>>>0,o=0;o<r&&!(o in t&&e[or](t,t[o],o,t)===-1);o++);}var ko=Oy("indexOf",m3);function Dy(t,e,n){return((t?t.slice:Dn)||hs).apply(t,hs[or](arguments,1))}var ua=Ss(Rr(No,"create"),pre);function pre(t){if(!t)return{};var e=typeof t;e!==op&&e!==Ry&&Oo("Prototype must be an Object or function: "+Rt(t));function n(){}return n[os]=t,new n}var IC;function A3(t,e){var n=No.setPrototypeOf||function(r,o){var i;!IC&&(IC=Mo((i={},i[d0]=[],i instanceof Array))),IC.v?r[d0]=o:en(o,function(s,a){return r[s]=a})};return n(t,e)}function mre(t,e,n){ir(fn,[e,zg,{v:t,c:!0,e:!1}]),e=A3(e,n);function r(){this[Hg]=e,ir(fn,[this,zg,{v:t,c:!0,e:!1}])}return e[os]=n===Dn?ua(n):(r[os]=n[os],new r),e}function yx(t,e){e&&(t[zg]=e)}function gre(t,e,n){var r=Error,o=r[os][zg],i=Error.captureStackTrace;return mre(t,function(){var s=this,a=arguments;try{ir(yx,[r,t]);var c=Zl(r,s,hs[or](a))||s;if(c!==s){var u=h0(s);u!==h0(c)&&A3(c,u)}return i&&i(c,s[Hg]),e&&e(c,a),c}finally{ir(yx,[r,o])}},r)}function da(){return(Date.now||vre)()}function vre(){return new Date().getTime()}function yre(t){return function(n){return Gt(n)&&Oo("strTrim called ["+Rt(n)+"]"),n&&n.replace&&(n=n.replace(t,ZI)),n}}var bre=yre(/^\s+|(?=\s)\s+$/g),Mr=ip("trim",rl,bre),_C,AC,kC;function Go(t){if(!t||typeof t!==op)return!1;kC||(kC=cre()?ya():!0);var e=!1;if(t!==kC){AC||(_C=Function[os][Py],AC=_C[or](No));try{var n=h0(t);e=!n,e||(Ao(n,Hg)&&(n=n[Hg]),e=!!(n&&typeof n===Ry&&_C[or](n)===AC))}catch{}}return e}function Cre(t){return t.value&&x3(t),!0}var bx=[Tre,x3,_re,Ire];function Sre(t,e,n,r){var o;return Ye(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function l_(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof e,c=!1,u=e===Dn;u||(e&&a===op?c=Go(e):u=Vne(a));var d={type:a,isPrim:u,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(f,p){return l_(t,f,p?s:n,p)},copyTo:function(f,p){return k3(t,f,p,s)}};return d.isPrim?o&&o[or](n,d)?d.result:e:Sre(t,e,i,function(f){fn(d,"result",{g:function(){return f.v},s:function(v){f.v=v}});for(var p=0,g=o;!(g||(p<bx.length?bx[p++]:Cre))[or](n,d);)g=Dn})}function k3(t,e,n,r){if(!Gt(n))for(var o in n)e[o]=l_(t,n[o],r,o);return e}function Ere(t,e,n){var r={handler:n,src:e,path:[]};return k3([],t,e,r)}function wre(t,e){var n={handler:e,src:t};return l_([],t,n)}function Tre(t){var e=t.value;if(Tt(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function Ire(t){var e=t.value;return $ne(e)?(t.result=new Date(e.getTime()),!0):!1}function _re(t){return t.type===Ry}function x3(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function Are(t,e){return Ye(e,function(n){Ere(t,n)}),t}function Cx(t,e,n,r,o,i,s){return Are(wre(t)||{},hs[or](arguments))}var kre=tre(ac),xC;function xre(){return!An&&va(),(!xC||An.lzy)&&(xC=Mo(ir(kn,["performance"]).v)),xC.v}function Rre(){var t=xre();return t&&t.now?t.now():da()}var Pre=ip("endsWith",rl,Nre);function Nre(t,e,n){ur(t)||Oo("'"+Rt(t)+"' is not a string");var r=ur(e)?e:$o(e),o=!$t(n)&&n<t[ac]?n:t[ac];return bi(t,o-r[ac],o)===r}var jy=Oy("indexOf",rl),Sx=ip("startsWith",rl,Ore);function Ore(t,e,n){ur(t)||Oo("'"+Rt(t)+"' is not a string");var r=ur(e)?e:$o(e),o=n>0?n:0;return bi(t,o,o+r[ac])===r}var RC="ref",PC="unref",NC="hasRef",Mre="enabled";function Lre(t,e,n){var r=!0,o=t?e(Dn):Dn,i;function s(){return r=!1,o&&o[PC]&&o[PC](),i}function a(){o&&n(o),o=Dn}function c(){return o=e(o),r||s(),i}function u(d){!d&&o&&a(),d&&!o&&c()}return i={cancel:a,refresh:c},i[NC]=function(){return o&&o[NC]?o[NC]():r},i[RC]=function(){return r=!0,o&&o[RC]&&o[RC](),i},i[PC]=s,i=fs(i,Mre,{get:function(){return!!o},set:u}),{h:i,dn:function(){o=Dn}}}function u_(t,e,n){var r=Tt(e),o=r?e.length:0,i=(o>0?e[0]:r?Xr:e)||setTimeout,s=(o>1?e[1]:Xr)||clearTimeout,a=n[0];n[0]=function(){c.dn(),Zl(a,Xr,hs[or](arguments))};var c=Lre(t,function(u){if(u){if(u.refresh)return u.refresh(),u;Zl(s,Xr,[u])}return Zl(i,Xr,n)},function(u){Zl(s,Xr,[u])});return c.h}function Nc(t,e){return u_(!0,Xr,hs[or](arguments))}function Dre(t,e,n){return u_(!0,t,hs[or](arguments,1))}function jre(t,e){return u_(!1,Xr,hs[or](arguments))}(Cd()||{}).Symbol;(Cd()||{}).Reflect;var Ure="hasOwnProperty",p0=function(t,e){return p0=XI.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[Ure](o)&&(n[o]=r[o])},p0(t,e)};function sp(t,e){typeof e!==Lne&&e!==null&&Oo("Class extends value "+String(e)+" is not a constructor or null"),p0(t,e);function n(){this.constructor=t}t[Vh]=e===null?ua(e):(n[Vh]=e[Vh],new n)}function Ex(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var Yp,$g="constructor",ms="prototype",Gg="function",qg="_dynInstFuncs",m0="_isDynProxy",pu="_dynClass",Fre="_dynCls$",g0="_dynInstChk",Sf=g0,R3="_dfOpts",wx="_unknown_",d_="__proto__",Qp="_dyn"+d_,Tx="__dynProto$Gbl",OC="_dynInstProto",Lm="useBaseInst",v0="setInstFuncs",h_=Object,Ef=h_.getPrototypeOf,Ix=h_.getOwnPropertyNames,_x=Cd(),y0=_x[Tx]||(_x[Tx]={o:(Yp={},Yp[v0]=!0,Yp[Lm]=!0,Yp),n:1e3});function Dm(t){return t&&(t===h_[ms]||t===Array[ms])}function f_(t){return Dm(t)||t===Function[ms]}function Oc(t){var e;if(t){if(Ef)return Ef(t);var n=t[d_]||t[ms]||(t[$g]?t[$g][ms]:null);e=t[Qp]||n,Ao(t,Qp)||(delete t[OC],e=t[Qp]=t[OC]||t[Qp],t[OC]=n)}return e}function Kg(t,e){var n=[];if(Ix)n=Ix(t);else for(var r in t)typeof r=="string"&&Ao(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function p_(t,e,n){return e!==$g&&typeof t[e]===Gg&&(n||Ao(t,e))&&e!==d_&&e!==ms}function Wg(t){Oo("DynamicProto: "+t)}function Bre(t){var e=ua(null);return Kg(t,function(n){!e[n]&&p_(t,n,!1)&&(e[n]=t[n])}),e}function m_(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function Hre(t,e,n,r){function o(c,u,d){var f=u[d];if(f[m0]&&r){var p=c[qg]||{};p[Sf]!==!1&&(f=(p[u[pu]]||{})[d]||f)}return function(){return f.apply(c,arguments)}}var i=ua(null);Kg(n,function(c){i[c]=o(e,n,c)});for(var s=Oc(t),a=[];s&&!f_(s)&&!m_(a,s);)Kg(s,function(c){!i[c]&&p_(s,c,!Ef)&&(i[c]=o(e,s,c))}),a.push(s),s=Oc(s);return i}function zre(t,e,n,r){var o=null;if(t&&Ao(n,pu)){var i=t[qg]||ua(null);if(o=(i[n[pu]]||ua(null))[e],o||Wg("Missing ["+e+"] "+Gg),!o[g0]&&i[Sf]!==!1){for(var s=!Ao(t,e),a=Oc(t),c=[];s&&a&&!f_(a)&&!m_(c,a);){var u=a[e];if(u){s=u===r;break}c.push(a),a=Oc(a)}try{s&&(t[e]=o),o[g0]=1}catch{i[Sf]=!1}}}return o}function Vre(t,e,n){var r=e[t];return r===n&&(r=Oc(e)[t]),typeof r!==Gg&&Wg("["+t+"] is not a "+Gg),r}function $re(t,e,n,r,o){function i(c,u){var d=function(){var f=zre(this,u,c,d)||Vre(u,c,d);return f.apply(this,arguments)};return d[m0]=1,d}if(!Dm(t)){var s=n[qg]=n[qg]||ua(null);if(!Dm(s)){var a=s[e]=s[e]||ua(null);s[Sf]!==!1&&(s[Sf]=!!o),Dm(a)||Kg(n,function(c){p_(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!Ao(t,c)||t[c]&&!t[c][m0])&&(t[c]=i(t,c)))})}}}function Gre(t,e){if(Ef){for(var n=[],r=Oc(e);r&&!f_(r)&&!m_(n,r);){if(r===t)return!0;n.push(r),r=Oc(r)}return!1}return!0}function MC(t,e){return Ao(t,ms)?t.name||e||wx:((t||{})[$g]||{}).name||e||wx}function dn(t,e,n,r){Ao(t,ms)||Wg("theClass is an invalid class definition.");var o=t[ms];Gre(o,e)||Wg("["+MC(t)+"] not in hierarchy of ["+MC(e)+"]");var i=null;Ao(o,pu)?i=o[pu]:(i=Fre+MC(t,"_")+"$"+y0.n,y0.n++,o[pu]=i);var s=dn[R3],a=!!s[Lm];a&&r&&r[Lm]!==void 0&&(a=!!r[Lm]);var c=Bre(e),u=Hre(o,e,c,a);n(e,u);var d=!!Ef&&!!s[v0];d&&r&&(d=!!r[v0]),$re(o,i,e,c,d!==!1)}dn[R3]=y0.o;var P3=Jne,Br=ere,Aa=P3({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),El=P3({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),g_="toLowerCase",Yg="blkVal",ht="length",Qg="rdOnly",Jg="notify",Xg="warnToConsole",ap="throwInternal",Sd="setDf",ia="watch",En="logger",Uy="apply",Dt="push",cp="splice",N3="hdlr",eu="cancel",lp="initialize",$s="identifier",Zg="removeNotificationListener",ev="addNotificationListener",Ai="isInitialized",Ax="instrumentationKey",LC="INACTIVE",Gh="value",Jp="getNotifyMgr",wf="getPlugin",cc="name",th="iKey",mu="time",Tr="processNext",O3="getProcessTelContext",kx="pollInternalLogs",tu="enabled",xx="stopPollingInternalLogs",ha="unload",Xp="onComplete",Rx="version",M3="loggingLevelConsole",Mc="createNew",Xi="teardown",tv="messageId",lc="message",Gu="isAsync",ss="diagLog",nv="_doTeardown",Tf="update",Ri="getNext",If="setNextPlugin",L3="protocol",b0="userAgent",Fy="split",DC="nodeType",uc="replace",qre="logInternalMessage",as="type",v_="handler",wh="status",Px="getResponseHeader",Nx="getAllResponseHeaders",C0="isChildEvt",zl="data",gu="getCtx",li="setCtx",S0="complete",nh="urlString",Ox="sendPOST",jC="headers",wl="timeout",Mx="setRequestHeader",Lx="traceId",Dx="spanId",jx="traceFlags",UC;function Kre(t,e){UC||(UC=gre("AggregationError",function(r,o){o[ht]>1&&(r.errors=o[1])}));var n=t;throw Ye(e,function(r,o){n+=`
`.concat(o," > ").concat(Rt(r))}),new UC(n,e||[])}/*!
 * NevWare21 Solutions LLC - ts-async, 0.5.2
 * https://github.com/nevware21/ts-async
 * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
 * Licensed under the MIT license.
 */var rv="Promise",y_="rejected";function qu(t,e){return D3(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:y_,rejected:!0,reason:n}):n})}function D3(t,e,n,r){var o=t;try{if(Vu(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{}return o}var j3=["pending","resolving","resolved",y_],Ux="dispatchEvent",Zp;function Wre(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function Yre(t,e,n,r){var o=ps();!Zp&&(Zp=Mo(!!ir(Wre,[o]).v));var i=Zp.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),Zp.v&&i.initEvent(e,!1,!0),i&&t[Ux])t[Ux](i);else{var s=t["on"+e];if(s)s(i);else{var a=kn("console");a&&(a.error||a.log)(e,Rt(i))}}}var U3="unhandledRejection",Qre=U3.toLowerCase(),Fx=[],Jre=0,Xre=10,FC;function Bx(t){return Zt(t)?t.toString():Rt(t)}function F3(t,e,n){var r=Dy(arguments,3),o=0,i=!1,s,a=[],c=Jre++,u=!1,d=null,f;function p(E,T){try{Fx.push(c),u=!0,d&&d.cancel(),d=null;var I=t(function(A,_){a.push(function(){try{var j=o===2?E:T,R=$t(j)?s:Zt(j)?j(s):j;Vu(R)?R.then(A,_):j?A(R):o===3?_(R):A(R)}catch($){_($)}}),i&&b()},r);return I}finally{Fx.pop()}}function g(E){return p(void 0,E)}function v(E){var T=E,I=E;return Zt(E)&&(T=function(A){return E&&E(),A},I=function(A){throw E&&E(),A}),p(T,I)}function y(){return j3[o]}function b(){if(a.length>0){var E=a.slice();a=[],u=!0,d&&d.cancel(),d=null,e(E)}}function C(E,T){return function(I){if(o===T){if(E===2&&Vu(I)){o=1,I.then(C(2,1),C(3,1));return}o=E,i=!0,s=I,b(),!u&&E===3&&!d&&(d=Nc(S,Xre))}}}function S(){if(!u)if(u=!0,ure())process.emit(U3,s,f);else{var E=ya()||Cd();!FC&&(FC=Mo(ir(kn,[rv+"RejectionEvent"]).v)),Yre(E,Qre,function(T){return fn(T,"promise",{g:function(){return f}}),T.reason=s,T},!!FC.v)}}f={then:p,catch:g,finally:v},fs(f,"state",{get:y}),hre()&&(f[s_(11)]="IPromise");function w(){return"IPromise "+y()+(i?" - "+Bx(s):"")}return f.toString=w,function(){Zt(n)||Oo(rv+": executor is not a function - "+Bx(n));var T=C(3,0);try{n.call(f,C(2,0),T)}catch(I){T(I)}}(),f}function Zre(t){return function(e){var n=Dy(arguments,1);return t(function(r,o){try{var i=[],s=1;c_(e,function(a,c){a&&(s++,D3(a,function(u){i[c]=u,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function eoe(t){return Mo(function(e){var n=Dy(arguments,1);return t(function(r,o){var i=[],s=1;function a(c,u){s++,qu(c,function(d){d.rejected?i[u]={status:y_,reason:d.reason}:i[u]={status:"fulfilled",value:d.value},--s===0&&r(i)})}try{Tt(e)?Ye(e,a):_3(e)?c_(e,a):Oo("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function B3(t){Ye(t,function(e){try{e()}catch{}})}function toe(t){var e=la(t)?t:0;return function(n){Nc(function(){B3(n)},e)}}function H3(t,e){return F3(H3,toe(e),t,e)}var BC;function noe(t,e){!BC&&(BC=Mo(ir(kn,[rv]).v||null));var n=BC.v;if(!n)return H3(t);Zt(t)||Oo(rv+": executor is not a function - "+Rt(t));var r=0;function o(){return j3[r]}var i=new n(function(s,a){function c(d){r=2,s(d)}function u(d){r=3,a(d)}t(c,u)});return fs(i,"state",{get:o}),i}var HC;function z3(t){return F3(z3,B3,t)}function roe(t,e){return!HC&&(HC=eoe(z3)),HC.v(t,e)}var zC;function Lc(t,e){return!zC&&(zC=Mo(noe)),zC.v.call(this,t,e)}var ooe=Zre(Lc),mi=void 0,xt="",$a="channels",Ln="core",E0="createPerfMgr",w0="disabled",vu="extensionConfig",Vl="extensions",ji="processTelemetry",ov="priority",jm="eventsSent",qh="eventsDiscarded",Um="eventsSendRequest",Za="perfEvent",VC="offlineEventsStored",$C="offlineBatchSent",GC="offlineBatchDrop",iv="getPerfMgr",T0="domain",qC="path",ioe="Not dynamic - ",soe=/-([a-z])/g,aoe=/([^\w\d_$])/g,coe=/^(\d+[\w\d_$])/;function sv(t){return!Gt(t)}function I0(t){var e=t;return e&&ur(e)&&(e=e[uc](soe,function(n,r){return r.toUpperCase()}),e=e[uc](aoe,"_"),e=e[uc](coe,function(n,r){return"_"+r})),e}function Pr(t,e){return t&&e?jy(t,e)!==-1:!1}function _0(t){return t&&t.toISOString()||""}function V3(t){return Gne(t)?t[cc]:xt}function Tl(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function loe(t,e,n){var r;return t?(r=t[e],!r&&Gt(r)&&(r=$t(n)?{}:n,t[e]=r)):r=$t(n)?{}:n,r}function uoe(t,e){var n=null,r=null;return Zt(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][Uy](r,o)}}function av(t,e,n,r,o){t&&e&&n&&(t[e]=uoe(n,r))}function $3(t,e,n,r){return t&&e&&zu(t)&&Tt(n)&&Ye(n,function(o){ur(o)&&av(t,o,e,o)}),t}function $l(t){return t&&px&&(t=XI(px({},t))),t}function Ku(t){try{return t.responseText}catch{}return null}function doe(t,e){return t?"XDomainRequest,Response:"+Ku(t)||"":e}function Hx(t,e){return t?"XMLHttpRequest,Status:"+t[wh]+",Response:"+Ku(t)||t.response||"":e}function zx(t,e){return e&&(la(e)?t=[e].concat(t):Tt(e)&&(t=e.concat(t))),t}var hoe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Vx="withCredentials",foe="timeout";function poe(t,e,n,r,o,i){o===void 0&&(o=!1);function s(c,u,d){try{c[u]=d}catch{}}var a=new XMLHttpRequest;return s(a,hoe,r),n&&s(a,Vx,n),a.open(t,e,!o),n&&s(a,Vx,n),!o&&i&&s(a,foe,i),a}function moe(t){var e={};if(ur(t)){var n=Mr(t)[Fy](/[\r\n]+/);Ye(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=Mr(r.substring(0,o))[g_](),s=Mr(r.substring(o+1));e[i]=s}else e[Mr(r)]=1}})}return e}function KC(t,e,n){if(!t[n]&&e&&e[Px]){var r=e[Px](n);r&&(t[n]=Mr(r))}return t}var goe="kill-duration",voe="kill-duration-seconds",yoe="time-delta-millis";function Fm(t,e){var n={};return t[Nx]?n=moe(t[Nx]()):e&&(n=KC(n,t,yoe),n=KC(n,t,goe),n=KC(n,t,voe)),n}var boe="location",Coe="console",G3="JSON",Soe="crypto",Eoe="msCrypto",woe="ReactNative",Toe="msie",Ioe="trident/",q3="XMLHttpRequest",WC=null,YC=null,Il=null,QC=null;function K3(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[Vh];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!$t(o[e])}catch{}}return n}function By(t){return typeof location===QI&&location?location:kn(boe)}function _oe(){return typeof console!==JI?console:kn(Coe)}function W3(){return!!(typeof JSON===QI&&JSON||kn(G3)!==null)}function Aoe(){return W3()?JSON||kn(G3):null}function koe(){return kn(Soe)}function xoe(){return kn(Eoe)}function A0(){var t=Hi();return t&&t.product?t.product===woe:!1}function k0(){var t=Hi();if(t&&(t[b0]!==YC||WC===null)){YC=t[b0];var e=(YC||xt)[g_]();WC=Pr(e,Toe)||Pr(e,Ioe)}return WC}function Y3(t){return(QC===null||t===!1)&&(QC=lre()&&!!Hi().sendBeacon),QC}function Q3(t){var e=!1;try{e=!!kn("fetch");var n=kn("Request");e&&t&&n&&(e=K3(n,"keepalive"))}catch{}return e}function Roe(){return Il===null&&(Il=typeof XDomainRequest!==JI,Il&&J3()&&(Il=Il&&!K3(kn(q3),"withCredentials"))),Il}function J3(){var t=!1;try{var e=kn(q3);t=!!e}catch{}return t}var X3=4294967296,dc=4294967295,Z3=123456789,ej=987654321,tj=!1,Th=Z3,Ih=ej;function Poe(t){t<0&&(t>>>=0),Th=Z3+t&dc,Ih=ej-t&dc,tj=!0}function Noe(){try{var t=da()&2147483647;Poe((Math.random()*X3^t)+t)}catch{}}function _f(t){var e=0,n=koe()||xoe();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&dc),e===0&&k0()&&(tj||Noe(),e=Ooe()&dc),e===0&&(e=Math.floor(X3*Math.random()|0)),t||(e>>>=0),e}function Ooe(t){Ih=36969*(Ih&65535)+(Ih>>16)&dc,Th=18e3*(Th&65535)+(Th>>16)&dc;var e=(Ih<<16)+(Th&65535)>>>0&dc|0;return e>>>=0,e}function b_(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=_f()>>>0,r=0,o=xt;o[ht]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(_f()<<2&4294967295|n&3)>>>0,r=0);return o}var nj="3.3.3",Moe="."+b_(6),Loe=0;function rj(t){return t[DC]===1||t[DC]===9||!+t[DC]}function Doe(t,e){var n=e[t.id];if(!n){n={};try{rj(e)&&fn(e,t.id,{e:!1,v:n})}catch{}}return n}function Ed(t,e){return e===void 0&&(e=!1),I0(t+Loe+++(e?"."+nj:xt)+Moe)}function oj(t){var e={id:Ed("_aiData-"+(t||xt)+"."+nj),accept:function(n){return rj(n)},get:function(n,r,o,i){var s=n[e.id];return s?s[I0(r)]:(i&&(s=Doe(e,n),s[I0(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}function Bm(t){return t&&zu(t)&&(t.isVal||t.fb||fu(t,"v")||fu(t,"mrg")||fu(t,"ref")||t.set)}function ij(t,e,n){var r,o=n.dfVal||n_;if(e&&n.fb){var i=n.fb;Tt(i)||(i=[i]);for(var s=0;s<i[ht];s++){var a=i[s],c=e[a];if(o(c)?r=c:t&&(c=t.cfg[a],o(c)&&(r=c),t.set(t.cfg,$o(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function x0(t,e,n){var r=n;if(n&&Bm(n)&&(r=ij(t,e,n)),r){Bm(r)&&(r=x0(t,e,r));var o;Tt(r)?(o=[],o[ht]=r[ht]):Go(r)&&(o={}),o&&(en(r,function(i,s){s&&Bm(s)&&(s=x0(t,e,s)),o[i]=s}),r=o)}return r}function C_(t,e,n,r){var o,i,s,a=r,c,u,d,f;Bm(a)?(o=a.isVal,i=a.set,d=a[Qg],f=a[Yg],c=a.mrg,u=a.ref,!u&&$t(u)&&(u=!!c),s=ij(t,e,a)):s=r,f&&t[Yg](e,n);var p,g=!0,v=e[n];(v||!Gt(v))&&(p=v,g=!1,o&&p!==s&&!o(p)&&(p=s,g=!0),i&&(p=i(p,s,e),g=p===s)),g?s?p=x0(t,e,s):p=s:(Go(p)||Tt(s))&&c&&s&&(Go(s)||Tt(s))&&en(s,function(y,b){C_(t,p,y,b)}),t.set(e,n,p),u&&t.ref(e,n),d&&t[Qg](e,n)}var fa=a_("[[ai_dynCfg_1]]"),sj=a_("[[ai_blkDynCfg_1]]"),joe=a_("[[ai_frcDynCfg_1]]");function aj(t){if(t){var e;if(Tt(t)?(e=[],e[ht]=t[ht]):Go(t)&&(e={}),e)return en(t,function(n,r){e[n]=aj(r)}),e}return t}function Uoe(t){if(t){var e=t[fa]||t;if(e.cfg&&(e.cfg===t||e.cfg[fa]===e))return e}return null}function Foe(t){if(t&&(Go(t)||Tt(t)))try{t[sj]=!0}catch{}return t}function JC(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[joe],!r&&!n[sj]&&(r=Go(n)||Tt(n))),r}function cj(t){Oo("InvalidAccess:"+t)}var Boe=["push","pop","shift","unshift","splice"],Af=function(t,e,n,r){t&&t[ap](3,108,"".concat(n," [").concat(e,"] failed - ")+Rt(r))};function Hoe(t,e,n){Tt(e)&&Ye(Boe,function(r){var o=e[r];e[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[Uy](this,i);return lv(t,e,n,"Patching"),a}})}function cv(t,e){var n=r_(t,e);return n&&n.get}function zoe(t,e,n,r){var o={n,h:[],trk:function(u){u&&u.fn&&(ko(o.h,u)===-1&&o.h[Dt](u),t.trk(u,o))},clr:function(u){var d=ko(o.h,u);d!==-1&&o.h[cp](d,1)}},i=!0,s=!1;function a(){i&&(s=s||JC(a,t,r),r&&!r[fa]&&s&&(r=lv(t,r,n,"Converting")),i=!1);var u=t.act;return u&&o.trk(u),r}a[t.prop]={chng:function(){t.add(o)}};function c(u){if(r!==u){a[t.ro]&&!t.upd&&cj("["+n+"] is read-only:"+Rt(e)),i&&(s=s||JC(a,t,r),i=!1);var d=s&&a[t.rf];if(s)if(d){en(r,function(p){r[p]=u?u[p]:mi});try{en(u,function(p,g){Hy(t,r,p,g)}),u=r}catch(p){Af((t.hdlr||{})[En],n,"Assigning",p),s=!1}}else r&&r[fa]&&en(r,function(p){var g=cv(r,p);if(g){var v=g[t.prop];v&&v.chng()}});if(u!==r){var f=u&&JC(a,t,u);!d&&f&&(u=lv(t,u,n,"Converting")),r=u,s=f}t.add(o)}}fn(e,o.n,{g:a,s:c})}function Hy(t,e,n,r){if(e){var o=cv(e,n),i=o&&!!o[t.prop];i?e[n]=r:zoe(t,e,n,r)}return e}function XC(t,e,n,r){if(e){var o=cv(e,n),i=o&&!!o[t.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{Foe(e)}catch(u){Af((t.hdlr||{})[En],n,"Blocking",u)}try{Hy(t,e,n,e[n]),o=cv(e,n)}catch(u){Af((t.hdlr||{})[En],n,"State",u)}}s&&(o[t.rf]=s),a&&(o[t.ro]=a),c&&(o[t.blkVal]=!0)}return e}function lv(t,e,n,r){try{en(e,function(o,i){Hy(t,e,o,i)}),e[fa]||(fs(e,fa,{get:function(){return t[N3]}}),Hoe(t,e,n))}catch(o){Af((t.hdlr||{})[En],n,r,o)}return e}var rh="[[ai_",oh="]]";function Voe(t){var e,n=eh(rh+"get"+t.uid+oh),r=eh(rh+"ro"+t.uid+oh),o=eh(rh+"rf"+t.uid+oh),i=eh(rh+"blkVal"+t.uid+oh),s=eh(rh+"dtl"+t.uid+oh),a=null,c=null,u;function d(v,y){var b=u.act;try{u.act=v,v&&v[s]&&(Ye(v[s],function(S){S.clr(v)}),v[s]=[]),y({cfg:t.cfg,set:t.set.bind(t),setDf:t[Sd].bind(t),ref:t.ref.bind(t),rdOnly:t[Qg].bind(t)})}catch(S){var C=t[En];throw C&&C[ap](1,107,Rt(S)),S}finally{u.act=b||null}}function f(){if(a){var v=a;a=null,c&&c[eu](),c=null;var y=[];if(Ye(v,function(b){if(b&&(b[s]&&(Ye(b[s],function(C){C.clr(b)}),b[s]=null),b.fn))try{d(b,b.fn)}catch(C){y[Dt](C)}}),a)try{f()}catch(b){y[Dt](b)}y[ht]>0&&Kre("Watcher error(s): ",y)}}function p(v){if(v&&v.h[ht]>0){a||(a=[]),c||(c=Nc(function(){c=null,f()},0));for(var y=0;y<v.h[ht];y++){var b=v.h[y];b&&ko(a,b)===-1&&a[Dt](b)}}}function g(v,y){if(v){var b=v[s]=v[s]||[];ko(b,y)===-1&&b[Dt](y)}}return u=(e={prop:n,ro:r,rf:o},e[Yg]=i,e[N3]=t,e.add=p,e[Jg]=f,e.use=d,e.trk=g,e),u}function $oe(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return fn(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function Goe(t,e,n){var r,o=Uoe(e);if(o)return o;var i=Ed("dyncfg",!0),s=e&&n!==!1?e:aj(e),a;function c(){a[Jg]()}function u(C,S,w){try{C=Hy(a,C,S,w)}catch(E){Af(t,S,"Setting value",E)}return C[S]}function d(C){return $oe(a,C)}function f(C,S){a.use(null,function(w){var E=a.upd;try{$t(S)||(a.upd=S),C(w)}finally{a.upd=E}})}function p(C,S){var w;return XC(a,C,S,(w={},w[0]=!0,w))[S]}function g(C,S){var w;return XC(a,C,S,(w={},w[1]=!0,w))[S]}function v(C,S){var w;return XC(a,C,S,(w={},w[2]=!0,w))[S]}function y(C,S){return S&&en(S,function(w,E){C_(b,C,w,E)}),C}var b=(r={uid:null,cfg:s},r[En]=t,r[Jg]=c,r.set=u,r[Sd]=y,r[ia]=d,r.ref=p,r[Qg]=g,r[Yg]=v,r._block=f,r);return fn(b,"uid",{c:!1,e:!1,w:!1,v:i}),a=Voe(b),lv(a,s,"config","Creating"),b}function qoe(t,e){t?(t[Xg](e),t[ap](2,108,e)):cj(e)}function io(t,e,n,r){var o=Goe(n,t||{},r);return e&&o[Sd](o.cfg,e),o}function fr(t,e,n){var r=t[fa]||t;return r.cfg&&(r.cfg===t||r.cfg[fa]===r)?r[ia](e):(qoe(n,ioe+Rt(t)),io(t,null,n)[ia](e))}function _h(t,e){if(t&&t[ha])return t[ha](e)}function lj(t,e,n){var r;return n||(r=Lc(function(o){n=o})),t&&kre(t)>0?qu(_h(t[0],e),function(){lj(Dy(t,1),e,n)}):n(),r}var Koe=500,$x="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function R0(t){return{mrg:!0,v:t}}function ka(t){return{isVal:ur,v:$o(xt)}}var ZC=[jm,qh,Um,Za],uv=null,em;function Woe(t,e){return function(){var n=arguments,r=uj(e);if(r){var o=r.listener;o&&o[t]&&o[t][Uy](o,n)}}}function Yoe(){var t=kn("Microsoft");return t&&(uv=t.ApplicationInsights),uv}function uj(t){var e=uv;return!e&&t.disableDbgExt!==!0&&(e=uv||Yoe()),e?e.ChromeDbgExt:null}function Qoe(t){if(!em){em={};for(var e=0;e<ZC[ht];e++)em[ZC[e]]=Woe(ZC[e],t)}return em}var _l,dj="warnToConsole",Joe="AI (Internal): ",Xoe="AI: ",Zoe="AITR_",eie={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},tie=(_l={},_l[0]=null,_l[1]="errorToConsole",_l[2]=dj,_l[3]="debugToConsole",_l);function Gx(t){return t?'"'+t[uc](/\"/g,xt)+'"':xt}function eS(t,e){var n=_oe();if(n){var r="log";n[t]&&(r=t),Zt(n[r])&&n[r](e)}}var P0=function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[tv]=e,i[lc]=(r?Xoe:Joe)+e;var s=xt;W3()&&(s=Aoe().stringify(o));var a=(n?" message:"+Gx(n):xt)+(o?" props:"+Gx(s):xt);i[lc]+=a}return t.dataType="MessageData",t}();function S_(t,e){return(t||{})[En]||new dv(e)}var dv=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;dn(t,this,function(u){c=f(e||{}),u.consoleLoggingLevel=function(){return o},u[ap]=function(v,y,b,C,S){S===void 0&&(S=!1);var w=new P0(y,b,S,C);if(a)throw Rt(w);var E=tie[v]||dj;if($t(w[lc]))g("throw"+(v===1?"Critical":"Warning"),w);else{if(S){var T=+w[tv];!r[T]&&o>=v&&(u[E](w[lc]),r[T]=!0)}else o>=v&&u[E](w[lc]);d(v,w)}},u.debugToConsole=function(v){eS("debug",v),g("warning",v)},u[Xg]=function(v){eS("warn",v),g("warning",v)},u.errorToConsole=function(v){eS("error",v),g("error",v)},u.resetInternalMessageCount=function(){n=0,r={}},u[qre]=d,u[ha]=function(v){c&&c.rm(),c=null};function d(v,y){if(!p()){var b=!0,C=Zoe+y[tv];if(r[C]?b=!1:r[C]=!0,b&&(v<=i&&(u.queue[Dt](y),n++,g(v===1?"error":"warn",y)),n===s)){var S="Internal events throttle limit per PageView reached for this app.",w=new P0(23,S,!1);u.queue[Dt](w),v===1?u.errorToConsole(S):u[Xg](S)}}}function f(v){return fr(io(v,eie,u).cfg,function(y){var b=y.cfg;o=b[M3],i=b.loggingLevelTelemetry,s=b.maxMessageLimit,a=b.enableDebug})}function p(){return n>=s}function g(v,y){var b=uj(e||{});b&&b[ss]&&b[ss](v,y)}})}return t.__ieDyn=1,t}();function hj(t){return t||new dv}function Xt(t,e,n,r,o,i){i===void 0&&(i=!1),hj(t)[ap](e,n,r,o,i)}function Kh(t,e){hj(t)[Xg](e)}var tS,xa,qx="toGMTString",Kx="toUTCString",E_="cookie",nS="expires",Wx="isCookieUseDisabled",N0="disableCookiesUsage",nu="_ckMgr",tm=null,rS=null,Yx=null,Pi,Qx={},hv={},nie=(tS={cookieCfg:R0((xa={},xa[T0]={fb:"cookieDomain",dfVal:sv},xa.path={fb:"cookiePath",dfVal:sv},xa.enabled=mi,xa.ignoreCookies=mi,xa.blockedCookies=mi,xa)),cookieDomain:mi,cookiePath:mi},tS[N0]=mi,tS);function w_(){!Pi&&(Pi=are(function(){return ps()}))}function rie(t,e){var n=Hm[nu]||hv[nu];return n||(n=Hm[nu]=Hm(t,e),hv[nu]=n),n}function nm(t){return t?t.isEnabled():!0}function fj(t,e){return e&&t&&Tt(t.ignoreCookies)?ko(t.ignoreCookies,e)!==-1:!1}function oie(t,e){return e&&t&&Tt(t.blockedCookies)&&ko(t.blockedCookies,e)!==-1?!0:fj(t,e)}function Jx(t,e){var n=e[tu];if(Gt(n)){var r=void 0;$t(t[Wx])||(r=!t[Wx]),$t(t[N0])||(r=!t[N0]),n=r}return n}function pj(t,e){var n;return t&&(n=t.getCookieMgr()),n||(n=rie(e,(t||{})[En])),n}function Hm(t,e){var n,r,o,i,s,a,c,u,d;t=io(t||hv,null,e).cfg,s=fr(t,function(p){p[Sd](p.cfg,nie),r=p.ref(p.cfg,"cookieCfg"),o=r[qC]||"/",i=r[T0],a=Jx(t,r)!==!1,c=r.getCookie||iie,u=r.setCookie||tR,d=r.delCookie||tR},e);var f=(n={isEnabled:function(){var p=Jx(t,r)!==!1&&a&&Xx(e),g=hv[nu];return p&&g&&f!==g&&(p=nm(g)),p},setEnabled:function(p){a=p!==!1,r[tu]=p},set:function(p,g,v,y,b){var C=!1;if(nm(f)&&!oie(r,p)){var S={},w=Mr(g||xt),E=jy(w,";");if(E!==-1&&(w=Mr(o_(g,E)),S=mj(bi(g,E+1))),Tl(S,T0,y||i,fx,$t),!Gt(v)){var T=k0();if($t(S[nS])){var I=da(),A=I+v*1e3;if(A>0){var _=new Date;_.setTime(A),Tl(S,nS,Zx(_,T?qx:Kx)||Zx(_,T?qx:Kx)||xt,fx)}}T||Tl(S,"max-age",xt+v,null,$t)}var j=By();j&&j[L3]==="https:"&&(Tl(S,"secure",null,null,$t),rS===null&&(rS=!sie((Hi()||{})[b0])),rS&&Tl(S,"SameSite","None",null,$t)),Tl(S,qC,b||o,null,$t),u(p,eR(w,S)),C=!0}return C},get:function(p){var g=xt;return nm(f)&&!fj(r,p)&&(g=c(p)),g},del:function(p,g){var v=!1;return nm(f)&&(v=f.purge(p,g)),v},purge:function(p,g){var v,y=!1;if(Xx(e)){var b=(v={},v[qC]=g||"/",v[nS]="Thu, 01 Jan 1970 00:00:01 GMT",v);k0()||(b["max-age"]="0"),d(p,eR(xt,b)),y=!0}return y}},n[ha]=function(p){s&&s.rm(),s=null},n);return f[nu]=f,f}function Xx(t){if(tm===null){tm=!1,!Pi&&w_();try{var e=Pi.v||{};tm=e[E_]!==void 0}catch(n){Xt(t,2,68,"Cannot access document.cookie - "+V3(n),{exception:Rt(n)})}}return tm}function mj(t){var e={};if(t&&t[ht]){var n=Mr(t)[Fy](";");Ye(n,function(r){if(r=Mr(r||xt),r){var o=jy(r,"=");o===-1?e[r]=null:e[Mr(o_(r,o))]=Mr(bi(r,o+1))}})}return e}function Zx(t,e){return Zt(t[e])?t[e]():null}function eR(t,e){var n=t||xt;return en(e,function(r,o){n+="; "+r+(Gt(o)?xt:"="+o)}),n}function iie(t){var e=xt;if(!Pi&&w_(),Pi.v){var n=Pi.v[E_]||xt;Yx!==n&&(Qx=mj(n),Yx=n),e=Mr(Qx[t]||xt)}return e}function tR(t,e){!Pi&&w_(),Pi.v&&(Pi.v[E_]=t+"="+e)}function sie(t){return ur(t)?!!(Pr(t,"CPU iPhone OS 12")||Pr(t,"iPad; CPU OS 12")||Pr(t,"Macintosh; Intel Mac OS X 10_14")&&Pr(t,"Version/")&&Pr(t,"Safari")||Pr(t,"Macintosh; Intel Mac OS X 10_14")&&Pre(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Pr(t,"Chrome/5")||Pr(t,"Chrome/6")||Pr(t,"UnrealEngine")&&!Pr(t,"Chrome")||Pr(t,"UCBrowser/12")||Pr(t,"UCBrowser/11")):!1}var aie={perfEvtsSendAll:!1};function cie(t){t.h=null;var e=t.cb;t.cb=[],Ye(e,function(n){ir(n.fn,[n.arg])})}function Os(t,e,n,r){Ye(t,function(o){o&&o[e]&&(n?(n.cb[Dt]({fn:r,arg:o}),n.h=n.h||Nc(cie,0,n)):ir(r,[o]))})}var lie=function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=io(e,aie);r=s[ia](function(a){n=!!a.cfg.perfEvtsSendAll}),dn(t,this,function(a){fn(a,"listeners",{g:function(){return o}}),a[ev]=function(c){o[Dt](c)},a[Zg]=function(c){for(var u=ko(o,c);u>-1;)o[cp](u,1),u=ko(o,c)},a[jm]=function(c){Os(o,jm,i,function(u){u[jm](c)})},a[qh]=function(c,u){Os(o,qh,i,function(d){d[qh](c,u)})},a[Um]=function(c,u){Os(o,Um,u?i:null,function(d){d[Um](c,u)})},a[Za]=function(c){c&&(n||!c[C0]())&&Os(o,Za,null,function(u){c[Gu]?Nc(function(){return u[Za](c)},0):u[Za](c)})},a[VC]=function(c){c&&c[ht]&&Os(o,VC,i,function(u){u[VC](c)})},a[$C]=function(c){c&&c[zl]&&Os(o,$C,i,function(u){u[$C](c)})},a[GC]=function(c,u){if(c>0){var d=u||0;Os(o,GC,i,function(f){f[GC](c,d)})}},a[ha]=function(c){var u=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[eu](),i.h=null,i.cb=[]},d;if(Os(o,"unload",null,function(f){var p=f[ha](c);p&&(d||(d=[]),d[Dt](p))}),d)return Lc(function(f){return qu(ooe(d),function(){u(),f()})});u()}})}return t.__ieDyn=1,t}(),yu="ctx",O0="ParentContextKey",Wh="ChildrenContextKey",uie=null,zm=function(){function t(e,n,r){var o=this;if(o.start=da(),o[cc]=e,o[Gu]=r,o[C0]=function(){return!1},Zt(n)){var i;fn(o,"payload",{g:function(){return!i&&Zt(n)&&(i=n(),n=null),i}})}o[gu]=function(s){return s?s===t[O0]||s===t[Wh]?o[s]:(o[yu]||{})[s]:null},o[li]=function(s,a){if(s)if(s===t[O0])o[s]||(o[C0]=function(){return!0}),o[s]=a;else if(s===t[Wh])o[s]=a;else{var c=o[yu]=o[yu]||{};c[s]=a}},o[S0]=function(){var s=0,a=o[gu](t[Wh]);if(Tt(a))for(var c=0;c<a[ht];c++){var u=a[c];u&&(s+=u[mu])}o[mu]=da()-o.start,o.exTime=o[mu]-s,o[S0]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),die=function(){function t(e){this.ctx={},dn(t,this,function(n){n.create=function(r,o,i){return new zm(r,o,i)},n.fire=function(r){r&&(r[S0](),e&&Zt(e[Za])&&e[Za](r))},n[li]=function(r,o){if(r){var i=n[yu]=n[yu]||{};i[r]=o}},n[gu]=function(r){return(n[yu]||{})[r]}})}return t.__ieDyn=1,t}(),oS="CoreUtils.doPerf";function Or(t,e,n,r,o){if(t){var i=t;if(i[iv]&&(i=i[iv]()),i){var s=void 0,a=i[gu](oS);try{if(s=i.create(e(),r,o),s){if(a&&s[li]&&(s[li](zm[O0],a),a[gu]&&a[li])){var c=a[gu](zm[Wh]);c||(c=[],a[li](zm[Wh],c)),c[Dt](s)}return i[li](oS,s),n(s)}}catch(u){s&&s[li]&&s[li]("exception",u)}finally{s&&i.fire(s),i[li](oS,a)}}}return n()}function hie(){return uie}function gj(){var t=M0();return bi(t,0,8)+"-"+bi(t,8,12)+"-"+bi(t,12,16)+"-"+bi(t,16,20)+"-"+bi(t,20)}function M0(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=xt,n,r=0;r<4;r++)n=_f(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(_f()&3)|0];return Hl(e,0,8)+Hl(e,9,4)+"4"+Hl(e,13,3)+o+Hl(e,16,3)+Hl(e,19,12)}var fie="00000000000000000000000000000000",pie="0000000000000000";function vj(t,e,n){return t&&t[ht]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function yj(t){return vj(t,32,fie)}function bj(t){return vj(t,16,pie)}var mie=oj("plugin");function hc(t){return mie.get(t,"state",{},!0)}function nR(t,e){for(var n=[],r=null,o=t[Ri](),i;o;){var s=o[wf]();if(s){r&&r[If]&&s[ji]&&r[If](s),i=hc(s);var a=!!i[Ai];s[Ai]&&(a=s[Ai]()),a||n[Dt](s),r=s,o=o[Ri]()}}Ye(n,function(c){var u=t[Ln]();c[lp](t.getCfg(),u,e,t[Ri]()),i=hc(c),!c[Ln]&&!i[Ln]&&(i[Ln]=u),i[Ai]=!0,delete i[Xi]})}function iS(t){return t.sort(function(e,n){var r=0;if(n){var o=n[ji];e[ji]?r=o?e[ov]-n[ov]:1:o&&(r=-1)}else r=e?1:-1;return r})}function gie(t){var e={};return{getName:function(){return e[cc]},setName:function(n){e[cc]=n},getTraceId:function(){return e[Lx]},setTraceId:function(n){yj(n)&&(e[Lx]=n)},getSpanId:function(){return e[Dx]},setSpanId:function(n){bj(n)&&(e[Dx]=n)},getTraceFlags:function(){return e[jx]},setTraceFlags:function(n){e[jx]=n}}}var vie="TelemetryPluginChain",rR="_hasRun",oR="_getTelCtx",iR=0;function yie(t,e,n){for(;t;){if(t[wf]()===n)return t;t=t[Ri]()}return jc([n],e.config||{},e)}function T_(t,e,n,r){var o=null,i=[];e||(e=io({},null,n[En])),r!==null&&(o=r?yie(t,n,r):t);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return S_(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:d,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(g){o=g},iterate:p,onComplete:a}};function a(g,v){for(var y=[],b=2;b<arguments.length;b++)y[b-2]=arguments[b];g&&i[Dt]({func:g,self:$t(v)?s.ctx:v,args:y})}function c(){var g=o;if(o=g?g[Ri]():null,!g){var v=i;v&&v[ht]>0&&(Ye(v,function(y){try{y.func.call(y.self,y.args)}catch(b){Xt(n[En],2,73,"Unexpected Exception during onComplete - "+Rt(b))}}),i=[])}return g}function u(g,v){var y=null,b=e.cfg;if(b&&g){var C=b[vu];!C&&v&&(C={}),b[vu]=C,C=e.ref(b,vu),C&&(y=C[g],!y&&v&&(y={}),C[g]=y,y=e.ref(C,g))}return y}function d(g,v){var y=u(g,!0);return v&&en(v,function(b,C){if(Gt(y[b])){var S=e.cfg[b];(S||!Gt(S))&&(y[b]=S)}C_(e,y,b,C)}),e[Sd](y,v)}function f(g,v,y){y===void 0&&(y=!1);var b,C=u(g,!1),S=e.cfg;return C&&(C[v]||!Gt(C[v]))?b=C[v]:(S[v]||!Gt(S[v]))&&(b=S[v]),b||!Gt(b)?b:y}function p(g){for(var v;v=s._next();){var y=v[wf]();y&&g(y)}}return s}function Dc(t,e,n,r){var o=io(e),i=T_(t,o,n,r),s=i.ctx;function a(u){var d=i._next();return d&&d[ji](u,s),!d}function c(u,d){return u===void 0&&(u=null),Tt(u)&&(u=jc(u,o.cfg,n,d)),Dc(u||s[Ri](),o.cfg,n,d)}return s[Tr]=a,s[Mc]=c,s}function fv(t,e,n){var r=io(e.config),o=T_(t,r,e,n),i=o.ctx;function s(c){var u=o._next();return u&&u[ha](i,c),!u}function a(c,u){return c===void 0&&(c=null),Tt(c)&&(c=jc(c,r.cfg,e,u)),fv(c||i[Ri](),e,u)}return i[Tr]=s,i[Mc]=a,i}function I_(t,e,n){var r=io(e.config),o=T_(t,r,e,n),i=o.ctx;function s(c){return i.iterate(function(u){Zt(u[Tf])&&u[Tf](i,c)})}function a(c,u){return c===void 0&&(c=null),Tt(c)&&(c=jc(c,r.cfg,e,u)),I_(c||i[Ri](),e,u)}return i[Tr]=s,i[Mc]=a,i}function jc(t,e,n,r){var o=null,i=!r;if(Tt(t)&&t[ht]>0){var s=null;Ye(t,function(a){if(!i&&r===a&&(i=!0),i&&a&&Zt(a[ji])){var c=bie(a,e,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?jc([r],e,n):o}function bie(t,e,n){var r=null,o=Zt(t[ji]),i=Zt(t[If]),s;t?s=t[$s]+"-"+t[ov]+"-"+iR++:s="Unknown-0-"+iR++;var a={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:d,unload:f,update:p,_id:s,_setNext:function(g){r=g}};function c(){var g;return t&&Zt(t[oR])&&(g=t[oR]()),g||(g=Dc(a,e,n)),g}function u(g,v,y,b,C){var S=!1,w=t?t[$s]:vie,E=g[rR];return E||(E=g[rR]={}),g.setNext(r),t&&Or(g[Ln](),function(){return w+":"+y},function(){E[s]=!0;try{var T=r?r._id:xt;T&&(E[T]=!1),S=v(g)}catch(A){var I=r?E[r._id]:!0;I&&(S=!0),(!r||!I)&&Xt(g[ss](),1,73,"Plugin ["+w+"] failed during "+y+" - "+Rt(A)+", run flags: "+Rt(E))}},b,C),S}function d(g,v){v=v||c();function y(b){if(!t||!o)return!1;var C=hc(t);return C[Xi]||C[w0]?!1:(i&&t[If](r),t[ji](g,b),!0)}u(v,y,"processTelemetry",function(){return{item:g}},!g.sync)||v[Tr](g)}function f(g,v){function y(){var b=!1;if(t){var C=hc(t),S=t[Ln]||C[Ln];t&&(!S||S===g.core())&&!C[Xi]&&(C[Ln]=null,C[Xi]=!0,C[Ai]=!1,t[Xi]&&t[Xi](g,v)===!0&&(b=!0))}return b}u(g,y,"unload",function(){},v[Gu])||g[Tr](v)}function p(g,v){function y(){var b=!1;if(t){var C=hc(t),S=t[Ln]||C[Ln];t&&(!S||S===g.core())&&!C[Xi]&&t[Tf]&&t[Tf](g,v)===!0&&(b=!0)}return b}u(g,y,"update",function(){},!1)||g[Tr](v)}return Pc(a)}function Cj(){var t=[];function e(r){r&&t[Dt](r)}function n(r,o){Ye(t,function(i){try{i(r,o)}catch(s){Xt(r[ss](),2,73,"Unexpected error calling unload handler - "+Rt(s))}}),t=[]}return{add:e,run:n}}function Sj(){var t=[];function e(r){var o=t;t=[],Ye(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){Xt(r,2,73,"Unloading:"+Rt(s))}})}function n(r){r&&Js(t,r)}return{run:e,add:n}}var sS,Ms="getPlugin",Cie=(sS={},sS[vu]={isVal:sv,v:{}},sS),__=function(){function t(){var e=this,n,r,o,i,s;u(),dn(t,e,function(d){d[lp]=function(f,p,g,v){c(f,p,v),n=!0},d[Xi]=function(f,p){var g,v=d[Ln];if(!v||f&&v!==f[Ln]())return;var y,b=!1,C=f||fv(null,v,o&&o[Ms]?o[Ms]():o),S=p||(g={reason:0},g[Gu]=!1,g);function w(){b||(b=!0,i.run(C,p),s.run(C[ss]()),y===!0&&C[Tr](S),u())}return!d[nv]||d[nv](C,S,w)!==!0?w():y=!0,y},d[Tf]=function(f,p){var g=d[Ln];if(!g||f&&g!==f[Ln]())return;var v,y=!1,b=f||I_(null,g,o&&o[Ms]?o[Ms]():o),C=p||{reason:0};function S(){y||(y=!0,c(b.getCfg(),b.core(),b[Ri]()))}return!d._doUpdate||d._doUpdate(b,C,S)!==!0?S():v=!0,v},av(d,"_addUnloadCb",function(){return i},"add"),av(d,"_addHook",function(){return s},"add"),fn(d,"_unloadHooks",{g:function(){return s}})}),e[ss]=function(d){return a(d)[ss]()},e[Ai]=function(){return n},e.setInitialized=function(d){n=d},e[If]=function(d){o=d},e[Tr]=function(d,f){f?f[Tr](d):o&&Zt(o[ji])&&o[ji](d,null)},e._getTelCtx=a;function a(d){d===void 0&&(d=null);var f=d;if(!f){var p=r||Dc(null,{},e[Ln]);o&&o[Ms]?f=p[Mc](null,o[Ms]):f=p[Mc](null,o)}return f}function c(d,f,p){io(d,Cie,S_(f)),!p&&f&&(p=f[O3]()[Ri]());var g=o;o&&o[Ms]&&(g=o[Ms]()),e[Ln]=f,r=Dc(p,d,f,g)}function u(){n=!1,e[Ln]=null,r=null,o=null,s=Sj(),i=Cj()}}return t.__ieDyn=1,t}();function Sie(t,e,n){var r={id:e,fn:n};Js(t,r);var o={remove:function(){Ye(t,function(i,s){if(i.id===r.id)return t[cp](s,1),-1})}};return o}function Eie(t,e,n){for(var r=!1,o=t[ht],i=0;i<o;++i){var s=t[i];if(s)try{if(s.fn[Uy](null,[e])===!1){r=!0;break}}catch(a){Xt(n,2,64,"Telemetry initializer failed: "+V3(a),{exception:Rt(a)},!0)}}return!r}var wie=function(t){sp(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),dn(e,n,function(s,a){s.addTelemetryInitializer=function(c){return Sie(o,r++,c)},s[ji]=function(c,u){Eie(o,c,u?u[ss]():s[ss]())&&s[Tr](c,u)},s[nv]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e}(__),Ls,Ej="Plugins must provide initialize method",Tie="_notificationManager",sR="SDK is still unloading...",Iie="SDK is not initialized",_ie=100,Aie=5e4,aS=bd((Ls={cookieCfg:{}},Ls[Vl]={rdOnly:!0,ref:!0,v:[]},Ls[$a]={rdOnly:!0,ref:!0,v:[]},Ls[vu]={ref:!0,v:{}},Ls[E0]=mi,Ls.loggingLevelConsole=0,Ls.diagnosticLogInterval=mi,Ls));function kie(t,e){return new die(e)}function xie(t,e,n){var r,o=[],i=[],s={};return Ye(n,function(a){(Gt(a)||Gt(a[lp]))&&go(Ej);var c=a[ov],u=a[$s];a&&c&&(Gt(s[c])?s[c]=u:Kh(t,"Two extensions have same priority #"+c+" - "+s[c]+", "+u)),!c||c<e?o[Dt](a):i[Dt](a)}),r={},r[Ln]=o,r[$a]=i,r}function aR(t,e){var n=!1;return Ye(e,function(r){if(r===t)return n=!0,-1}),n}function L0(t,e,n,r){n&&en(n,function(o,i){r&&Go(i)&&Go(e[o])&&L0(t,e[o],i,r),r&&Go(i)&&Go(e[o])?L0(t,e[o],i,r):t.set(e,o,i)})}function cR(t,e){var n=null,r=-1;return Ye(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function Rie(t,e){var n=cR(t,e).l;return n||(n={w:e,rm:function(){var r=cR(t,e);r.i!==-1&&t[cp](r.i,1)}},t[Dt](n)),n}function Pie(t,e,n){Ye(e,function(r){var o=fr(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function Nie(t,e,n,r){return e.add(t[ia](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[Zg](r),r=null),n&&!r&&i!==!0&&(r=Qoe(o.cfg),n[ev](r))})),r}function Oie(t){return fn({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var Mie=function(){function t(){var e,n,r,o,i,s,a,c,u,d,f,p,g,v,y,b,C,S,w,E,T,I,A,_,j,R,$,U,se,P,k,N;dn(t,this,function(x){ee(),x._getDbgPlgTargets=function(){return[A,o]},x[Ai]=function(){return n},x.activeStatus=function(){return R},x._setPendingStatus=function(){R=3},x[lp]=function(L,de,Se,ie){g&&go(sR),x[Ai]()&&go("Core cannot be initialized more than once"),e=io(L,aS,Se||x[En],!1),L=e.cfg,Ee(e[ia](function(Xe){var ct=Xe.cfg,lt=R===3;if(!lt){U=ct.initInMemoMaxSize||_ie;var je=ct[Ax],Qe=ct.endpointUrl;if(Gt(je)){T=null,R=El[LC];var dt="Please provide instrumentation key";n?(Xt(r,1,100,dt),te()):go(dt);return}var Ut=[];if(Vu(je)?(Ut[Dt](je),T=null):T=je,Vu(Qe)?(Ut[Dt](Qe),$=null):$=Qe,Ut[ht]){se=!1,R=3;var Ft=sv(ct.initTimeOut)?ct.initTimeOut:Aie,rn=roe(Ut);Nc(function(){se||M()},Ft),qu(rn,function(F){try{if(se)return;if(!F.rejected){var W=F[Gh];if(W&&W[ht]){var ne=W[0];if(T=ne&&ne[Gh],W[ht]>1){var _e=W[1];$=_e&&_e[Gh]}}T&&(L[Ax]=T,L.endpointUrl=$)}M()}catch{se||M()}})}else M();var vn=Xe.ref(Xe.cfg,vu);en(vn,function(F){Xe.ref(vn,F)})}})),i=ie,w=Nie(e,S,i&&x[Jp](),w),pe(),x[En]=Se;var ge=L[Vl];if(d=[],d[Dt].apply(d,Ex(Ex([],de,!1),ge)),f=L[$a],Ce(null),(!p||p[ht]===0)&&go("No "+$a+" available"),f&&f[ht]>1){var He=x[wf]("TeeChannelController");(!He||!He.plugin)&&Xt(r,1,28,"TeeChannel required")}Pie(L,I,r),I=null,n=!0,R===El.ACTIVE&&te()},x.getChannels=function(){var L=[];return p&&Ye(p,function(de){L[Dt](de)}),Pc(L)},x.track=function(L){Or(x[iv](),function(){return"AppInsightsCore:track"},function(){L===null&&(ae(L),go("Invalid telemetry item")),!L[cc]&&Gt(L[cc])&&(ae(L),go("telemetry name required")),L[th]=L[th]||T,L[mu]=L[mu]||_0(new Date),L.ver=L.ver||"4.0",!g&&x[Ai]()&&R===El.ACTIVE?oe()[Tr](L):R!==El[LC]&&o[ht]<=U&&o[Dt](L)},function(){return{item:L}},!L.sync)},x[O3]=oe,x[Jp]=function(){return i||(i=new lie(e.cfg),x[Tie]=i),i},x[ev]=function(L){x.getNotifyMgr()[ev](L)},x[Zg]=function(L){i&&i[Zg](L)},x.getCookieMgr=function(){return c||(c=Hm(e.cfg,x[En])),c},x.setCookieMgr=function(L){c!==L&&(_h(c,!1),c=L)},x[iv]=function(){return s||a||hie()},x.setPerfMgr=function(L){s=L},x.eventCnt=function(){return o[ht]},x.releaseQueue=function(){if(n&&o[ht]>0){var L=o;o=[],R===2?Ye(L,function(de){de[th]=de[th]||T,oe()[Tr](de)}):Xt(r,2,20,"core init status is not active")}},x[kx]=function(L){return y=L||null,N=!1,P&&P[eu](),Y(!0)};function M(){se=!0,Gt(T)?(R=El[LC],Xt(r,1,112,"ikey can't be resolved from promises")):R=El.ACTIVE,te()}function te(){n&&(x.releaseQueue(),x[kx]())}function Y(L){if((!P||!P[tu])&&!N){var de=L||r&&r.queue[ht]>0;de&&(k||(k=!0,Ee(e[ia](function(Se){var ie=Se.cfg.diagnosticLogInterval;(!ie||!(ie>0))&&(ie=1e4);var ge=!1;P&&(ge=P[tu],P[eu]()),P=jre(nt,ie),P.unref(),P[tu]=ge}))),P[tu]=!0)}return P}x[xx]=function(){N=!0,P&&P[eu](),nt()},$3(x,function(){return v},["addTelemetryInitializer"]),x[ha]=function(L,de,Se){var ie;L===void 0&&(L=!0),n||go(Iie),g&&go(sR);var ge=(ie={reason:50},ie[Gu]=L,ie.flushComplete=!1,ie),He;L&&!de&&(He=Lc(function(lt){de=lt}));var Xe=fv(Pe(),x);Xe[Xp](function(){S.run(x[En]),lj([c,i,r],L,function(){ee(),de&&de(ge)})},x);function ct(lt){ge.flushComplete=lt,g=!0,C.run(Xe,ge),x[xx](),Xe[Tr](ge)}return nt(),J(L,ct,6,Se),He},x[wf]=fe,x.addPlugin=function(L,de,Se,ie){if(!L){ie&&ie(!1),H(Ej);return}var ge=fe(L[$s]);if(ge&&!de){ie&&ie(!1),H("Plugin ["+L[$s]+"] is already loaded!");return}var He={reason:16};function Xe(je){d[Dt](L),He.added=[L],Ce(He),ie&&ie(!0)}if(ge){var ct=[ge.plugin],lt={reason:2,isAsync:!!Se};ze(ct,lt,function(je){je?(He.removed=ct,He.reason|=32,Xe()):ie&&ie(!1)})}else Xe()},x.updateCfg=function(L,de){de===void 0&&(de=!0);var Se;if(x[Ai]()){Se={reason:1,cfg:e.cfg,oldCfg:Cx({},e.cfg),newConfig:Cx({},L),merge:de},L=Se.newConfig;var ie=e.cfg;L[Vl]=ie[Vl],L[$a]=ie[$a]}e._block(function(ge){var He=ge.cfg;L0(ge,He,L,de),de||en(He,function(Xe){fu(L,Xe)||ge.set(He,Xe,mi)}),ge[Sd](He,aS)},!0),e[Jg](),Se&&X(Se)},x.evtNamespace=function(){return b},x.flush=J,x.getTraceCtx=function(L){return E||(E=gie()),E},x.setTraceCtx=function(L){E=L||null},x.addUnloadHook=Ee,av(x,"addUnloadCb",function(){return C},"add"),x.onCfgChange=function(L){var de;return n?de=fr(e.cfg,L,x[En]):de=Rie(I,L),Oie(de)},x.getWParam=function(){return I3()||e.cfg.enableWParam?0:-1};function Q(){var L={};_=[];var de=function(Se){Se&&Ye(Se,function(ie){if(ie[$s]&&ie[Rx]&&!L[ie.identifier]){var ge=ie[$s]+"="+ie[Rx];_[Dt](ge),L[ie.identifier]=ie}})};de(p),f&&Ye(f,function(Se){de(Se)}),de(d)}function ee(){n=!1,e=io({},aS,x[En]),e.cfg[M3]=1,fn(x,"config",{g:function(){return e.cfg},s:function(de){x.updateCfg(de,!1)}}),fn(x,"pluginVersionStringArr",{g:function(){return _||Q(),_}}),fn(x,"pluginVersionString",{g:function(){return j||(_||Q(),j=_.join(";")),j||xt}}),fn(x,"logger",{g:function(){return r||(r=new dv(e.cfg),e[En]=r),r},s:function(de){e[En]=de,r!==de&&(_h(r,!1),r=de)}}),x[En]=new dv(e.cfg),A=[];var L=x.config[Vl]||[];L.splice(0,L[ht]),Js(L,A),v=new wie,o=[],_h(i,!1),i=null,s=null,a=null,_h(c,!1),c=null,u=null,d=[],f=null,p=null,g=!1,y=null,b=Ed("AIBaseCore",!0),C=Cj(),E=null,T=null,S=Sj(),I=[],j=null,_=null,N=!1,P=null,k=!1,R=0,$=null,U=null,se=!1}function oe(){var L=Dc(Pe(),e.cfg,x);return L[Xp](Y),L}function Ce(L){var de=xie(x[En],Koe,d);u=null,j=null,_=null,p=(f||[])[0]||[],p=iS(Js(p,de[$a]));var Se=Js(iS(de[Ln]),p);A=Pc(Se);var ie=x.config[Vl]||[];ie.splice(0,ie[ht]),Js(ie,A);var ge=oe();p&&p[ht]>0&&nR(ge[Mc](p),Se),nR(ge,Se),L&&X(L)}function fe(L){var de=null,Se=null,ie=[];return Ye(A,function(ge){if(ge[$s]===L&&ge!==v)return Se=ge,-1;ge.getChannel&&ie[Dt](ge)}),!Se&&ie[ht]>0&&Ye(ie,function(ge){if(Se=ge.getChannel(L),!Se)return-1}),Se&&(de={plugin:Se,setEnabled:function(ge){hc(Se)[w0]=!ge},isEnabled:function(){var ge=hc(Se);return!ge[Xi]&&!ge[w0]},remove:function(ge,He){var Xe;ge===void 0&&(ge=!0);var ct=[Se],lt=(Xe={reason:1},Xe[Gu]=ge,Xe);ze(ct,lt,function(je){je&&Ce({reason:32,removed:ct}),He&&He(je)})}}),de}function Pe(){if(!u){var L=(A||[]).slice();ko(L,v)===-1&&L[Dt](v),u=jc(iS(L),e.cfg,x)}return u}function ze(L,de,Se){if(L&&L[ht]>0){var ie=jc(L,e.cfg,x),ge=fv(ie,x);ge[Xp](function(){var He=!1,Xe=[];Ye(d,function(lt,je){aR(lt,L)?He=!0:Xe[Dt](lt)}),d=Xe,j=null,_=null;var ct=[];f&&(Ye(f,function(lt,je){var Qe=[];Ye(lt,function(dt){aR(dt,L)?He=!0:Qe[Dt](dt)}),ct[Dt](Qe)}),f=ct),Se&&Se(He),Y()}),ge[Tr](de)}else Se(!1)}function nt(){if(r&&r.queue){var L=r.queue.slice(0);r.queue[ht]=0,Ye(L,function(de){var Se,ie=(Se={},Se[cc]=y||"InternalMessageId: "+de[tv],Se[th]=T,Se[mu]=_0(new Date),Se.baseType=P0.dataType,Se.baseData={message:de[lc]},Se);x.track(ie)})}}function J(L,de,Se,ie){var ge=1,He=!1,Xe=null;ie=ie||5e3;function ct(){ge--,He&&ge===0&&(Xe&&Xe[eu](),Xe=null,de&&de(He),de=null)}if(p&&p[ht]>0){var lt=oe()[Mc](p);lt.iterate(function(je){if(je.flush){ge++;var Qe=!1;je.flush(L,function(){Qe=!0,ct()},Se)||Qe||(L&&Xe==null?Xe=Nc(function(){Xe=null,ct()},ie):ct())}})}return He=!0,ct(),!0}function pe(){var L;Ee(e[ia](function(de){var Se=de.cfg.enablePerfMgr;if(Se){var ie=de.cfg[E0];L!==ie&&(ie||(ie=kie),loe(de.cfg,E0,ie),L=ie,a=null),!s&&!a&&Zt(ie)&&(a=ie(x,x[Jp]()))}else a=null,L=null}))}function X(L){var de=I_(Pe(),x);de[Xp](Y),(!x._updateHook||x._updateHook(de,L)!==!0)&&de[Tr](L)}function H(L){var de=x[En];de?(Xt(de,2,73,L),Y()):go(L)}function ae(L){var de=x[Jp]();de&&de[qh]([L],2)}function Ee(L){S.add(L)}})}return t.__ieDyn=1,t}(),ii="",Lie="NoResponseBody",lR="&"+Lie+"=true",cS="POST",Die=function(){function t(){var e=0,n,r,o,i,s,a,c,u,d,f,p,g,v,y;dn(t,this,function(b,C){var S=!0;se(),b[lp]=function(P,k){o=k,r&&Xt(o,1,28,"Sender is already initialized"),b.SetConfig(P),r=!0},b._getDbgPlgTargets=function(){return[r,i,a,n]},b.SetConfig=function(P){try{if(s=P.senderOnCompleteCallBack||{},a=!!P.disableCredentials,c=P.fetchCredentials,i=!!P.isOneDs,n=!!P.enableSendPromise,d=!!P.disableXhr,f=!!P.disableBeacon,p=!!P.disableBeaconSync,y=P.timeWrapper,v=!!P.addNoResponse,g=!!P.disableFetchKeepAlive,u={sendPOST:R},i||(S=!1),a){var k=By();k&&k.protocol&&k.protocol[g_]()==="file:"&&(S=!1)}return!0}catch{}return!1},b.getSyncFetchPayload=function(){return e},b.getSenderInst=function(P,k){return P&&P[ht]?I(P,k):null},b.getFallbackInst=function(){return u},b[nv]=function(P,k){se()};function w(P,k){A(k,200,{},P)}function E(P,k){Xt(o,2,26,"Failed to send telemetry.",{message:P}),A(k,400,{})}function T(P){E("No endpoint url is provided for the batch",P)}function I(P,k){for(var N,x=0,M=null,te=0;M==null&&te<P[ht];)x=P[te],!d&&x===1?Roe()?M=U:J3()&&(M=R):x===2&&Q3(k)&&(!k||!g)?M=$:x===3&&Y3()&&(k?!p:!f)&&(M=j),te++;return M?(N={_transport:x,_isSync:k},N[Ox]=M,N):null}function A(P,k,N,x){try{P&&P(k,N,x)}catch{}}function _(P,k){var N=Hi(),x=P[nh];if(!x)return T(k),!0;x=P[nh]+(v?lR:ii);var M=P[zl],te=i?M:new Blob([M],{type:"text/plain;charset=UTF-8"}),Y=N.sendBeacon(x,te);return Y}function j(P,k,N){var x=P[zl];try{if(x)if(_(P,k))w(ii,k);else{var M=s&&s.beaconOnRetry;M&&Zt(M)?M(P,k,_):(u&&u[Ox](P,k,!0),Xt(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(te){i&&Kh(o,"Failed to send telemetry using sendBeacon API. Ex:"+Rt(te)),A(k,i?0:400,{},ii)}}function R(P,k,N){var x,M,te,Y=P[jC]||{};!N&&n&&(x=Lc(function(Ce,fe){M=Ce,te=fe})),i&&N&&P.disableXhrSync&&(N=!1);var Q=P[nh];if(!Q){T(k),M&&M(!1);return}var ee=poe(cS,Q,S,!0,N,P[wl]);i||ee[Mx]("Content-type","application/json"),Ye(is(Y),function(Ce){ee[Mx](Ce,Y[Ce])}),ee.onreadystatechange=function(){i||(oe(ee),ee.readyState===4&&M&&M(!0))},ee.onload=function(){i&&oe(ee)};function oe(Ce){var fe=s&&s.xhrOnComplete,Pe=fe&&Zt(fe);if(Pe)fe(Ce,k,P);else{var ze=Ku(Ce);A(k,Ce[wh],Fm(Ce,i),ze)}}return ee.onerror=function(Ce){A(k,i?ee[wh]:400,Fm(ee,i),i?ii:Hx(ee)),te&&te(Ce)},ee.ontimeout=function(){A(k,i?ee[wh]:500,Fm(ee,i),i?ii:Hx(ee)),M&&M(!1)},ee.send(P[zl]),x}function $(P,k,N){var x,M=P[nh],te=P[zl],Y=i?te:new Blob([te],{type:"application/json"}),Q,ee,oe,Ce=new Headers,fe=te[ht],Pe=!1,ze=!1,nt=P[jC]||{},J=(x={method:cS,body:Y},x[$x]=!0,x);P.headers&&is(P.headers)[ht]>0&&(Ye(is(nt),function(ae){Ce.append(ae,nt[ae])}),J[jC]=Ce),c?J.credentials=c:S&&i&&(J.credentials="include"),N&&(J.keepalive=!0,e+=fe,i?P._sendReason===2&&(Pe=!0,v&&(M+=lR)):Pe=!0);var pe=new Request(M,J);try{pe[$x]=!0}catch{}if(!N&&n&&(Q=Lc(function(ae,Ee){ee=ae,oe=Ee})),!M){T(k),ee&&ee(!1);return}function X(ae){A(k,i?0:400,{},i?ii:ae)}function H(ae,Ee,L){var de=ae[wh],Se=s.fetchOnComplete;Se&&Zt(Se)?Se(ae,k,L||ii,Ee):A(k,de,{},L||ii)}try{qu(fetch(i?M:pe,i?J:null),function(ae){if(N&&(e-=fe,fe=0),!ze)if(ze=!0,ae.rejected)X(ae.reason&&ae.reason[lc]),oe&&oe(ae.reason);else{var Ee=ae[Gh];try{!i&&!Ee.ok?(X(Ee.statusText),ee&&ee(!1)):i&&!Ee.body?(H(Ee,null,ii),ee&&ee(!0)):qu(Ee.text(),function(L){H(Ee,P,L[Gh]),ee&&ee(!0)})}catch(L){X(Rt(L)),oe&&oe(L)}}})}catch(ae){ze||(X(Rt(ae)),oe&&oe(ae))}return Pe&&!ze&&(ze=!0,A(k,200,{}),ee&&ee(!0)),i&&!ze&&P[wl]>0&&y&&y.set(function(){ze||(ze=!0,A(k,500,{}),ee&&ee(!0))},P[wl]),Q}function U(P,k,N){var x=ya(),M=new XDomainRequest,te=P[zl];M.onload=function(){var Ce=Ku(M),fe=s&&s.xdrOnComplete;fe&&Zt(fe)?fe(M,k,P):A(k,200,{},Ce)},M.onerror=function(){A(k,400,{},i?ii:doe(M))},M.ontimeout=function(){A(k,500,{})},M.onprogress=function(){};var Y=x&&x.location&&x.location[L3]||"",Q=P[nh];if(!Q){T(k);return}if(!i&&Q.lastIndexOf(Y,0)!==0){var ee="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Xt(o,2,40,". "+ee),E(ee,k);return}var oe=i?Q:Q[uc](/^(https?:)/,"");M.open(cS,oe),P[wl]&&(M[wl]=P[wl]),M.send(te),i&&N?y&&y.set(function(){M.send(te)},0):M.send(te)}function se(){e=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,u=null,d=!1,f=!1,p=!1,g=!1,v=!1,y=null}})}return t.__ieDyn=1,t}(),wj="on",uR="attachEvent",dR="addEventListener",hR="detachEvent",fR="removeEventListener",D0="events",kf="visibilitychange",zy="pagehide",Tj="pageshow",Ij="unload",_j="beforeunload",Aj=Ed("aiEvtPageHide"),kj=Ed("aiEvtPageShow"),jie=/\.[\.]+/g,Uie=/[\.]+$/,Fie=1,pv=oj("events"),Bie=/^([^.]*)(?:\.(.+)|)/;function pR(t){return t&&t[uc]?t[uc](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,xt):t}function A_(t,e){var n;if(e){var r=xt;Tt(e)?(r=xt,Ye(e,function(i){i=pR(i),i&&(i[0]!=="."&&(i="."+i),r+=i)})):r=pR(e),r&&(r[0]!=="."&&(r="."+r),t=(t||xt)+r)}var o=Bie.exec(t||xt)||[];return n={},n[as]=o[1],n.ns=(o[2]||xt).replace(jie,".").replace(Uie,xt)[Fy](".").sort().join("."),n}function xj(t,e,n){n===void 0&&(n=!0);var r=pv.get(t,D0,{},n),o=r[e];return o||(o=r[e]=[]),o}function Rj(t,e,n,r){t&&e&&e[as]&&(t[fR]?t[fR](e[as],n,r):t[hR]&&t[hR](wj+e[as],n))}function Hie(t,e,n,r){var o=!1;return t&&e&&e[as]&&n&&(t[dR]?(t[dR](e[as],n,r),o=!0):t[uR]&&(t[uR](wj+e[as],n),o=!0)),o}function mR(t,e,n,r){for(var o=e[ht];o--;){var i=e[o];i&&(!n.ns||n.ns===i.evtName.ns)&&(!r||r(i))&&(Rj(t,i.evtName,i[v_],i.capture),e[cp](o,1))}}function zie(t,e,n){if(e[as])mR(t,xj(t,e[as]),e,n);else{var r=pv.get(t,D0,{});en(r,function(o,i){mR(t,i,e,n)}),is(r)[ht]===0&&pv.kill(t,D0)}}function up(t,e){var n;return e?(Tt(e)?n=[t].concat(e):n=[t,e],n=A_("xx",n).ns[Fy](".")):n=t,n}function lS(t,e,n,r,o){var i;o===void 0&&(o=!1);var s=!1;if(t)try{var a=A_(e,r);if(s=Hie(t,a,n,o),s&&pv.accept(t)){var c=(i={guid:Fie++,evtName:a},i[v_]=n,i.capture=o,i);xj(t,a.type)[Dt](c)}}catch{}return s}function uS(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=A_(e,r),s=!1;zie(t,i,function(a){return i.ns&&!n||a[v_]===n?(s=!0,!0):!1}),s||Rj(t,i,n,o)}catch{}}function Vie(t,e,n){var r=!1,o=ya();o&&(r=lS(o,t,e,n),r=lS(o.body,t,e,n)||r);var i=ps();return i&&(r=lS(i,t,e,n)||r),r}function $ie(t,e,n){var r=ya();r&&(uS(r,t,e,n),uS(r.body,t,e,n));var o=ps();o&&uS(o,t,e,n)}function Wu(t,e,n,r){var o=!1;return e&&t&&t[ht]>0&&Ye(t,function(i){i&&(!n||ko(n,i)===-1)&&(o=Vie(i,e,r)||o)}),o}function Gie(t,e,n,r){var o=!1;return e&&t&&Tt(t)&&(o=Wu(t,e,n,r),!o&&n&&n[ht]>0&&(o=Wu(t,e,null,r))),o}function xf(t,e,n){t&&Tt(t)&&Ye(t,function(r){r&&$ie(r,e,n)})}function qie(t,e,n){return Gie([_j,Ij,zy],t,e,n)}function Kie(t,e){xf([_j,Ij,zy],t,e)}function Pj(t,e,n){function r(s){var a=ps();t&&a&&a.visibilityState==="hidden"&&t(s)}var o=up(Aj,n),i=Wu([zy],t,e,o);return(!e||ko(e,kf)===-1)&&(i=Wu([kf],r,e,o)||i),!i&&e&&(i=Pj(t,null,n)),i}function Wie(t,e){var n=up(Aj,e);xf([zy],t,n),xf([kf],null,n)}function Nj(t,e,n){function r(s){var a=ps();t&&a&&a.visibilityState==="visible"&&t(s)}var o=up(kj,n),i=Wu([Tj],t,e,o);return i=Wu([kf],r,e,o)||i,!i&&e&&(i=Nj(t,null,n)),i}function Yie(t,e){var n=up(kj,e);xf([Tj],t,n),xf([kf],null,n)}var wd="",Qie="https://browser.events.data.microsoft.com/OneCollector/1.0/",gR="version",dS="properties",vR="initialize",yR="logger",Vm="indexOf",Gs="timings",bR="pollInternalLogs",fo="value",CR="kind",k_="length",hS="processTelemetryStart",qi,Jie="4.3.3",Oj="1DS-Web-JS-"+Jie,Mj=Dne.hasOwnProperty,Xie=(qi={},qi[0]=0,qi[2]=6,qi[1]=1,qi[3]=7,qi[4098]=6,qi[4097]=1,qi[4099]=7,qi),fS=null;function qs(t){return!(t===wd||Gt(t))}function Zie(t){if(t){var e=jy(t,"-");if(e>-1)return o_(t,e)}return wd}function Gke(){return fS===null&&(fS=!$t(Uint8Array)&&!ose()&&!A0()),fS}function ese(t){return!!(t&&la(t)&&t>=1&&t<=4)}function tse(t,e,n){if(!e&&!qs(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||Tt(e))e={value:e};else if(r==="object"&&!Mj.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(Gt(e[fo])||e[fo]===wd||!ur(e[fo])&&!la(e[fo])&&!Rc(e[fo])&&!Tt(e[fo]))return null;if(Tt(e[fo])&&!ise(e[fo]))return null;if(!Gt(e[CR])){if(Tt(e[fo])||!nse(e[CR]))return null;e[fo]=e[fo].toString()}return e}function Lj(t,e,n){var r=-1;if(!$t(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),rse(n))r===-1&&(r=0),r|=n;else{var o=Xie[U0(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function Yu(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||wd}function SR(t){t===void 0&&(t="D");var e=gj();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,wd)),e}function mv(t,e,n,r,o){var i={},s=!1,a=0,c=arguments[k_],u=arguments;for(Rc(u[0])&&(s=u[0],a++);a<c;a++){var t=u[a];en(t,function(f,p){s&&p&&zu(p)?Tt(p)?(i[f]=i[f]||[],Ye(p,function(g,v){g&&zu(g)?i[f][v]=mv(!0,i[f][v],g):i[f][v]=g})):i[f]=mv(!0,i[f],p):i[f]=p})}return i}var ui=Rre;function nse(t){return t===0||t>0&&t<=13||t===32}function rse(t){return t>=0&&t<=9}function ose(){var t=Hi();if(!$t(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[Vm]("safari")>=0||e[Vm]("firefox")>=0)&&e[Vm]("chrome")<0)return!0}return!1}function ise(t){return t[k_]>0}function j0(t,e){var n=t;n[Gs]=n[Gs]||{},n[Gs][hS]=n[Gs][hS]||{},n[Gs][hS][e]=ui()}function U0(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===QI&&(e=4,Tt(t)?(e=4096,t[k_]>0&&(e|=U0(t[0]))):Mj.call(t,"value")&&(e=8192|U0(t[fo])))}return e}function sse(){return!!kn("chrome")}function Yh(t){return t>0}var ase=bd({endpointUrl:Qie,propertyStorageOverride:{isVal:cse}});function cse(t){return t&&(!t.getProperty||!t.setProperty)&&go("Invalid property storage override passed."),!0}var lse=function(t){sp(e,t);function e(){var n=t.call(this)||this;return dn(e,n,function(r,o){r[vR]=function(i,s,a,c){Or(r,function(){return"AppInsightsCore.initialize"},function(){try{o[vR](io(i,ase,a||r[yR],!1).cfg,s,a,c)}catch(f){var u=r[yR],d=Rt(f);d[Vm]("channels")!==-1&&(d+=`
 - Channels must be provided through config.channels only!`),Xt(u,1,514,"SDK Initialization Failed - no telemetry will be sent: "+d)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){Or(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[Gs]=s[Gs]||{},s[Gs].trackStart=ui(),ese(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=Oj;var c=s.baseData=s.baseData||{};c[dS]=c[dS]||{};var u=c[dS];u[gR]=u[gR]||r.pluginVersionString||wd}o.track(s)},function(){return{item:i}},!i.sync)},r[bR]=function(i){return o[bR](i||"InternalLog")}}),n}return e.__ieDyn=1,e}(Mie),use="device",Dj="locale",x_="ver",dse="browser",hse="browserVer",fse="popSample",pse="eventFlags",R_="name",mse="serviceName",qr=Br({UserExt:[0,"user"],DeviceExt:[1,use],TraceExt:[2,"trace"],WebExt:[3,"web"],AppExt:[4,"app"],OSExt:[5,"os"],SdkExt:[6,"sdk"],IntWebExt:[7,"intweb"],UtcExt:[8,"utc"],LocExt:[9,"loc"],CloudExt:[10,"cloud"],DtExt:[11,"dt"]}),gse=Br({id:[0,"id"],ver:[1,x_],appName:[2,R_],locale:[3,Dj],expId:[4,"expId"],env:[5,"env"]}),vse=Br({domain:[0,"domain"],browser:[1,dse],browserVer:[2,hse],screenRes:[3,"screenRes"],userConsent:[4,"userConsent"],consentDetails:[5,"consentDetails"]}),yse=Br({locale:[0,Dj],localId:[1,"localId"],id:[2,"id"]}),bse=Br({osName:[0,R_],ver:[1,x_]}),Cse=Br({ver:[0,x_],seq:[1,"seq"],installId:[2,"installId"],epoch:[3,"epoch"]}),Sse=Br({msfpc:[0,"msfpc"],anid:[1,"anid"],serviceName:[2,mse]}),Ese=Br({popSample:[0,fse],eventFlags:[1,pse]}),wse=Br({tz:[0,"tz"]}),Tse=Br({sessionId:[0,"sesId"]}),Ise=Br({localId:[0,"localId"],deviceClass:[1,"deviceClass"],make:[2,"make"],model:[3,"model"]}),_se=Br({role:[0,"role"],roleInstance:[1,"roleInstance"],roleVer:[2,"roleVer"]}),Ase=Br({traceId:[0,"traceID"],traceName:[1,R_],parentId:[2,"parentID"]}),kse=Br({traceId:[0,"traceId"],spanId:[1,"spanId"],traceFlags:[2,"traceFlags"]}),Qh;function jj(){return Qh===void 0&&(Qh=!!Fj(0)),Qh}function Uj(){return jj()?Fj(0):null}function Fj(t){var e=null,n,r;try{var o=Cd();if(!o)return null;r=new Date,e=t===0?o.localStorage:o.sessionStorage,e&&Zt(e.setItem)&&(e.setItem(r,r),n=e.getItem(r)!==r,e.removeItem(r),n&&(e=null))}catch{e=null}return e}function xse(t,e,n){var r=Uj();if(r!==null)try{return r.setItem(e,n),!0}catch(o){Qh=!1,Xt(t,1,504,"Browser failed write to local storage. "+o)}return!1}function Rse(t,e){var n=Uj();if(n!==null)try{return n.getItem(e)}catch(r){Qh=!1,Xt(t,1,503,"Browser failed read of local storage. "+r)}return null}function Pse(){return this.getId()}function Nse(t){this.setId(t)}var Bj=function(){function t(){dn(t,this,function(e){e.setId=function(n){e.customId=n},e.getId=function(){return ur(e.customId)?e.customId:e.automaticId}})}return t._staticInit=function(){fn(t.prototype,"id",{g:Pse,s:Nse})}(),t}(),ER="ai_session",Ose=function(){function t(e,n,r){var o,i=S_(e),s=pj(e),a,c;dn(t,this,function(u){var d=fr(n,function(){c=n,u.config=c});r&&r.add(d),a=function(){return u.config.namePrefix?ER+u.config.namePrefix:ER},u.automaticSession=new Bj,u.update=function(){u.automaticSession.getId()||f();var b=u.automaticSession,C=u.config,S=new Date().getTime(),w=S-b.acquisitionDate>C.sessionExpirationMs,E=S-b.renewalDate>C.sessionRenewalMs;if(w||E)g();else{var T=o;(!T||S-T>t.cookieUpdateInterval)&&(b.renewalDate=S,v(b.getId(),b.acquisitionDate,b.renewalDate))}},u.backup=function(){var b=u.automaticSession;y(b.getId(),b.acquisitionDate,b.renewalDate)};function f(){var b=s.get(a());if(b&&Zt(b.split))p(b);else{var C=Rse(i,a());C&&p(C)}u.automaticSession.getId()||g()}function p(b){var C=u.automaticSession,S=b.split("|");S.length>0&&C.setId(S[0]);try{if(S.length>1){var w=+S[1];C.acquisitionDate=+new Date(w),C.acquisitionDate=C.acquisitionDate>0?C.acquisitionDate:0}if(S.length>2){var E=+S[2];C.renewalDate=+new Date(E),C.renewalDate=C.renewalDate>0?C.renewalDate:0}}catch(T){Xt(i,1,510,"Error parsing ai_session cookie, session will be reset: "+T)}C.renewalDate===0&&Xt(i,2,517,"AI session renewal date is 0, session will be reset.")}function g(){var b=u.automaticSession,C=new Date().getTime(),S=u.config.sessionAsGuid;!$t(S)&&S?Rc(S)?b.setId(SR()):b.setId(SR(S)):b.setId(b_(c.idLength||22)),b.acquisitionDate=C,b.renewalDate=C,v(b.getId(),b.acquisitionDate,b.renewalDate),jj()||Xt(i,2,505,"Browser does not support local storage. Session durations will be inaccurate.")}function v(b,C,S){var w=C+u.config.sessionExpirationMs,E=S+u.config.sessionRenewalMs,T=new Date,I=[b,C,S];w<E?T.setTime(w):T.setTime(E);var A=u.config.cookieDomain||null;s.set(a(),I.join("|")+";expires="+T.toUTCString(),null,A),o=new Date().getTime()}function y(b,C,S){xse(i,a(),[b,C,S].join("|"))}})}return t.cookieUpdateInterval=6e4,t}(),P_=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"];function wR(t,e){e===void 0&&(e=P_);var n=null;if(t)for(var r=t.split(","),o=0;o<r.length;o++)Mse(r[o],e)&&(n?n+=","+r[o]:n=r[o]);return n}function Mse(t,e){if(e===void 0&&(e=P_),!t||t.length<4)return!1;for(var n=!1,r=256,o=t.substring(0,3).toString().toUpperCase(),i=0;i<e.length;i++)if(e[i]+":"===o&&t.length<=r){n=!0;break}return n}function Lse(){return this.getExpId()}var Dse=function(){function t(e,n,r){var o=null,i=P_.slice(0),s="Treatments",a,c=null;dn(t,this,function(u){if(y(e),I3()){var d=ps().documentElement;d&&(u.locale=d.lang)}u.getExpId=function(){return c.expId?v(c.expId):g()};function f(b){var C,S={},w=ps();if(w){C=w&&w.querySelectorAll("meta");for(var E=0;E<C.length;E++){var T=C[E];if(T.name){var I=T.name.toLowerCase();if(I.indexOf(b)===0){var A=T.name.replace(b,"");S[A]=T.content}}}}return S}function p(b){b!==o&&(o=wR(b,i))}function g(){var b=Yu(a,s);return p(b),o}function v(b){return p(b),o}function y(b){var C=fr(b,function(){a=n&&n.getCookieMgr(),c=b||{},u.env=c.env||f("awa-").env});r&&r.add(C)}})}return t.validateAppExpId=wR,t._staticInit=function(){fn(t.prototype,"expId",{g:Lse})}(),t}(),jse=function(){function t(){}return t}(),Use=function(){function t(){}return t}();function Fse(){return this.getMsfpc()}function Bse(){return this.getAnid()}var Hse=function(){function t(e,n,r){var o;dn(t,this,function(i){s(e),i.getMsfpc=function(){return Yu(o,"MSFPC")},i.getAnid=function(){return Yu(o,"ANON").slice(0,34)};function s(a){var c=fr(a,function(){o=n&&n.getCookieMgr();var u=a||{};u.serviceName&&(i.serviceName=u.serviceName)});r&&r.add(c)}})}return t._staticInit=function(){var e=t.prototype;fn(e,"msfpc",{g:Fse}),fn(e,"anid",{g:Bse})}(),t}(),zse=function(){function t(){var e=new Date().getTimezoneOffset(),n=e%60,r=(e-n)/60,o="+";r>0&&(o="-"),r=Math.abs(r),n=Math.abs(n),this.tz=o+(r<10?"0"+r:r.toString())+":"+(n<10?"0"+n:n.toString())}return t}(),Ds={WIN:/(windows|win32)/i,WINRT:/ arm;/i,WINPHONE:/windows\sphone\s\d+\.\d+/i,OSX:/(macintosh|mac os x)/i,IOS:/(ipad|iphone|ipod)(?=.*like mac os x)/i,LINUX:/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,ANDROID:/android/i,CROS:/CrOS/i},TR={"5.1":"XP","6.0":"Vista","6.1":"7","6.2":"8","6.3":"8.1","10.0":"10"},Vse="([\\d,.]+)",Hj="([\\d,_,.]+)",Td="Unknown",IR=[{r:Ds.WINPHONE,os:"Windows Phone"},{r:Ds.WINRT,os:"Windows RT"},{r:Ds.WIN,os:"Windows"},{r:Ds.IOS,os:"iOS"},{r:Ds.ANDROID,os:"Android"},{r:Ds.LINUX,os:"Linux"},{r:Ds.CROS,os:"Chrome OS"},{s:"x11",os:"Unix"},{s:"blackberry",os:"BlackBerry"},{s:"symbian",os:"Symbian"},{s:"nokia",os:"Nokia"},{r:Ds.OSX,os:"Mac OS X"}];function $se(t){for(var e=0;e<IR.length;e++){var n=IR[e];if(n.r&&t.match(n.r))return n.os;if(n.s&&t.indexOf(n.s)!==-1)return n.os}return Td}function Gse(t,e){return e==="Windows"?_R(t,"Windows NT"):e==="Android"?_R(t,e):e==="Mac OS X"?qse(t):e==="iOS"?Kse(t):Td}function _R(t,e){var n=t.match(new RegExp(e+" "+Vse));return n?TR[n[1]]?TR[n[1]]:n[1]:Td}function qse(t){var e=t.match(new RegExp("Mac OS X "+Hj));if(e){var n=e[1].replace(/_/g,".");if(n){var r=zj(n);if(r){var o=n.split(r);return o[0]}else return n}}return Td}function Kse(t){var e=t.match(new RegExp("OS "+Hj));if(e){var n=e[1].replace(/_/g,".");if(n){var r=zj(n);if(r){var o=n.split(r);return o[0]}else return n}}return Td}function zj(t){return t.indexOf(".")>-1?".":t.indexOf("_")>-1?"_":null}var Wse=function(){function t(e,n){var r=this,o,i=null,s=null,a=null,c=null,u=function(v){a=v},d=function(v){c=v},f=function(){return a||i},p=function(){return c||s},g=fr(e,function(){if(o=e||{},o.populateOperatingSystemInfo){var v=Hi()||{},y=e.userAgent||v.userAgent||"",b=(e.userAgentData||{}).platform||(v.userAgentData||{}).platform;if(y){var C=$se(y.toLowerCase());i=C,s=Gse(y,C)}(!i||i===Td)&&ur(b)&&(i=b)}});n&&n.add(g),fn(r,"name",{s:u,g:f}),fn(r,"ver",{s:d,g:p})}return t}(),pS="MicrosoftApplicationsTelemetryDeviceId";function Yse(t,e,n,r){e?e.setProperty(n,r):t.set(n,r,31536e3)}function Qse(t,e,n){return e?e.getProperty(n)||"":Yu(t,n)}var Jse=function(){function t(e,n,r){var o=0,i;dn(t,this,function(s){s.seq=o,s.epoch=_f(!1).toString(),s.getSequenceId=function(){return++o};var a=fr(e,function(c){i=n&&n.getCookieMgr();var u=c.cfg,d=u.propertyStorageOverride,f=i.isEnabled();if(f||d){var p=Qse(i,d,pS);p||(p=gj()),Yse(i,d,pS,p),s.installId=p}else i.purge(pS)});r&&r.add(a)})}return t.__ieDyn=1,t}(),Xse=function(){function t(e,n,r,o,i){var s=this;s.traceId=n||M0();var a=fr(e,function(){var c=e;if(c.enableDistributedTracing&&!r&&(r=M0().substring(0,16)),s.parentId=s.parentId||r,c.enableApplicationInsightsTrace&&!o){var u=By();u&&u.pathname&&(o=u.pathname)}s.name=s.name||o});i&&i.add(a)}return t}(),Vj="setLocalId";function Zse(){return this.getLocalId()}function eae(t){this[Vj](t)}var tae=function(){function t(e,n,r,o){var i,s,a;dn(t,this,function(c){if(f(n),typeof navigator<"u"){var u=navigator;c.locale=u.userLanguage||u.language}c.getLocalId=function(){return s||d()},c[Vj]=function(p){s=p};function d(){if(!i.hashIdentifiers&&!i.dropIdentifiers){var p=Yu(a,"MUID");p&&(s="t:"+p)}return s}function f(p){var g=fr(p,function(){if(a=r&&r.getCookieMgr(),i=p,s=null,a&&a.isEnabled()&&(d(),i.enableApplicationInsightsUser)){var v=Yu(a,t.userCookieName);if(v){var y=v.split(t.cookieSeparator);y.length>0&&(c.id=y[0])}if(!c.id){c.id=b_(e&&!$t(e.idLength)?e.idLength:22);var b=_0(new Date);c.accountAcquisitionDate=b;var C=[c.id,b],S=i.cookieDomain?i.cookieDomain:void 0;a.set(t.userCookieName,C.join(t.cookieSeparator),31536e3,S)}}});o&&o.add(g)}})}return t.cookieSeparator="|",t.userCookieName="ai_user",t._staticInit=function(){fn(t.prototype,"localId",{g:Zse,s:eae})}(),t}(),nae=1048576,rae=2097152,oae=4194304,iae=function(){function t(e,n){var r=this;r.popSample=100;var o=fr(e,function(){r.eventFlags=0,e.hashIdentifiers&&(r.eventFlags=r.eventFlags|nae),e.dropIdentifiers&&(r.eventFlags=r.eventFlags|rae),e.scrubIpOnly&&(r.eventFlags=r.eventFlags|oae)});n&&n.add(o)}return t}(),AR=["Required","Analytics","SocialMedia","Advertising"],gv="([\\d,.]+)",$j="Unknown",Gj="Edg/",qj="EdgiOS/",mS=[{ua:"OPR/",b:"Opera"},{ua:"PhantomJS",b:"PhantomJS"},{ua:"Edge",b:"Edge"},{ua:Gj,b:"Edge"},{ua:qj,b:"Edge"},{ua:"Electron",b:"Electron"},{ua:"Chrome",b:"Chrome"},{ua:"Trident",b:"MSIE"},{ua:"MSIE ",b:"MSIE"},{ua:"Firefox",b:"Firefox"},{ua:"Safari",b:"Safari"},{ua:"SkypeShell",b:"SkypeShell"}],gS=[{br:"Microsoft Edge",b:"Edge"},{br:"Google Chrome",b:"Chrome"},{br:"Opera",b:"Opera"}];function F0(t,e){return e.indexOf(t)>-1}function sae(t,e){for(var n=0;n<e.length;n++)if(t==e[n].brand)return e[n].version;return null}function aae(t){if(t)for(var e=0;e<mS.length;e++){var n=mS[e].ua;if(F0(n,t))return mS[e].b}return $j}function cae(t,e){return e==="MSIE"?lae(t):uae(e,t)}function lae(t){var e=t.match(new RegExp("MSIE "+gv));if(e)return e[1];var n=t.match(new RegExp("rv:"+gv));if(n)return n[1]}function uae(t,e){t==="Safari"?t="Version":t==="Edge"&&(F0(Gj,e)?t="Edg":F0(qj,e)&&(t="EdgiOS"));var n=e.match(new RegExp(t+"/"+gv));return n||t==="Opera"&&(n=e.match(new RegExp("OPR/"+gv)),n)?n[1]:$j}function dae(){var t={h:0,w:0},e=ya();return e&&e.screen&&(t.h=screen.height,t.w=screen.width),t}function hae(){return this.getUserConsent()}var fae=function(){function t(e,n,r){pj(n);var o=e||{},i=null,s=null,a=null,c=null,u=null,d=null,f=null;dn(t,this,function(p){A(e);var g=By();if(g){var v=g.hostname;v&&(p.domain=g.protocol==="file:"?"local":v)}var y=dae();p.screenRes=y.w+"X"+y.h,p.getUserConsent=function(){return!1},p.getUserConsentDetails=function(){var _=null;try{var j=o.callback;if(j&&j.userConsentDetails){var R=j.userConsentDetails();if(R){o.disableConsentDetailsSanitize?_=R:_={};for(var $=0;$<AR.length;$++){var U=AR[$];_[U]=R[U]||!1}}}return f!==null&&(_=_||{},_.GPC_DataSharingOptIn=!!f),_?JSON.stringify(_):null}catch{}};function b(_,j){if(Tt(j))try{for(var R=0;R<gS.length;R++){var $=sae(gS[R].br,j);if($){u=gS[R].b,d=$;return}}}catch{}if(_){var U=aae(_);u=U,d=cae(_,U)}}function C(_){a=_}function S(_){c=_}function w(){return a||u}function E(){return c||d}var T=function(){return f},I=function(_){f=Rc(_)?_:null,o.gpcDataSharingOptIn=f};function A(_){var j=fr(_,function(){if(o=_,o.populateBrowserInfo){var R=o.userAgent,$=(o.userAgentData||{}).brands;if(R!==i||$!==s){if(!R||!$||$.length===0){var U=Hi();U&&(R=R||U.userAgent||"",$=$||(U.userAgentData||{}).brands)}b(R,$),i=R,s=$}}f=Rc(o.gpcDataSharingOptIn)?o.gpcDataSharingOptIn:null});r&&r.add(j)}y3(p,{userConsent:{g:p.getUserConsent},browser:{s:C,g:w},browserVer:{s:S,g:E},gpcDataSharingOptIn:{g:T,s:I}})})}return t._staticInit=function(){fn(t.prototype,"userConsent",{g:hae})}(),t}();function $r(t,e,n,r,o){var i=e.ext[qr[t]];if(i)try{en(r,function(s,a){if(ur(a)||la(a)||Rc(a)){var c=i[n[s]];!o&&(c||ur(c)||la(c)||Rc(c))&&(a=c),i[n[s]]=a}})}catch{}return i}var pae=function(){function t(e,n,r,o){dn(t,this,function(i){i.app=new Dse(n,r,o),i.cloud=new jse,i.user=new tae(e,n,r,o),i.os=new Wse(n,o),i.web=new fae(n,r,o);var s=new Jse(e,r,o),a=new Hse(n,r,o),c=new iae(n,o);i.loc=new zse,i.device=new Use;var u=new Ose(r,n,o);i.session=new Bj;var d=void 0,f=mae(new Xse(n,d,d,d,o),v()),p=!(n||{}).eventContainExtFields;function g(){var y=i.session;if(y&&ur(y.customId))return y.customId;u.update();var b=u.automaticSession;if(b){var C=b.getId();C&&ur(C)&&(y.automaticId=C)}return y.automaticId}i.getTraceCtx=function(){return f},i.getSessionId=g,i.applyApplicationContext=function(y){var b,C=i.app;$r(4,y,gse,(b={},b[0]=C.id,b[1]=C.ver,b[2]=C.name,b[3]=C.locale,b[4]=C.getExpId(),b[5]=C.env,b),p)},i.applyUserContext=function(y){var b,C=i.user;$r(0,y,yse,(b={},b[1]=C.getLocalId(),b[0]=C.locale,b[2]=C.id,b),p)},i.applyWebContext=function(y){var b,C=i.web;$r(3,y,vse,(b={},b[0]=C.domain,b[1]=C.browser,b[2]=C.browserVer,b[3]=C.screenRes,b[5]=C.getUserConsentDetails(),b[4]=!1,b),p)},i.applyOsContext=function(y){var b,C=i.os;$r(5,y,bse,(b={},b[0]=C.name,b[1]=C.ver,b),p)},i.applySdkContext=function(y){var b;$r(6,y,Cse,(b={},b[2]=s.installId,b[1]=s.getSequenceId(),b[3]=s.epoch,b),p)},i.applyIntWebContext=function(y){var b;$r(7,y,Sse,(b={},b[0]=a.getMsfpc(),b[1]=a.getAnid(),b[2]=a.serviceName,b),p)},i.applyUtcContext=function(y){var b,C=(b={},b[0]=c.popSample,b);c.eventFlags>0&&(C[1]=c.eventFlags),$r(8,y,Ese,C,p)},i.applyLocContext=function(y){var b;$r(9,y,wse,(b={},b[0]=i.loc.tz,b),p)},i.applySessionContext=function(y){var b;$r(4,y,Tse,(b={},b[0]=g(),b),p)},i.applyDeviceContext=function(y){var b,C=i.device;$r(1,y,Ise,(b={},b[0]=C.localId,b[2]=C.make,b[3]=C.model,b[1]=C.deviceClass,b),p)},i.applyCloudContext=function(y){var b,C=i.cloud;$r(10,y,_se,(b={},b[0]=C.role,b[1]=C.roleInstance,b[2]=C.roleVer,b),p)},i.applyAITraceContext=function(y){var b;if(n.enableApplicationInsightsTrace){var C=v();C&&$r(2,y,Ase,(b={},b[0]=C.getTraceId(),b[1]=C.getName(),b[2]=C.getSpanId(),b),!1)}},i.applyDistributedTraceContext=function(y){var b,C=v();if(C){var S=(b={},b[0]=C.getTraceId(),b[1]=C.getSpanId(),b),w=C.getTraceFlags();Gt(w)||(S[2]=w),$r(11,y,kse,S,!1)}};function v(){var y=f;return r&&r.getTraceCtx&&(y=r.getTraceCtx(!1)||f),y}})}return t.__ieDyn=1,t}();function mae(t,e){var n=t||{};return{getName:function(){return n.name},setName:function(r){e&&e.setName(r),n.name=r},getTraceId:function(){return n.traceId},setTraceId:function(r){e&&e.setTraceId(r),yj(r)&&(n.traceId=r)},getSpanId:function(){return n.parentId},setSpanId:function(r){e&&e.setSpanId(r),bj(r)&&(n.parentId=r)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(r){e&&e.setTraceFlags(r),n.traceFlags=r}}}var rm,gae=[qr[4],qr[0],qr[3],qr[5],qr[6],qr[7],qr[8],qr[9],qr[1],qr[2],qr[11],qr[10]],vae=bd({populateBrowserInfo:!1,populateOperatingSystemInfo:!1,userAgent:ka(),userAgentData:R0({brands:rm,mobile:rm,platform:rm}),userConsentCookieName:ka(),userConsented:!1,serviceName:ka(),env:ka(),expId:ka(),sessionRenewalMs:18e5,sessionExpirationMs:864e5,sessionAsGuid:null,cookieDomain:ka(),namePrefix:ka(),enableApplicationInsightsTrace:!1,enableApplicationInsightsUser:!1,hashIdentifiers:!1,dropIdentifiers:!1,scrubIpOnly:!1,callback:R0({userConsentDetails:null}),gpcDataSharingOptIn:rm,idLength:22,enableDistributedTracing:!1,eventContainExtFields:!1}),yae=function(t){sp(e,t);function e(){var n=t.call(this)||this;n.identifier="SystemPropertiesCollector",n.priority=3,n.version="4.3.3";var r,o,i;return dn(e,n,function(s,a){c(),s.initialize=function(f,p,g){a.initialize(f,p,g),u(f)},s.processTelemetry=function(f,p){j0(f,s.identifier),p=s._getTelCtx(p);var g=f.ext=f.ext?f.ext:{};f.data=f.data?f.data:{},Ye(gae,function(v){g[v]=g[v]||{}}),r&&(r.applyUtcContext(f),r.applyApplicationContext(f),r.applyUserContext(f),r.applyWebContext(f),r.applyOsContext(f),r.applySdkContext(f),r.applyIntWebContext(f),r.applyLocContext(f),r.applySessionContext(f),r.applyDeviceContext(f),i.enableApplicationInsightsTrace&&r.applyAITraceContext(f),i.enableDistributedTracing&&r.applyDistributedTraceContext(f),r.applyCloudContext(f)),Ye(is(g),function(v){is(g[v]).length===0&&delete g[v]}),d(o,f.data),s.processNext(f,p)},s.getPropertiesContext=function(){return r},s.setProperty=function(f,p){o[f]=p},s._doTeardown=function(f,p){var g=(f||{}).core();if(g&&g.getTraceCtx&&r){var v=g.getTraceCtx(!1);v&&v===r.getTraceCtx()&&g.setTraceCtx(null)}c()},s._getDbgPlgTargets=function(){return[i]};function c(){r=null,o={}}function u(f){var p=s.identifier,g=s.core;s._addHook(fr(f,function(){var v=Dc(null,f,g);i=v.getExtCfg(p,vae)})),r=new pae(f,i,g,s._unloadHooks),g&&g.setTraceCtx&&g.setTraceCtx(r.getTraceCtx())}function d(f,p){f&&en(f,function(g,v){p[g]||(p[g]=v)})}}),n}return e.__ieDyn=1,e}(__),om="REAL_TIME",bae="NEAR_REAL_TIME",Cae="BEST_EFFORT",zs="",B0="drop",Sae="send",kR="requeue",Eae="rspFail",wae="oth",xR="no-cache, no-store",H0="application/x-json-stream",im="cache-control",Ah="content-type",Tae="kill-tokens",Iae="kill-duration",_ae="time-delta-millis",z0="client-version",Kj="client-id",V0="time-delta-to-apply-millis",$0="upload-time",G0="apikey",q0="AuthMsaDeviceTicket",RR="WebAuthToken",PR="AuthXToken",Aae="NoResponseBody",vv="msfpc",NR="trace",vS="user",K0="allowRequestSending",Wj="firstRequestSent",Yj="shouldAddClockSkewHeaders",Qj="getClockSkewHeaderValue",W0="setClockSkew",vt="length",fc="concat",Ci="iKey",On="count",ec="events",Cr="push",bu="split",Vy="splice",Y0="toLowerCase",Gl="hdrs",Q0="useHdrs",Jh="initialize",Jj="setTimeoutOverride",Xj="clearTimeoutOverride",kae="payloadPreprocessor",OR="overrideEndpointUrl",MR="avoidOptions",xae="disableEventTimings",Rae="stringifyObjects",yS="enableCompoundKey",LR="disableXhrSync",DR="disableFetchKeepAlive",Pae="addNoResponse",Nae="excludeCsMetaData",jR="useSendBeacon",UR="fetchCredentials",FR="alwaysUseXhrOverride",Oae="unloadTransports",Zj="serializeOfflineEvt",eU="getOfflineRequestDetails",bS="createPayload",J0="createOneDSPayload",BR="payloadBlob",si="headers",ih="_thePayload",HR="urlString",Nr="batches",Gr="sendType",X0="addHeader",Z0="canSendRequest",yv="sendQueuedRequests",tU="isCompletelyIdle",ew="setUnloading",Mae="isTenantKilled",$m="resume",nU="sendSynchronousBatch",CS="_transport",bv="getWParam",zR="isBeacon",sm="timings",SS="isTeardown",ES="isSync",Gm="data",Lae="timeout",wS="_sendReason",rU="setKillSwitchTenants",oU="_backOffTransmission",am="identifier",Dae="disableOptimizeObj",jae="ignoreMc1Ms0CookieProcessing",VR="eventsLimitInMem",$R="autoFlushEventsLimit",Uae="disableAutoBatchFlushLimit",Fae="overrideInstrumentationKey",Bae="disableTelemetry",TS="baseData",cm="sendAttempt",Ra="latency",Al="sync";function iU(t){var e=(t.ext||{}).intweb;return e&&qs(e[vv])?e[vv]:null}function GR(t){for(var e=null,n=0;e===null&&n<t[vt];n++)e=iU(t[n]);return e}var Rf=function(){function t(e,n){var r=n?[][fc](n):[],o=this,i=GR(r);o[Ci]=function(){return e},o.Msfpc=function(){return i||zs},o[On]=function(){return r[vt]},o[ec]=function(){return r},o.addEvent=function(s){return s?(r[Cr](s),i||(i=iU(s)),!0):!1},o[bu]=function(s,a){var c;if(s<r[vt]){var u=r[vt]-s;Gt(a)||(u=a<u?a:u),c=r[Vy](s,u),i=GR(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t}(),Hae=function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;dn(t,this,function(s){s[K0]=function(){return e},s[Wj]=function(){r&&(r=!1,i||(e=!1))},s[Yj]=function(){return n},s[Qj]=function(){return o},s[W0]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t}(),zae=1e3,Vae=function(){function t(){var e={};function n(r){var o=[];return r&&Ye(r,function(i){o[Cr](Mr(i))}),o}dn(t,this,function(r){r[rU]=function(o,i){if(o&&i)try{var s=n(o[bu](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*zae,c=0;c<s[vt];++c)e[s[c]]=da()+a}catch{return[]}return[]},r[Mae]=function(o){var i=e,s=Mr(o);return i[s]!==void 0&&i[s]>da()?!0:(delete i[s],!1)}})}return t.__ieDyn=1,t}(),$ae=.8,Gae=1.2,qR=3e3,qae=6e5;function Kae(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function sU(t){var e=0,n=qR*$ae,r=qR*Gae,o=Math.floor(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,Math.min(e,qae)}var Wae=20,Yae=3984588,aU=65e3,cU=2e6,Qae=Math.min(cU,aU),KR="metadata",lm="f",Jae=/\./,Xae=function(){function t(e,n,r,o,i,s){var a="data",c="baseData",u="ext",d=!!o,f=!0,p=n,g={},v=!!s,y=i||Lj;dn(t,this,function(b){b.createPayload=function(w,E,T,I,A,_){return{apiKeys:[],payloadBlob:zs,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:E,isSync:T,isBeacon:I,sendType:_,sendReason:A}},b.appendPayload=function(w,E,T){var I=w&&E&&!w.overflow;return I&&Or(e,function(){return"Serializer:appendPayload"},function(){for(var A=E.events(),_=w.payloadBlob,j=w.numEvents,R=!1,$=[],U=[],se=w.isBeacon,P=se?aU:Yae,k=se?Qae:cU,N=0,x=0;N<A.length;){var M=A[N];if(M){if(j>=T){w.overflow=E.split(N);break}var te=b.getEventBlob(M);if(te&&te.length<=k){var Y=te.length,Q=_.length;if(Q+Y>P){w.overflow=E.split(N);break}_&&(_+=`
`),_+=te,x++,x>Wae&&(Hl(_,0,1),x=0),R=!0,j++}else te?$.push(M):U.push(M),A.splice(N,1),N--}N++}if($.length>0&&w.sizeExceed.push(Rf.create(E.iKey(),$)),U.length>0&&w.failedEvts.push(Rf.create(E.iKey(),U)),R){w.batches.push(E),w.payloadBlob=_,w.numEvents=j;var ee=E.iKey();ko(w.apiKeys,ee)===-1&&w.apiKeys.push(ee)}},function(){return{payload:w,theBatch:{iKey:E.iKey(),evts:E.events()},max:T}}),I},b.getEventBlob=function(w){try{return Or(e,function(){return"Serializer.getEventBlob"},function(){var E={};E.name=w.name,E.time=w.time,E.ver=w.ver,E.iKey="o:"+Zie(w.iKey);var T={},I;v||(I=function(R,$,U){Zae(y,T,R,$,U)});var A=w[u];A&&(E[u]=T,en(A,function(R,$){var U=T[R]={};S($,U,"ext."+R,!0,null,null,!0)}));var _=E[a]={};_.baseType=w.baseType;var j=_[c]={};return S(w.baseData,j,c,!1,[c],I,f),S(w.data,_,a,!1,[],I,f),JSON.stringify(E)},function(){return{item:w}})}catch{return null}};function C(w,E){var T=g[w];return T===void 0&&(w.length>=7&&(T=Sx(w,"ext.metadata")||Sx(w,"ext.web")),g[w]=T),T}function S(w,E,T,I,A,_,j){en(w,function(R,$){var U=null;if($||qs($)){var se=T,P=R,k=A,N=E;if(d&&!I&&Jae.test(R)){var x=R.split("."),M=x.length;if(M>1){k&&(k=k.slice());for(var te=0;te<M-1;te++){var Y=x[te];N=N[Y]=N[Y]||{},se+="."+Y,k&&k.push(Y)}P=x[M-1]}}var Q=I&&C(se);if(!Q&&p&&p.handleField(se,P)?U=p.value(se,P,$,r):U=tse(P,$,r),U){var ee=U.value;if(N[P]=ee,_&&_(k,P,U),typeof ee=="object"&&!Tt(ee)){var oe=k;oe&&(oe=oe.slice(),oe.push(P)),S($,ee,se+"."+P,I,oe,_)}}}})}})}return t.__ieDyn=1,t}();function Zae(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var s=e[KR];s||(s=e[KR]={f:{}});var a=s[lm];if(a||(a=s[lm]={}),n)for(var c=0;c<n.length;c++){var u=n[c];a[u]||(a[u]={f:{}});var d=a[u][lm];d||(d=a[u][lm]={}),a=d}a=a[r]={},Tt(o.value)?a.a={t:i}:a.t=i}}}function Cv(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return Dre([t,e],n,r,o)}}}var Pa,IS="sendAttempt",ece="&"+Aae+"=true",tce="?cors=true&"+Ah[Y0]()+"="+H0,nce=(Pa={},Pa[1]=kR,Pa[100]=kR,Pa[200]="sent",Pa[8004]=B0,Pa[8003]=B0,Pa),tw={},nw={};function ol(t,e,n){tw[t]=e,n!==!1&&(nw[e]=t)}ol(q0,q0,!1);ol(z0,z0);ol(Kj,"Client-Id");ol(G0,G0);ol(V0,V0);ol($0,$0);ol(PR,PR);function um(t,e){var n=!1;if(t&&e){var r=is(t);if(r&&r[vt]>0)for(var o=e[Y0](),i=0;i<r[vt];i++){var s=r[i];if(s&&Ao(e,s)&&s[Y0]()===o){n=!0;break}}}return n}function kl(t,e,n,r){e&&n&&n[vt]>0&&(r&&tw[e]?(t[Gl][tw[e]]=n,t[Q0]=!0):t.url+="&"+e+"="+n)}function rce(t,e,n){for(var r=0;r<t[vt];r++)if(t[r].name===e){t[r].value=n;return}t[Cr]({name:e,value:n})}function oce(t,e){for(var n=0;n<t[vt];n++)if(t[n].name===e){t[Vy](n,1);return}}var ice=function(){function t(e,n,r,o){var i,s,a,c,u=!1,d,f,p,g,v,y,b,C,S,w,E,T,I,A,_,j,R,$,U,se,P,k,N,x,M,te,Y,Q;dn(t,this,function(ee){ze();var oe=!0;ee[Jh]=function(F,W,ne){x||(v=W,T=W.getCookieMgr(),f=ne,p=f.diagLog(),Js(se,fr(F,function(_e){var Me,We=_e.cfg,Ne=_e.cfg.extensionConfig[ne.identifier];M=Cv(Ne[Jj],Ne[Xj]),qs(We.anonCookieName)?rce(b,"anoncknm",We.anonCookieName):oce(b,"anoncknm"),P=Ne[kae],k=Ne.payloadListener;var z=Ne.httpXHROverride,re=Ne[OR]?Ne[OR]:We.endpointUrl;i=re+tce,A=$t(Ne[MR])?!0:!Ne[MR],E=!Ne[xae];var he=Ne.valueSanitizer,ye=Ne[Rae],Le=!!We[yS];$t(Ne[yS])||(Le=!!Ne[yS]),_=Ne.xhrTimeout,j=!!Ne[LR],R=!!Ne[DR],U=Ne[Pae]!==!1,te=!!Ne[Nae],W.getPlugin("LocalStorage")&&(R=!0),u=!A0(),w=new Xae(v,he,ye,Le,Lj,te),Gt(Ne[jR])||(u=!!Ne[jR]),Ne[UR]&&(Q=Ne[UR]);var qe=fe();Y?Y.SetConfig(qe):(Y=new Die,Y[Jh](qe,p));var Ze=z,ot=Ne[FR]?z:null,St=Ne[FR]?z:null,Bn=[3,2];if(!z){y=!1;var yn=[];A0()?(yn=[2,1],Bn=[2,1,3]):yn=[1,2,3],yn=zx(yn,Ne.transports),z=Ce(yn,!1),z||Kh(p,"No available transport to send events"),Ze=Ce(yn,!0)}ot||(Bn=zx(Bn,Ne[Oae]),ot=Ce(Bn,!0)),$=!y&&(u&&Y3()||!R&&Q3(!0)),g=(Me={},Me[0]=z,Me[1]=Ze||Ce([1,2,3],!0),Me[2]=ot||Ze||Ce([1],!0),Me[3]=St||Ce([2,3],!0)||Ze||Ce([1],!0),Me)})),x=!0)},ee.addResponseHandler=function(F){return N[Cr](F),{rm:function(){var W=N.indexOf(F);W>=0&&N[Vy](W,1)}}},ee[Zj]=function(F){try{if(w)return w.getEventBlob(F)}catch{}return zs},ee[eU]=function(){try{var F=w&&w[bS](0,!1,!1,!1,1,0);return ge(F,A)}catch{}return null},ee[J0]=function(F,W){try{var ne=[];Ye(F,function(z){W&&(z=$l(z));var re=Rf.create(z[Ci],[z]);ne[Cr](re)});for(var _e=null;ne[vt]>0&&w;){var Me=ne.shift();Me&&Me[On]()>0&&(_e=_e||w[bS](0,!1,!1,!1,1,0),w.appendPayload(_e,Me,e))}var We=ge(_e,A),Ne={data:_e[BR],urlString:We.url,headers:We[Gl],timeout:_,disableXhrSync:j,disableFetchKeepAlive:R};return A&&(um(Ne[si],im)||(Ne[si][im]=xR),um(Ne[si],Ah)||(Ne[si][Ah]=H0)),Ne}catch{}return null};function Ce(F,W){try{return Y&&Y.getSenderInst(F,W)}catch{}return null}ee._getDbgPlgTargets=function(){return[g[0],s,w,g,fe(),i]};function fe(){try{var F={xdrOnComplete:Pe,fetchOnComplete:nt,xhrOnComplete:J,beaconOnRetry:X},W={enableSendPromise:!1,isOneDs:!0,disableCredentials:!oe,fetchCredentials:Q,disableXhr:!1,disableBeacon:!u,disableBeaconSync:!u,disableFetchKeepAlive:R,timeWrapper:M,addNoResponse:U,senderOnCompleteCallBack:F};return W}catch{}return null}function Pe(F,W,ne){var _e=Ku(F);pe(W,200,{},_e),Ft(_e)}function ze(){var F;i=null,s=new Vae,a=!1,c=new Hae,u=!1,d=0,f=null,p=null,g=null,v=null,y=!0,b=[],C={},S=[],w=null,E=!1,T=null,I=!1,A=!1,_=F,j=F,R=F,$=F,U=F,se=[],P=F,k=F,N=[],x=!1,M=Cv(),te=!1,Y=null}function nt(F,W,ne,_e){var Me=function(z,re,he){pe(W,z,re,he),Ft(he)},We={},Ne=F[si];Ne&&Ne.forEach(function(z,re){We[re]=z}),Me(F.status,We,ne||zs)}function J(F,W,ne){var _e=Ku(F);pe(W,F.status,Fm(F,!0),_e),Ft(_e)}function pe(F,W,ne,_e){try{F(W,ne,_e)}catch(Me){Xt(p,2,518,Rt(Me))}}function X(F,W,ne){var _e=F,Me=200,We=_e[ih],Ne=F[HR]+(U?ece:zs);try{var z=Hi();if(We){var re=!!v.getPlugin("LocalStorage"),he=[],ye=[];Ye(We[Nr],function(Le){if(he&&Le&&Le[On]()>0)for(var qe=Le[ec](),Ze=0;Ze<qe[vt];Ze++)if(z.sendBeacon(Ne,w.getEventBlob(qe[Ze])))ye[Cr](Le[Ze]);else{he[Cr](Le[bu](Ze));break}else he[Cr](Le[bu](0))}),ye[vt]>0&&(We.sentEvts=ye),re||rn(he,8003,We[Gr],!0)}else Me=0}catch(Le){Kh(p,"Failed to send telemetry using sendBeacon API. Ex:"+Rt(Le)),Me=0}finally{pe(W,Me,{},zs)}}function H(F){return F===2||F===3}function ae(F){return I&&H(F)&&(F=2),F}ee[X0]=function(F,W){C[F]=W},ee.removeHeader=function(F){delete C[F]},ee[Z0]=function(){return Ee()&&c[K0]()},ee[yv]=function(F,W){$t(F)&&(F=0),I&&(F=ae(F),W=2),de(S,F,0)&&ie(L(),0,!1,F,W||0)},ee[tU]=function(){return!a&&d===0&&S[vt]===0},ee[ew]=function(F){I=F},ee.addBatch=function(F){if(F&&F[On]()>0){if(s.isTenantKilled(F[Ci]()))return!1;S[Cr](F)}return!0},ee.teardown=function(){S[vt]>0&&ie(L(),0,!0,2,2),Ye(se,function(F){F&&F.rm&&F.rm()}),se=[]},ee.pause=function(){a=!0},ee[$m]=function(){a=!1,ee[yv](0,4)},ee[nU]=function(F,W,ne){F&&F[On]()>0&&(Gt(W)&&(W=1),I&&(W=ae(W),ne=2),ie([F],0,!1,W,ne||0))};function Ee(){return!a&&d<n}function L(){var F=S;return S=[],F}function de(F,W,ne){var _e=!1;return F&&F[vt]>0&&!a&&g[W]&&w&&(_e=W!==0||Ee()&&(ne>0||c[K0]())),_e}function Se(F){var W={};return F&&Ye(F,function(ne,_e){W[_e]={iKey:ne[Ci](),evts:ne[ec]()}}),W}function ie(F,W,ne,_e,Me){if(!(!F||F[vt]===0)){if(a){rn(F,1,_e);return}_e=ae(_e);try{var We=F,Ne=_e!==0;Or(v,function(){return"HttpManager:_sendBatches"},function(z){z&&(F=F.slice(0));for(var re=[],he=null,ye=ui(),Le=g[_e]||(Ne?g[1]:g[0]),qe=Le&&Le[CS],Ze=$&&(I||H(_e)||qe===3||Le._isSync&&qe===2);de(F,_e,W);){var ot=F.shift();ot&&ot[On]()>0&&(s.isTenantKilled(ot[Ci]())?re[Cr](ot):(he=he||w[bS](W,ne,Ne,Ze,Me,_e),w.appendPayload(he,ot,e)?he.overflow!==null&&(F=[he.overflow][fc](F),he.overflow=null,Xe(he,ye,ui(),Me),ye=ui(),he=null):(Xe(he,ye,ui(),Me),ye=ui(),F=[ot][fc](F),he=null)))}he&&Xe(he,ye,ui(),Me),F[vt]>0&&(S=F[fc](S)),rn(re,8004,_e)},function(){return{batches:Se(We),retryCount:W,isTeardown:ne,isSynchronous:Ne,sendReason:Me,useSendBeacon:H(_e),sendType:_e}},!Ne)}catch(z){Xt(p,2,48,"Unexpected Exception sending batch: "+Rt(z))}}}function ge(F,W){var ne={url:i,hdrs:{},useHdrs:!1};W?(ne[Gl]=mv(ne[Gl],C),ne.useHdrs=is(ne.hdrs)[vt]>0):en(C,function(z,re){nw[z]?kl(ne,nw[z],re,!1):(ne[Gl][z]=re,ne[Q0]=!0)}),kl(ne,Kj,"NO_AUTH",W),kl(ne,z0,Oj,W);var _e=zs;Ye(F.apiKeys,function(z){_e[vt]>0&&(_e+=","),_e+=z}),kl(ne,G0,_e,W),kl(ne,$0,da().toString(),W);var Me=Ut(F);if(qs(Me)&&(ne.url+="&ext.intweb.msfpc="+Me),c[Yj]()&&kl(ne,V0,c[Qj](),W),v[bv]){var We=v[bv]();We>=0&&(ne.url+="&w="+We)}for(var Ne=0;Ne<b[vt];Ne++)ne.url+="&"+b[Ne].name+"="+b[Ne].value;return ne}function He(F,W,ne){F[W]=F[W]||{},F[W][f.identifier]=ne}function Xe(F,W,ne,_e){if(F&&F.payloadBlob&&F.payloadBlob[vt]>0){var Me=!!P,We=g[F.sendType];!H(F[Gr])&&F[zR]&&F.sendReason===2&&(We=g[2]||g[3]||We);var Ne=A;(F.isBeacon||We[CS]===3)&&(Ne=!1);var z=ge(F,Ne);Ne=Ne||z[Q0];var re=ui();Or(v,function(){return"HttpManager:_doPayloadSend"},function(){for(var he=0;he<F.batches[vt];he++)for(var ye=F[Nr][he],Le=ye[ec](),qe=0;qe<Le[vt];qe++){var Ze=Le[qe];if(E){var ot=Ze[sm]=Ze[sm]||{};He(ot,"sendEventStart",re),He(ot,"serializationStart",W),He(ot,"serializationCompleted",ne)}Ze[IS]>0?Ze[IS]++:Ze[IS]=1}rn(F[Nr],1e3+(_e||0),F[Gr],!0);var St={data:F[BR],urlString:z.url,headers:z[Gl],_thePayload:F,_sendReason:_e,timeout:_,disableXhrSync:j,disableFetchKeepAlive:R};Ne&&(um(St[si],im)||(St[si][im]=xR),um(St[si],Ah)||(St[si][Ah]=H0));var Bn=null;We&&(Bn=function(yn){c[Wj]();var zr=function(Qn,Hn){lt(Qn,Hn,F,_e)},sr=F[SS]||F[ES];try{We.sendPOST(yn,zr,sr),k&&k(St,yn,sr,F[zR])}catch(Qn){Kh(p,"Unexpected exception sending payload. Ex:"+Rt(Qn)),pe(zr,0,{})}}),Or(v,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Bn)if(F[Gr]===0&&d++,Me&&!F.isBeacon&&We[CS]!==3){var yn={data:St[Gm],urlString:St[HR],headers:mv({},St[si]),timeout:St[Lae],disableXhrSync:St[LR],disableFetchKeepAlive:St[DR]},zr=!1;Or(v,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{P(yn,function(sr){zr=!0,!y&&!sr[ih]&&(sr[ih]=sr[ih]||St[ih],sr[wS]=sr[wS]||St[wS]),Bn(sr)},F.isSync||F[SS])}catch{zr||Bn(St)}})}else Bn(St)})},function(){return{thePayload:F,serializationStart:W,serializationCompleted:ne,sendReason:_e}},F[ES])}F.sizeExceed&&F.sizeExceed[vt]>0&&rn(F.sizeExceed,8003,F[Gr]),F.failedEvts&&F.failedEvts[vt]>0&&rn(F.failedEvts,8002,F[Gr])}function ct(F,W){E&&Ye(F,function(ne){var _e=ne[sm]=ne[sm]||{};He(_e,"sendEventCompleted",W)})}function lt(F,W,ne,_e){var Me=9e3,We=null,Ne=!1,z=!1;try{var re=!0;if(typeof F!==JI){if(W){c[W0](W[_ae]);var he=W[Iae]||W["kill-duration-seconds"];Ye(s[rU](W[Tae],he),function(Le){Ye(ne[Nr],function(qe){if(qe[Ci]()===Le){We=We||[];var Ze=qe[bu](0);ne.numEvents-=Ze[On](),We[Cr](Ze)}})})}if(F==200||F==204){Me=200;return}(!Kae(F)||ne.numEvents<=0)&&(re=!1),Me=9e3+F%1e3}if(re){Me=100;var ye=ne.retryCnt;ne[Gr]===0&&(ye<r?(Ne=!0,dt(function(){ne[Gr]===0&&d--,ie(ne[Nr],ye+1,ne[SS],I?2:ne[Gr],5)},I,sU(ye))):(z=!0,I&&(Me=8001)))}}finally{Ne||(c[W0](),je(ne,Me,_e,z)),rn(We,8004,ne[Gr])}}function je(F,W,ne,_e){try{_e&&f[oU]();var Me=F[Nr];W===200&&(Me=F.sentEvts||F[Nr],!_e&&!F[ES]&&f._clearBackOff(),Qe(Me)),rn(Me,W,F[Gr],!0)}finally{F[Gr]===0&&(d--,ne!==5&&ee.sendQueuedRequests(F[Gr],ne))}}function Qe(F){if(E){var W=ui();Ye(F,function(ne){ne&&ne[On]()>0&&ct(ne[ec](),W)})}}function dt(F,W,ne){W?F():M.set(F,ne)}function Ut(F){for(var W=0;W<F.batches[vt];W++){var ne=F[Nr][W].Msfpc();if(ne)return encodeURIComponent(ne)}return zs}function Ft(F){var W=N;try{for(var ne=0;ne<W[vt];ne++)try{W[ne](F)}catch(Me){Xt(p,1,519,"Response handler failed: "+Me)}if(F){var _e=JSON.parse(F);qs(_e.webResult)&&qs(_e.webResult[vv])&&T.set("MSFPC",_e.webResult[vv],365*86400)}}catch{}}function rn(F,W,ne,_e){if(F&&F[vt]>0&&o){var Me=o[vn(W)];if(Me){var We=ne!==0;Or(v,function(){return"HttpManager:_sendBatchesNotification"},function(){dt(function(){try{Me.call(o,F,W,We,ne)}catch(Ne){Xt(p,1,74,"send request notification failed: "+Ne)}},_e||We,0)},function(){return{batches:Se(F),reason:W,isSync:We,sendSync:_e,sendType:ne}},!We)}}}function vn(F){var W=nce[F];return qs(W)||(W=wae,F>=9e3&&F<=9999?W=Eae:F>=8e3&&F<=8999?W=B0:F>=1e3&&F<=1999&&(W=Sae)),W}})}return t.__ieDyn=1,t}(),sce=.25,WR=500,ace=20,lU=6,uU=2,cce=4,YR=2,lce=1,rw=1e4,Na="eventsDiscarded",QR="",_n=void 0,uce=bd({eventsLimitInMem:{isVal:Yh,v:rw},immediateEventLimit:{isVal:Yh,v:500},autoFlushEventsLimit:{isVal:Yh,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:dce,v:_n},overrideInstrumentationKey:_n,overrideEndpointUrl:_n,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:_n,clearTimeoutOverride:_n,payloadPreprocessor:_n,payloadListener:_n,disableEventTimings:_n,valueSanitizer:_n,stringifyObjects:_n,enableCompoundKey:_n,disableOptimizeObj:!1,fetchCredentials:_n,transports:_n,unloadTransports:_n,useSendBeacon:_n,disableFetchKeepAlive:_n,avoidOptions:!1,xhrTimeout:_n,disableXhrSync:_n,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:la,v:lU},maxUnloadEventRetryAttempts:{isVal:la,v:uU},addNoResponse:_n,excludeCsMetaData:_n});function dce(t){return t&&t.sendPOST}var hce=function(t){sp(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.3";var r,o=!1,i=[],s,a=!1,c=0,u,d=0,f,p={},g=om,v,y,b,C,S,w,E,T,I,A,_,j,R,$,U,se,P,k,N,x,M,te;return dn(e,n,function(Y,Q){ae(),Y._getDbgPlgTargets=function(){return[S,r]},Y[Jh]=function(z,re,he){Or(re,function(){return"PostChannel:initialize"},function(){Q[Jh](z,re,he),N=re.getNotifyMgr();try{U=up(Ed(Y[am]),re.evtNamespace&&re.evtNamespace()),Y._addHook(fr(z,function(ye){var Le=ye.cfg,qe=Dc(null,Le,re);r=qe.getExtCfg(Y[am],uce),se=Cv(r[Jj],r[Xj]),_=!r[Dae]&&sse(),P=r[jae],oe(re),f=r[VR],u=r.immediateEventLimit,E=r[$R],R=r.maxEventRetryAttempts,$=r.maxUnloadEventRetryAttempts,k=r[Uae],Vu(Le.endpointUrl)?Y.pause():a&&Y[$m](),Ne(),M=r[Fae],te=!!r[Bae],x&&ee();var Ze=Le.disablePageUnloadEvents||[];x=qie(Pe,Ze,U),x=Pj(Pe,Ze,U)||x,x=Nj(ze,Le.disablePageShowEvents,U)||x})),S[Jh](z,Y.core,Y)}catch(ye){throw Y.setInitialized(!1),ye}},function(){return{theConfig:z,core:re,extensions:he}})},Y.processTelemetry=function(z,re){j0(z,Y[am]),re=re||Y._getTelCtx(re);var he=z;!te&&!o&&(M&&(he[Ci]=M),J(he,!0),j?de(2,2):H()),Y.processNext(he,re)},Y.getOfflineSupport=function(){try{var z=S&&S[eU]();if(S)return{getUrl:function(){return z?z.url:null},serialize:fe,batch:Ce,shouldProcess:function(re){return!te},createPayload:function(re){return null},createOneDSPayload:function(re){if(S[J0])return S[J0](re,_)}}}catch{}return null},Y._doTeardown=function(z,re){de(2,2),o=!0,S.teardown(),ee(),ae()};function ee(){Kie(null,U),Wie(null,U),Yie(null,U)}function oe(z){var re=z[bv];z[bv]=function(){var he=0;return P&&(he=he|2),he|re.call(z)}}function Ce(z){var re=QR;return z&&z[vt]&&Ye(z,function(he){re&&(re+=`
`),re+=he}),re}function fe(z){var re=QR;try{nt(z),re=S[Zj](z)}catch{}return re}function Pe(z){var re=z||ya().event;re.type!=="beforeunload"&&(j=!0,S[ew](j)),de(2,2)}function ze(z){j=!1,S[ew](j)}function nt(z){z.ext&&z.ext[NR]&&delete z.ext[NR],z.ext&&z.ext[vS]&&z.ext[vS].id&&delete z.ext[vS].id,_&&(z.ext=$l(z.ext),z[TS]&&(z[TS]=$l(z[TS])),z[Gm]&&(z[Gm]=$l(z[Gm])))}function J(z,re){if(z[cm]||(z[cm]=0),z[Ra]||(z[Ra]=1),nt(z),z[Al]){if(b||a)z[Ra]=3,z[Al]=!1;else if(S){_&&(z=$l(z)),S[nU](Rf.create(z[Ci],[z]),z[Al]===!0?1:z[Al],3);return}}var he=z[Ra],ye=d,Le=f;he===4&&(ye=c,Le=u);var qe=!1;if(ye<Le)qe=!He(z,re);else{var Ze=1,ot=ace;he===4&&(Ze=4,ot=1),qe=!0,Xe(z[Ci],z[Ra],Ze,ot)&&(qe=!He(z,re))}qe&&vn(Na,[z],Aa.QueueFull)}Y.setEventQueueLimits=function(z,re){r[VR]=f=Yh(z)?z:rw,r[$R]=E=Yh(re)?re:0,Ne();var he=d>z;if(!he&&T>0)for(var ye=1;!he&&ye<=3;ye++){var Le=w[ye];Le&&Le[Nr]&&Ye(Le[Nr],function(qe){qe&&qe[On]()>=T&&(he=!0)})}ge(!0,he)},Y.pause=function(){L(),a=!0,S&&S.pause()},Y[$m]=function(){a=!1,S&&S[$m](),H()},Y._loadTransmitProfiles=function(z){dt(),en(z,function(re,he){var ye=he[vt];if(ye>=2){var Le=ye>2?he[2]:0;if(he[Vy](0,ye-2),he[1]<0&&(he[0]=-1),he[1]>0&&he[0]>0){var qe=he[0]/he[1];he[0]=Math.ceil(qe)*he[1]}Le>=0&&he[1]>=0&&Le>he[1]&&(Le=he[1]),he[Cr](Le),p[re]=he}})},Y.flush=function(z,re,he){z===void 0&&(z=!0);var ye;if(!a)if(he=he||1,z)re||(ye=Lc(function(qe){re=qe})),s==null?(L(),lt(1,0,he),s=Ee(function(){s=null,je(re,he)},0)):i[Cr](re);else{var Le=L();pe(1,1,he),re&&re(),Le&&H()}return ye},Y.setMsaAuthTicket=function(z){S[X0](q0,z)},Y.setAuthPluginHeader=function(z){S[X0](RR,z)},Y.removeAuthPluginHeader=function(){S.removeHeader(RR)},Y.hasEvents=X,Y._setTransmitProfile=function(z){g!==z&&p[z]!==void 0&&(L(),g=z,H())},$3(Y,function(){return S},["addResponseHandler"]);function pe(z,re,he){var ye=lt(z,re,he);return S[yv](re,he),ye}function X(){return d>0}function H(){if(I>=0&&lt(I,0,A)&&S[yv](0,A),c>0&&!y&&!a){var z=p[g][2];z>=0&&(y=Ee(function(){y=null,pe(4,0,1),H()},z))}var re=p[g][1];!v&&!s&&re>=0&&!a&&(X()?v=Ee(function(){v=null,pe(C===0?3:1,0,1),C++,C%=2,H()},re):C=0)}Y[oU]=function(){b<cce&&(b++,L(),H())},Y._clearBackOff=function(){b&&(b=0,L(),H())};function ae(){r=null,o=!1,i=[],s=null,a=!1,c=0,u=500,d=0,f=rw,p={},g=om,v=null,y=null,b=0,C=0,w={},E=0,x=!1,T=0,I=-1,A=null,_=!0,j=!1,R=lU,$=uU,U=null,M=null,te=!1,se=Cv(),S=new ice(WR,YR,lce,{requeue:Ft,send:W,sent:ne,drop:_e,rspFail:Me,oth:We}),Ut(),Se(),Ne()}function Ee(z,re){re===0&&b&&(re=1);var he=1e3;return b&&(he=sU(b-1)),se.set(z,re*he)}function L(){return v!==null?(v.cancel(),v=null,C=0,!0):!1}function de(z,re){L(),s&&(s.cancel(),s=null),a||pe(1,z,re)}function Se(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function ie(z,re,he){var ye=w[re];ye||(re=1,ye=w[re]);var Le=ye.iKeyMap[z];return!Le&&he&&(Le=Rf.create(z),ye.batches[Cr](Le),ye.iKeyMap[z]=Le),Le}function ge(z,re){S[Z0]()&&!b&&(E>0&&d>E&&(re=!0),re&&s==null&&Y.flush(z,function(){},20))}function He(z,re){_&&(z=$l(z));var he=z[Ra],ye=ie(z[Ci],he,!0);return ye.addEvent(z)?(he!==4?(d++,re&&z[cm]===0&&ge(!z.sync,T>0&&ye[On]()>=T)):c++,!0):!1}function Xe(z,re,he,ye){for(;he<=re;){var Le=ie(z,re,!0);if(Le&&Le[On]()>0){var qe=Le[bu](0,ye),Ze=qe[On]();if(Ze>0)return he===4?c-=Ze:d-=Ze,F(Na,[qe],Aa.QueueFull),!0}he++}return ct(),!1}function ct(){for(var z=0,re=0,he=function(Le){var qe=w[Le];qe&&qe[Nr]&&Ye(qe[Nr],function(Ze){Le===4?z+=Ze[On]():re+=Ze[On]()})},ye=1;ye<=4;ye++)he(ye);d=re,c=z}function lt(z,re,he){var ye=!1,Le=re===0;return!Le||S[Z0]()?Or(Y.core,function(){return"PostChannel._queueBatches"},function(){for(var qe=[],Ze=4;Ze>=z;){var ot=w[Ze];ot&&ot.batches&&ot.batches[vt]>0&&(Ye(ot[Nr],function(St){S.addBatch(St)?ye=ye||St&&St[On]()>0:qe=qe[fc](St[ec]()),Ze===4?c-=St[On]():d-=St[On]()}),ot[Nr]=[],ot.iKeyMap={}),Ze--}qe[vt]>0&&vn(Na,qe,Aa.KillSwitch),ye&&I>=z&&(I=-1,A=0)},function(){return{latency:z,sendType:re,sendReason:he}},!Le):(I=I>=0?Math.min(I,z):z,A=Math.max(A,he)),ye}function je(z,re){pe(1,0,re),ct(),Qe(function(){z&&z(),i[vt]>0?s=Ee(function(){s=null,je(i.shift(),re)},0):(s=null,H())})}function Qe(z){S[tU]()?z():s=Ee(function(){s=null,Qe(z)},sce)}function dt(){L(),Ut(),g=om,H()}function Ut(){p={},p[om]=[2,1,0],p[bae]=[6,3,0],p[Cae]=[18,9,0]}function Ft(z,re){var he=[],ye=R;j&&(ye=$),Ye(z,function(Le){Le&&Le[On]()>0&&Ye(Le[ec](),function(qe){qe&&(qe[Al]&&(qe[Ra]=4,qe[Al]=!1),qe[cm]<ye?(j0(qe,Y[am]),J(qe,!1)):he[Cr](qe))})}),he[vt]>0&&vn(Na,he,Aa.NonRetryableStatus),j&&de(2,2)}function rn(z,re){var he=N||{},ye=he[z];if(ye)try{ye.apply(he,re)}catch(Le){Xt(Y.diagLog(),1,74,z+" notification failed: "+Le)}}function vn(z,re){for(var he=[],ye=2;ye<arguments.length;ye++)he[ye-2]=arguments[ye];re&&re[vt]>0&&rn(z,[re][fc](he))}function F(z,re){for(var he=[],ye=2;ye<arguments.length;ye++)he[ye-2]=arguments[ye];re&&re[vt]>0&&Ye(re,function(Le){Le&&Le[On]()>0&&rn(z,[Le.events()][fc](he))})}function W(z,re,he){z&&z[vt]>0&&rn("eventsSendRequest",[re>=1e3&&re<=1999?re-1e3:0,he!==!0])}function ne(z,re){F("eventsSent",z,re),H()}function _e(z,re){F(Na,z,re>=8e3&&re<=8999?re-8e3:Aa.Unknown)}function Me(z){F(Na,z,Aa.NonRetryableStatus),H()}function We(z,re){F(Na,z,Aa.Unknown),H()}function Ne(){k?T=0:T=Math.max(WR*(YR+1),f/6)}}),n}return e.__ieDyn=1,e}(__),fce=bd({cookieCfg:{ref:!0,v:{}},extensions:{rdOnly:!0,ref:!0,v:[]},channels:{rdOnly:!0,ref:!0,v:[]},extensionConfig:{ref:!0,v:{}}}),dU=function(t){sp(e,t);function e(){var n=t.call(this)||this,r,o;return dn(e,n,function(i,s){i.initialize=function(a,c){var u=n;Or(n,function(){return"ApplicationInsights:initialize"},function(){a=io(a,fce,u.logger,!1).cfg,r=new hce,o=new yae;var d=[o];c&&(d=d.concat(c)),a||go("You must provide a config object!");var f=a.channels;if(f&&f.length>0){for(var p=!1,g=0;g<f[0].length;g++)if(f[0][g].identifier===r.identifier){p=!0;break}p||Js(f[0],r)}else a.channels.push([r]);var v=a.extensionConfig;v[r.identifier]=v[r.identifier]||a&&a.channelConfiguration||{},v[o.identifier]=v[o.identifier]||a&&a.propertyConfiguration||{};try{s.initialize(a,d),u.isInitialized()&&y3(a,{channelConfiguration:{g:function(){return a.extensionConfig[r.identifier]}},propertyConfiguration:{g:function(){return a.extensionConfig[o.identifier]}}})}catch(y){Xt(u.logger,1,514,"Failed to initialize SDK."+Rt(y))}},function(){return{config:a,extensions:c}})},i.getPropertyManager=function(){return o},i.getPostChannel=function(){return r}}),n}return e.__ieDyn=1,e}(lse);/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const hU="msal.request";function qm(t){var e;try{return new Bg(((e=t.cache)==null?void 0:e.temporaryCacheLocation)||Cn.SessionStorage)}catch{return new Fg}}function ow(t){return`${hU}.${t}`}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const pce="faab4ead691e451eb230afc98a28e0f2-698cf73d-7930-426b-87d8-d36936f6912f-7401",mce="https://eu-mobile.events.data.microsoft.com/OneCollector/1.0/",JR=`${hU}.mats-telemetry-profile-id`;class gce{constructor(e,n,r,o){this.logger=e,this.appName=r,this.appVersion=o,this.eventsToEmit=new Set(n),this.sessionId=Eo();const i={instrumentationKey:pce,endpointUrl:mce,extensions:[],propertyConfiguration:{gpcDataSharingOptIn:!1},disableCookiesUsage:!0};this.appInsightsMATS=new dU,this.appInsightsMATS.initialize(i,[]),this.logger.verbose("MATSTelemetryReporter: Initialized");try{const s=new Bg(Cn.LocalStorage),a=s.getItem(JR);if(a!=null&&a.length)this.profileTelemetryId=a;else{const c=Eo();this.profileTelemetryId=c,s.setItem(JR,c)}}catch{e.warning("MATSTelemetryReporter: local storage is not available"),this.profileTelemetryId=""}}sendCustomEvent(e){if(!this.eventsToEmit.has(e.name)){this.logger.verbose(`MATSTelemetryReporter: Skipping telemetry for ${e.name}`,e.correlationId);return}const n={...e,appName:this.appName,appVersion:this.appVersion,libraryName:"MSAL-JS",profileTelemetryId:this.profileTelemetryId,sessionId:this.sessionId};delete n.context,delete n.errorStack;const r={name:"actionmsaljs".concat(e.name.toLowerCase()||""),data:n};this.logger.verbose(`MATSTelemetryReporter: Sending ${r.name} for tracking`),this.appInsightsMATS.track(r),e.name===yt.AcquireTokenPreRedirect&&this.appInsightsMATS.flush()}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const vce="d634483c08244c1ca09af2b2d952c92e-ab2bba03-2ba3-49d8-a82c-ef6da750d8ab-7725";function yce(t){return Math.random()<=t}class bce{constructor(e,n,r){this.synthetic=!1,this.redactionRatio=.1,this.logger=e,this.eventsToEmit=new Set(n);const o={instrumentationKey:vce,extensions:[],propertyConfiguration:{gpcDataSharingOptIn:!1},disableCookiesUsage:!0};this.appInsights=new dU,this.appInsights.initialize(o,[]),this.synthetic=r||!1,this.logger.verbose("PerformanceTelemetryReporter: Initialized")}sendCustomEvent(e){if(!this.eventsToEmit.has(e.name)){this.logger.verbose(`PerformanceTelemetryReporter: Skipping telemetry for ${e.name}`,e.correlationId);return}let n;!e.success||yce(this.redactionRatio)?(n={...e,appName:void 0,synthetic:this.synthetic},this.logger.verbose(`PerformanceTelemetryReporter: Sending ${n.name} for tracking`)):(n={name:e.name,eventId:e.eventId,correlationId:e.correlationId,requestId:e.requestId,success:e.success,status:e.status,fromCache:e.fromCache,startPageVisibility:e.startPageVisibility,endPageVisibility:e.endPageVisibility,authority:e.authority,durationMs:e.durationMs,startTimeMs:e.startTimeMs,clientId:e.clientId,libraryName:e.libraryName,libraryVersion:e.libraryVersion,accountType:e.accountType,synthetic:this.synthetic,isBroker:e.isBroker,isBackground:e.isBackground},this.logger.verbose(`PerformanceTelemetryReporter: Sending redacted ${n.name} for tracking`));const r={name:e.name,data:n};this.appInsights.track(r),e.name===yt.AcquireTokenPreRedirect&&this.appInsights.flush()}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const dm=new Set([yt.AcquireTokenSilent,yt.AcquireTokenByCode,yt.AcquireTokenPopup,yt.AcquireTokenRedirect,yt.AcquireTokenPreRedirect,yt.PairwiseBrokerApplicationInitializeBrokering,yt.SsoSilent,yt.EmbeddedClientApplicationSendSSOSilentRequest,yt.EmbeddedClientApplicationSendPopupRequest,yt.EmbeddedClientApplicationSendRedirectRequest,yt.EmbeddedClientApplicationHandleRedirectRequest,yt.EmbeddedClientApplicationSendSilentRefreshRequest]);class Cce{constructor(e,n){var o;this.logger=e;const r=((o=n==null?void 0:n.eventsToEmit)==null?void 0:o.filter(i=>dm==null?void 0:dm.has(i)))||[...dm];this.matsTelemetryReporter=n!=null&&n.enableMATS?new gce(e,r,n==null?void 0:n.appName,n==null?void 0:n.appVersion):null,this.perfTelemetryReporter=new bce(e,r,n==null?void 0:n.synthetic)}sendCustomEvent(e){var n;this.perfTelemetryReporter.sendCustomEvent(e),(n=this.matsTelemetryReporter)==null||n.sendCustomEvent(e)}getTelemetryCallback(){this.logger.trace("TelemetryReporter: Attaching callback to send custom metrics.");const e=n=>{n.forEach(r=>{r.name===yt.AcquireTokenByBroker&&(r.name=r.brokerEventName||r.name,r.isBroker=!0,delete r.brokerEventName,this.logger.verbosePii(`TelemetryReporter: Updated broker event ${JSON.stringify(r)}`,r.correlationId)),this.sendCustomEvent(r)})};return this.logger.verbose("TelemetryReporter: Returning callback as telemetry emitted."),e}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const Sce=[bf.AzurePublic,bf.AzurePpe];function Ece(t){return t.auth.authority?Sce.some(e=>{var n;return((n=t.auth.authority)==null?void 0:n.indexOf(e.toString()))===0}):!0}class dp extends Rne{constructor(e,n){var i;let r;const o=typeof window<"u";if(!(n!=null&&n.disabled)&&Ece(e)&&o?(r=((i=e.telemetry)==null?void 0:i.client)||new Nne(e,new Set(Mne),new Map(One)),super({...e,telemetry:{...e.telemetry,client:r}})):(super(e),r=new C5),this.performanceClient=r,o){const s=new Cce(this.getLogger(),n);this.addPerformanceCallback(s.getTelemetryCallback())}}static async createPublicClientApplication(e,n,r){const o=new dp(e,n);return await o.initialize({correlationId:r}),o}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const kt={BROKER_READY:"BrokerReady",HANDSHAKE_REQUEST:"BrokerHandshakeRequest",HANDSHAKE_RESPONSE:"BrokerHandshakeResponse",AUTH_REQUEST:"BrokerAuthRequest",REDIRECT_RESPONSE:"BrokerRedirectResponse",HANDLE_REDIRECT_REQUEST:"BrokerHandleRedirectRequest",AUTH_RESULT:"BrokerAuthResult",EMBEDDED_LOGOUT_REQUEST:"EmbeddedLogoutRequest",EMBEDDED_LOGOUT_RESPONSE:"EmbeddedLogoutResponse"},Yi={BROKER_AUTH_ERROR_NAME:"BrokerAuthError",INTERACTION_REQ_ERROR_NAME:"InteractionRequiredAuthError",SERVER_ERROR_NAME:"ServerError",CLIENT_AUTH_ERR_NAME:"ClientAuthError",CLIENT_CONFIG_ERROR_NAME:"ClientConfigurationError",BROWSER_AUTH_ERROR_NAME:"BrowserAuthError",BROWSER_CONFIG_ERROR_NAME:"BrowserConfigurationError",AUTH_ERROR_NAME:"AuthError"},wce=2e3,Tce=6e3,Ice=3e5;/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Jo{constructor(e){this.messageType=e}static validateMessage(e){if(e.data&&e.data.messageType)switch(e.data.messageType){case kt.HANDSHAKE_REQUEST:case kt.HANDSHAKE_RESPONSE:case kt.HANDLE_REDIRECT_REQUEST:case kt.AUTH_REQUEST:case kt.AUTH_RESULT:case kt.REDIRECT_RESPONSE:case kt.EMBEDDED_LOGOUT_REQUEST:return e;default:return null}else return null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class $y extends Jo{constructor(e,n,r=!1,o){super(kt.HANDSHAKE_REQUEST),this.embeddedClientId=e,this.version=n,this.allowTelemetry=r,this.nonce=o}static validate(e){return e.data&&e.data.messageType===kt.HANDSHAKE_REQUEST&&e.data.embeddedClientId&&e.data.version?new $y(e.data.embeddedClientId,e.data.version,e.data.allowTelemetry,e.data.nonce):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Gy extends Jo{constructor(e,n,r){super(kt.HANDSHAKE_RESPONSE),this.version=e,this.brokerOrigin=n,this.nonce=r}static validate(e,n){if(!n.includes(e.origin))return null;const r=Jo.validateMessage(e);return r&&r.data.messageType===kt.HANDSHAKE_RESPONSE&&r.data.version?new Gy(r.data.version,r.origin,r.data.nonce):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class qy extends Jo{get embeddedAppOrigin(){return this._embeddedAppOrigin}constructor(e,n,r,o){super(kt.AUTH_REQUEST),this.embeddedClientId=e,this._embeddedAppOrigin=o,this.interactionType=n,this.request=r}static validate(e,n){return e.data&&e.data.messageType===kt.AUTH_REQUEST&&e.data.embeddedClientId&&e.data.interactionType&&e.data.request?new qy(e.data.embeddedClientId,e.data.interactionType,e.data.request,n):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Ky extends Jo{constructor(){super(kt.REDIRECT_RESPONSE)}static validate(e){return e.data&&e.data.messageType===kt.REDIRECT_RESPONSE?new Ky:null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const zn={noEmbeddedAppError:{code:"no_embedded_app",desc:"The embedded application object was not created. Please ensure you have configured your application correctly for an embedded application: https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/broker-v2/lib/msal-browser/docs/broker.md#brokered-application-configuration"},brokerResponseInvalidError:{code:"broker_response_invalid",desc:"The broker response did not have the expected values."},brokeredPopupRequestRedirecting:{code:"broker_popup_will_redirect",desc:"The request for a brokered popup requires a redirect by the broker. If your app does not perform the redirect, please check the broker's logs."},brokerTimeoutError:{code:"broker_timeout",desc:"Message broker timed out."},brokerHandshakeTimeoutError:{code:"broker_handshake_timeout",desc:"Broker handshake response timed out."},brokerHandshakeFailed:{code:"broker_handshake_failed",desc:"Broker handshake failed. Please see logs for details."},noTrustedBrokersProvided:{code:"no_trusted_brokers_provided",desc:"No trusted brokers provided."},brokeringDisabledError:{code:"brokering_disabled",desc:"Brokering is not enabled for the client application. Please check logs to see if handshake was performed."},shrGenerationError:{code:"shr_generation_error",desc:"Error generating SHRs. Kid is missing in the request."}};class cn extends wt{constructor(e,n){super(e,n),Object.setPrototypeOf(this,cn.prototype),this.name=Yi.BROKER_AUTH_ERROR_NAME}static createNoEmbeddedAppError(){return new cn(zn.noEmbeddedAppError.code,zn.noEmbeddedAppError.desc)}static createBrokerResponseInvalidError(){return new cn(zn.brokerResponseInvalidError.code,`${zn.brokerResponseInvalidError.desc}`)}static createBrokerPopupRequestRedirectingError(){return new cn(zn.brokeredPopupRequestRedirecting.code,zn.brokeredPopupRequestRedirecting.desc)}static createNoTrustedBrokersProvidedError(){return new cn(zn.noTrustedBrokersProvided.code,zn.noTrustedBrokersProvided.desc)}static createBrokeringDisabledError(){return new cn(zn.brokeringDisabledError.code,`${zn.brokeringDisabledError.desc}`)}static createMessageBrokerTimeoutError(){return new cn(zn.brokerTimeoutError.code,zn.brokerTimeoutError.desc)}static createMessageBrokerHandshakeTimeoutError(){return new cn(zn.brokerHandshakeTimeoutError.code,zn.brokerHandshakeTimeoutError.desc)}static createBrokerHandshakeFailedError(){return new cn(zn.brokerHandshakeFailed.code,zn.brokerHandshakeFailed.desc)}static createShrGenerationError(){return new cn(zn.shrGenerationError.code,zn.shrGenerationError.desc)}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class yo extends Jo{constructor(e,n,r){if(super(kt.AUTH_RESULT),this.interactionType=e,this.result=n,r){const{setCorrelationId:o,...i}=r;this.errorPayload=i}}static validate(e){return e.data&&e.data.messageType===kt.AUTH_RESULT&&e.data.interactionType&&(e.data.result||e.data.errorPayload)?new yo(e.data.interactionType,e.data.result,e.data.errorPayload):null}static detectError(e){let n;switch(e.name){case Yi.INTERACTION_REQ_ERROR_NAME:n=new Ur(e.errorCode,e.errorMessage,e.subError);break;case Yi.SERVER_ERROR_NAME:n=new Li(e.errorCode,e.errorMessage,e.subError);break;case Yi.CLIENT_AUTH_ERR_NAME:n=new gd(e.errorCode,e.errorMessage);break;case Yi.CLIENT_CONFIG_ERROR_NAME:n=new Ey(e.errorCode);break;case Yi.BROWSER_AUTH_ERROR_NAME:n=new vd(e.errorCode);break;case Yi.BROWSER_CONFIG_ERROR_NAME:n=new ky(e.errorCode,e.errorMessage);break;case Yi.BROKER_AUTH_ERROR_NAME:n=new cn(e.errorCode,e.errorMessage);break;case Yi.AUTH_ERROR_NAME:n=new wt(e.errorCode,e.errorMessage,e.subError);break;default:n=new wt(yy,JSON.stringify(e));break}return n.setCorrelationId(e.correlationId),n}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Wy extends Jo{constructor(e,n){super(kt.HANDLE_REDIRECT_REQUEST),this.embeddedClientId=e,this.version=n}static validate(e){return e.data&&e.data.messageType===kt.HANDLE_REDIRECT_REQUEST&&e.data.embeddedClientId&&e.data.version?new Wy(e.data.embeddedClientId,e.data.version):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */function fU(t){return{...{preferredInteractionType:null,brokerRedirectParams:{},actAsBroker:!1,allowBrokering:!1,trustedBrokerDomains:[],brokerHandshakeTimeout:(t==null?void 0:t.brokerHandshakeTimeout)||wce,brokerMessageTimeout:(t==null?void 0:t.brokerMessageTimeout)||Tce,brokerInteractionTimeout:(t==null?void 0:t.brokerInteractionTimeout)||Ice},...t}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Yy extends Jo{constructor(e,n){super(kt.EMBEDDED_LOGOUT_REQUEST),this.version=e,this.correlationId=n}static validate(e){const n=Jo.validateMessage(e);return n&&n.data&&n.data.version?new Yy(n.data.version,n.data.correlationId):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */function _ce(t,e){const n={userState:e,brokerState:{requestOrigin:t.embeddedAppOrigin,requestClientId:t.embeddedClientId}},r=JSON.stringify(n),o=new TextEncoder().encode(r);return window.btoa(Array.from(o,i=>String.fromCodePoint(i)).join(""))}function Ace(t){if(!t)return null;try{const e=window.atob(t),n=new Uint8Array(e.length);for(let i=0;i<n.length;i++)n[i]=e.charCodeAt(i);const r=new TextDecoder().decode(n),o=JSON.parse(r);return o.hasOwnProperty("brokerState")?o:null}catch{return null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const kce="@azure/msal-browser-1p",Cu="3.26.0";/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */function pU(t){const e=t.split("-",1)[0].split(".",3);return{major:parseInt(e[0]),minor:parseInt(e[1]),patch:parseInt(e[2])}}function xl(t){t.port1.close(),t.port2.close()}function mU(t,e,n,r=20){if(t.length===0||n>r)return[0,n-1];let o=n,i=t.length;for(let s=0;s<t.length;s++){t[s].postMessage(e,"*");const[a,c]=mU(t[s],e,n+1,r);i+=a,c>o&&(o=c)}return[i,o]}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class xce extends dp{constructor(e,n,r){var o;super(e),this.currentBrokerRedirectResponse=void 0,this.hybridAuthPromise=void 0,this.pwbBrokerAppConfiguration=fU(n),this.redirectResponseMap=new Map,this.embeddedAppConfigMap=new Map,this.telemetryAllowedEmbeddedClients=new Set,this.logger=new Qo(((o=e.system)==null?void 0:o.loggerOptions)||{},kce,Cu),this.eventHandler=r,this.messageListener=this.handleBrokerMessage.bind(this)}getRedirectCorrelationId(){const e=`msal.${this.getConfiguration().auth.clientId}`,n=qm(this.getConfiguration()).getItem(`${e}.request.native`);try{if(n){const r=JSON.parse(n);return r&&typeof r=="object"?r.correlationId:null}}catch{this.logger.error("BrokerClientApplication.getRedirectCorrelationId: Unable to parse native request")}return qm(this.getConfiguration()).getItem(`${e}.request.correlationId`)||""}async handleRedirectPromise(e){const n=this.getRedirectCorrelationId(),r=this.performanceClient.startMeasurement(yt.AcquireTokenByBroker,n);r.add({brokerEventName:yt.AcquireTokenRedirect});try{const o=super.handleRedirectPromise(e);this.currentBrokerRedirectResponse=o;const i=await this.currentBrokerRedirectResponse;if(this.currentBrokerRedirectResponse=void 0,i){const s=Ace(i.state);if(this.setActiveAccount(i.account),s){const a={...i,state:s.userState};this.redirectResponseMap.set(s.brokerState.requestOrigin,a),r.add({embeddedClientId:s.brokerState.requestClientId,embeddedRedirectUri:s.brokerState.requestOrigin}),this.endBrokerPerformanceEvent(s.brokerState.requestClientId,r)}else return r.end({success:!0}),i}else r.discard();return null}catch(o){throw o instanceof wt&&o.setCorrelationId(n),r.end({success:!1},o),o}}async listenForBrokerMessage(e,n){return this.logger.verbose("listening for child broker messages."),window.addEventListener("message",this.messageListener),this.broadcastBrokerReadyMessage(window.frames,e,n),e&&e.codeRequest&&(this.hybridAuthPromise=this.acquireTokenByCode(e.codeRequest)),this.hybridAuthPromise}broadcastBrokerReadyMessage(e,n,r){this.logger.trace("Broadcasting broker ready message to child frames.");const o={messageType:kt.BROKER_READY};window.postMessage(o,"*");const[i,s]=mU(e,o,1,n==null?void 0:n.maxChildFrameDepth);r==null||r.add({maxFrameDepthReached:s,framesNotified:i,maxFrameDepthConfigured:n==null?void 0:n.maxChildFrameDepth}),this.logger.trace(`Broadcasted broker ready message to ${i} child frames with a max depth of ${s}`)}stopListeningForBrokerMessage(){this.logger.verbose("stop listening for child broker messages."),window.removeEventListener("message",this.messageListener),this.embeddedAppConfigMap.forEach(([e,n])=>{this.logger.verbose(`closing message port for ${e}`),n.close()}),this.embeddedAppConfigMap.clear()}async handleBrokerMessage(e){var r,o;const n=Jo.validateMessage(e);if(!(!n||!n.data.messageType))switch(this.logger.verbose(`Broker received message with type: ${n.data.messageType}`),n.data.messageType){case kt.HANDSHAKE_REQUEST:return this.handleBrokerHandshake(n);case kt.HANDLE_REDIRECT_REQUEST:const i=Wy.validate(n);return i?this.handleBrokerRedirectResponse(i,n):void 0;case kt.AUTH_REQUEST:const s=qy.validate(n,((r=this.embeddedAppConfigMap.get(n.data.embeddedClientId))==null?void 0:r[0])||n.origin);if(!s)return;s.request.correlationId||(s.request.correlationId=Eo());const a=this.performanceClient.startMeasurement(yt.AcquireTokenByBroker,s.request.correlationId),c=(o=n.ports)==null?void 0:o[0];try{await this.handleBrokerAuthRequest(s,c),this.endBrokerPerformanceEvent(s.embeddedClientId,a);return}catch(u){throw this.endBrokerPerformanceEvent(s.embeddedClientId,a,u),u}default:return}}isDescendantFrame(e){const n=[];for(n.push(e.sourceFrame);n.length>0;){const r=n.pop();if(r)for(let o=0;o<r.frames.length;o++){const i=r.frames[o];if(i===e.targetFrame)return!0;i!==r&&n.push(i)}}return!1}async handleBrokerHandshake(e){var s,a;if(!(e.source&&e.source.window&&e.source.window===e.source)){this.logger.warning("Broker handshake request validation failed. Message origin is not an iframe");return}const n=e.source;window!==n&&!this.isDescendantFrame({sourceFrame:window,targetFrame:n})&&this.logger.warning("Broker handshake request validation failed. Message origin is not a descendant iframe");const r=$y.validate(e);if(!r){this.logger.warning("Broker handshake request validation failed. Message may not have come from MSAL.js.");return}const o=Eo(),i=this.performanceClient.startMeasurement(yt.BrokerClientApplicationHandleBrokerHandshake,o);try{if(i.add({embeddedClientId:r.embeddedClientId}),r.allowTelemetry&&this.telemetryAllowedEmbeddedClients.add(r.embeddedClientId),this.logger.verbose(`${r.messageType} validated for AppId: ${r.embeddedClientId}`),this.hybridAuthPromise)try{await this.hybridAuthPromise}catch(f){this.logger.error(`Broker could not obtain tokens using authorization code initializer: ${f}`)}const c=new Gy(Cu,"",e.data.nonce);this.logger.verbose(`Sending handshake response to ${e.origin}`);const u=(s=e.ports)==null?void 0:s[0];u&&(u.onmessage=this.messageListener,this.embeddedAppConfigMap.set(e.data.embeddedClientId,[e.origin,u]));const d=pU(e.data.version);u&&d.major===3&&d.minor>=15&&d.minor<=19?u==null||u.postMessage(c):(a=e.source)==null||a.postMessage(c,e.origin)}catch(c){throw this.endBrokerPerformanceEvent(r.embeddedClientId,i,c),c}}async handleBrokerRedirectResponse(e,n){var r;if(e){const o=this.embeddedAppConfigMap.get(e.embeddedClientId);let i,s;o?[s,i]=o:(s=n.origin,i=(r=n.ports)==null?void 0:r[0]),this.currentBrokerRedirectResponse&&await this.currentBrokerRedirectResponse;const a=this.redirectResponseMap.get(s),c=new yo(we.Redirect,a||null);this.logger.verbose("Sending auth response"),i==null||i.postMessage(c);const u=`msal.${this.getConfiguration().auth.clientId}`;qm(this.getConfiguration()).removeItem(`${u}.request.native`);return}}async handleBrokerAuthRequest(e,n){this.currentBrokerRedirectResponse&&await this.currentBrokerRedirectResponse,e.request.correlationId||(e.request.correlationId=Eo());const r=e.request.correlationId,o=e.request.account||this.getActiveAccount();let i;switch(e.interactionType){case we.Silent:if(o){this.performanceClient.addFields({brokerEventName:yt.AcquireTokenSilent},r),i=this.brokeredSilentRequest(e,o,n);break}this.performanceClient.addFields({brokerEventName:yt.SsoSilent},r),i=this.brokeredSsoSilentRequest(e,n);break;case we.Redirect:case we.Popup:default:const s=this.getInteractionType(e.interactionType);this.performanceClient.addFields({brokerEventName:s===we.Redirect?yt.AcquireTokenRedirect:yt.AcquireTokenPopup},r),i=this.interactiveBrokerRequest(s,e,n);break}return i}getInteractionType(e){const n=this.pwbBrokerAppConfiguration.preferredInteractionType;return n||e}async interactiveBrokerRequest(e,n,r){switch(e){case we.Redirect:return this.brokeredRedirectRequest(n,r);case we.Popup:return this.brokeredPopupRequest(n,r);case we.Silent:this.logger.error("Invalid code path. interactiveBrokerRequest() should only be called for interactive requests.");return;case we.None:this.logger.error("Broker is blocking interactive requests. Please attempt a silent request or sign into the broker first.");return;default:this.logger.error("Invalid code path. interactiveBrokerRequest() should only be called for interactive requests.");return}}async brokeredRedirectRequest(e,n){var i;this.logger.verbose("Brokered redirect request initiated.");const r=this.getAllAccounts();this.eventHandler.emitEvent(r.length===0?ue.LOGIN_START:ue.ACQUIRE_TOKEN_START,we.Redirect,e.request);const o=((i=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:i[1])||n;try{const s=new Ky;o==null||o.postMessage(s),this.logger.verbose(`Sending redirect response: ${s}`);const a=this.addBrokerRequestProperties(e);return a.state=_ce(e,a.state),await super.acquireTokenRedirect(a)}catch(s){const a=new yo(we.Redirect,null,s);this.logger.verbose(`Found auth error in redirect: ${s}`),o==null||o.postMessage(a),this.eventHandler.emitEvent(r.length===0?ue.LOGIN_FAILURE:ue.ACQUIRE_TOKEN_FAILURE,we.Redirect,null,s)}}async brokeredPopupRequest(e,n){var i;this.logger.verbose("Brokered popup request initiated.");const r=this.getAllAccounts();this.eventHandler.emitEvent(r.length===0?ue.LOGIN_START:ue.ACQUIRE_TOKEN_START,we.Popup,e.request);const o=((i=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:i[1])||n;try{const s=this.addBrokerRequestProperties(e),a=await super.acquireTokenPopup(s),c=new yo(we.Popup,a);this.logger.verbosePii("Sending auth response"),o==null||o.postMessage(c);const u=r.length<this.getAllAccounts().length;this.eventHandler.emitEvent(u?ue.LOGIN_SUCCESS:ue.ACQUIRE_TOKEN_SUCCESS,we.Popup,a)}catch(s){const a=new yo(we.Popup,null,s);this.logger.verbose(`Found auth error in popup: ${s}`),o==null||o.postMessage(a),this.eventHandler.emitEvent(r.length===0?ue.LOGIN_FAILURE:ue.ACQUIRE_TOKEN_FAILURE,we.Popup,null,s)}}async brokeredSsoSilentRequest(e,n){var o;this.logger.verbose("Brokered SSO Silent request initiated."),this.eventHandler.emitEvent(ue.SSO_SILENT_START,we.Silent,e.request);const r=((o=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:o[1])||n;try{const i=this.addBrokerRequestProperties(e),s=await super.ssoSilent(i),a=new yo(we.Silent,s);this.logger.verbosePii("Sending auth response"),r==null||r.postMessage(a),this.eventHandler.emitEvent(ue.SSO_SILENT_SUCCESS,we.Silent,s)}catch(i){const s=new yo(we.Silent,null,i);this.logger.verbose(`Found auth error in ssoSilent: ${i}`),r==null||r.postMessage(s),this.eventHandler.emitEvent(ue.SSO_SILENT_FAILURE,we.Silent,null,i)}}async brokeredSilentRequest(e,n,r){var i;this.logger.verbose("Brokered Silent request initiated."),this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_START,we.Silent,e.request);const o=((i=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:i[1])||r;try{const s=this.addBrokerRequestProperties(e,n);s.cacheLookupPolicy=Mn.RefreshTokenAndNetwork;const a=await super.acquireTokenSilent(s),c=new yo(we.Silent,a);o==null||o.postMessage(c),this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_SUCCESS,we.Silent,a)}catch(s){const a=new yo(we.Silent,null,s);this.logger.verbose(`Found auth error in silent: ${s}`),o==null||o.postMessage(a),this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_FAILURE,we.Silent,null,s)}}getEmbeddedAppRedirectUri(e){const n=new Et(e);return`brk-${this.getConfiguration().auth.clientId}://${n.getUrlComponents().HostNameAndPort}`}addBrokerRequestProperties(e,n){const r={...e.request};r.redirectUri=this.getEmbeddedAppRedirectUri(e.embeddedAppOrigin),r.extraQueryParameters={...r.extraQueryParameters,client_id:e.embeddedClientId,brk_client_id:this.getConfiguration().auth.clientId,brk_redirect_uri:this.getConfiguration().auth.redirectUri||Vo()},r.tokenBodyParameters={...r.tokenBodyParameters,client_id:e.embeddedClientId,brk_client_id:this.getConfiguration().auth.clientId,brk_redirect_uri:this.getConfiguration().auth.redirectUri||Vo()},r.storeInCache={idToken:!1,accessToken:!1};const o=n||this.getActiveAccount();return o&&(r.account=o),e.request.correlationId&&this.performanceClient.addFields({embeddedClientId:e.embeddedClientId,embeddedRedirectUri:e.embeddedAppOrigin},e.request.correlationId),r}async sendLogoutRequestToEmbeddedApps(e){this.logger.verbose("sendLogoutRequestToEmbeddedApps called"),await this.messageEmbeddedAppsToLogout(new Yy(Cu,(e==null?void 0:e.correlationId)||Eo()))}async messageEmbeddedAppsToLogout(e){const n=[];this.embeddedAppConfigMap.forEach(r=>{n.push(new Promise((o,i)=>{var a;const s=window.setTimeout(()=>{o()},200);try{(a=r[1])==null||a.postMessage(e),r[1].addEventListener("message",c=>{c.data.messageType===kt.EMBEDDED_LOGOUT_RESPONSE&&(this.logger.info(`Received logout response from embedded app: ${c.data.embeddedClientId}`),o(),clearTimeout(s))})}catch(c){this.logger.error(`Could not logout application ${r[0]}. Error in message channel: ${c}`),i(c)}}))}),await Promise.all(n)}endBrokerPerformanceEvent(e,n,r){this.telemetryAllowedEmbeddedClients.has(e)||(this.logger.verbosePii(`TelemetryReporter: Skipping brokered event as not allowed by the client ${e}`,n.event.correlationId),n.discard()),r?n.end({success:!1},r):n.end({success:!0})}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Rce extends Jo{constructor(e,n,r){super(kt.EMBEDDED_LOGOUT_RESPONSE),this.version=e,this.correlationId=r,this.embeddedClientId=n}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const sh={Interaction:"brokerInteractionTimeoutMs",Message:"brokerMessageTimeoutMs",Iframe:"brokerIframeTimeoutMs"},ah={Interaction:"brokerInteractionTimedOut",Message:"brokerMessageTimedOut",Iframe:"brokerIframeTimedOut"};class Pce{get trustedBrokersProvided(){return!!this.pwbBrokeredAppConfiguration.trustedBrokerDomains&&this.pwbBrokeredAppConfiguration.trustedBrokerDomains.length>=1}get brokerConnectionEstablished(){return!!this.brokerMetadata}constructor(e,n,r,o,i,s,a,c){this.pwbBrokeredAppConfiguration=r,this.clientId=e,this.logger=o,this.brokerMetadata=null,this.performanceClient=i,this.hydrateCache=a,this.clearCache=c,this.messageChannelList=[],this.messageChannel=new MessageChannel,this.resolvers=new Map,this.temporaryBrokerStorage=s,this.onWindowMessageCb=this.onWindowMessage.bind(this),this.handshakeMetadata={correlationId:n}}getAncestors(){var r;const e=[];let n=window;for(;n&&n.parent&&n.parent.window!==n;)n=(r=n.parent)==null?void 0:r.window,e.push(n);return this.logger.verbose(`Attempting to send handshake request to ${e.length} ancestors`),e}async initiateHandshake(e){if(!this.trustedBrokersProvided)throw cn.createNoTrustedBrokersProvidedError();return this.initMeasurement&&this.initMeasurement.discard(),this.initMeasurement=e,new Promise((n,r)=>{const o=setTimeout(()=>{this.logger.warning("Broker handshake timed out"),e==null||e.add({brokerHandshakeTimedOut:!0,brokerHandshakeTimeoutMs:this.pwbBrokeredAppConfiguration.brokerHandshakeTimeout}),r(cn.createMessageBrokerHandshakeTimeoutError())},this.pwbBrokeredAppConfiguration.brokerHandshakeTimeout);this.handshakeMetadata.resolve=n,this.handshakeMetadata.reject=r,this.handshakeMetadata.timeoutId=o,window.addEventListener("message",this.onWindowMessageCb);const i=[];i.push(window),i.push(...this.getAncestors());for(let s=0;s<i.length;s++){const a=i[s],c=i.length-s-1;this.logger.verbose(`Sending handshake request to frame with depth = ${c}`),this.sendHandshakeRequest(a,c,void 0,e)}}).catch(n=>{const r=n;this.logger.error(r.message)})}async onWindowMessage(e){if(e.data&&e.origin&&this.pwbBrokeredAppConfiguration.trustedBrokerDomains.includes(e.origin))if(e.data.messageType===kt.BROKER_READY){this.logger.verbose("Broker is available.");const n=this.performanceClient.startMeasurement(yt.PairwiseBrokerApplicationInitializeBrokering,this.handshakeMetadata.correlationId);return this.handshakeMetadata.performanceEvent&&this.handshakeMetadata.performanceEvent.discard(),this.handshakeMetadata.performanceEvent=n,n.add({isBackground:!0}),this.sendHandshakeRequest(e.source,this.getFrameDepth(e.source),e.origin,n)}else e.data.messageType===kt.HANDSHAKE_RESPONSE&&(this.handshakeMetadata.performanceEvent=this.initMeasurement,this.onHandshakeResponse(e))}getFrameDepth(e){const n=[];n.push(window),n.push(...this.getAncestors());for(let r=0;r<n.length;r++)if(n[r]===e)return n.length-r-1;return 0}closeBrokerConnection(){this.logger.verbose("Closing broker connection."),this.brokerMetadata=null,xl(this.messageChannel),this.messageChannelList.forEach(e=>xl(e.channel)),window.removeEventListener("message",this.onWindowMessageCb)}async sendSsoSilentRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(yt.EmbeddedClientApplicationSendSSOSilentRequest,e.correlationId),rs(!0),this.performanceEvent.increment({visibilityChangeCount:0});const n=()=>{this.trackPageVisibility()};document.addEventListener("visibilitychange",n);try{const r=await this.sendRequest(e,we.Silent,{type:sh.Iframe,error:ah.Iframe,value:jg}),o=await this.handleResponse(r,e);if(o)this.performanceEvent.end({success:!0,fromCache:o.fromCache,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,isNativeBroker:o.fromNativeBroker,requestId:o.requestId},e.correlationId);else throw this.logger.errorPii(`Broker response is empty in brokered ssoSilent request: ${JSON.stringify(o)}`),cn.createBrokerResponseInvalidError();return o}catch(r){throw this.performanceEvent.end({success:!1},r),r}finally{document.removeEventListener("visibilitychange",n)}}async sendPopupRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(yt.EmbeddedClientApplicationSendPopupRequest,e.correlationId),rs(!0);try{const n=await this.sendRequest(e,we.Popup,{type:sh.Interaction,error:ah.Interaction,value:this.pwbBrokeredAppConfiguration.brokerInteractionTimeout}),r=await this.handleResponse(n,e);if(r)this.performanceEvent.end({success:!0,fromCache:r.fromCache,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length,isNativeBroker:r.fromNativeBroker,requestId:r.requestId});else throw Ky.validate(n)?(this.logger.verbose("popupRequest requires a redirect by the broker, this app will now redirect."),cn.createBrokerPopupRequestRedirectingError()):(this.logger.errorPii(`Broker response is empty in brokered popup request: ${JSON.stringify(r)}`),cn.createBrokerResponseInvalidError());return r}catch(n){throw this.performanceEvent.end({success:!1},n),n}}async sendHandleRedirectRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(yt.EmbeddedClientApplicationHandleRedirectRequest);try{const n=new Wy(this.clientId,Cu),r=await this.messageBroker(n,e.correlationId,{type:sh.Message,error:ah.Message,value:this.pwbBrokeredAppConfiguration.brokerMessageTimeout}),o=await this.handleResponse(r,e);return this.performanceEvent.end({success:!0,fromCache:o==null?void 0:o.fromCache,accessTokenSize:o==null?void 0:o.accessToken.length,idTokenSize:o==null?void 0:o.idToken.length,isNativeBroker:o==null?void 0:o.fromNativeBroker}),o}catch(n){throw this.performanceEvent.end({success:!1},n),n}}async sendSilentRefreshRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(yt.EmbeddedClientApplicationSendSilentRefreshRequest,e.correlationId),rs(!0),this.performanceEvent.increment({visibilityChangeCount:0});const n=()=>this.trackPageVisibility();document.addEventListener("visibilitychange",n);try{const r=await this.sendRequest(e,we.Silent,{type:sh.Message,error:ah.Message,value:this.pwbBrokeredAppConfiguration.brokerMessageTimeout}),o=await this.handleResponse(r,e);if(o)this.performanceEvent.end({success:!0,fromCache:o.fromCache,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,isNativeBroker:o.fromNativeBroker,requestId:o.requestId});else throw this.logger.errorPii(`Broker response is empty in brokered silent refresh request: ${JSON.stringify(o)}`),cn.createBrokerResponseInvalidError();return o}catch(r){throw this.performanceEvent.end({success:!1},r),r}finally{document.removeEventListener("visibilitychange",n)}}async sendRequest(e,n,r){if(e.authenticationScheme===jt.POP){const i=new dx(e);e.popKid=await i.generatePublicKeyThumbprint();const s=ow(this.clientId);this.temporaryBrokerStorage.containsKey(s)&&this.temporaryBrokerStorage.setItem(s,JSON.stringify(e))}const o=new qy(this.clientId,n,e,"");return this.messageBroker(o,e.correlationId,r)}getMessageChannelProperties(e){return e?this.messageChannelList.find(n=>n.nonce===e):this.getMessageChannelPropertiesByDepth(0)}getMessageChannelPropertiesByDepth(e){return this.messageChannelList.find(n=>n.depth===e)}onHandshakeResponse(e){const{resolve:n,reject:r,performanceEvent:o,timeoutId:i}=this.handshakeMetadata;try{const s=Gy.validate(e,this.pwbBrokeredAppConfiguration.trustedBrokerDomains);if(s){const a=this.getMessageChannelProperties(s.nonce);if(!a){this.logger.trace("No MessageChannel found, ignoring this response"),o==null||o.increment({handshakeIgnoredCount:1});return}if(s.nonce&&s.nonce!==a.nonce){this.logger.trace("Received handshake response but there is a newer handshake request in flight, ignoring this one"),o==null||o.increment({handshakeIgnoredCount:1});return}i&&clearTimeout(i),this.logger.verbose("Received handshake response");const c=pU(s.version);this.brokerMetadata={origin:s.brokerOrigin,version:s.version,semver:c,frameDepth:a.depth},c.major<=3&&c.minor<15&&xl(a.channel),xl(this.messageChannel),this.messageChannel=a.channel,n&&n(),o==null||o.add({brokerFrameDepth:a.depth}),o==null||o.end({success:!0})}}catch(s){const a=s;r&&r(a),this.logger.error(a.message),o==null||o.end({success:!1},a)}}sendHandshakeRequest(e=window.top,n,r,o){if(this.logger.trace("Pairwise Broker - sendHandshakeRequest called."),!e)throw this.logger.error("Target frame is undefined."),cn.createBrokerHandshakeFailedError();let i=new MessageChannel;const s=Eo();i.port1.onmessage=async u=>{u.data&&(u.data.messageType===kt.HANDSHAKE_RESPONSE?(this.logger.warning("Received handshake response but the broker app is using a version of MSAL.js that does not report its origin, attempting direct communication with each trusted broker domain to resolve. This is a known issue with versions 3.15.0-3.19.1, consider asking the broker app to upgrade."),this.pwbBrokeredAppConfiguration.trustedBrokerDomains.forEach(d=>{const f=new MessageChannel;f.port1.onmessage=p=>{xl(i),i=f,this.onHandshakeResponse({...p,data:{...p.data},origin:d})},this.logger.verbose(`Sending handshake request to ${d}`),e==null||e.postMessage(a,d,[f.port2])})):await this.handleBrokerMessage(u))};const a=new $y(this.clientId,Cu,!0,s),c=this.getMessageChannelPropertiesByDepth(n);c?(xl(c.channel),c.channel=i,c.nonce=s):this.messageChannelList.push({channel:i,nonce:s,depth:n}),this.logger.verbose("Sending handshake request"),o==null||o.increment({handshakeSentCount:1}),e==null||e.postMessage(a,r||"*",[i.port2])}async handleBrokerMessage(e){var s,a,c,u;const n=((a=(s=e.data)==null?void 0:s.result)==null?void 0:a.correlationId)||((u=(c=e.data)==null?void 0:c.errorPayload)==null?void 0:u.correlationId),r=e.data.messageType;if(this.logger.verbose(`Received message from broker of type: ${r} with correlationId: ${n}`),!r)return;let o;if(r===kt.EMBEDDED_LOGOUT_REQUEST){this.logger.verbose("Received logout message from broker."),await this.handleLogoutMessageFromBroker(e),this.messageChannel.port1.postMessage(new Rce(Cu,this.clientId,n));return}else if(r===kt.AUTH_RESULT&&e.data.interactionType===we.Redirect)this.logger.verbose("Received redirect response from broker."),o=we.Redirect;else if(n)this.logger.verbose(`Resolving message for ${n}.`),o=n;else{this.logger.verbose(`No correlationId found in message: ${r}.`);return}const i=this.resolvers.get(o);i?(clearTimeout(i.timeoutId),i.resolve(e),this.resolvers.delete(o)):this.logger.warning(`Cannot resolve message for ${n}. Ignoring.`)}async messageBroker(e,n,r={type:sh.Message,error:ah.Message,value:this.pwbBrokeredAppConfiguration.brokerMessageTimeout}){return new Promise((o,i)=>{var d,f;if(!this.brokerMetadata){i(cn.createBrokeringDisabledError());return}const s=setTimeout(()=>{var v;const p={},g=r.error.toString();p[g]=!0,(v=this.performanceEvent)==null||v.add(p),i(cn.createMessageBrokerTimeoutError())},r.value),a={},c=r.type.toString();a[c]=r.value,(d=this.performanceEvent)==null||d.add(a);const u=e.messageType===kt.HANDLE_REDIRECT_REQUEST?we.Redirect:n;if(this.resolvers.set(u,{resolve:o,reject:i,timeoutId:s}),this.brokerMetadata.semver.major>=3&&this.brokerMetadata.semver.minor>=15)this.messageChannel.port1.postMessage(e);else{const p=new MessageChannel;p.port1.onmessage=this.handleBrokerMessage.bind(this),(f=window.top)==null||f.postMessage(e,this.brokerMetadata.origin,[p.port2])}})}async handleResponse(e,n){const r=yo.validate(e);if(!r)return null;if(r.errorPayload)throw yo.detectError(r.errorPayload);if(!r.result)throw cn.createBrokerResponseInvalidError();await this.hydrateCache(r.result,n);let o;if(n.authenticationScheme===jt.POP){if(!n.popKid)throw cn.createShrGenerationError();o=await new dx(n).signRequest(r.result.accessToken,n.popKid)}return{...r.result,accessToken:o||r.result.accessToken}}async handleLogoutMessageFromBroker(e){Yy.validate(e)&&(this.logger.verbose("Logout request received from broker and validated. Logging out embedded app."),await this.clearCache())}trackPageVisibility(){this.performanceEvent&&(this.logger.info("Embedded client: Visibility change detected"),this.performanceEvent.increment({visibilityChangeCount:1}))}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Nce extends dp{constructor(e,n,r){super(e,r),this.pwbBrokerAppConfig=fU(n),this.temporaryBrokerStorage=qm(e),this.eventHandler=new s3(this.getLogger()),this.redirectResponse=new Map,this.initialized=!1}async initialize(e){await super.initialize(e),this.initialized=!0}async initializeBrokering(e,n){if(typeof window>"u")return;const r={...n,correlationId:(n==null?void 0:n.correlationId)||Eo()},o=this.performanceClient.startMeasurement(yt.PairwiseBrokerApplicationInitializeBrokering,r.correlationId);o.add({isBackground:!1});try{this.pwbBrokerAppConfig.actAsBroker?(this.pwbBrokerAppConfig.allowBrokering&&this.getLogger().verbose("Running in top frame and both actAsBroker, allowBrokering flags set to true. actAsBroker takes precedence."),this.broker=new xce(this.getConfiguration(),this.pwbBrokerAppConfig,this.eventHandler),this.getLogger().verbose("Acting as Broker"),this.getLogger().verbose("Initialize the extension for the new broker instance"),o.add({isBroker:!0}),await this.broker.initialize(r),await this.broker.listenForBrokerMessage(e,o),o.end({success:!0})):this.pwbBrokerAppConfig.allowBrokering&&(this.embeddedApp=new Pce(this.getConfiguration().auth.clientId,r.correlationId,this.pwbBrokerAppConfig,this.getLogger(),this.performanceClient,this.temporaryBrokerStorage,this.hydrateCache.bind(this),this.clearCache.bind(this)),this.getLogger().verbose("Acting as child"),o.add({isBroker:!1}),await this.embeddedApp.initiateHandshake(o))}catch(i){throw o.end({success:!1},i),i}}async handleRedirectPromise(e){if(qI(this.initialized),typeof window<"u"){const n=e||"";let r=this.redirectResponse.get(n);if(typeof r>"u"){this.eventHandler.emitEvent(ue.HANDLE_REDIRECT_START,we.Redirect);const o=this.getAllAccounts();r=this.handleRedirectPromiseInternal(e).then(i=>{if(!i)return null;const s=o.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(s?ue.LOGIN_SUCCESS:ue.ACQUIRE_TOKEN_SUCCESS,we.Redirect,i),i}).catch(i=>{throw this.eventHandler.emitEvent(o.length>0?ue.ACQUIRE_TOKEN_FAILURE:ue.LOGIN_FAILURE,we.Redirect,null,i),i}).finally(()=>{this.eventHandler.emitEvent(ue.HANDLE_REDIRECT_END,we.Redirect)}),this.redirectResponse.set(n,r)}return r}return null}async handleRedirectPromiseInternal(e){var n;if((n=this.embeddedApp)!=null&&n.brokerConnectionEstablished){const r=ow(this.controller.getConfiguration().auth.clientId),o=this.temporaryBrokerStorage.getItem(r);if(o){const i=JSON.parse(o);return await this.embeddedApp.sendHandleRedirectRequest(i).catch(a=>{throw a instanceof wt&&a.setCorrelationId(i.correlationId),a}).finally(()=>{this.temporaryBrokerStorage.removeItem(r)})}else return null}else return this.broker?this.broker.handleRedirectPromise(e):super.handleRedirectPromise(e)}async loginRedirect(e){return this.acquireTokenRedirect(e||{scopes:ca})}async acquireTokenRedirect(e){const n=this.getAllAccounts().length===0;return this.eventHandler.emitEvent(n?ue.LOGIN_START:ue.ACQUIRE_TOKEN_START,we.Redirect,e),super.acquireTokenRedirect(e).catch(r=>(this.eventHandler.emitEvent(n?ue.LOGIN_FAILURE:ue.ACQUIRE_TOKEN_FAILURE,we.Redirect,null,r),Promise.reject(r)))}async loginPopup(e){return this.acquireTokenPopup(e||{scopes:ca})}async acquireTokenPopup(e){rs(!0);const n={...e,correlationId:e.correlationId||Eo()},r=this.getAllAccounts();return this.eventHandler.emitEvent(r.length===0?ue.LOGIN_START:ue.ACQUIRE_TOKEN_START,we.Popup,n),this.acquireTokenPopupInternal(n).then(o=>{const i=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(i?ue.LOGIN_SUCCESS:ue.ACQUIRE_TOKEN_SUCCESS,we.Popup,o),o}).catch(o=>{o instanceof wt&&o.setCorrelationId(n.correlationId);const i=r.length===0;return this.eventHandler.emitEvent(i?ue.LOGIN_FAILURE:ue.ACQUIRE_TOKEN_FAILURE,we.Popup,null,o),Promise.reject(o)})}async acquireTokenPopupInternal(e){var n;if((n=this.embeddedApp)!=null&&n.brokerConnectionEstablished){if(this.getLogger().verbose("pairwise broker (embedded app) acquireTokenPopup called",e.correlationId),!this.embeddedApp)throw cn.createNoEmbeddedAppError();const r=ow(this.controller.getConfiguration().auth.clientId);return this.temporaryBrokerStorage.setItem(r,JSON.stringify(e)),this.embeddedApp.sendPopupRequest(e).then(o=>(this.temporaryBrokerStorage.removeItem(r),o))}return super.acquireTokenPopup(e)}async ssoSilent(e){rs(!0);const n={...e,correlationId:e.correlationId||Eo()};return this.eventHandler.emitEvent(ue.SSO_SILENT_START,we.Silent,n),this.ssoSilentInternal(n).then(r=>(this.eventHandler.emitEvent(ue.SSO_SILENT_SUCCESS,we.Silent,r),r)).catch(r=>{throw r instanceof wt&&r.setCorrelationId(n.correlationId),this.eventHandler.emitEvent(ue.SSO_SILENT_FAILURE,we.Silent,null,r),r})}async ssoSilentInternal(e){return this.embeddedApp&&this.embeddedApp.brokerConnectionEstablished?(this.getLogger().verbose("ssoSilent called",e.correlationId),this.embeddedApp.sendSsoSilentRequest(e)):super.ssoSilent(e)}async acquireTokenSilent(e){rs(!0);const n={...e,correlationId:e.correlationId||Eo()};return this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_START,we.Silent,n),this.acquireTokenSilentInternal(n).then(r=>(this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_SUCCESS,we.Silent,r),r)).catch(r=>(r instanceof wt&&r.setCorrelationId(n.correlationId),this.eventHandler.emitEvent(ue.ACQUIRE_TOKEN_FAILURE,we.Silent,null,r),Promise.reject(r)))}async acquireTokenSilentInternal(e){var o;if(!((o=this.embeddedApp)!=null&&o.brokerConnectionEstablished))return super.acquireTokenSilent(e);this.getLogger().verbose("acquireTokenSilent - attempting to acquire token from web flow");const n={...e,cacheLookupPolicy:Mn.AccessToken};let r;return e.cacheLookupPolicy===Mn.RefreshToken||e.cacheLookupPolicy===Mn.RefreshTokenAndNetwork||e.cacheLookupPolicy===Mn.Skip||e.forceRefresh?r=Promise.reject(new gd(Ii)):r=super.acquireTokenSilent(n),r.catch(async i=>{if(e.cacheLookupPolicy===Mn.AccessToken)throw i;if(!this.embeddedApp)throw cn.createNoEmbeddedAppError();return this.embeddedApp.sendSilentRefreshRequest(e)})}async logoutRedirect(e){if(this.embeddedApp&&this.embeddedApp.brokerConnectionEstablished)this.getLogger().error("Embedded app is not allowed to logout while the broker app is logged in.");else if(this.broker)return await this.broker.sendLogoutRequestToEmbeddedApps(),super.logoutRedirect(e)}async logoutPopup(e){if(this.embeddedApp&&this.embeddedApp.brokerConnectionEstablished)this.getLogger().error("Embedded app is not allowed to logout while the broker app is logged in.");else if(this.broker)return await this.broker.sendLogoutRequestToEmbeddedApps(),super.logoutPopup(e)}setActiveAccount(e){this.broker&&this.broker.setActiveAccount(e),super.setActiveAccount(e)}addEventCallback(e,n=Object.values(ue)){const r=[ue.ACQUIRE_TOKEN_START,ue.ACQUIRE_TOKEN_SUCCESS,ue.ACQUIRE_TOKEN_FAILURE,ue.LOGIN_START,ue.LOGIN_SUCCESS,ue.LOGIN_FAILURE,ue.SSO_SILENT_START,ue.SSO_SILENT_SUCCESS,ue.SSO_SILENT_FAILURE,ue.HANDLE_REDIRECT_START,ue.HANDLE_REDIRECT_END],o=[],i=[];n.forEach(a=>{r.includes(a)?o.push(a):i.push(a)});const s=super.addEventCallback(e,i);return s?(this.eventHandler.addEventCallback(e,o,s),s):null}removeEventCallback(e){super.removeEventCallback(e),this.eventHandler.removeEventCallback(e)}}class gU{supportsNaa(){return!1}async handleInteractionRequiredError(e,n){var r;Qs(Un,null),Qs(zo,{reason:"token-expired",provider:"microsoft",loginHint:(r=n.account)==null?void 0:r.username})}}class Oce extends gU{async instantiateMsal(){hI({apiName:ue.INITIALIZE_START,providerType:"microsoft"});const e=await dp.createPublicClientApplication(C2,S2);return fI({apiName:ue.INITIALIZE_END,providerType:"microsoft"}),e}}let Sv=null;function Mce(t){Sv=t}const Lce=new el(Dce);async function Dce(){if(Sv){const t=await Sv.maybeInstantiate();if(t)return t}return new Oce}const Sr=new el(jce);async function jce(){const t=await Lce.get(),e=await t.instantiateMsal(),n=new Map([["login",null],["graph",null],["oneDrive",null]]);async function r(i,s){const a=aH(i),c={account:s,...a};try{return{accessToken:(await e.acquireTokenSilent(c)).accessToken}}catch(u){if(u instanceof Ur)return K.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenRedirect",eventInfo_requestType:i,eventInfo_traceId:u.traceId,eventInfo_errorMessage:u.errorMessage,eventInfo_errorCode:u.errorCode,eventInfo_correlationId:u.correlationId,eventInfo_timeSinceStartMs:performance.now()-window.appStart}}),t.handleInteractionRequiredError(e,c);if(u instanceof wt&&(u.errorMessage===pz||parseInt(u.errorCode,10)===U2))throw K.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenUnderaged",eventInfo_requestType:i,eventInfo_errorMessage:u.errorMessage,eventInfo_errorCode:u.errorCode,eventInfo_correlationId:u.correlationId}}),new Error(vT);return}}return{msal:e,getMsalAccessToken:async i=>{const s=e.getActiveAccount();if(!s&&!t.supportsNaa())return;const a=n.get(i);if(!a){const c=r(i,s??void 0);n.set(i,c);const u=await c;return n.set(i,null),u}return a}}}function Uce(t){var n;const e=(n=t.payload)==null?void 0:n.scopes;return Array.isArray(e)?e.some(r=>typeof r!="string"?!1:r==="ConsumerStore.Purchase"||r.endsWith("purchase.create")):!1}function vU(t){const e=Uce(t);if(t.eventType===ue.LOGIN_START){const n=t.payload;fD({apiName:ue.LOGIN_START,authWorkflowAccountType:"microsoft",interactionType:t.interactionType??void 0,correlationId:n.correlationId,prompt:n.prompt,redirectUri:n.redirectUri,extraInfo:{eventInfo_isBrokered:e}})}else if(t.eventType===ue.LOGIN_SUCCESS||t.eventType===ue.SSO_SILENT_SUCCESS){const n=t.payload&&"account"in t.payload?t.payload.account:null,r=n?!ts(n.tenantId):void 0,o=t.payload;WE({apiName:t.eventType,authWorkflowAccountType:"microsoft",interactionType:t.interactionType??void 0,correlationId:o.correlationId,authority:o.authority,isMSA:r,extraInfo:{eventInfo_isBrokered:e}})}else if(t.eventType===ue.LOGOUT_SUCCESS)pD({apiName:ue.LOGOUT_SUCCESS,providerType:"microsoft",extraInfo:{eventInfo_isBrokered:e}});else if(t.eventType===ue.ACQUIRE_TOKEN_START||t.eventType===ue.ACQUIRE_TOKEN_NETWORK_START){sa("msalAcquireTokenStartTime",Date.now().toString());const n=t.payload;Om({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_correlationId:n.correlationId,eventInfo_redirectUri:n.redirectUri,eventInfo_cacheLookupPolicy:n.cacheLookupPolicy,eventInfo_prompt:n.prompt,eventInfo_isBrokered:e}})}else if(t.eventType===ue.ACQUIRE_TOKEN_SUCCESS){const n=Date.now()-parseInt(Wo("msalAcquireTokenStartTime")??"0",10);sa("msalAcquireTokenStartTime","");const r=t.payload;Om({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_correlationId:r.correlationId,eventInfo_expiresOn:r.expiresOn,eventInfo_extExpiresOn:r.extExpiresOn,eventInfo_refreshOn:r.refreshOn,eventInfo_duration:n,eventInfo_fromCache:r.fromCache,eventInfo_isBrokered:e}})}else if(t.eventType===ue.LOGIN_FAILURE||t.eventType===ue.ACQUIRE_TOKEN_FAILURE||t.eventType===ue.SSO_SILENT_FAILURE||t.eventType===ue.ACQUIRE_TOKEN_BY_CODE_FAILURE||t.eventType===ue.LOGOUT_FAILURE){let n;t.eventType===ue.ACQUIRE_TOKEN_FAILURE&&(n=Date.now()-parseInt(Wo("msalAcquireTokenStartTime")??"0",10));const r=t.error;Eg({authWorkflowAccountType:"microsoft",apiName:t.eventType,errorType:(r==null?void 0:r.name)??"",errorMessage:(r==null?void 0:r.message)??"",extraInfo:{eventInfo_isBrokered:e},errorExtraInfo:{eventInfo_correlationId:r==null?void 0:r.correlationId,eventInfo_errorMessage:r==null?void 0:r.errorMessage,eventInfo_errorCode:r==null?void 0:r.errorCode,eventInfo_name:r==null?void 0:r.name,eventInfo_interactionType:t.interactionType??void 0,eventInfo_subError:r==null?void 0:r.subError,eventInfo_duration:n}})}else Om({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_isBrokered:e}})}function ts(t){return t!==cg}class Fce{constructor(){Z(this,"hasTrackedRedirectError",!1)}async handleRedirect(){var e;try{const{msal:n}=await Sr.get();await n.handleRedirectPromise()&&mD({authWorkflowAccountType:"microsoft",apiName:"msal:reauthSuccess"});const o=await this.getAccount();return o?(n.setActiveAccount(o),{id:((e=o.idTokenClaims)==null?void 0:e.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:ts(o.tenantId)?"AAD":"MSA"}):null}catch(n){this.trackRedirectErrorOncePerSession(n)}return null}async handleRedirectWithoutAccount(){try{const{msal:e}=await Sr.get(),n=await e.handleRedirectPromise();n&&e.setActiveAccount(n.account)}catch(e){this.trackRedirectErrorOncePerSession(e)}}async maybeInitializeAccountWithToken(){var n;const e=await this.getAuthToken();if(e){const{msal:r}=await Sr.get(),o=await this.getAccount();return o?(r.setActiveAccount(o),{userAccount:{id:((n=o.idTokenClaims)==null?void 0:n.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:ts(o.tenantId)?"AAD":"MSA"},authToken:e}):null}return null}async logIn(){const{msal:e}=await Sr.get(),n={...oT},r=this.buildRedirectUri();return r&&(n.redirectUri=r),e.loginRedirect(n)}buildRedirectUri(){const{surfaceQueryParam:e}=be.instance().config(),n=new URLSearchParams;let r;if(e!=null&&e.useForLoginRedirect)for(const[i,s]of Object.entries(e.params))n.set(i,s);const o=new URLSearchParams(window.location.search).get("back");return o&&n.set("back",o),n.toString()&&(r=`${window.location.origin}?${n}`),r}async logOut(){const{msal:e}=await Sr.get(),n=e.getAllAccounts(),r=e.getActiveAccount();try{if(vf()){await e.logoutRedirect({account:r,onRedirectNavigate:()=>!1}),K.setPicassoId(null);return}for(const o of n)o.tenantId!==cg&&(await e.logoutRedirect({account:o,onRedirectNavigate:()=>!1}),K.setPicassoId(null))}catch(o){console.error(o)}await e.logoutRedirect({account:r,onRedirectNavigate:()=>!1}),K.setPicassoId(null)}async getAuthToken(){return(await Sr.get()).getMsalAccessToken("login")}async getUserInfo(){const e=await(await Sr.get()).getMsalAccessToken("graph");if(e)return D1(e.accessToken)}async getUserInfoFromToken(e){return D1(e)}supportsTokenType(e){return e===void 0}trackRedirectErrorOncePerSession(e){this.hasTrackedRedirectError||K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"msalHandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${e}`}}),this.hasTrackedRedirectError=!0}async getAccount(){var o,i;const{msal:e}=await Sr.get(),n=e.getAllAccounts(),r=e.getActiveAccount();if((n.length>1||n.length===1&&(r==null?void 0:r.homeAccountId)!==((o=n[0])==null?void 0:o.homeAccountId))&&Om({authWorkflowAccountType:"microsoft",apiName:"msal:getAllAccounts",extraInfo:{eventInfo_accountCount:n.length,eventInfo_accountTypes:n.map(s=>ts(s.tenantId)?"AAD":"MSA"),eventInfo_accountIds:n.map(s=>s.homeAccountId),eventInfo_currentAccountId:(i=e.getActiveAccount())==null?void 0:i.homeAccountId}}),n.length!==0){if(vf())return n.length===0?void 0:n.length===1?n[0]:n.length>1&&r?r:void 0;for(const s of n)if(s.tenantId===cg)return s;return n[0]}}async getCurrentActiveUserAccount(){var n;const e=await this.getAccount();return e?{id:((n=e.idTokenClaims)==null?void 0:n.oid)??"",tenantId:e.tenantId,provider:"microsoft",accountType:ts(e.tenantId)?"AAD":"MSA"}:null}}class Hr{constructor(){Z(this,"middlewares",[])}add(e){this.middlewares.push(e)}async run(e){let n={...e};for(const r of this.middlewares)try{n=await r(n)}catch{continue}return n}}const Bce=new Hr,XR=new Hr,qke=new Hr,Kke=new Hr,Hce=new Hr,zce=new Hr,Vce=new Hr,$ce=new Hr,Gce=new Hr,qce=new Hr,Kce=new Hr,Wce=new Hr,Yce=new Hr,Qce=new Hr;var Eu;const Ka=class Ka{constructor(){Z(this,"providers");this.providers={microsoft:new Fce,auth0:new BX}}async handleRedirect(){const e=await this.providers.microsoft.handleRedirect();if(e)return e;if(!be.instance().config().enableAuth0)return null;const n=await this.providers.auth0.handleRedirect();return n||null}async handleRedirectWithoutAccount(){await this.providers.microsoft.handleRedirectWithoutAccount(),be.instance().config().enableAuth0&&await this.providers.auth0.handleRedirectWithoutAccount()}async getCurrentActiveUserAccountAndSetGlobalUserAccount(){const e=await this.providers.microsoft.getCurrentActiveUserAccount();if(e){this.setUserAccount(e);return}if(!be.instance().config().enableAuth0)return;const n=await this.providers.auth0.getCurrentActiveUserAccount();n&&this.setUserAccount(n)}static instance(){return me(Ka,Eu)||Mt(Ka,Eu,new Ka),me(Ka,Eu)}getCurrentProvider(){const e=gt(Un);return e?this.providers[e.provider]:null}async getAccountFromProviders(){var e;return vf()?((e=this.getCurrentProvider())==null?void 0:e.getCurrentActiveUserAccount())??null:this.handleRedirect()}async maybeInitialize(){try{const e=await this.providers.microsoft.maybeInitializeAccountWithToken();if(e)return e;if(!be.instance().config().enableAuth0)return null;const n=await this.providers.auth0.maybeInitializeAccountWithToken();if(n)return n}catch(e){e instanceof Error&&aa({feature:"accountInitialization",errorType:e.name,errorMessage:e.message,exception:e.stack})}return null}setUserAccount(e){Qs(Un,e),K.setUserAccountType(e==null?void 0:e.accountType)}async getAuthToken(){var r;const e=await XR.run({type:"login"});if(e.isHandled){if(((r=e.authToken)==null?void 0:r.tokenType)!==void 0){const o=FX(e.authToken.tokenType);K.setUserAccountType(o)}return e.authToken}if(vf()){const o=this.getCurrentProvider();return o?o.getAuthToken():void 0}const n=this.getCurrentProvider();if(!n){const o=await this.handleRedirect();if(o)return this.setUserAccount(o),this.providers[o.provider].getAuthToken();const i=await this.maybeInitialize();if(i){const{authToken:s,userAccount:a}=i;return this.setUserAccount(a),s}return}return n.getAuthToken()}async getUserInfo(){const e=await XR.run({type:"graph"});if(e.isHandled){if(!e.authToken)return;const{tokenType:r,accessToken:o}=e.authToken;if(this.providers.microsoft.supportsTokenType(r))return this.providers.microsoft.getUserInfoFromToken(o);if(this.providers.auth0.supportsTokenType(r)){const i=await this.providers.auth0.getUserInfoFromToken(o);if(i)return i}return}const n=this.getCurrentProvider();if(n)return n.getUserInfo()}logIn(e,n){return this.providers[e].logIn(n)}async logOut(){const e=this.getCurrentProvider();return e&&(await e.logOut(),this.setUserAccount(null)),Promise.resolve()}async initAuthAccount(){await this.handleRedirectWithoutAccount(),await this.getCurrentActiveUserAccountAndSetGlobalUserAccount()}};Eu=new WeakMap,on(Ka,Eu,null);let gs=Ka;function yU(){return null}function bU({featureOverrides:t,localFeatureOverrides:e,serverFeatures:n,surfaceConfig:r}){var i,s,a,c;const o=new Set([...n]);(i=r.settingsOverrides)!=null&&i.shouldHideShopping&&o.delete("shopping-card"),(s=r.settingsOverrides)!=null&&s.shouldHideMultipleCharacters&&o.delete("multiplecharacters"),r.startInVoice&&o.add("start-in-voice"),(a=r.pages)!=null&&a.enabled?o.add("pages"):((c=r.pages)==null?void 0:c.enabled)===!1&&o.delete("pages");for(const u of t)o.add(u);for(const u of e)o.add(u);return Array.from(o)}function CU(){return[]}async function N_(){const{msal:t}=await Sr.get();return t.getActiveAccount()}async function SU(){const t=await N_();return t?ts(t.tenantId):!1}async function ZR(){const t=await N_();if(!(!t||!ts(t.tenantId)))return t}async function Jce(){const t=await N_();if(!(!t||ts(t.tenantId)))return t}async function Xce(){return(await Sr.get()).getMsalAccessToken("oneDrive")}const EU="urlFeatureOverrides";function Zce(){return typeof window>"u"?null:sessionStorage.getItem(EU)}function wU(){const t=Zce();return t?t.split(",").map(n=>n):[]}function ele(){const t=gn("features");return t!=null&&t.trim()&&typeof window<"u"&&sessionStorage.setItem(EU,t.trim()),wU()}const TU=V(!1),tle=l.boolean().optional(),O_=ly({key:FQ,schema:tle,initialValue:void 0}),nle={VITE_API_URL:"copilot.microsoft.com/c/api"};async function rle(t,e){try{return await t.json()}catch(n){throw(n instanceof SyntaxError||n instanceof TypeError||n instanceof DOMException)&&JV(n,t,e),n}}function IU(t={}){const{query:e={}}=t,n=new URLSearchParams;for(const[s,a]of Object.entries(e))n.append(s,a);const r=bU({featureOverrides:wU(),localFeatureOverrides:CU(),serverFeatures:[],surfaceConfig:be.instance().config()}).join(",");r&&(n.append("features",r),n.append("setflight",r));const o=yU();o&&n.append("promptBranch",o);const{surfaceQueryParam:i}=be.instance().config();if(i)for(const[s,a]of Object.entries(i.params))n.append(s,a);return n}async function eP(t,e){const{VITE_API_URL:n}=nle,r=n,o={...e,"api-version":"2"},i=await gs.instance().getAuthToken(),s=await SU();i&&!s&&(o.accessToken=i.accessToken,i.tokenType&&(o["X-UserIdentityType"]=i.tokenType)),i===void 0&&hD(t,"getWssAPIUrl"),gt(O_)&&(o.appFlavor="beta");const a=IU({query:o});return`wss://${r}/${t}?${a}`}function ole(t,e){let n="";n="https://copilot.microsoft.com/c/api",n+=t;const r=IU({query:e});return r.toString()&&(n+=`?${r}`),n}async function Uc(t,e={}){const{options:n,query:r,analytics:o}=e,i=new Headers(n==null?void 0:n.headers);It.resolvedLanguage?i.set("X-Search-UILang",It.resolvedLanguage.toLowerCase()):It.language&&i.set("X-Search-UILang",It.language.toLowerCase());const s=await gs.instance().getAuthToken(),a=await SU();s&&!a&&(i.set("Authorization",`Bearer ${s.accessToken}`),s.tokenType&&i.set("X-UserIdentityType",s.tokenType)),s===void 0&&hD(t,"fetchApi"),gt(O_)&&i.set("X-Copilot-App-Flavor","beta");const c=performance.now(),u=await fetch(ole(t,r),{...n,credentials:"include",headers:i}),d=performance.now();return KL((o==null?void 0:o.anonymousPath)??t,(n==null?void 0:n.method)??"GET",d-c,u.clone()),Zv.trackLatestApiAssignment(u.clone()),u}async function Fr({path:t,args:e={}}){var r;const n={method:"POST",...e.options,headers:{"Content-Type":"application/json",...(r=e.options)==null?void 0:r.headers},body:e.body?JSON.stringify(e.body):void 0};return Uc(t,{...e,options:n})}async function Fn(t,e,n={}){const{analytics:r,onFailedRequest:o}=n,i=(r==null?void 0:r.anonymousPath)??t,s=await Uc(t,n);let a=!0;if(!s.ok&&o&&(a=!!o(s)),!a)return{data:void 0,response:{ok:s.ok,status:s.status,headers:s.headers},zodError:void 0};const c=await rle(s,i);let u,d;const{safe:f}=n.parseOptions??{};if(f){const p=e.safeParse(c);p.error&&df(p.error,i,!0),u=c,d=p.error}else try{u=e.parse(c)}catch(p){throw p instanceof ng&&df(p,i,!1),p}return{data:u,response:{ok:s.ok,status:s.status,headers:s.headers},zodError:d}}function ile(){return pn(s1)!==null?!1:(ro(JT),ro(mf),rr(s1,"true"),!0)}function _U(){return parseInt(pn(JT)??"0",10)}function sle(){return new Date(pn(mf)??new Date().toISOString())}function ale(t){pn(mf)||rr(mf,t)}function cle(){let t;try{t=_U()}catch{t=0}t<SE&&(t+=1,rr(JT,`${t}`),t===SE&&ale(new Date().toISOString()))}function AU(t){return Fn(t,EY,{options:{method:"POST"}}).then(e=>e.data)}function hp(){const t=D(wT),{trigger:e}=hT("/conversations",AU),n=D(In),r=ga(In),o=Te(ST),i=Te(ZQ),s=JL(),[a,c]=m.useState(!1);return{startConversationDisabled:a,createConversation:m.useCallback(async(u=!0,d=void 0)=>{if(t){const f=n.get(t);if((f==null?void 0:f.characterId)===d)return s({id:t,shouldNavigateToChat:u}),t}if(!a)try{c(!0);const{id:f}=await e(),p={id:f,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:d,streamingState:"idle",continuedAt:null};return r(g=>{g.set(f,p)}),s({id:f,shouldNavigateToChat:u}),o(!0),cle(),uJ(),i(),f}catch(f){console.error(f)}finally{c(!1)}},[t,a,n,s,e,r,o,i])}}function Wt(){return HO({select:e=>e.pathname})}function Qy(){const[t,e]=tt(d$),n=Wt();return m.useEffect(()=>{n.endsWith("/chats/new/talk")&&(K.setLandingPage("deepLinkVoiceCall"),e("audioCall"))},[n,e]),[t,()=>e(null)]}const lle=V(0),ule=V(null),dle=V(null),fp=V("center"),kU=V(void 0),Ir=V(null),hle=V(null),pp=V(null),Jy=V(null),fle=V(t=>{var r;const e=t(Bi),n=cI(e);return((r=n==null?void 0:n.part.task)==null?void 0:r.type)==="research"}),xU=V(null),ple=V(!1),M_=V(new Map);V(!1);const L_=V(null),RU=V(!1),iw=V(!1),D_="shouldPerformUserMerge";function mle(t){sa(D_,String(t))}function gle(){W2(D_)}function vle(){return Wo(D_)!=="false"}function Wke(){const t=D(Bi),e=xr(),[n,r]=tt(LX),o=ve("user-conversation-merge"),i=o&&!e&&t.length>0;return m.useEffect(()=>{o&&mle(n)},[o,n]),{shouldShowMergeCheckbox:i,shouldMerge:n,setShouldMerge:r}}function sw(t){if(window.clarity)for(const[e,n]of Object.entries(t))window.clarity("set",e,n)}function tP(t){if(window.clarity)for(const e of t)window.clarity("event",e)}function Xy(t){const e=Uv(),n=m.useRef(t);n.current=t,m.useEffect(()=>e.subscribe("onBeforeNavigate",r=>{const{pathChanged:o}=r;o&&n.current(r)}),[e])}let PU=!0,NU=!0;function yle(t){NU=t}function Zy(){return PU}function ble(){Xy(()=>{NU||(PU=!1)})}const Cle=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},{slice:Sle,forEach:Ele}=[];function wle(t){return Ele.call(Sle.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const nP=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Tle=(t,e,n)=>{const r=n||{};r.path=r.path||"/";const o=encodeURIComponent(e);let i=`${t}=${o}`;if(r.maxAge>0){const s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(s)}`}if(r.domain){if(!nP.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!nP.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i},rP={create(t,e,n,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),r&&(o.domain=r),document.cookie=Tle(t,encodeURIComponent(e),o)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let o=n[r];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(e)===0)return o.substring(e.length,o.length)}return null},remove(t){this.create(t,"",-1)}};var Ile={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return rP.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:o,cookieOptions:i}=e;n&&typeof document<"u"&&rP.create(n,t,r,o,i)}},_le={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const s=o.substring(1).split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(n=s[a].substring(c+1))}}return n}};let ch=null;const oP=()=>{if(ch!==null)return ch;try{ch=window!=="undefined"&&window.localStorage!==null;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{ch=!1}return ch};var Ale={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&oP())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&oP()&&window.localStorage.setItem(n,t)}};let lh=null;const iP=()=>{if(lh!==null)return lh;try{lh=window!=="undefined"&&window.sessionStorage!==null;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{lh=!1}return lh};var kle={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&iP())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&iP()&&window.sessionStorage.setItem(n,t)}},xle={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:o}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);r&&e.push(r),o&&e.push(o)}return e.length>0?e:void 0}},Rle={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Ple={name:"path",lookup(t){var o;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(o=n[typeof e=="number"?e:0])==null?void 0:o.replace("/",""):void 0}},Nle={name:"subdomain",lookup(t){var o,i;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((i=(o=window.location)==null?void 0:o.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function Ole(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t}}class aw{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=wle(n,this.options||{},Ole()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Ile),this.addDetector(_le),this.addDetector(Ale),this.addDetector(kle),this.addDetector(xle),this.addDetector(Rle),this.addDetector(Ple),this.addDetector(Nle)}addDetector(e){return this.detectors[e.name]=e,this}detect(e){e||(e=this.options.order);let n=[];return e.forEach(r=>{if(this.detectors[r]){let o=this.detectors[r].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}aw.type="languageDetector";function cw(t){"@babel/helpers - typeof";return cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cw(t)}function OU(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":cw(XMLHttpRequest))==="object"}function Mle(t){return!!t&&typeof t.then=="function"}function Lle(t){return Mle(t)?t:Promise.resolve(t)}var hm={exports:{}},fm={exports:{}},sP;function Dle(){return sP||(sP=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Nh<"u"&&Nh,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(s){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof a<"u"&&a,c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(k){return k&&DataView.prototype.isPrototypeOf(k)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(k){return k&&d.indexOf(Object.prototype.toString.call(k))>-1};function p(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(k)||k==="")throw new TypeError('Invalid character in header field name: "'+k+'"');return k.toLowerCase()}function g(k){return typeof k!="string"&&(k=String(k)),k}function v(k){var N={next:function(){var x=k.shift();return{done:x===void 0,value:x}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function y(k){this.map={},k instanceof y?k.forEach(function(N,x){this.append(x,N)},this):Array.isArray(k)?k.forEach(function(N){this.append(N[0],N[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(N){this.append(N,k[N])},this)}y.prototype.append=function(k,N){k=p(k),N=g(N);var x=this.map[k];this.map[k]=x?x+", "+N:N},y.prototype.delete=function(k){delete this.map[p(k)]},y.prototype.get=function(k){return k=p(k),this.has(k)?this.map[k]:null},y.prototype.has=function(k){return this.map.hasOwnProperty(p(k))},y.prototype.set=function(k,N){this.map[p(k)]=g(N)},y.prototype.forEach=function(k,N){for(var x in this.map)this.map.hasOwnProperty(x)&&k.call(N,this.map[x],x,this)},y.prototype.keys=function(){var k=[];return this.forEach(function(N,x){k.push(x)}),v(k)},y.prototype.values=function(){var k=[];return this.forEach(function(N){k.push(N)}),v(k)},y.prototype.entries=function(){var k=[];return this.forEach(function(N,x){k.push([x,N])}),v(k)},c.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function b(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function C(k){return new Promise(function(N,x){k.onload=function(){N(k.result)},k.onerror=function(){x(k.error)}})}function S(k){var N=new FileReader,x=C(N);return N.readAsArrayBuffer(k),x}function w(k){var N=new FileReader,x=C(N);return N.readAsText(k),x}function E(k){for(var N=new Uint8Array(k),x=new Array(N.length),M=0;M<N.length;M++)x[M]=String.fromCharCode(N[M]);return x.join("")}function T(k){if(k.slice)return k.slice(0);var N=new Uint8Array(k.byteLength);return N.set(new Uint8Array(k)),N.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(k){this.bodyUsed=this.bodyUsed,this._bodyInit=k,k?typeof k=="string"?this._bodyText=k:c.blob&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:c.formData&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():c.arrayBuffer&&c.blob&&u(k)?(this._bodyArrayBuffer=T(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(k)||f(k))?this._bodyArrayBuffer=T(k):this._bodyText=k=Object.prototype.toString.call(k):this._bodyText="",this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var k=b(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var k=b(this);return k||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(S)}),this.text=function(){var k=b(this);if(k)return k;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(k){var N=k.toUpperCase();return A.indexOf(N)>-1?N:k}function j(k,N){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var x=N.body;if(k instanceof j){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,N.headers||(this.headers=new y(k.headers)),this.method=k.method,this.mode=k.mode,this.signal=k.signal,!x&&k._bodyInit!=null&&(x=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new y(N.headers)),this.method=_(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(x),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var te=/\?/;this.url+=(te.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}j.prototype.clone=function(){return new j(this,{body:this._bodyInit})};function R(k){var N=new FormData;return k.trim().split("&").forEach(function(x){if(x){var M=x.split("="),te=M.shift().replace(/\+/g," "),Y=M.join("=").replace(/\+/g," ");N.append(decodeURIComponent(te),decodeURIComponent(Y))}}),N}function $(k){var N=new y,x=k.replace(/\r?\n[\t ]+/g," ");return x.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var te=M.split(":"),Y=te.shift().trim();if(Y){var Q=te.join(":").trim();N.append(Y,Q)}}),N}I.call(j.prototype);function U(k,N){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new y(N.headers),this.url=N.url||"",this._initBody(k)}I.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},U.error=function(){var k=new U(null,{status:0,statusText:""});return k.type="error",k};var se=[301,302,303,307,308];U.redirect=function(k,N){if(se.indexOf(N)===-1)throw new RangeError("Invalid status code");return new U(null,{status:N,headers:{location:k}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(N,x){this.message=N,this.name=x;var M=Error(N);this.stack=M.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function P(k,N){return new Promise(function(x,M){var te=new j(k,N);if(te.signal&&te.signal.aborted)return M(new s.DOMException("Aborted","AbortError"));var Y=new XMLHttpRequest;function Q(){Y.abort()}Y.onload=function(){var oe={status:Y.status,statusText:Y.statusText,headers:$(Y.getAllResponseHeaders()||"")};oe.url="responseURL"in Y?Y.responseURL:oe.headers.get("X-Request-URL");var Ce="response"in Y?Y.response:Y.responseText;setTimeout(function(){x(new U(Ce,oe))},0)},Y.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},Y.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},Y.onabort=function(){setTimeout(function(){M(new s.DOMException("Aborted","AbortError"))},0)};function ee(oe){try{return oe===""&&a.location.href?a.location.href:oe}catch{return oe}}Y.open(te.method,ee(te.url),!0),te.credentials==="include"?Y.withCredentials=!0:te.credentials==="omit"&&(Y.withCredentials=!1),"responseType"in Y&&(c.blob?Y.responseType="blob":c.arrayBuffer&&te.headers.get("Content-Type")&&te.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(Y.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof y)?Object.getOwnPropertyNames(N.headers).forEach(function(oe){Y.setRequestHeader(oe,g(N.headers[oe]))}):te.headers.forEach(function(oe,Ce){Y.setRequestHeader(Ce,oe)}),te.signal&&(te.signal.addEventListener("abort",Q),Y.onreadystatechange=function(){Y.readyState===4&&te.signal.removeEventListener("abort",Q)}),Y.send(typeof te._bodyInit>"u"?null:te._bodyInit)})}return P.polyfill=!0,a.fetch||(a.fetch=P,a.Headers=y,a.Request=j,a.Response=U),s.Headers=y,s.Request=j,s.Response=U,s.fetch=P,s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=n.fetch?n:r;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e}(fm,fm.exports)),fm.exports}var aP;function jle(){return aP||(aP=1,function(t,e){var n;if(typeof fetch=="function"&&(typeof Nh<"u"&&Nh.fetch?n=Nh.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof ED<"u"&&typeof window>"u"){var r=n||Dle();r.default&&(r=r.default),e.default=r,t.exports=e.default}}(hm,hm.exports)),hm.exports}var MU=jle();const LU=zw(MU),cP=VB({__proto__:null,default:LU},[MU]);function lP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function uP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lP(Object(n),!0).forEach(function(r){Ule(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ule(t,e,n){return(e=Fle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fle(t){var e=Ble(t,"string");return Fc(e)=="symbol"?e:e+""}function Ble(t,e){if(Fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}var cs;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?cs=global.fetch:typeof window<"u"&&window.fetch?cs=window.fetch:cs=fetch);var Pf;OU()&&(typeof global<"u"&&global.XMLHttpRequest?Pf=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Pf=window.XMLHttpRequest));var Ev;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Ev=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Ev=window.ActiveXObject));!cs&&cP&&!Pf&&!Ev&&(cs=LU||cP);typeof cs!="function"&&(cs=void 0);var lw=function(e,n){if(n&&Fc(n)==="object"){var r="";for(var o in n)r+="&"+encodeURIComponent(o)+"="+encodeURIComponent(n[o]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},dP=function(e,n,r,o){var i=function(c){if(!c.ok)return r(c.statusText||"Error",{status:c.status});c.text().then(function(u){r(null,{status:c.status,data:u})}).catch(r)};if(o){var s=o(e,n);if(s instanceof Promise){s.then(i).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(i).catch(r):cs(e,n).then(i).catch(r)},hP=!1,Hle=function(e,n,r,o){e.queryStringParams&&(n=lw(n,e.queryStringParams));var i=uP({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(i["Content-Type"]="application/json");var s=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,a=uP({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:i},hP?{}:s),c=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{dP(n,a,o,c)}catch(u){if(!s||Object.keys(s).length===0||!u.message||u.message.indexOf("not implemented")<0)return o(u);try{Object.keys(s).forEach(function(d){delete a[d]}),dP(n,a,o,c),hP=!0}catch(d){o(d)}}},zle=function(e,n,r,o){r&&Fc(r)==="object"&&(r=lw("",r).slice(1)),e.queryStringParams&&(n=lw(n,e.queryStringParams));try{var i;Pf?i=new Pf:i=new Ev("MSXML2.XMLHTTP.3.0"),i.open(r?"POST":"GET",n,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,r&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var s=e.customHeaders;if(s=typeof s=="function"?s():s,s)for(var a in s)i.setRequestHeader(a,s[a]);i.onreadystatechange=function(){i.readyState>3&&o(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(r)}catch(c){console&&console.log(c)}},Vle=function(e,n,r,o){if(typeof r=="function"&&(o=r,r=void 0),o=o||function(){},cs&&n.indexOf("file:")!==0)return Hle(e,n,r,o);if(OU()||typeof ActiveXObject=="function")return zle(e,n,r,o);o(new Error("No fetch and no xhr implementation found!"))};function Qu(t){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(t)}function fP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function _S(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(n),!0).forEach(function(r){DU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jU(r.key),r)}}function qle(t,e,n){return e&&Gle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function DU(t,e,n){return(e=jU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jU(t){var e=Kle(t,"string");return Qu(e)=="symbol"?e:e+""}function Kle(t,e){if(Qu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wle=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,o){return DU({},r,o||"")},parseLoadPayload:function(n,r){},request:Vle,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},UU=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};$le(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return qle(t,[{key:"init",value:function(n){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=_S(_S(_S({},Wle()),this.options||{}),o),this.allOptions=i,this.services&&this.options.reloadInterval){var s=setInterval(function(){return r.reload()},this.options.reloadInterval);Qu(s)==="object"&&typeof s.unref=="function"&&s.unref()}}},{key:"readMulti",value:function(n,r,o){this._readAny(n,n,r,r,o)}},{key:"read",value:function(n,r,o){this._readAny([n],n,[r],r,o)}},{key:"_readAny",value:function(n,r,o,i,s){var a=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(n,o)),c=Lle(c),c.then(function(u){if(!u)return s(null,{});var d=a.services.interpolator.interpolate(u,{lng:n.join("+"),ns:o.join("+")});a.loadUrl(d,s,r,i)})}},{key:"loadUrl",value:function(n,r,o,i){var s=this,a=typeof o=="string"?[o]:o,c=typeof i=="string"?[i]:i,u=this.options.parseLoadPayload(a,c);this.options.request(this.options,n,u,function(d,f){if(f&&(f.status>=500&&f.status<600||!f.status))return r("failed loading "+n+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return r("failed loading "+n+"; status code: "+f.status,!1);if(!f&&d&&d.message){var p=d.message.toLowerCase(),g=["failed","fetch","network","load"].find(function(b){return p.indexOf(b)>-1});if(g)return r("failed loading "+n+": "+d.message,!0)}if(d)return r(d,!1);var v,y;try{typeof f.data=="string"?v=s.options.parse(f.data,o,i):v=f.data}catch{y="failed parsing "+n+" to json"}if(y)return r(y,!1);r(null,v)})}},{key:"create",value:function(n,r,o,i,s){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var c=this.options.parsePayload(r,o,i),u=0,d=[],f=[];n.forEach(function(p){var g=a.options.addPath;typeof a.options.addPath=="function"&&(g=a.options.addPath(p,r));var v=a.services.interpolator.interpolate(g,{lng:p,ns:r});a.options.request(a.options,v,c,function(y,b){u+=1,d.push(y),f.push(b),u===n.length&&typeof s=="function"&&s(d,f)})})}}},{key:"reload",value:function(){var n=this,r=this.services,o=r.backendConnector,i=r.languageUtils,s=r.logger,a=o.language;if(!(a&&a.toLowerCase()==="cimode")){var c=[],u=function(f){var p=i.toResolveHierarchy(f);p.forEach(function(g){c.indexOf(g)<0&&c.push(g)})};u(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(d){return u(d)}),c.forEach(function(d){n.allOptions.ns.forEach(function(f){o.read(d,f,"read",null,null,function(p,g){p&&s.warn("loading namespace ".concat(f," for language ").concat(d," failed"),p),!p&&g&&s.log("loaded namespace ".concat(f," for language ").concat(d),g),o.loaded("".concat(d,"|").concat(f),p,g)})})})}}}])}();UU.type="backend";const uw=[{name:"Arabic",i18nCode:"ar",direction:"rtl"},{name:"Basque",i18nCode:"eu",direction:"ltr"},{name:"Bengali",i18nCode:"bn-IN",direction:"ltr"},{name:"Bulgarian",i18nCode:"bg",direction:"ltr"},{name:"Catalan",i18nCode:"ca",direction:"ltr"},{name:"Chinese (Simplified)",i18nCode:"zh-Hans",direction:"ltr"},{name:"Chinese (Traditional)",i18nCode:"zh-Hant",direction:"ltr"},{name:"Croatian",i18nCode:"hr",direction:"ltr"},{name:"Czech",i18nCode:"cs",direction:"ltr"},{name:"Danish",i18nCode:"da",direction:"ltr"},{name:"Dutch",i18nCode:"nl",direction:"ltr"},{name:"English",i18nCode:"en-US",direction:"ltr"},{name:"English (United Kingdom)",i18nCode:"en-GB",direction:"ltr"},{name:"Estonian",i18nCode:"et",direction:"ltr"},{name:"Finnish",i18nCode:"fi",direction:"ltr"},{name:"French",i18nCode:"fr",direction:"ltr"},{name:"Galician",i18nCode:"gl",direction:"ltr"},{name:"German",i18nCode:"de",direction:"ltr"},{name:"Gujarati",i18nCode:"gu",direction:"ltr"},{name:"Hebrew",i18nCode:"he",direction:"rtl"},{name:"Hindi",i18nCode:"hi",direction:"ltr"},{name:"Hungarian",i18nCode:"hu",direction:"ltr"},{name:"Icelandic",i18nCode:"is",direction:"ltr"},{name:"Indonesian",i18nCode:"id",direction:"ltr"},{name:"Italian",i18nCode:"it",direction:"ltr"},{name:"Japanese",i18nCode:"ja",direction:"ltr"},{name:"Kannada",i18nCode:"kn",direction:"ltr"},{name:"Korean",i18nCode:"ko",direction:"ltr"},{name:"Latvian",i18nCode:"lv",direction:"ltr"},{name:"Lithuanian",i18nCode:"lt",direction:"ltr"},{name:"Malay",i18nCode:"ms",direction:"ltr"},{name:"Malayalam",i18nCode:"ml",direction:"ltr"},{name:"Marathi",i18nCode:"mr",direction:"ltr"},{name:"Norwegian (Bokmål)",i18nCode:"nb-NO",direction:"ltr"},{name:"Polish",i18nCode:"pl",direction:"ltr"},{name:"Portuguese (Brazil)",i18nCode:"pt-BR",direction:"ltr"},{name:"Portuguese (Portugal)",i18nCode:"pt-PT",direction:"ltr"},{name:"Punjabi",i18nCode:"pa",direction:"ltr"},{name:"Romanian",i18nCode:"ro",direction:"ltr"},{name:"Russian",i18nCode:"ru",direction:"ltr"},{name:"Serbian (Latin)",i18nCode:"sr-Latn-RS",direction:"ltr"},{name:"Slovak",i18nCode:"sk",direction:"ltr"},{name:"Slovenian",i18nCode:"sl",direction:"ltr"},{name:"Spanish",i18nCode:"es",direction:"ltr"},{name:"Swedish",i18nCode:"sv",direction:"ltr"},{name:"Tamil",i18nCode:"ta",direction:"ltr"},{name:"Telugu",i18nCode:"te",direction:"ltr"},{name:"Thai",i18nCode:"th",direction:"ltr"},{name:"Turkish",i18nCode:"tr",direction:"ltr"},{name:"Ukrainian",i18nCode:"uk",direction:"ltr"},{name:"Vietnamese",i18nCode:"vi",direction:"ltr"}],FU=uw.map(t=>t.i18nCode);function pP(t){return wv(t)[0]??t}async function BU(t={}){let e;return be.instance().config().useI18nHttpApi?e=It.use(aw).use(yk).use(UU).init({supportedLngs:uw.map(({i18nCode:n})=>n),fallbackLng:wv,detection:{convertDetectedLanguage:pP,...t},interpolation:{escapeValue:!1}}).then(async n=>(await mP(It.language),n)):e=It.use(aw).use(yk).init({supportedLngs:uw.map(({i18nCode:n})=>n),fallbackLng:wv,detection:{convertDetectedLanguage:pP,...t},interpolation:{escapeValue:!1}}).then(async n=>(await mP(It.language),n)),It.on("languageChanged",n=>{typeof document<"u"&&(document.body.dir=It.dir(n.toLowerCase()),document.documentElement.lang=n.toLowerCase())}),e}async function mP(t){t&&(await Promise.all(wv(t).map(async e=>{try{const n=await Cle(Object.assign({"../../config/strings/af/strings.json":()=>q(()=>import("./strings-DhvILifF.js"),[]),"../../config/strings/am/strings.json":()=>q(()=>import("./strings-Dv7u5ryG.js"),[]),"../../config/strings/ar/strings.json":()=>q(()=>import("./strings-BVFMpItv.js"),[]),"../../config/strings/as/strings.json":()=>q(()=>import("./strings-4f4LQ42c.js"),[]),"../../config/strings/az/strings.json":()=>q(()=>import("./strings-d-Py7GOB.js"),[]),"../../config/strings/bg/strings.json":()=>q(()=>import("./strings-IJoPPVhm.js"),[]),"../../config/strings/bn-IN/strings.json":()=>q(()=>import("./strings-ZDu0ZxMP.js"),[]),"../../config/strings/bs/strings.json":()=>q(()=>import("./strings-DQMp-mOL.js"),[]),"../../config/strings/ca-Es-VALENCIA/strings.json":()=>q(()=>import("./strings-pQqmFK1h.js"),[]),"../../config/strings/ca/strings.json":()=>q(()=>import("./strings-tOI40kBO.js"),[]),"../../config/strings/cs/strings.json":()=>q(()=>import("./strings-C1bZjVte.js"),[]),"../../config/strings/cy/strings.json":()=>q(()=>import("./strings-BkcRjKBH.js"),[]),"../../config/strings/da/strings.json":()=>q(()=>import("./strings-F8HXRaTD.js"),[]),"../../config/strings/de/strings.json":()=>q(()=>import("./strings-BGsTf52f.js"),[]),"../../config/strings/el/strings.json":()=>q(()=>import("./strings-CJU2c-HK.js"),[]),"../../config/strings/en-GB/strings.json":()=>q(()=>import("./strings-Zti9AbSr.js"),[]),"../../config/strings/en-US/strings.json":()=>q(()=>import("./strings-yimdWa1U.js"),[]),"../../config/strings/es-MX/strings.json":()=>q(()=>import("./strings-hBgWWC-Z.js"),[]),"../../config/strings/es/strings.json":()=>q(()=>import("./strings-Czp0FG3A.js"),[]),"../../config/strings/et/strings.json":()=>q(()=>import("./strings-B-TLHNiU.js"),[]),"../../config/strings/eu/strings.json":()=>q(()=>import("./strings-C6zs-5f5.js"),[]),"../../config/strings/fa/strings.json":()=>q(()=>import("./strings-MfNB6Tbl.js"),[]),"../../config/strings/fi/strings.json":()=>q(()=>import("./strings-CmQ1NudI.js"),[]),"../../config/strings/fil/strings.json":()=>q(()=>import("./strings-C_LRu5Br.js"),[]),"../../config/strings/fr-CA/strings.json":()=>q(()=>import("./strings-D-8fwxUV.js"),[]),"../../config/strings/fr/strings.json":()=>q(()=>import("./strings-bw_3aUwK.js"),[]),"../../config/strings/ga/strings.json":()=>q(()=>import("./strings-CG9tQBHh.js"),[]),"../../config/strings/gd/strings.json":()=>q(()=>import("./strings-CCdF5c5C.js"),[]),"../../config/strings/gl/strings.json":()=>q(()=>import("./strings-D3Nc-BhL.js"),[]),"../../config/strings/gu/strings.json":()=>q(()=>import("./strings-BT_YUhv_.js"),[]),"../../config/strings/he/strings.json":()=>q(()=>import("./strings-_aewtWc9.js"),[]),"../../config/strings/hi/strings.json":()=>q(()=>import("./strings-DniFcIYA.js"),[]),"../../config/strings/hr/strings.json":()=>q(()=>import("./strings-BXbq3Z6d.js"),[]),"../../config/strings/hu/strings.json":()=>q(()=>import("./strings-BqD6qUhi.js"),[]),"../../config/strings/hy/strings.json":()=>q(()=>import("./strings-f4Sn55t6.js"),[]),"../../config/strings/id/strings.json":()=>q(()=>import("./strings-DZ18vu2L.js"),[]),"../../config/strings/is/strings.json":()=>q(()=>import("./strings-Q_7Vxs-x.js"),[]),"../../config/strings/it/strings.json":()=>q(()=>import("./strings-BReJXU0z.js"),[]),"../../config/strings/ja/strings.json":()=>q(()=>import("./strings-UKaxZbnd.js"),[]),"../../config/strings/ka/strings.json":()=>q(()=>import("./strings-CI40A5QO.js"),[]),"../../config/strings/kk/strings.json":()=>q(()=>import("./strings-B1SuNKlD.js"),[]),"../../config/strings/km-KH/strings.json":()=>q(()=>import("./strings-C6BJD4yT.js"),[]),"../../config/strings/kn/strings.json":()=>q(()=>import("./strings-D3O3Aiuo.js"),[]),"../../config/strings/ko/strings.json":()=>q(()=>import("./strings-CspAOqSk.js"),[]),"../../config/strings/kok/strings.json":()=>q(()=>import("./strings-DfPYQZZt.js"),[]),"../../config/strings/lb/strings.json":()=>q(()=>import("./strings-DB6t7py6.js"),[]),"../../config/strings/lo/strings.json":()=>q(()=>import("./strings-CbZJZnS4.js"),[]),"../../config/strings/lt/strings.json":()=>q(()=>import("./strings-CCG9NANK.js"),[]),"../../config/strings/lv/strings.json":()=>q(()=>import("./strings-B1hUF7o9.js"),[]),"../../config/strings/mi/strings.json":()=>q(()=>import("./strings-CJZdVXTU.js"),[]),"../../config/strings/mk/strings.json":()=>q(()=>import("./strings-MlqtWZyW.js"),[]),"../../config/strings/ml/strings.json":()=>q(()=>import("./strings-DmjUFS4l.js"),[]),"../../config/strings/mr/strings.json":()=>q(()=>import("./strings-B29AxrV8.js"),[]),"../../config/strings/ms/strings.json":()=>q(()=>import("./strings-SSpJEmHu.js"),[]),"../../config/strings/mt/strings.json":()=>q(()=>import("./strings-CVpYXOkD.js"),[]),"../../config/strings/nb-NO/strings.json":()=>q(()=>import("./strings-Bub6I0N3.js"),[]),"../../config/strings/ne/strings.json":()=>q(()=>import("./strings-BBOCJ1fw.js"),[]),"../../config/strings/nl/strings.json":()=>q(()=>import("./strings-BHgjSLlz.js"),[]),"../../config/strings/nn-NO/strings.json":()=>q(()=>import("./strings-H6q2HnjK.js"),[]),"../../config/strings/or/strings.json":()=>q(()=>import("./strings-MJD1VeoL.js"),[]),"../../config/strings/pa/strings.json":()=>q(()=>import("./strings-kfzrKLLm.js"),[]),"../../config/strings/pl/strings.json":()=>q(()=>import("./strings-B25E8si8.js"),[]),"../../config/strings/pt-BR/strings.json":()=>q(()=>import("./strings-C19palDS.js"),[]),"../../config/strings/pt-PT/strings.json":()=>q(()=>import("./strings-B4NrfDlE.js"),[]),"../../config/strings/quz/strings.json":()=>q(()=>import("./strings-hrJUeBQi.js"),[]),"../../config/strings/ro/strings.json":()=>q(()=>import("./strings-Cmuwio8j.js"),[]),"../../config/strings/ru/strings.json":()=>q(()=>import("./strings-C8QR9q7I.js"),[]),"../../config/strings/sk/strings.json":()=>q(()=>import("./strings-BGT3lZNV.js"),[]),"../../config/strings/sl/strings.json":()=>q(()=>import("./strings-BetJ44Kp.js"),[]),"../../config/strings/sq/strings.json":()=>q(()=>import("./strings-Br-g-Y8c.js"),[]),"../../config/strings/sr-Cyrl-BA/strings.json":()=>q(()=>import("./strings-BXRfKHT0.js"),[]),"../../config/strings/sr-Cyrl-RS/strings.json":()=>q(()=>import("./strings-CaOBCmVI.js"),[]),"../../config/strings/sr-Latn-RS/strings.json":()=>q(()=>import("./strings-CEvdpHBj.js"),[]),"../../config/strings/sv/strings.json":()=>q(()=>import("./strings-BX20I8I6.js"),[]),"../../config/strings/ta/strings.json":()=>q(()=>import("./strings-3Auct9vP.js"),[]),"../../config/strings/te/strings.json":()=>q(()=>import("./strings-ks5722tW.js"),[]),"../../config/strings/th/strings.json":()=>q(()=>import("./strings-D9O3nN_J.js"),[]),"../../config/strings/tr/strings.json":()=>q(()=>import("./strings-C9CRkB7L.js"),[]),"../../config/strings/tt/strings.json":()=>q(()=>import("./strings-96KSrkK9.js"),[]),"../../config/strings/ug/strings.json":()=>q(()=>import("./strings-CSWf7eP2.js"),[]),"../../config/strings/uk/strings.json":()=>q(()=>import("./strings-Cz93Faj7.js"),[]),"../../config/strings/ur/strings.json":()=>q(()=>import("./strings-BxDPO1-6.js"),[]),"../../config/strings/uz-Latn-UZ/strings.json":()=>q(()=>import("./strings-CS-qwMJj.js"),[]),"../../config/strings/vi/strings.json":()=>q(()=>import("./strings-ztMiB9FK.js"),[]),"../../config/strings/zh-Hans/strings.json":()=>q(()=>import("./strings-CnI4vMEN.js"),[]),"../../config/strings/zh-Hant/strings.json":()=>q(()=>import("./strings-Cp85sQA1.js"),[])}),`../../config/strings/${e}/strings.json`,6);It.addResourceBundle(e,"translation",n,!0,!0)}catch{console.warn(`Translation file for '${e}' not found.`)}})),await It.changeLanguage(t))}function wv(t){const e="en-US";if(!t)return[e];const n=Yle(t),r=Qle(t),o=Jle(t);return[n,r,o,e].filter(i=>!!i).filter((i,s,a)=>a.indexOf(i)===s)}function Yle(t){return FU.find(e=>e.toLowerCase()===t.toLowerCase())}function Qle(t){if(["en-AU","en-NZ","en-IE"].includes(t))return"en-GB";if(t.startsWith("zh-")){const e=t.toLocaleLowerCase();return e==="zh-TW".toLocaleLowerCase()||e==="zh-HK".toLocaleLowerCase()?"zh-Hant":"zh-Hans"}}function Jle(t){var n;const e=(n=t.split("-")[0])==null?void 0:n.toLowerCase();if(e){const r=FU.find(o=>o.toLowerCase()===e||o.toLowerCase().startsWith(`${e}-`));if(r)return r}}async function Xle(t){try{return(await Fn(`/conversations/${t}/history`,mL,{analytics:{anonymousPath:"/conversations/*/history"}}).then(n=>n.data)).results.length>0}catch{return!1}}async function Zle(t){const{conversationIdFromUrl:e,conversationIdFromStart:n}=t;return e&&e!=="new"&&await Xle(e)?{conversationId:e,isNew:!1}:n?{conversationId:n,isNew:!0}:{conversationId:null,isNew:!0}}async function eue(t){const{pathname:e,conversationIdFromUrl:n,conversationFromUrlExists:r,urlPrompt:o,features:i,isBanned:s,enablePageRedirect:a,deepLinkTarget:c,search:u}=t;if(!a||s||navigator.userAgent.toLowerCase().includes("googlebot")&&e==="/")return null;if(o||n==="new")return{to:c==="audioCall"?"/chats/$conversationId/talk":"/chats/$conversationId",from:e,needsConversationId:!0};if(e.startsWith("/shares"))return e.startsWith("/shares/pages")?i.includes("pages")&&!i.includes("kill-shared-page")?null:Vn(e):i.includes("kill-share-conversation")?Vn(e):null;if(e.startsWith("/campaigns"))if(e.startsWith("/campaigns/gallery")){if(!i.includes("share-campaign-gallery"))return Vn(e)}else if(e.startsWith("/campaigns/image-expression-tool")){if(!i.includes("gallery-expression-tool"))return Vn(e)}else return i.includes("share-campaign")?null:Vn(e);if(["/pro/subscribe","/pro/ewallet/return"].includes(e)||e==="/fang")return null;if(e.startsWith("/referrals")&&!i.includes("user-referral")||e.startsWith("/subscription")&&!i.includes("cmc-m365-sku"))return Vn(e);if(e.startsWith("/memory/narrative"))return i.includes("memory-narrative")?null:Vn(e);if(e.endsWith("/talk"))return e.startsWith("/portrait/talk")?{from:e,to:"/portrait",needsConversationId:!1}:Vn(e);if(e.startsWith("/chats")&&!r)return Vn(e);if(e.startsWith("/pages"))return i.includes("pages")?null:Vn(e);if(e.startsWith("/portrait")&&!i.includes("labs-portrait-enabled")||e.startsWith("/labs")&&(e.startsWith("/labs/experiments")&&e.startsWith("/labs/experiments/3d-generations")&&!i.includes("labs-3d-generations")||!i.includes("labs-landing"))||e.startsWith("/login"))return Vn(e);if(e.startsWith("/podcasts"))return e.startsWith("/podcasts/user")||e.startsWith("/podcasts/public")?null:Vn(e);if(e.includes("/w/landing"))return i.includes("cmc-landing")?null:Vn(e);if(e==="/"){if(i.includes("start-in-voice"))return null;const d=u==null?void 0:u.get("back");return tue(d)&&be.instance().config().redirectBackEnabled?{from:"/login",to:new URL(d).pathname,needsConversationId:!1}:Vn(e)}return null}function tue(t){if(!t)return!1;try{if(new URL(t).origin===window.location.origin)return!0;throw new Error("Invalid redirect URL: not from same origin")}catch{throw new Error("Invalid redirect URL, malformed URL")}}function Vn(t){return be.instance().config().neverStartInChat?{from:t,to:"/"}:{from:t,to:"/chats/$conversationId",needsConversationId:!0}}function nue(){try{const{timeZone:t}=Intl.DateTimeFormat().resolvedOptions();return t}catch{return}}function j_(t){if(!t)return null;let e=null;const n=new Date(t).toISOString(),r=new Date().toISOString(),o=kz(n,r,{roundingMethod:"ceil"});return o>24?e="permanent":o>1&&o<=24?e="24-hr":o>0&&o<=1&&(e="1-hr"),e}function U_(t,e,n){if(!t){ro(RE);return}const r=st();K.trackEvent({name:"system",data:{eventName:"copilotUserBan",eventInfo_banDuration:t,eventInfo_banSource:e,eventInfo_banExpiryTimestamp:n}}),r.set(PL,t),r.set(hf,"user-banned")}const rue=HV();async function oue(t){let e=Wo("sessionId");const n=Wo("referralCode");!e&&n&&(e=crypto.randomUUID(),sa("sessionId",e));const r=vle(),o={timeZone:nue(),startNewConversation:!0,teenSupportEnabled:!0,deviceFingerprint:e??void 0,referralCode:n??void 0,correctPersonalizationSetting:!0,performUserMerge:r},i={};rue&&(i.overrideFeatures="1");const{data:s,response:a,zodError:c}=await Fn(t,JW,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},parseOptions:{safe:!0},query:i});if(Zv.trackClientExperimentationAssignment(a.headers),a.status===U2)throw new Error(vT);if(c)throw c;return s}function HU(){const{i18n:t}=Fe(),{showBoundary:e}=e2(),n=Te(hf),r=Te(c2),o=Te(In),i=Te(bc),s=Te(mt),a=Te(OL),c=Te(TU),u=co(),[d]=Qy(),f=Wt(),p=m.useRef(f);p.current=f;const g=$w({strict:!1}),v=m.useRef(g);v.current=g;const y=m.useRef(MV()),b=D(pp),C=m.useRef(b);C.current=b;const S=m.useRef(!0),w=m.useRef(!1),{trigger:E}=hT("/start",oue);return m.useCallback(async T=>{var j;if(!t.language||w.current)return!1;w.current=!0;const I=ele(),{enablePageRedirect:A,overwriteData:_}=T;try{const{isNewUser:R,banExpiresAt:$,remainingTurns:U,features:se,currentConversationId:P,allowBeta:k}=await E();await BU(),Kt.emit("app:start-complete"),K.setFeatures(se),K.setIsNewUser(R),sw({isNewUser:R.toString()});const N=bU({featureOverrides:[],localFeatureOverrides:CU(),serverFeatures:se,surfaceConfig:be.instance().config()});N.includes("eager-msal")&&(Ei(OE,l.boolean(),!0),N.includes("msal-silent-sso")&&Ei(CL,l.boolean(),!0)),N.includes("kill-eager-msal")&&ro(OE),N.includes("auth-module-refactor")?Ei(DE,l.boolean(),!0):ro(DE),be.instance().config().useMSALPwBApp&&(N.includes("cmc-msal-pwb")?Ei(jE,l.boolean(),!0):ro(jE));const x=j_($),M=await Zle({conversationIdFromUrl:v.current.conversationId,conversationIdFromStart:P});let{conversationId:te}=M;if(!te){const{id:Q}=await AU("/conversations");te=Q}const Y=await eue({pathname:p.current,conversationIdFromUrl:v.current.conversationId,conversationFromUrlExists:v.current.conversationId===te,urlPrompt:((j=C.current)==null?void 0:j.prompt)??null,features:N,enablePageRedirect:A,isBanned:!!x,deepLinkTarget:d,search:new URLSearchParams(window.location.search)});o(Q=>{if(!_&&Q.size>0)return Q;const ee=new Map([[te,{id:te,updatedAt:new Date().toISOString(),history:[],isNew:M.isNew,characterId:null,streamingState:"idle",continuedAt:null}]]);return!M.isNew&&P&&ee.set(P,{id:P,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:null,streamingState:"idle",continuedAt:null}),ee}),s(Q=>Q&&!_?Q:te),r(Q=>Q.length>0&&!_?Q:N),i(U),a(R),c(k??!1),U_(x,"start",$),S.current&&(S.current=!1,Y&&await u({...Y,params:Y.needsConversationId?{conversationId:te}:{},search:y.current}))}catch(R){if(K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"StartEndpointError",eventInfo_errorMessage:R instanceof Error?R.message:"",eventInfo_details:R instanceof Error?R.stack??"":""}}),R instanceof Error&&R.message===vT)return n("age-verification"),!0;console.error(R),e(R)}finally{yle(!1)}return!0},[E,o,s,n,r,i,a,c,u,t.language,e,d])}const gP=Gc.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),AS={dedupe:!0},iue=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[g,v,y,b]=bo.get(r),[C,S]=us(t),w=m.useRef(!1),E=m.useRef(!1),T=m.useRef(C),I=m.useRef(e),A=m.useRef(n),_=()=>A.current,j=()=>_().isVisible()&&_().isOnline(),[R,$,U,se]=fi(r,C),P=m.useRef({}).current,k=De(s)?n.fallback[C]:s,N=(H,ae)=>{for(const Ee in P){const L=Ee;if(L==="data"){if(!o(H[L],ae[L])&&(!De(H[L])||!o(fe,ae[L])))return!1}else if(ae[L]!==H[L])return!1}return!0},x=m.useMemo(()=>{const H=!C||!e?!1:De(a)?_().isPaused()||i?!1:De(c)?!0:c:a,ae=ge=>{const He=no(ge);return delete He._k,H?{isValidating:!0,isLoading:!0,...He}:He},Ee=R(),L=se(),de=ae(Ee),Se=Ee===L?de:ae(L);let ie=de;return[()=>{const ge=ae(R());return N(ge,ie)?(ie.data=ge.data,ie.isLoading=ge.isLoading,ie.isValidating=ge.isValidating,ie.error=ge.error,ie):(ie=ge,ge)},()=>Se]},[r,C]),M=$v.useSyncExternalStore(m.useCallback(H=>U(C,(ae,Ee)=>{N(Ee,ae)||H()}),[r,C]),x[0],x[1]),te=!w.current,Y=g[C]&&g[C].length>0,Q=M.data,ee=De(Q)?k:Q,oe=M.error,Ce=m.useRef(ee),fe=p?De(Q)?Ce.current:Q:ee,Pe=Y&&!De(oe)?!1:te&&!De(a)?a:_().isPaused()?!1:i?De(ee)?!1:c:De(ee)||c,ze=!!(C&&e&&te&&Pe),nt=De(M.isValidating)?ze:M.isValidating,J=De(M.isLoading)?ze:M.isLoading,pe=m.useCallback(async H=>{const ae=I.current;if(!C||!ae||E.current||_().isPaused())return!1;let Ee,L,de=!0;const Se=H||{},ie=!y[C]||!Se.dedupe,ge=()=>gc?!E.current&&C===T.current&&w.current:C===T.current,He={isValidating:!1,isLoading:!1},Xe=()=>{$(He)},ct=()=>{const je=y[C];je&&je[1]===L&&delete y[C]},lt={isValidating:!0};De(R().data)&&(lt.isLoading=!0);try{if(ie&&($(lt),n.loadingTimeout&&De(R().data)&&setTimeout(()=>{de&&ge()&&_().onLoadingSlow(C,n)},n.loadingTimeout),y[C]=[ae(S),vc()]),[Ee,L]=y[C],Ee=await Ee,ie&&setTimeout(ct,n.dedupingInterval),!y[C]||y[C][1]!==L)return ie&&ge()&&_().onDiscarded(C),!1;He.error=un;const je=v[C];if(!De(je)&&(L<=je[0]||L<=je[1]||je[1]===0))return Xe(),ie&&ge()&&_().onDiscarded(C),!1;const Qe=R().data;He.data=o(Qe,Ee)?Qe:Ee,ie&&ge()&&_().onSuccess(Ee,C,n)}catch(je){ct();const Qe=_(),{shouldRetryOnError:dt}=Qe;Qe.isPaused()||(He.error=je,ie&&ge()&&(Qe.onError(je,C,Qe),(dt===!0||Er(dt)&&dt(je))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||j())&&Qe.onErrorRetry(je,C,Qe,Ut=>{const Ft=g[C];Ft&&Ft[0]&&Ft[0](wr.ERROR_REVALIDATE_EVENT,Ut)},{retryCount:(Se.retryCount||0)+1,dedupe:!0})))}return de=!1,Xe(),!0},[C,r]),X=m.useCallback((...H)=>qv(r,T.current,...H),[]);if(To(()=>{I.current=e,A.current=n,De(Q)||(Ce.current=Q)}),To(()=>{if(!C)return;const H=pe.bind(un,AS);let ae=0;const L=dT(C,g,(de,Se={})=>{if(de==wr.FOCUS_EVENT){const ie=Date.now();_().revalidateOnFocus&&ie>ae&&j()&&(ae=ie+_().focusThrottleInterval,H())}else if(de==wr.RECONNECT_EVENT)_().revalidateOnReconnect&&j()&&H();else{if(de==wr.MUTATE_EVENT)return pe();if(de==wr.ERROR_REVALIDATE_EVENT)return pe(Se)}});return E.current=!1,T.current=C,w.current=!0,$({_k:S}),Pe&&(De(ee)||ls?H():aT(H)),()=>{E.current=!0,L()}},[C]),To(()=>{let H;function ae(){const L=Er(u)?u(R().data):u;L&&H!==-1&&(H=setTimeout(Ee,L))}function Ee(){!R().error&&(d||_().isVisible())&&(f||_().isOnline())?pe(AS).then(ae):ae()}return ae(),()=>{H&&(clearTimeout(H),H=-1)}},[u,d,f,C]),m.useDebugValue(fe),i&&De(ee)&&C){if(!gc&&ls)throw new Error("Fallback data is required when using suspense in SSR.");I.current=e,A.current=n,E.current=!1;const H=b[C];if(!De(H)){const ae=X(H);gP(ae)}if(De(oe)){const ae=pe(AS);De(fe)||(ae.status="fulfilled",ae.value=!0),gP(ae)}else throw oe}return{mutate:X,get data(){return P.data=!0,fe},get error(){return P.error=!0,oe},get isValidating(){return P.isValidating=!0,nt},get isLoading(){return P.isLoading=!0,J}}},il=uT(iue);function sue(){const{cache:t,mutate:e}=lT(),n=m.useCallback(async()=>{for(const o of t.keys())await e(o,void 0,{revalidate:!1})},[t,e]),r=m.useCallback(async o=>{await e(o,void 0,{revalidate:!1})},[e]);return{clearAllSWRCache:n,clearOneSWRCache:r}}function aue(){ro(SL)}function Id(){const t=HU(),e=Wt(),n=co(),{clearAllSWRCache:r}=sue(),o=async a=>{const{provider:c,opts:u={},onAuthComplete:d,onAuthError:f}=a;await gs.instance().logIn(c,u).catch(p=>{console.error(p),f==null||f()})},i=async(a=!0)=>{await r(),aue(),gle(),await gs.instance().logOut().then(async()=>{a&&(await n({to:"/",from:e}),await t({enablePageRedirect:!1,overwriteData:!0}))})};return{login:o,logout:i,switchMicrosoftAccount:async()=>{await i(),await o({provider:"microsoft"})}}}function cue({accountActionRequired:t,onReload:e}){const{t:n}=Fe(),r=Kc(),{login:o}=Id(),{reason:i,provider:s,loginHint:a}=t,c=async p=>{at({source:"sessionExpired",scenario:"continueWithMicrosoftWithLoginHint",destination:"continueWithMicrosoftRedirect"}),hC({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"});const{msal:g}=await Sr.get();await g.acquireTokenRedirect({...oT,loginHint:p,account:g.getAccountByUsername(p)??void 0,prompt:void 0})},u=async()=>{if(i==="token-expired"&&t.provider==="microsoft"){const{msal:p}=await Sr.get();await p.clearCache()}},d=async(p,g)=>{await u();let v="";switch(p==="microsoft"?(v="MSA",hC({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"})):p==="auth0"&&(v=(g==null?void 0:g.connection)==="apple"?"Apple":"Google",hC({authWorkflowAccountType:(g==null?void 0:g.connection)??"google",apiName:Bo.REAUTH_START})),at({source:"sessionExpired",scenario:`continueWith${v}`,destination:`continueWith${v}Redirect`}),p){case"microsoft":o({provider:p});break;case"auth0":o({provider:p,opts:g});break}},f=async()=>{Sn({source:"signin",scenario:"sessionExpired"}),await u(),o({provider:"microsoft"})};return h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.sessionExpired")}),h.jsx("p",{className:"pb-7",children:n("authentication.sessionExpiredMessage")}),i==="token-expired"&&s==="microsoft"&&a&&h.jsx(Ue,{onClick:()=>c(a),title:`${n("signInPrompt.continueAs",{name:a})}`,variant:"pill",size:"48-lg",className:"w-full",children:`${n("signInPrompt.continueAs",{name:a})}`}),r?h.jsxs(h.Fragment,{children:[h.jsxs(Ue,{onClick:()=>d("microsoft"),title:n("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[h.jsx(Vv,{className:"size-6"}),n("signInPrompt.continueWithMicrosoft")]}),h.jsxs(Ue,{onClick:()=>d("auth0",{connection:"apple"}),title:n("signInPrompt.continueWithApple"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[h.jsx(nT,{className:"size-6 text-black dark:text-white"}),n("signInPrompt.continueWithApple")]}),h.jsxs(Ue,{onClick:()=>d("auth0",{connection:"google"}),title:n("signInPrompt.continueWithGoogle"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[h.jsx(rT,{className:"size-6"}),n("signInPrompt.continueWithGoogle")]})]}):h.jsx(Ue,{onClick:f,title:n("common.loginText"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:n("common.loginText")}),h.jsx(Ue,{onClick:e,title:n("signInPrompt.continueWithoutSignIn"),variant:"pill",color:"subtle-dimmed-inverted",size:"48-lg",className:"mt-3 w-full",children:n("signInPrompt.continueWithoutSignIn")})]})}function zU(t){try{return new URL(t,window.location.origin).origin!==window.location.origin}catch{return!1}}function eb(t){gt(id)&&zU(t)?st().set(xT,t.toString()):window.location.href=t}function tb(){lue()}function lue(t){const{surfaceQueryParam:e}=be.instance().config(),n=new URL(window.location.href);if(e)for(const[r,o]of Object.entries(e.params))n.searchParams.delete(r),n.searchParams.append(r,o);eb(n.href)}const nb={type:"spring",mass:2.8,stiffness:280,damping:40},uue={type:"spring",mass:1.8,stiffness:320,damping:40},Yke={type:"spring",mass:1.8,stiffness:440,damping:40},dw={type:"spring",mass:1.4,stiffness:320,damping:40},VU={type:"spring",mass:1,stiffness:1200,damping:40},$U={type:"spring",mass:1.8,stiffness:640,damping:40},Qke={type:"spring",mass:3.2,stiffness:640,damping:40},xo={type:"spring",mass:1,stiffness:280,damping:40},vP={duration:1.2,ease:"easeInOut",repeat:3,repeatType:"reverse",type:"tween"},GU=.2,qU=.25,due=1.5,hue=[.16,1,.3,1];function fue(t,e){const{children:n,id:r,role:o,className:i,mode:s="wait",duration:a=_o.default,exitDuration:c=_o.default,exitDelay:u=0,delay:d=0,delayChildren:f=0,onAnimationComplete:p,"data-testid":g,initial:v="initial"}=t;return h.jsx(Tn,{mode:s,children:n&&h.jsx(xe.div,{animate:"animate",exit:"exit",ref:e,role:o,initial:v,variants:{initial:rt,animate:Ot,exit:{...rt,transition:{duration:c,delay:u}}},transition:{duration:a,ease:"easeInOut",delay:d,delayChildren:f},className:i,onAnimationComplete:p,"data-testid":g,children:n},r)})}const xn=m.forwardRef(fue),mp=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M4.20889 10.7327C3.9232 11.0326 3.93475 11.5074 4.23467 11.7931C4.5346 12.0788 5.00933 12.0672 5.29502 11.7673L11.2495 5.516V20.25C11.2495 20.6642 11.5853 21 11.9995 21C12.4137 21 12.7495 20.6642 12.7495 20.25V5.51565L18.7043 11.7673C18.99 12.0672 19.4648 12.0788 19.7647 11.7931C20.0646 11.5074 20.0762 11.0326 19.7905 10.7327L12.7238 3.31379C12.5627 3.14474 12.3573 3.04477 12.1438 3.01386C12.0971 3.00477 12.0489 3 11.9995 3C11.9498 3 11.9012 3.00483 11.8543 3.01406C11.6412 3.04518 11.4363 3.14509 11.2756 3.31379L4.20889 10.7327Z"})),Jke=Object.freeze(Object.defineProperty({__proto__:null,default:mp},Symbol.toStringTag,{value:"Module"})),Io=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M4.39705 4.55379L4.46967 4.46967C4.73594 4.2034 5.1526 4.1792 5.44621 4.39705L5.53033 4.46967L12 10.939L18.4697 4.46967C18.7626 4.17678 19.2374 4.17678 19.5303 4.46967C19.8232 4.76256 19.8232 5.23744 19.5303 5.53033L13.061 12L19.5303 18.4697C19.7966 18.7359 19.8208 19.1526 19.6029 19.4462L19.5303 19.5303C19.2641 19.7966 18.8474 19.8208 18.5538 19.6029L18.4697 19.5303L12 13.061L5.53033 19.5303C5.23744 19.8232 4.76256 19.8232 4.46967 19.5303C4.17678 19.2374 4.17678 18.7626 4.46967 18.4697L10.939 12L4.46967 5.53033C4.2034 5.26406 4.1792 4.8474 4.39705 4.55379L4.46967 4.46967L4.39705 4.55379Z",fill:"currentColor"})),Xke=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"}));function F_(){const[t,e]=m.useState(document.body.dir==="rtl");return m.useEffect(()=>{const n=new MutationObserver(()=>{e(document.body.dir==="rtl")});return n.observe(document.body,{attributes:!0,attributeFilter:["dir"]}),()=>n.disconnect()},[]),t}const kS=_o.default,pa=m.forwardRef((t,e)=>{const{isOpen:n,onBack:r,headerText:o,children:i,onClose:s,className:a,disableCloseOutside:c,headerTextClassName:u,headerClassName:d,trapFocus:f=!1,variant:p="modal"}=t,{t:g}=Fe(),v=m.useId(),{modalAttributes:y}=zO({trapFocus:f,legacyTrapFocus:f,alwaysFocusable:f}),b=f?y:{},C=F_()?-1:1,S=I=>{(c??!s)||I.target===I.currentTarget&&s()},w=I=>{I.stopPropagation()},E=p==="drawer",T=E?{initial:{x:`${C*100}%`},animate:{x:0,transition:dw},exit:{x:`${C*100}%`,transition:{duration:kS}}}:void 0;return h.jsx(xn,{id:String(n),mode:"sync",duration:kS,exitDuration:kS,className:G("fixed inset-0",qt.modal),children:n&&h.jsxs("div",{...b,role:"dialog","aria-modal":"true","aria-labelledby":o?v:void 0,children:[h.jsx("div",{className:G("fixed inset-0 bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70",qt.modalBackground)}),h.jsx("div",{className:G("fixed inset-0 flex",E?"items-start justify-end":"items-center justify-center",qt.modal),onClick:S,children:h.jsxs(xe.div,{...T,className:bt("t-custom-scrollbar flex flex-col gap-3 border border-white/10 bg-background-150 p-6 shadow-xl dark:bg-background-250",E?"h-full w-80":"min-h-[150px] rounded-4xl",a),onClick:w,ref:I=>{typeof e=="function"?e(I):e&&(e.current=I)},children:[h.jsxs("div",{className:G("flex items-center justify-between gap-2",d),children:[r&&h.jsx(Ue,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.backText"),"aria-label":g("common.backText"),onClick:r,children:h.jsx(mp,{className:"size-5 -rotate-90"})}),o&&h.jsx("h2",{id:v,className:G("text-foreground-800 text-md-strong",u),children:o}),s&&h.jsx(Ue,{className:!r&&!o?"ms-auto":"",variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.closeText"),"aria-label":g("common.closeText"),onClick:s,children:h.jsx(Io,{className:"size-5"})})]}),i]})})]})})});pa.displayName="Modal";function KU(t){const{accountActionRequired:e}=t;return h.jsx(pa,{isOpen:!0,children:h.jsx(pue,{accountActionRequired:e})})}function pue(t){const{accountActionRequired:e}=t,{reason:n}=e;m.useEffect(()=>{K.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"shown",eventInfo_reason:n}})},[n]);const r=async()=>{if(K.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"reload",eventInfo_reason:n}}),n==="token-expired"&&e.provider==="microsoft"){const{msal:o}=await Sr.get();await o.clearCache()}tb()};return n==="login"||n==="logout"?h.jsx("div",{className:"flex max-w-72 flex-col items-center p-1 text-center",children:h.jsx(tH,{reason:n,onReload:r})}):h.jsx("div",{className:"flex max-w-96 flex-col items-center p-1 text-center",children:h.jsx(cue,{accountActionRequired:e,onReload:r})})}function B_(t,e){if(t){if(t.indexOf("-")!==-1)return t;if(e)return`${t}-${e}`}else if(e)return e;return"en-US"}const Bc=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{id:"Chevron"},m.createElement("path",{id:"Shape",d:"M8.46967 4.21967C8.17678 4.51256 8.17678 4.98744 8.46967 5.28033L15.1893 12L8.46967 18.7197C8.17678 19.0126 8.17678 19.4874 8.46967 19.7803C8.76256 20.0732 9.23744 20.0732 9.53033 19.7803L16.7803 12.5303C17.0732 12.2374 17.0732 11.7626 16.7803 11.4697L9.53033 4.21967C9.23744 3.92678 8.76256 3.92678 8.46967 4.21967Z",fill:"currentColor"}))),Zke=Object.freeze(Object.defineProperty({__proto__:null,default:Bc},Symbol.toStringTag,{value:"Module"})),mue={top:36,bottom:36,left:24,right:24};function pm(t){const{ariaLabelId:e,options:n,renderOption:r,onSelect:o,value:i,id:s,actionLabel:a,placeholder:c,className:u,menuClassName:d,expandIconClassName:f,disabled:p=!1,isValid:g=!0,supportsBrowserAutofill:v,supportsTypeahead:y=!1,autoComplete:b,boundary:C,padding:S=mue}=t,[w,E]=m.useState(!1),[T,I]=m.useState(null),A=n.findIndex(Pe=>Pe.key===i),_=m.useRef([]),j=m.useRef([]),R=m.useCallback(Pe=>{var nt;const ze=(nt=n[Pe])==null?void 0:nt.key;ze&&o(ze)},[o,n]),{refs:$,floatingStyles:U,context:se}=zf({placement:"bottom-start",strategy:"absolute",open:w,onOpenChange:E,whileElementsMounted:ed,middleware:[Vf({padding:S}),VO({boundary:C,apply({rects:Pe,elements:ze,availableHeight:nt}){Object.assign(ze.floating.style,{maxHeight:`${nt}px`,minWidth:`${Pe.reference.width}px`})},padding:S})]}),P=Gw(se,{event:"mousedown",enabled:!p}),k=qw(se),N=Kw(se,{role:"listbox"}),x=IB(se,{listRef:_,activeIndex:T,selectedIndex:A,onNavigate:I,loop:!0,focusItemOnHover:!1,openOnArrowKeyDown:!p}),M=_B(se,{enabled:y,listRef:j,activeIndex:T,onMatch:w?I:R}),{getReferenceProps:te,getFloatingProps:Y,getItemProps:Q}=Ww([k,N,x,P,M]),ee=m.useCallback(Pe=>{o(Pe),E(!1)},[o]),oe=A>-1?r(n[A]):h.jsx("div",{className:"truncate text-foreground-550 dark:text-slate-400",children:c}),Ce=m.useCallback(Pe=>{p||o(Pe.currentTarget.value)},[o,p]),fe=m.useRef(null);return h.jsxs(h.Fragment,{children:[v&&h.jsx("select",{"aria-hidden":!0,className:"hidden",onChange:Ce,autoComplete:b,disabled:p,children:n.map(Pe=>h.jsx("option",{value:Pe.key,children:Pe.text},Pe.key))}),h.jsxs("button",{role:"combobox",type:"button",id:s,ref:$.setReference,"aria-labelledby":e,"aria-autocomplete":"none","aria-invalid":!g,"aria-disabled":p,className:G("flex w-full cursor-pointer items-center justify-between gap-2 rounded-2xl bg-black/5 px-[1.125rem] py-4 dark:bg-midnight-550/25",u,p&&"pointer-events-none opacity-50"),...te(),children:[h.jsx("div",{className:"min-w-0",children:oe}),h.jsxs("div",{className:G("flex min-h-[26px] shrink-0 grow items-center justify-end gap-2",f),children:[a&&h.jsx("span",{children:a}),h.jsx(Bc,{className:"size-6 rotate-90"})]})]}),h.jsx("div",{ref:fe}),w&&h.jsx(Fv,{root:fe.current,children:h.jsx(Bv,{context:se,modal:!1,children:h.jsx("div",{ref:$.setFloating,style:U,className:G("flex overflow-hidden rounded-2xl shadow-md",d),...Y(),children:h.jsx("div",{className:G("flex w-full flex-col p-2",L7),children:h.jsx("div",{className:G("vertical-scrollbar overflow-y-auto py-1 pe-1"),children:n.map((Pe,ze)=>h.jsx("div",{ref:nt=>{_.current[ze]=nt,j.current[ze]=Pe.text},role:"option",tabIndex:ze===T?0:-1,"aria-selected":ze===A&&ze===T,className:"relative cursor-default rounded-xl px-3 py-2 -outline-offset-2 hover:bg-black/5 dark:hover:bg-white/8",...Q({onClick(){ee(Pe.key)},onKeyDown(nt){nt.key==="Enter"&&(nt.preventDefault(),ee(Pe.key))}}),children:r(Pe)},Pe.key))})})})})})]})}function yP(t){const{htmlFor:e,content:n,required:r,className:o,afterContent:i}=t;return h.jsxs("div",{className:"flex items-center",children:[h.jsxs("label",{htmlFor:e,className:G("flex items-center gap-0.5 text-foreground-900",o),children:[n,r&&h.jsx("span",{className:"text-system-red-550 dark:text-system-red-350",children:"*"})]}),i]})}function rb(){const t=Wt();return t==="/discover"||t==="/"}const bP={CLOSE_BUTTON:"closeButton",ONE_LINE_COMPOSER:"oneLineComposer"},_d=V();function gue(t){var e;Sn({source:"mediaViewerOpen",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type})}function vue(){var e,n;const t=H_();t&&Sn({source:"mediaViewerNext",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type,destination:(n=t.media[t.currentMediaIndex+1])==null?void 0:n.type})}function yue(){var e,n;const t=H_();t&&Sn({source:"mediaViewerPrevious",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type,destination:(n=t.media[t.currentMediaIndex-1])==null?void 0:n.type})}function bue(){var e;const t=H_();t&&Sn({source:"mediaViewerClose",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type})}function H_(){return st().get(_d)}const Cue=V();function WU(){const[t,e]=tt(Cue);return{isPictureInPictureOpen:ve("video-picture-in-picture")&&t!==void 0,openPictureInPicture:i=>{e(i),at({source:"mediaViewer",scenario:"PictureInPictureOpen"})},closePictureInPicture:()=>e(void 0)}}function zi(){var f;const[t,e]=tt(_d),{openPictureInPicture:n}=WU(),r=ve("video-picture-in-picture"),o=m.useCallback(()=>{const{onClose:p}=t??{};bue(),e(void 0),p==null||p()},[e,t]),i=m.useCallback(()=>{vue(),e(p=>{if(!p)return p;if(p.currentMediaIndex<p.media.length-1){const g=p.currentMediaIndex+1;return{...p,currentMediaIndex:g,isCurrentMediaLoading:xS(p.media[g])}}return p})},[e]),s=m.useCallback(()=>{yue(),e(p=>{if(!p)return p;if(p.currentMediaIndex>0){const g=p.currentMediaIndex-1;return{...p,currentMediaIndex:g,isCurrentMediaLoading:xS(p.media[g])}}return p})},[e]),a=m.useCallback(p=>{gue(p),e({...p,isCurrentMediaLoading:xS(p.media[p.currentMediaIndex])})},[e]),c=r&&((f=t==null?void 0:t.media[t.currentMediaIndex])==null?void 0:f.type)==="video",u=m.useCallback(()=>{var g;const p=t==null?void 0:t.media[t.currentMediaIndex];if(p&&p.type==="video"){const{player:v}=p;n({url:p.url,title:((g=p.source)==null?void 0:g.title)??"",startTime:(v==null?void 0:v.getCurrentTime())??0}),o()}},[t,n,o]),d=(t==null?void 0:t.contentComposerType)??bP.CLOSE_BUTTON;return m.useMemo(()=>({openMediaViewer:a,closeMediaViewer:o,isMediaViewerOpen:t!==void 0,next:i,previous:s,isPictureInPictureSupported:c,triggerPictureInPicture:u,contentComposerType:d,showOneLineComposerWhenMediaViewerOpen:d===bP.ONE_LINE_COMPOSER,contentPageType:t==null?void 0:t.contentPageType}),[a,o,t,i,s,c,u,d])}function xS(t){if(t&&"initLoading"in t)return t.initLoading}const CP="bg-gradient-discover-light dark:bg-gradient-discover-dark",Sue="bg-gradient-authentication-light dark:bg-gradient-authentication-dark";function Eue(t={}){const{forceGradient:e=!1,gradientType:n}=t,{isMediaViewerOpen:r,contentPageType:o}=zi(),i=rb(),s=Wt()==="/login",a=()=>e?!0:r&&o==="news"?!1:i||s,c=()=>n==="discover"?CP:n==="authentication"||s?Sue:CP;return{shouldShowGradient:a(),gradientClass:c()}}const SP="absolute size-full";function vs(t){const{isBottomFade:e,forceGradient:n,isFixed:r,overrideGradientType:o,customColor:i}=t,s=Wt(),{shouldShowGradient:a,gradientClass:c}=Eue({forceGradient:n,gradientType:o});return h.jsxs("div",{className:G(r?"fixed":"absolute",e?"-inset-x-4 bottom-0 h-dvh":"inset-0","overflow-hidden"),children:[h.jsx("div",{className:G(SP,"bg-none",i??"bg-background-150")}),h.jsx(Tn,{children:a&&h.jsx(xe.div,{className:G(SP,c),initial:"initial",animate:"animate",exit:"exit",variants:{initial:rt,animate:Ot,exit:rt},transition:nb},s)})]})}const YU=V([]);function QU(){var c;const[t,e]=tt(YU),n=m.useRef([]);m.useEffect(()=>{const u=n.current,d=t;if(u.length>d.length){const f=u.filter((g,v)=>v>=d.length),p=f.length;for(let g=p-1;g>=0;g-=1){const v=f[g];v!=null&&v.onPopPage&&v.onPopPage()}}n.current=t},[t]);const r=t.length>0?(c=t[t.length-1])==null?void 0:c.page:void 0,o=u=>i([u]),i=u=>{const d=u.map(f=>({page:f,onPopPage:void 0}));e(f=>[...f,...d])};return{currentPage:r,pushPage:o,pushPages:i,goBackOrClose:()=>{e(u=>u.length<=0?u:u.slice(0,-1))},closeSettings:()=>{e([])}}}function e1e(t,e){const n={page:t,onPopPage:e==null?void 0:e.onPopPageCallback};st().set(YU,r=>[...r,n])}const Nf="https://www.bing.com/new/termsofuse",Ju="https://go.microsoft.com/fwlink/?LinkId=521839",Tv="https://www.microsoft.com/microsoft-copilot/learn/?form=MG0AUO&OCID=MG0AUO#faqs",RS="hover:underline focus:underline";function EP(t){var e,n;return((n=(e=be.instance().config()).textOverrides)==null?void 0:n.call(e,t))??t}function t1e(t){const{component:e="link",buttonClassName:n}=t,r=D(mt),{pushPage:o}=QU(),i=(s,a)=>{Sn({source:"complianceLinks",scenario:s,conversationId:r,destination:a})};return h.jsx("div",{className:G("flex w-full flex-wrap justify-center gap-x-5 gap-y-1 text-black/80 text-2xs dark:text-white/80",e==="button"?"flex-col p-0":"px-5 py-2"),children:e==="link"?h.jsx(wue,{handleAnalytics:i}):h.jsx(Tue,{handleAnalytics:i,className:n??"",setPage:o})})}function wue(t){const{handleAnalytics:e}=t;return h.jsxs(h.Fragment,{children:[h.jsx(ta,{href:Ju,title:ce(EP("settings.privacyLink")),className:RS,onClick:()=>e("privacy",Ju),children:ce(EP("settings.privacyLink"))}),h.jsx(ta,{href:Nf,title:ce("settings.termsOfServiceLink"),className:RS,onClick:()=>e("terms",Nf),children:ce("settings.termsOfServiceLink")}),h.jsx(ta,{href:Tv,title:ce("settings.faqLink"),className:RS,onClick:()=>e("faq",Tv),children:ce("settings.faqLink")})]})}function Tue(t){const{handleAnalytics:e,className:n,setPage:r}=t,o=(i,s)=>{var d;e(i,s);const c=(d=be.instance().config().settingsOverrides)==null?void 0:d.shouldShowPolicyTermsQRCodes,u={privacy:"privacyStatement",terms:"terms",faq:"faq"};c&&i in u?r==null||r(u[i]):window.open(s,"_blank")};return h.jsxs(h.Fragment,{children:[h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ce("settings.privacyLink"),onClick:()=>o("privacy",Ju),children:h.jsx("span",{children:ce("settings.privacyLink")})}),h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ce("settings.termsOfServiceLink"),onClick:()=>o("terms",Nf),children:h.jsx("span",{children:ce("settings.termsOfServiceLink")})}),h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ce("settings.faqLink"),onClick:()=>o("faq",Tv),children:h.jsx("span",{children:ce("settings.faqLink")})})]})}const wP={...Gf,"United Kingdom":"UK"},TP={termsLink:h.jsx(IP,{link:Nf}),privacyLink:h.jsx(IP,{link:Ju})};function IP(t){const{children:e,link:n}=t;return h.jsx(ta,{className:"underline",href:n,title:"",children:e})}function Iue(t,e,n){const r=new Date(n,e-1,t);return V2(r)&&r.getFullYear()===n&&r.getMonth()===e-1&&r.getDate()===t}function _ue(t,e,n){const r=new Date(n,e-1,t),o=kV(new Date);return r<=o}const PS="border-2 border-system-red-550/50 bg-system-red-550/10 text-system-red-550 dark:text-system-red-350";function Aue(){const[t,e]=m.useState(!1),[n,r]=m.useState(void 0),[o,i]=m.useState(void 0);m.useEffect(()=>{async function _(){const j=await UX();i(j)}_()},[]),m.useEffect(()=>{const _=new URLSearchParams(window.location.search);_.delete("code"),_.delete("state"),_.delete("error"),window.history.replaceState({},document.title,`${window.location.pathname}?${_}`)},[]),m.useEffect(()=>{o&&fd({page:"auth0AccountVerificationPage",scenario:"auth0Verification",customData:JSON.stringify({accountType:o})})},[o]);const[s,a]=m.useState(""),[c,u]=m.useState(""),[d,f]=m.useState(""),[p,g]=m.useState(wP["United States"]),{i18n:v}=Fe(),y=B_(v.resolvedLanguage),b=new Intl.NumberFormat(y,{minimumIntegerDigits:2,useGrouping:!1}),C=new Intl.NumberFormat(y,{minimumIntegerDigits:4,useGrouping:!1});m.useEffect(()=>{e(!!!(c&&d&&s&&p))},[c,d,s,p]);const S=[{key:"01",text:ce("common.date.month.january")},{key:"02",text:ce("common.date.month.february")},{key:"03",text:ce("common.date.month.march")},{key:"04",text:ce("common.date.month.april")},{key:"05",text:ce("common.date.month.may")},{key:"06",text:ce("common.date.month.june")},{key:"07",text:ce("common.date.month.july")},{key:"08",text:ce("common.date.month.august")},{key:"09",text:ce("common.date.month.september")},{key:"10",text:ce("common.date.month.october")},{key:"11",text:ce("common.date.month.november")},{key:"12",text:ce("common.date.month.december")}],w=Object.entries(wP).sort().map(([_,j])=>({key:j,text:_})),E=Array.from({length:31},(_,j)=>{const R=j+1,$=b.format(R);return{key:R.toString(),text:$}}),T=Array.from({length:125},(_,j)=>{const R=new Date().getFullYear()-j,$=C.format(R);return{key:`${new Date().getFullYear()-j}`,text:$}}),I=_=>h.jsx("p",{children:_.text}),A=async()=>{const _=parseInt(s,10),j=parseInt(c,10),R=parseInt(d,10);if(!Iue(R,j,_)){at({source:"auth0AccountVerificationPage",scenario:"auth0VerificationInvalidDate",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}if(!_ue(R,j,_)){at({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}const se=du(new Date(_,j-1,R),"yyyy-MM-dd");r(!0);const P=await jX(se,p);if(!P){at({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulInvalidToken",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}const{ageGroup:k}=P,N=k===za.NOT_ADULT,x=k===za.ADULT;if(!(N||x)){at({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulNotTeenOrAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}at({source:"auth0AccountVerificationPage",scenario:"auth0VerificationSuccessful",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),tb()};return h.jsxs(h.Fragment,{children:[h.jsx(vs,{forceGradient:!0,overrideGradientType:"authentication"}),h.jsxs("section",{className:"relative m-auto flex min-h-dvh max-w-[500px] flex-col items-center justify-center gap-3 overflow-y-auto px-5 py-12 text-center",children:[h.jsx("h1",{className:"mb-4 text-center font-semibold text-xl sm:text-3xl",children:ce("error.auth0VerificationTitle")}),h.jsx("p",{children:ce("error.auth0VerificationDescription")}),h.jsxs("div",{className:"mt-12 w-full",children:[h.jsx(yP,{className:"mb-2 text-base",htmlFor:"birthdate-month",content:ce("error.auth0VerificationBirthdate"),required:!0}),h.jsxs("div",{id:"birthdate-group",className:"flex gap-2",children:[h.jsx(pm,{renderOption:I,options:S,onSelect:_=>u(_),id:"birthdate-month","aria-labelledby":"birthdate-group",placeholder:ce("dates.month"),className:G("flex-1",Ws,n===!1&&PS),value:c,isValid:n,menuClassName:qt.dropdownMenuOverModal}),h.jsx(pm,{renderOption:I,options:E,onSelect:_=>f(_),id:"birthdate-day","aria-labelledby":"birthdate-group",placeholder:ce("dates.day"),className:G("flex-1",Ws,n===!1&&PS),value:d,menuClassName:qt.dropdownMenuOverModal}),h.jsx(pm,{renderOption:I,options:T,onSelect:_=>a(_),id:"birthdate-year","aria-labelledby":"birthdate-group",placeholder:ce("dates.year"),className:G("flex-1",Ws,n===!1&&PS),value:s,menuClassName:qt.dropdownMenuOverModal})]}),n===!1&&h.jsx("div",{className:G("mt-2 text-start text-system-red-550 text-sm dark:text-system-red-350"),children:ce("error.authh0VerificationAgeError")})]}),h.jsxs("div",{className:"mt-12 w-full",children:[h.jsx(yP,{className:"mb-2 text-base",htmlFor:"country",content:ce("error.auth0VerificationCountryRegion"),required:!0}),h.jsx(pm,{renderOption:I,options:w,onSelect:_=>g(_),id:"country","aria-labelledby":"country-group",placeholder:ce("error.auth0VerificationCountryRegion"),className:G("flex-1",Ws),value:p,menuClassName:qt.dropdownMenuOverModal})]}),h.jsxs("div",{className:"mt-12 w-full text-black text-2xs dark:text-white/90",children:[h.jsx(Fo,{i18nKey:ce("error.auth0VerificationDisclaimer"),components:{termsLink:TP.termsLink,privacyLink:TP.privacyLink}}),h.jsx(Ue,{className:"mt-4 w-full",color:"strong",size:"56-xl",variant:"rect",onClick:A,title:ce("common.continue"),disabled:t,children:ce("common.continue")})]})]})]})}function _P(t){var e,n;return((n=(e=be.instance().config()).textOverrides)==null?void 0:n.call(e,t))??t}const NS="w-full";function kue(){const{switchMicrosoftAccount:t,logout:e,login:n}=Id(),{t:r}=Fe(),o=Kc(),i=async()=>{await t()},s=async(u,d)=>{switch(await e(),u){case"microsoft":n({provider:u});break;case"auth0":n({provider:u,opts:d});break}},a=be.instance().config().hideAgeVerificationButton!==!0,c=be.instance().config().hideAgeVerificationSwitchAccountButton!==!0;return h.jsxs(h.Fragment,{children:[h.jsx(vs,{forceGradient:!0}),h.jsxs("section",{className:"relative z-10 m-auto flex h-dvh max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[h.jsx("h1",{className:"text-3xl",children:r(_P("error.ageVerificationTitle"))}),h.jsx("h2",{className:"text-foreground-600",children:r(_P("error.ageVerification"))}),a&&h.jsx(Ue,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:r("error.ageVerificationVerifyAge"),onClick:()=>{eb(dz)},children:r("error.ageVerificationVerifyAge")}),a&&h.jsx("div",{className:"text-balance text-foreground-600",children:r("error.ageVerificationOr")}),o?h.jsxs(h.Fragment,{children:[h.jsxs(Ue,{onClick:()=>s("microsoft"),color:"default",title:r("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"56-xl",className:G(NS),children:[h.jsx(Vv,{className:"size-6"}),r("signInPrompt.continueWithMicrosoft")]}),h.jsxs(Ue,{onClick:()=>s("auth0",{connection:"apple"}),color:"default",variant:"pill",size:"56-xl",title:r("signInPrompt.continueWithApple"),className:G(NS),children:[h.jsx(nT,{className:"size-6 text-black dark:text-white"}),r("signInPrompt.continueWithApple")]}),h.jsxs(Ue,{onClick:()=>s("auth0",{connection:"google"}),color:"default",variant:"pill",size:"56-xl",title:r("signInPrompt.continueWithGoogle"),className:G(NS),children:[h.jsx(rT,{className:"size-6"}),r("signInPrompt.continueWithGoogle")]})]}):c&&h.jsx(Ue,{className:"w-full",color:"default",size:"56-xl",variant:"rect",title:r("error.ageVerificationSwitchAccount"),onClick:i,children:r("error.ageVerificationSwitchAccount")})]})]})}function xue(){const t=D(Un);return(t==null?void 0:t.provider)==="auth0"?h.jsx(Aue,{}):h.jsx(kue,{})}const JU=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 11.6236 19.4723 11.2538 19.4188 10.8923C19.3515 10.4382 19.6839 10 20.1429 10C20.5138 10 20.839 10.2562 20.8953 10.6228C20.9642 11.0718 21 11.5317 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C14.3051 3 16.4077 3.86656 18 5.29168V4.25C18 3.83579 18.3358 3.5 18.75 3.5C19.1642 3.5 19.5 3.83579 19.5 4.25V7.25C19.5 7.66421 19.1642 8 18.75 8H15.75C15.3358 8 15 7.66421 15 7.25C15 6.83579 15.3358 6.5 15.75 6.5H17.0991C15.7609 5.25883 13.9691 4.5 12 4.5Z",fill:"currentColor"})),n1e=Object.freeze(Object.defineProperty({__proto__:null,default:JU},Symbol.toStringTag,{value:"Module"}));function Rue(t){const{t:e}=Fe(),{onBtnClick:n=()=>{}}=t;return h.jsxs("section",{className:"relative z-10 m-auto flex h-full max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[h.jsx("h1",{className:"text-3xl",children:e("error.unhandledErrorTitle")}),h.jsx("h2",{className:"text-foreground-600",children:e("error.unhandledError")}),h.jsxs(Ue,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:e("error.unhandledErrorReload"),onClick:n,children:[h.jsx(JU,{className:"size-6"}),e("error.unhandledErrorReload")]})]})}function z_(){return h.jsxs("main",{className:"relative size-full overflow-hidden",children:[h.jsx(vs,{forceGradient:!0}),h.jsx(Rue,{onBtnClick:()=>{tb()}})]})}const XU=m.createContext(void 0);function Pue(t,e){return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}function V_(t){const e=typeof window<"u"?window.matchMedia(t):null,[n,r]=m.useState(e==null?void 0:e.matches);return m.useEffect(()=>{e&&Pue(e,o=>r(o.matches))},[t,e]),!!n}const ZU={sm:"640",md:"768",lg:"1024",xl:"1280"};function tr(t){const{breakpoint:e}=t,n=ZU[e];return!V_(`(min-width: ${n}px)`)}function e4(t){const{breakpoint:e}=t,r=`(min-width: ${ZU[e]}px)`,o=typeof window<"u"?window.matchMedia(r):null;return!(o!=null&&o.matches)}function $_(){const t=tr({breakpoint:"sm"});return(be.instance().config().responsiveFullWidthSidebarEnabled??!1)&&t}const AP=Gc.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),OS={dedupe:!0},Nue=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[g,v,y,b]=bo.get(r),[C,S]=us(t),w=m.useRef(!1),E=m.useRef(!1),T=m.useRef(C),I=m.useRef(e),A=m.useRef(n),_=()=>A.current,j=()=>_().isVisible()&&_().isOnline(),[R,$,U,se]=fi(r,C),P=m.useRef({}).current,k=De(s)?n.fallback[C]:s,N=(H,ae)=>{for(const Ee in P){const L=Ee;if(L==="data"){if(!o(H[L],ae[L])&&(!De(H[L])||!o(fe,ae[L])))return!1}else if(ae[L]!==H[L])return!1}return!0},x=m.useMemo(()=>{const H=!C||!e?!1:De(a)?_().isPaused()||i?!1:De(c)?!0:c:a,ae=ge=>{const He=no(ge);return delete He._k,H?{isValidating:!0,isLoading:!0,...He}:He},Ee=R(),L=se(),de=ae(Ee),Se=Ee===L?de:ae(L);let ie=de;return[()=>{const ge=ae(R());return N(ge,ie)?(ie.data=ge.data,ie.isLoading=ge.isLoading,ie.isValidating=ge.isValidating,ie.error=ge.error,ie):(ie=ge,ge)},()=>Se]},[r,C]),M=$v.useSyncExternalStore(m.useCallback(H=>U(C,(ae,Ee)=>{N(Ee,ae)||H()}),[r,C]),x[0],x[1]),te=!w.current,Y=g[C]&&g[C].length>0,Q=M.data,ee=De(Q)?k:Q,oe=M.error,Ce=m.useRef(ee),fe=p?De(Q)?Ce.current:Q:ee,Pe=Y&&!De(oe)?!1:te&&!De(a)?a:_().isPaused()?!1:i?De(ee)?!1:c:De(ee)||c,ze=!!(C&&e&&te&&Pe),nt=De(M.isValidating)?ze:M.isValidating,J=De(M.isLoading)?ze:M.isLoading,pe=m.useCallback(async H=>{const ae=I.current;if(!C||!ae||E.current||_().isPaused())return!1;let Ee,L,de=!0;const Se=H||{},ie=!y[C]||!Se.dedupe,ge=()=>gc?!E.current&&C===T.current&&w.current:C===T.current,He={isValidating:!1,isLoading:!1},Xe=()=>{$(He)},ct=()=>{const je=y[C];je&&je[1]===L&&delete y[C]},lt={isValidating:!0};De(R().data)&&(lt.isLoading=!0);try{if(ie&&($(lt),n.loadingTimeout&&De(R().data)&&setTimeout(()=>{de&&ge()&&_().onLoadingSlow(C,n)},n.loadingTimeout),y[C]=[ae(S),vc()]),[Ee,L]=y[C],Ee=await Ee,ie&&setTimeout(ct,n.dedupingInterval),!y[C]||y[C][1]!==L)return ie&&ge()&&_().onDiscarded(C),!1;He.error=un;const je=v[C];if(!De(je)&&(L<=je[0]||L<=je[1]||je[1]===0))return Xe(),ie&&ge()&&_().onDiscarded(C),!1;const Qe=R().data;He.data=o(Qe,Ee)?Qe:Ee,ie&&ge()&&_().onSuccess(Ee,C,n)}catch(je){ct();const Qe=_(),{shouldRetryOnError:dt}=Qe;Qe.isPaused()||(He.error=je,ie&&ge()&&(Qe.onError(je,C,Qe),(dt===!0||Er(dt)&&dt(je))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||j())&&Qe.onErrorRetry(je,C,Qe,Ut=>{const Ft=g[C];Ft&&Ft[0]&&Ft[0](wr.ERROR_REVALIDATE_EVENT,Ut)},{retryCount:(Se.retryCount||0)+1,dedupe:!0})))}return de=!1,Xe(),!0},[C,r]),X=m.useCallback((...H)=>qv(r,T.current,...H),[]);if(To(()=>{I.current=e,A.current=n,De(Q)||(Ce.current=Q)}),To(()=>{if(!C)return;const H=pe.bind(un,OS);let ae=0;const L=dT(C,g,(de,Se={})=>{if(de==wr.FOCUS_EVENT){const ie=Date.now();_().revalidateOnFocus&&ie>ae&&j()&&(ae=ie+_().focusThrottleInterval,H())}else if(de==wr.RECONNECT_EVENT)_().revalidateOnReconnect&&j()&&H();else{if(de==wr.MUTATE_EVENT)return pe();if(de==wr.ERROR_REVALIDATE_EVENT)return pe(Se)}});return E.current=!1,T.current=C,w.current=!0,$({_k:S}),Pe&&(De(ee)||ls?H():aT(H)),()=>{E.current=!0,L()}},[C]),To(()=>{let H;function ae(){const L=Er(u)?u(R().data):u;L&&H!==-1&&(H=setTimeout(Ee,L))}function Ee(){!R().error&&(d||_().isVisible())&&(f||_().isOnline())?pe(OS).then(ae):ae()}return ae(),()=>{H&&(clearTimeout(H),H=-1)}},[u,d,f,C]),m.useDebugValue(fe),i&&De(ee)&&C){if(!gc&&ls)throw new Error("Fallback data is required when using suspense in SSR.");I.current=e,A.current=n,E.current=!1;const H=b[C];if(!De(H)){const ae=X(H);AP(ae)}if(De(oe)){const ae=pe(OS);De(fe)||(ae.status="fulfilled",ae.value=!0),AP(ae)}else throw oe}return{mutate:X,get data(){return P.data=!0,fe},get error(){return P.error=!0,oe},get isValidating(){return P.isValidating=!0,nt},get isLoading(){return P.isLoading=!0,J}}},Oue=uT(Nue),Mue=t=>us(t?t(0,null):null)[0],MS=Promise.resolve(),Lue=t=>(e,n,r)=>{const o=m.useRef(!1),{cache:i,initialSize:s=1,revalidateAll:a=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:d=!1,parallel:f=!1}=r,[,,,p]=bo.get(cT);let g;try{g=Mue(e),g&&(g=k2+g)}catch{}const[v,y,b]=fi(i,g),C=m.useCallback(()=>De(v()._l)?s:v()._l,[i,g,s]);$v.useSyncExternalStore(m.useCallback(_=>g?b(g,()=>{_()}):()=>{},[i,g]),C,C);const S=m.useCallback(()=>{const _=v()._l;return De(_)?s:_},[g,s]),w=m.useRef(S());To(()=>{if(!o.current){o.current=!0;return}g&&y({_l:c?w.current:S()})},[g,i]);const E=d&&!o.current,T=t(g,async _=>{const j=v()._i,R=v()._r;y({_r:un});const $=[],U=S(),[se]=fi(i,_),P=se().data,k=[];let N=null;for(let x=0;x<U;++x){const[M,te]=us(e(x,f?null:N));if(!M)break;const[Y,Q]=fi(i,M);let ee=Y().data;const oe=a||j||De(ee)||u&&!x&&!De(P)||E||P&&!De(P[x])&&!r.compare(P[x],ee);if(n&&(typeof R=="function"?R(ee,te):oe)){const Ce=async()=>{if(!(M in p))ee=await n(te);else{const Pe=p[M];delete p[M],ee=await Pe}Q({data:ee,_k:te}),$[x]=ee};f?k.push(Ce):await Ce()}else $[x]=ee;f||(N=ee)}return f&&await Promise.all(k.map(x=>x())),y({_i:un}),$},r),I=m.useCallback(function(_,j){const R=typeof j=="boolean"?{revalidate:j}:j||{},$=R.revalidate!==!1;return g?($&&(De(_)?y({_i:!0,_r:R.revalidate}):y({_i:!1,_r:R.revalidate})),arguments.length?T.mutate(_,{...R,revalidate:$}):T.mutate()):MS},[g,i]),A=m.useCallback(_=>{if(!g)return MS;const[,j]=fi(i,g);let R;if(Er(_)?R=_(S()):typeof _=="number"&&(R=_),typeof R!="number")return MS;j({_l:R}),w.current=R;const $=[],[U]=fi(i,g);let se=null;for(let P=0;P<R;++P){const[k]=us(e(P,se)),[N]=fi(i,k),x=k?N().data:un;if(De(x))return I(U().data);$.push(x),se=x}return I($)},[g,i,I,S]);return{size:S(),setSize:A,mutate:I,get data(){return T.data},get error(){return T.error},get isValidating(){return T.isValidating},get isLoading(){return T.isLoading}}},Due=P2(Oue,Lue);function G_(t,e){const{data:n,error:r,isLoading:o,size:i,setSize:s,mutate:a}=Due(e,t,{revalidateFirstPage:!1}),c=m.useCallback(async()=>{await a()},[a]),u=m.useCallback(async()=>{await s(i+1)},[s,i]),d=n==null?void 0:n[i-1],f=i>0&&!!n&&typeof d>"u",p=o||f,g=d?!!e(i+1,d):!1;return{loader:{loading:p,hasNextPage:g,error:r,onLoadMore:u,data:n},refetch:c}}function jue(t,e){if(!(e!=null&&e.next)&&t>0)return null;const n={url:"/pages",isFirstPage:t===0};return e!=null&&e.next&&(n.args={cursor:e.next}),n}function Uue(t={}){const{disabled:e=!1}=t,n=Xo("kill-shared-page"),r=m.useCallback(async({url:o,args:i})=>{const s={...i,...n?{}:{"api-version":"2"}};return await Fn(o,GW,{query:s,analytics:{anonymousPath:"/pages"}}).then(c=>c.data)},[n]);return G_(r,e?()=>null:jue)}function Fue(){const t=ve("pages"),e=ve("pages-anonymous"),n=xr();return{canCreatePageForSignedOut:e&&t,canCreatePage:(n||e)&&t}}function r1e(){at({pageName:"chatPage",sectionName:"chatResponse",source:"addToPage"})}function o1e(t){at({pageName:"addToPage",source:t})}function Bue(){at({sectionName:"actionMenu",source:"createNewPage"})}function Hue(t){at({pageName:t,source:"openPage"})}function i1e(){at({pageName:"pages",sectionName:"editBar",source:"askCopilot"})}function s1e(t,e){at({pageName:"pages",sectionName:"suggestions",source:t==="accept"?"applyRevision":"reject",customData:JSON.stringify({eventInfo_pageId:e})})}function a1e(t){const{reaction:e,pageId:n,suggestionId:r,messageId:o,startIndex:i,endIndex:s,oldText:a,replacement:c}=t;at({pageName:"pages",sectionName:"suggestions",source:"feedback",customData:JSON.stringify({eventInfo_pageId:n,eventInfo_reaction:e,eventInfo_suggestionId:r,eventInfo_messageId:o,eventInfo_startIndex:i,eventInfo_endIndex:s,eventInfo_oldText:a,eventInfo_replacement:c})})}function c1e(t){aa({feature:"page",...t})}const l1e=["createPage","addToExistingPage","openPageOnChat","openPageOnHistory","copyPage"];function u1e(t,e,n){Sc({feature:"page",scenario:t,duration:Math.round(e),customData:JSON.stringify({eventInfo_pageId:n})})}function d1e(){at({pageName:"pages",source:"hyperlinkInPages"})}function h1e({sectionName:t,pageId:e}){at({sectionName:t,source:"deletePage",customData:JSON.stringify({eventInfo_pageId:e})})}function f1e({sectionName:t,pageId:e}){at({sectionName:t,source:"renamePage",customData:JSON.stringify({eventInfo_pageId:e})})}function p1e(t){K.trackEvent({name:"interaction",data:{eventName:"copilotPagesEdited",eventInfo_customData:JSON.stringify({eventInfo_pageId:t})}})}function m1e(t){const{pageName:e,sectionName:n,pageId:r}=t;at({pageName:e,sectionName:n,source:"pagesSharing",customData:JSON.stringify({eventInfo_pageId:r})})}function g1e(t){const{sectionName:e,pageId:n}=t;at({sectionName:e,source:"removePagesSharing",customData:JSON.stringify({eventInfo_pageId:n})})}const v1e=["pagesHistory","direct"];function y1e(t){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pagesSharing",eventInfo_impressionScenario:t}})}const b1e=["responsePreviewedPage","chatCreateNewPage","chatAddToExistingPage","chatDirectToNewPage","pagesHistory","actionMenuCreateNewPage","makeACopyViewerPage","makeACopyOwnerPage","makeACopyViewOnly","makeACopyPagesHistory"];function C1e(t){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pages",eventInfo_impressionScenario:t}})}function S1e(t){const{pageName:e,sectionName:n,pageId:r}=t;at({pageName:e,sectionName:n,source:"makePagesCopy",customData:JSON.stringify({eventInfo_pageId:r})})}function E1e(){at({pageName:"pages",source:"printPage"})}function zue(t){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"3-Pages",eventInfo_impressionScenario:t}})}const Vue=l.union([l.literal("open"),l.literal("close")]),t4=l.object({sidebarVisibility:Vue.optional()});function $ue(t){Ei(bL,t4,{sidebarVisibility:t})}function n4(){var t;return((t=so(bL,t4))==null?void 0:t.sidebarVisibility)??"close"}function Gue(){return!be.instance().config().sidebarNavigation||e4({breakpoint:"md"})?!1:n4()!=="close"}const ba=V(Gue());function que(){const t=co(),e=Uv(),n=Te(ba);return m.useCallback(async({pageId:r,closeSidebar:o,sourcePage:i,impressionScenario:s,featureLatencyInfo:a})=>{Hue(i),o&&n(!1),await t({to:"/pages/$pageId",params:{pageId:r},from:e.state.location.pathname,state:{...a,impressionScenario:s}})},[t,e.state.location.pathname,n])}const Kue=V(t=>t(sl).isOpen||t(r4)),sl=V({isOpen:!1,scenario:null}),r4=V(t=>{const e=t(bc);return e===null?!1:e===0||t(aM).includes(e)}),Wue=V(t=>{const e=t(r4),n=t(qc("location-prompt")),r=t(Bi).filter(({author:i})=>i==="human").length,o=!!pn(OQ);return e||!n||o?!1:r===XH}),ob=V(null),Yue=st();function Vs(t){t&&Yue.set(ob,{title:t.title,subtitle:t.message,dismissable:!0,dismissAfter:10*1e3})}const kP="/pages";async function Que(t,e){const n=await Fr({path:"/pages",args:{body:{title:t,content:e},analytics:{anonymousPath:kP}}}),r=await n.json(),o=KW.safeParse(r);if(!n.ok&&o.success)throw new Error(o.data.errorCode);try{return zW.parse(r)}catch(i){throw i instanceof ng&&df(i,kP,!1),i}}function Jue(){const{canCreatePage:t,canCreatePageForSignedOut:e}=Fue(),{t:n}=Fe(),[r,o]=m.useState(!1),i=Kc(),s=Te(Ir),a=Te(sl),c=que();return{creatingPage:r,createPage:t?async({content:d,sourcePage:f,impressionScenario:p,featureLatencyInfo:g})=>{o(!0);try{const{id:v}=await Que("",d);await c({pageId:v,closeSidebar:!0,sourcePage:f,impressionScenario:p,featureLatencyInfo:g})}catch(v){v instanceof Error&&v.message==="page-count-exceeded"&&e?(zue(f),s(i?"prompt-3p-sign-in":"prompt-sign-in"),a({isOpen:!0,scenario:"sidebarActionCreatePage",reason:"pageLimitReached"})):Vs({title:n("common.somethingWrong"),message:n("pages.errorCreatingMessage")})}finally{o(!1)}}:null}}function Xue(t){const{callback:e,signInScenario:n,onShowSignIn:r,signInReason:o}=t,i=xr(),s=Te(sl);return(...a)=>{if(!i){s({isOpen:!0,scenario:n,reason:o}),r&&typeof r=="function"&&r();return}e(...a)}}function q_(){const{createConversation:t}=hp(),e=Te(fp);return{startNewConversation:()=>{t(),e("center")}}}function K_({defaultValue:t,controlledValue:e,onChange:n}){const r=e!==void 0,[o,i]=m.useState(t);return m.useEffect(()=>{r&&i(e)},[e,r]),{state:r?e:o,setState:c=>{r||i(c),n==null||n(c)}}}function W_(t){const{renderTrigger:e,triggerClick:n,children:r,className:o,options:i,isOpen:s,onIsOpenChange:a}=t,{state:c,setState:u}=K_({controlledValue:s,defaultValue:!1,onChange:a}),{disableFocusManager:d=!1}=i??{},{refs:f,x:p,y:g,strategy:v,context:y}=zf({open:c,placement:(i==null?void 0:i.placement)??"bottom-end",onOpenChange:u,middleware:[td((i==null?void 0:i.offset)??1),Vf({fallbackAxisSideDirection:"end"}),nd()],whileElementsMounted:ed}),b=Gw(y),C=qw(y),S=Kw(y,{role:(i==null?void 0:i.roleType)??"dialog"}),{getReferenceProps:w,getFloatingProps:E}=Ww([b,C,S]),T=I=>{i!=null&&i.stopReferencePropagation&&I.stopPropagation(),n==null||n(I)};return h.jsxs(h.Fragment,{children:[e==null?void 0:e({ref:f.setReference,...w({onClick:T})},c),c&&h.jsx(Fv,{children:h.jsx(Bv,{context:y,modal:!1,disabled:d,returnFocus:(i==null?void 0:i.returnFocus)??!0,children:h.jsx("div",{ref:f.setFloating,style:{position:v,top:`${g}px`,insetInlineStart:`${p}px`},...E({onClick:I=>{i!=null&&i.stopFloatingPropagation&&I.stopPropagation(),i!=null&&i.hideOnMenuClick&&u(!1)}}),className:G("start-0 flex rounded-2xl p-1.5 shadow-xl",qt.modal,o),children:r})})})]})}function o4(t){const{buttonSize:e}=t,{t:n}=Fe(),{startNewConversation:r}=q_(),{createPage:o}=Jue(),i=xr(),s=ve("pages-anonymous"),{refetch:a}=Uue({disabled:!i&&!s}),c=async()=>{Bue(),await(o==null?void 0:o({content:"",sourcePage:"createNewPage",impressionScenario:"actionMenuCreateNewPage",featureLatencyInfo:{scenario:"createPage",startTimestamp:Date.now()}})),await a()},u=Xue({callback:c,signInScenario:"sidebarActionCreatePage",signInReason:"createPage"}),d=async()=>{!i&&s?c():u()};return h.jsx(W_,{options:{placement:"bottom-end",hideOnMenuClick:!0},className:Fi,renderTrigger:({onClick:f,...p})=>h.jsx(Ue,{...p,title:n("sidebar.actions.menuTitle"),color:"subtle-dimmed-inverted",variant:"rect",size:e,className:"!min-w-7 !px-0",onClick:g=>{at({source:"sidebarActionsMenu",customData:JSON.stringify({buttonSize:e})}),f(g)},children:h.jsx(Bc,{className:"size-3.5 rotate-90"})}),children:h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx(Ue,{color:"subtle-dimmed-inverted",size:"40-base",variant:"rect",alignment:"start",title:n("sidebar.actions.newChat"),onClick:r,children:n("sidebar.actions.newChat")}),h.jsx(Ue,{color:"subtle-dimmed-inverted",size:"40-base",alignment:"start",variant:"rect",title:n("sidebar.actions.newPage"),onClick:()=>{setTimeout(()=>{d()},0)},children:n("sidebar.actions.newPage")})]})})}const i4=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M9.15898 16.8666C9.36292 17.0528 9.67918 17.0384 9.86536 16.8345C10.0515 16.6305 10.0371 16.3143 9.8332 16.1281L3.66535 10.4974H17.4961C17.7722 10.4974 17.9961 10.2735 17.9961 9.99736C17.9961 9.72122 17.7722 9.49736 17.4961 9.49736H3.66824L9.8332 3.86927C10.0371 3.68309 10.0515 3.36684 9.86536 3.16289C9.67918 2.95895 9.36292 2.94456 9.15898 3.13074L2.24263 9.44478C2.10268 9.57254 2.02285 9.74008 2.00314 9.91323C1.99851 9.94058 1.99609 9.96869 1.99609 9.99736C1.99609 10.0242 1.99821 10.0506 2.00229 10.0763C2.02047 10.2522 2.10058 10.4229 2.24263 10.5526L9.15898 16.8666Z",fill:"currentColor"})),w1e=Object.freeze(Object.defineProperty({__proto__:null,default:i4},Symbol.toStringTag,{value:"Module"})),s4=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 14.5C2 14.2239 2.22386 14 2.5 14H12.5C12.7761 14 13 14.2239 13 14.5C13 14.7761 12.7761 15 12.5 15H2.5C2.22386 15 2 14.7761 2 14.5ZM2.5 9C2.22386 9 2 9.22386 2 9.5C2 9.77614 2.22386 10 2.5 10H17.5C17.7761 10 18 9.77614 18 9.5C18 9.22386 17.7761 9 17.5 9H2.5Z",fill:"currentColor"})),T1e=Object.freeze(Object.defineProperty({__proto__:null,default:s4},Symbol.toStringTag,{value:"Module"})),ib=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_21044_3802",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},m.createElement("path",{d:"M19.7803 1.28033C20.0732 0.987435 20.0732 0.512561 19.7803 0.219669C19.4874 -0.0732238 19.0125 -0.0732228 18.7196 0.219671L8.71967 10.2197L8.25 11.75L9.78033 11.2803L19.7803 1.28033ZM4.25 1C2.45507 1 1 2.45508 1 4.25V15.75C1 17.5449 2.45507 19 4.25 19H15.75C17.5449 19 19 17.5449 19 15.75V7.75C19 7.33579 18.6642 7 18.25 7C17.8358 7 17.5 7.33579 17.5 7.75V15.75C17.5 16.7165 16.7165 17.5 15.75 17.5H4.25C3.2835 17.5 2.5 16.7165 2.5 15.75V4.25C2.5 3.2835 3.2835 2.5 4.25 2.5H12.25C12.6642 2.5 13 2.16421 13 1.75C13 1.33579 12.6642 1 12.25 1H4.25Z",fill:"currentColor"})),m.createElement("g",{mask:"url(#mask0_21044_3802)"},m.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),I1e=Object.freeze(Object.defineProperty({__proto__:null,default:ib},Symbol.toStringTag,{value:"Module"}));function Zue(){const[t,e]=m.useState(!1);return m.useEffect(()=>{async function n(){const o=await(be.instance().config().isConversationHistoryHidden??(()=>Promise.resolve(!1)))();e(o)}n().catch(()=>{})},[]),t}function sb(){const t=Wt();return t.startsWith("/podcasts")||t.startsWith("/shares/podcasts")}function ede(t){const{open:e,toggle:n}=t,{startNewConversation:r}=q_(),[o]=tt(jr),i=D(ad),{t:s}=Fe(),a=ve("pages"),c=Wt(),u=sb(),d=o==="chat-only"||e,f=!Zue(),p=!e&&(c.startsWith("/daily")||c.endsWith("/talk")||u||c.startsWith("/labs/experiments/3d-generations"));return h.jsx("div",{className:G("pointer-events-none absolute start-0 top-0 w-full p-1 pe-3.5",qt.sidebar),children:h.jsx("div",{className:"relative",children:h.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[h.jsx(Tn,{children:p&&h.jsx(xe.div,{className:G("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",Fi),initial:"initial",animate:"animate",exit:"exit",variants:{initial:rt,animate:Ot,exit:rt},transition:xo})}),h.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":i&&!e?i.theme:void 0,children:[(f||d&&e)&&h.jsx(Ue,{title:s(e?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-lg hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{at({source:"sidebarToggle",pageName:c,customData:JSON.stringify({isOpen:e})}),n()},testId:"sidebar-toggle-button",children:e?h.jsx(i4,{className:"size-4"}):h.jsx(s4,{className:"size-4"})}),d&&(f||!e)&&h.jsxs("div",{className:"flex rounded-lg hover:bg-black/3 dark:hover:bg-white/5",children:[h.jsx(Ue,{title:s("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{at({source:"sidebarNewConversation",destination:"/chat",pageName:c,customData:JSON.stringify({isOpen:e})}),r()},children:h.jsx(ib,{className:"size-4"})}),a&&h.jsx(o4,{buttonSize:"28-xxs"})]})]})]})})})}const xP=65,tde=100;function RP({count:t=1}){const e=m.useMemo(()=>Array.from({length:t},()=>`${Math.floor(Math.random()*(tde-xP+1))+xP}%`),[t]);return h.jsx("div",{className:"flex flex-col gap-5 px-3 py-1",children:e.map((n,r)=>h.jsx("div",{style:{width:n},className:G("relative h-5 overflow-hidden rounded-lg bg-background-300 opacity-30 dark:bg-background-250 dark:opacity-40","border border-background-300 dark:border-background-250","after:absolute after:-start-[300%] after:end-0 after:start-0 after:h-full","after:opacity-50 dark:after:opacity-5","after:bg-gradient-to-r after:from-transparent after:via-white after:to-transparent","after:bg-[length:80%_100%] after:bg-no-repeat","after:animate-[shimmer-translate_2s_infinite]")},r))})}const nde="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/labs-entry-BqXQ5OEs.png",a4=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M19.2501 11.0017C20.2166 11.0017 21.0001 11.7852 21.0001 12.7517V19.2517C21.0001 20.2182 20.2166 21.0017 19.2501 21.0017H14.7501C13.7836 21.0017 13.0001 20.2182 13.0001 19.2517V12.7517C13.0001 11.7852 13.7836 11.0017 14.7501 11.0017H19.2501ZM9.26831 15.0141C10.2348 15.0141 11.0183 15.7976 11.0183 16.7641V19.2517C11.0183 20.2182 10.2348 21.0017 9.26831 21.0017H4.75391C3.78741 21.0017 3.00391 20.2182 3.00391 19.2517V16.7641C3.00391 15.7976 3.78741 15.0141 4.75391 15.0141H9.26831ZM19.2501 12.5017H14.7501C14.612 12.5017 14.5001 12.6136 14.5001 12.7517V19.2517C14.5001 19.3898 14.612 19.5017 14.7501 19.5017H19.2501C19.3882 19.5017 19.5001 19.3898 19.5001 19.2517V12.7517C19.5001 12.6136 19.3882 12.5017 19.2501 12.5017ZM9.26831 16.5141H4.75391C4.61584 16.5141 4.50391 16.626 4.50391 16.7641V19.2517C4.50391 19.3898 4.61584 19.5017 4.75391 19.5017H9.26831C9.40639 19.5017 9.51831 19.3898 9.51831 19.2517V16.7641C9.51831 16.626 9.40639 16.5141 9.26831 16.5141ZM9.25391 3C10.2204 3 11.0039 3.7835 11.0039 4.75V11.25C11.0039 12.1682 10.2968 12.9212 9.39743 12.9942L9.25391 13H4.75391C3.78741 13 3.00391 12.2165 3.00391 11.25V4.75C3.00391 3.7835 3.78741 3 4.75391 3H9.25391ZM9.25391 4.5H4.75391C4.61584 4.5 4.50391 4.61193 4.50391 4.75V11.25C4.50391 11.3881 4.61584 11.5 4.75391 11.5H9.25391L9.31123 11.4934C9.42167 11.4675 9.50391 11.3683 9.50391 11.25V4.75C9.50391 4.61193 9.39198 4.5 9.25391 4.5ZM19.2501 3C20.2166 3 21.0001 3.7835 21.0001 4.75V7.25C21.0001 8.2165 20.2166 9 19.2501 9H14.7501C13.7836 9 13.0001 8.2165 13.0001 7.25V4.75C13.0001 3.7835 13.7836 3 14.7501 3H19.2501ZM14.7501 4.5C14.612 4.5 14.5001 4.61193 14.5001 4.75V7.25C14.5001 7.38807 14.612 7.5 14.7501 7.5H19.2501C19.3882 7.5 19.5001 7.38807 19.5001 7.25V4.75C19.5001 4.61193 19.3882 4.5 19.2501 4.5H14.7501Z",fill:"currentColor"})),_1e=Object.freeze(Object.defineProperty({__proto__:null,default:a4},Symbol.toStringTag,{value:"Module"}));function PP(t){return t?{x:t.scrollLeft,y:t.scrollTop}:{x:0,y:0}}function rde(t){const[e,n]=m.useState(PP(t.current));return m.useEffect(()=>{const r=t.current;let o=null;if(r===null)return()=>{};function i(){o===null&&(o=window.requestAnimationFrame(()=>{n(PP(r)),o=null}))}return r.addEventListener("scroll",i),()=>r.removeEventListener("scroll",i)}),e}function Km(t){const{children:e,color:n="neutral",className:r}=t;return h.jsx("div",{className:bt("flex h-4 items-center rounded px-1.5 text-3xs",n==="neutral"?"bg-black/8 text-foreground-550 dark:bg-white/8 dark:text-foreground-650":"bg-accent-350/30 text-accent-650 dark:bg-accent-450/30",r),children:e})}const NP="sticky bg-sidebar-light dark:bg-sidebar-dark",OP="before:pointer-events-none before:absolute before:h-10 before:w-full before:from-sidebar-light before:to-transparent dark:before:from-sidebar-dark",ode="bg-labs-light dark:bg-labs-dark",ide=m.lazy(()=>q(()=>import("./sidebar-pages-mn_o4sfL.js"),__vite__mapDeps([217,1,218])).then(t=>({default:t.SidebarPages}))),sde=m.lazy(()=>q(()=>import("./conversations-rrr0kC0i.js"),__vite__mapDeps([219,1,220,221,222,223,218,224])));function ade(){const{t}=Fe(),e=Wt(),n=co(),r=xr(),o=ve("pages"),i=ve("pages-sidebar-empty-cta"),s=ve("pages-anonymous"),a=(r||i||s)&&o,c=ve("labs-landing");ve("share-campaign-gallery");const u=rb(),d=u||e==="/daily",f=e.startsWith("/labs");e.startsWith("/campaigns/gallery");const p=D(uy),g=m.useRef(null),{y:v}=rde(g),y=v>0,b=$_(),C=Te(ba);return h.jsx("div",{className:G("h-screen px-1 py-2",b?"w-full":"w-sidebar"),children:h.jsx("div",{className:"t-custom-scrollbar h-full overflow-y-auto overflow-x-hidden",ref:g,children:h.jsxs("div",{className:"flex min-h-full w-full flex-col px-2",children:[h.jsxs("div",{className:G(NP,OP,"top-0 z-10 flex flex-col gap-px pb-3 pt-[72px]","before:bottom-0 before:top-full before:bg-gradient-to-b before:opacity-90",y&&"after:absolute after:bottom-0 after:mx-1 after:w-[calc(100%-8px)] after:border-b after:border-black/8 dark:after:border-white/10",b&&"whitespace-nowrap"),children:[h.jsx(Ue,{className:G("flex-col px-2.5 py-2",d&&"!bg-black/5 dark:!bg-white/8"),title:t("composer.goToHome"),color:"subtle-dimmed-inverted",onClick:async()=>{u?b&&C(!1):(at({source:"sidebarDiscoverButton",destination:"/",pageName:e}),await n({to:"/",from:e}))},testId:"sidebar-discover-button",children:h.jsxs("span",{className:"flex w-full items-center gap-3",children:[h.jsx("span",{className:"relative flex size-10 shrink-0 items-center justify-center bg-caramel-350/40 text-caramel-600 squircle-16 dark:bg-slate-650/60 dark:text-slate-250",children:h.jsx(a4,{className:"size-6"})}),h.jsxs("span",{className:"flex flex-1 flex-col",children:[h.jsx("span",{className:"h-6 w-full text-start text-base-strong",children:t("sidebar.discover")}),h.jsx("span",{className:"w-full text-start text-foreground-650 text-xs",children:t("sidebar.discoverDescription")})]})]})}),c&&h.jsx(Ue,{className:G("flex-col px-2.5 py-2",f&&"!bg-black/5 dark:!bg-white/8"),title:t("sidebar.labsDescription"),color:"subtle-dimmed-inverted",onClick:async()=>{at({source:"sidebarLabsButton",destination:"/labs",pageName:e}),await n({to:"/labs",from:e}),b&&f&&C(!1)},children:h.jsxs("span",{className:"flex w-full items-center gap-3",children:[h.jsx("span",{className:G("relative flex size-10 shrink-0 items-center justify-center squircle-16",ode),children:h.jsx("img",{src:nde,alt:t("sidebar.labs"),className:"size-6"})}),h.jsxs("span",{className:"flex flex-1 flex-col",children:[h.jsx("span",{className:"h-6 w-full text-start text-base-strong",children:t("sidebar.labs")}),h.jsx("span",{className:"w-full text-start text-foreground-650 text-xs",children:t("sidebar.labsDescription")})]})]})}),gz]}),h.jsxs("div",{className:"relative flex grow flex-col py-5",children:[a&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(ide,{})}),h.jsx("h2",{className:"mb-5 flex gap-2 px-3 align-middle text-base-strong",children:t("sidebar.conversations")}),p?h.jsx(m.Suspense,{fallback:h.jsx(RP,{count:16}),children:h.jsx(sde,{inSidebar:!0})}):h.jsx(RP,{count:16})]}),h.jsx("div",{className:G(NP,OP,"bottom-0 before:bottom-full before:bg-gradient-to-t")})]})})})}function MP(t){const{className:e,text:n}=t;return h.jsx("p",{className:bt("inline h-min flex-none rounded border px-0.5 uppercase text-3xs",e),children:n})}const cde="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-wordmark-DvWA6bVb.svg",gp=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120",fill:"none",...t},m.createElement("defs",null,m.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientTransform:"matrix(-27.40125 -33.47302 31.47539 -25.76598 95.512 51.286)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.096,stopColor:"#00AEFF"}),m.createElement("stop",{offset:.773,stopColor:"#2253CE"}),m.createElement("stop",{offset:1,stopColor:"#0736C4"})),m.createElement("radialGradient",{id:"b",cx:0,cy:0,r:1,gradientTransform:"rotate(51.84 -70.254 70.14)scale(39.9779 38.7796)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#FFB657"}),m.createElement("stop",{offset:.634,stopColor:"#FF5F3D"}),m.createElement("stop",{offset:.923,stopColor:"#C02B3C"})),m.createElement("radialGradient",{id:"e",cx:0,cy:0,r:1,gradientTransform:"matrix(-31.67773 90.58917 -108.5232 -37.949 103.796 30.703)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.066,stopColor:"#8C48FF"}),m.createElement("stop",{offset:.5,stopColor:"#F2598A"}),m.createElement("stop",{offset:.896,stopColor:"#FFB152"})),m.createElement("linearGradient",{id:"c",x1:31.75,x2:37.471,y1:18.75,y2:84.938,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.156,stopColor:"#0D91E1"}),m.createElement("stop",{offset:.487,stopColor:"#52B471"}),m.createElement("stop",{offset:.652,stopColor:"#98BD42"}),m.createElement("stop",{offset:.937,stopColor:"#FFC800"})),m.createElement("linearGradient",{id:"d",x1:36.75,x2:39.874,y1:10,y2:82.213,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#3DCBFF"}),m.createElement("stop",{offset:.247,stopColor:"#0588F7",stopOpacity:0})),m.createElement("linearGradient",{id:"f",x1:106.964,x2:106.923,y1:33.365,y2:53.037,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.058,stopColor:"#F8ADFA"}),m.createElement("stop",{offset:.708,stopColor:"#A86EDD",stopOpacity:0}))),m.createElement("path",{fill:"url(#a)",d:"M85.855 18.313A11.574 11.574 0 0 0 74.75 10h-3.379a11.574 11.574 0 0 0-11.384 9.485L54.2 51.018l1.436-4.913a11.574 11.574 0 0 1 11.11-8.327H86.38l8.235 3.207 7.937-3.207h-2.316a11.574 11.574 0 0 1-11.105-8.313z"}),m.createElement("path",{fill:"url(#b)",d:"M36.326 101.64A11.574 11.574 0 0 0 47.445 110h7.176c6.276 0 11.409-5.002 11.57-11.277l.781-30.405-1.634 5.583a11.574 11.574 0 0 1-11.108 8.321H34.432l-7.058-3.829-7.641 3.83h2.278c5.154 0 9.687 3.408 11.119 8.36z"}),m.createElement("path",{fill:"url(#c)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),m.createElement("path",{fill:"url(#d)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),m.createElement("path",{fill:"url(#e)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"}),m.createElement("path",{fill:"url(#f)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"})),A1e=Object.freeze(Object.defineProperty({__proto__:null,default:gp},Symbol.toStringTag,{value:"Module"})),c4=t=>m.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M3.75 8.5C3.75 8.08579 4.08579 7.75 4.5 7.75H5.75C6.16421 7.75 6.5 8.08579 6.5 8.5C6.5 8.91421 6.16421 9.25 5.75 9.25H4.5C4.08579 9.25 3.75 8.91421 3.75 8.5ZM3.75 12C3.75 11.5858 4.08579 11.25 4.5 11.25H5.75C6.16421 11.25 6.5 11.5858 6.5 12C6.5 12.4142 6.16421 12.75 5.75 12.75H4.5C4.08579 12.75 3.75 12.4142 3.75 12ZM3.75 15.5C3.75 15.0858 4.08579 14.75 4.5 14.75H5.75C6.16421 14.75 6.5 15.0858 6.5 15.5C6.5 15.9142 6.16421 16.25 5.75 16.25H4.5C4.08579 16.25 3.75 15.9142 3.75 15.5ZM4.25 3C2.45507 3 1 4.45507 1 6.25V17.75C1 19.5449 2.45508 21 4.25 21H19.75C21.5449 21 23 19.5449 23 17.75V6.25C23 4.45507 21.5449 3 19.75 3H4.25ZM19.75 19.5H9V4.5H19.75C20.7165 4.5 21.5 5.2835 21.5 6.25V17.75C21.5 18.7165 20.7165 19.5 19.75 19.5ZM4.25 4.5H7.5V19.5H4.25C3.2835 19.5 2.5 18.7165 2.5 17.75V6.25C2.5 5.2835 3.2835 4.5 4.25 4.5Z",fill:"currentColor"})),k1e=Object.freeze(Object.defineProperty({__proto__:null,default:c4},Symbol.toStringTag,{value:"Module"}));function lde(){const t=D(TU),e=D(O_);return t&&!!e}function er({url:t,className:e}){return h.jsx("div",{className:e,style:{WebkitMaskImage:`url(${t})`,maskImage:`url(${t})`,backgroundColor:"currentColor",WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain"}})}function ude(t){const{open:e,toggle:n}=t,{startNewConversation:r}=q_(),[o]=tt(jr),i=D(ad),{t:s}=Fe(),a=ve("pages"),c=Wt(),u=sb(),d=o==="chat-only"||e,f=lde(),p=!e&&(c.startsWith("/daily")||c.endsWith("/talk")||u||c.startsWith("/labs/experiments/3d-generations"));return h.jsx("div",{className:G("pointer-events-none absolute start-0 top-0 w-full p-2.5 pe-3.5",qt.sidebar),children:h.jsx("div",{className:"relative",children:h.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[h.jsx(Tn,{children:p&&h.jsx(xe.div,{className:G("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",Fi),initial:"initial",animate:"animate",exit:"exit",variants:{initial:rt,animate:Ot,exit:rt},transition:xo})}),h.jsx(xn,{className:"flex items-center",delay:_o.default,duration:_o.slow,children:e&&h.jsxs(Ue,{role:"link",title:s("sidebar.homepageLink"),className:"pointer-events-auto absolute start-0 flex items-center gap-2.5 px-3.5",color:"subtle-dimmed-inverted",testId:"sidebar-copilot-brand-button",onClick:()=>{at({source:"sidebarBrandButton",destination:"/chat",pageName:c}),r()},children:[h.jsx(gp,{className:"size-6"}),h.jsxs("span",{className:"flex items-center text-md-strong",children:[h.jsx(er,{url:cde,className:"h-[18px] w-[58px]"}),f&&h.jsx(MP,{text:s("settings.copilotBeta.beta"),className:"ms-2 uppercase"})]})]})}),h.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":i&&!e?i.theme:void 0,children:[h.jsx(Ue,{title:s(e?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-xl hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{at({source:"sidebarToggle",pageName:c,customData:JSON.stringify({isOpen:e})}),n()},testId:"sidebar-toggle-button",children:h.jsx(c4,{className:"size-6"})}),d&&h.jsxs("div",{className:"flex rounded-xl hover:bg-black/3 dark:hover:bg-white/5",children:[h.jsx(Ue,{title:s("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{at({source:"sidebarNewConversation",destination:"/chat",pageName:c,customData:JSON.stringify({isOpen:e})}),r()},children:h.jsx(ib,{className:"size-5"})}),a&&h.jsx(o4,{buttonSize:"36-sm"})]}),!e&&f&&h.jsx(MP,{text:s("settings.copilotBeta.beta"),className:"ms-2 uppercase"})]})]})})})}function dde(){const[t,e]=tt(ba),n=tr({breakpoint:"md"}),r=m.useRef(n),o=be.instance().config().useCompactSidebarHeader??!1;Xy(()=>{n&&e(!1)}),m.useEffect(()=>{r.current===!1&&n&&e(!1),r.current===!0&&!n&&e(n4()==="open"),r.current=n},[n,e]);const i=()=>{e(s=>!s),n||$ue(t?"close":"open")};return h.jsxs(h.Fragment,{children:[h.jsx(Tn,{children:n&&t&&h.jsx(xe.div,{className:"fixed inset-0 bg-black/30",onClick:()=>e(!1),initial:"initial",animate:"animate",exit:"exit",variants:{initial:rt,animate:Ot,exit:rt},transition:xo})}),h.jsxs(xe.div,{className:G("relative w-full bg-sidebar-light dark:bg-sidebar-dark",t&&"h-full"),layout:"position",children:[o?h.jsx(ede,{open:t,toggle:i}):h.jsx(ude,{open:t,toggle:i}),h.jsx(Tn,{children:t&&h.jsx(xe.div,{className:"overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:{initial:rt,animate:Ot,exit:rt},transition:xo,children:h.jsx(ade,{})})})]})]})}function hde(t){return["/login","/fang","/referrals","/referrals/rules","/memory/narrative"].includes(t)}function lo(){const t=Wt();return(be.instance().config().sidebarNavigation??!1)&&!hde(t)}const fde=324,LP="bg-sidebar-light dark:bg-sidebar-dark";function pde(t){const{children:e,sidebar:n}=t,r=document.getElementById("app"),o=F_(),i=tr({breakpoint:"md"}),s=lo(),c=D(ba)&&s,[u,d]=m.useState(!1),f=D(jr),p=D(Lh),g=$_();m.useEffect(()=>{r&&r.style.setProperty("--layout-offset-y",s&&c&&!i?`${ai}px`:"0px")},[r,s,c,i]);const v=c&&!i,y=f==="side-by-side",b=g?"100%":fde;return h.jsxs("div",{className:G("flex h-full overflow-hidden",LP),inert:p?"":void 0,children:[n??(s&&h.jsx(xe.div,{className:G("h-full will-change-auto",i?"absolute":"relative",i&&LP,i&&qt.sidebar),initial:{width:c?b:0},animate:{width:c?b:0},transition:xo,onAnimationStart:()=>d(!0),onAnimationComplete:()=>d(!1),children:h.jsx(dde,{})})),h.jsx(xe.main,{className:G("relative flex w-full min-w-0 will-change-auto","after:pointer-events-none after:fixed after:inset-2 after:start-[324px] after:rounded-[10px] after:border after:border-transparent after:transition-opacity dark:after:border-white/12 dark:after:border-s-white/8",v&&!u?"after:opacity-100 after:duration-1000":"after:opacity-0 after:duration-0"),initial:{paddingTop:v||y?ai:0,paddingBottom:!y&&v?ai:0,paddingLeft:v&&o?ai:0,paddingRight:v&&!o?ai:0},animate:{paddingTop:v||y?ai:0,paddingBottom:!y&&v?ai:0,paddingLeft:v&&o||!v&&y?ai:0,paddingRight:v&&!o||!v&&y?ai:0},transition:i?{duration:0}:xo,children:e})]})}function l4(t){const{deferred:e=!1}=t??{},n=HO(),[r,o]=tt(cM),i=Te(pp);m.useEffect(()=>{const c=FV();c&&o(c)},[n.search,o]);const s=m.useCallback(()=>{o(null)},[o]),a=m.useCallback(c=>{c&&i({source:"promptInUrl",prompt:c})},[i]);return m.useEffect(()=>{r&&!e&&a(r)},[e,a,r]),{prompt:r,handler:e?a:void 0,clear:s}}function mde(){const t=ve("prompt-pt-learn-partial"),e=ve("prompt-pt-learn-full"),n=ve("prompt-pt-learn-fill"),r=ve("prompt-pt-advice-partial"),o=ve("prompt-pt-advice-full"),i=ve("prompt-pt-advice-fill"),s=ve("prompt-pt-ideas-partial"),a=ve("prompt-pt-ideas-full"),c=ve("prompt-pt-ideas-fill"),u=ve("prompt-pt-msn-answers"),d=ve("prompt-pt-msn-headlines"),f=ve("prompt-pt-msn-events"),p=ve("prompt-pt-msn-answers-full"),g=ve("prompt-pt-msn-headlines-full"),v=ve("prompt-pt-msn-events-full"),y=K.getFormCode();let b=null,C=!1,S=!1,w=!1;switch(y){case"NTPCHB":{t||e||n?b="teach":r||o||i?b="advice":(s||a||c)&&(b="ideas"),C=t||r||s,S=e||o||a,w=n||i||c;break}case"MSNCHB":{u||p?b="answers":d||g?b="headlines":(f||v)&&(b="events"),S=p||g||v,w=u||d||f;break}default:b=null}let E=null;C?E="prefix":(S||w)&&(E="complete");let T=null;return C||w?T="partial":S&&(T="full"),{formCode:y,treatment:b,lengthVariant:E,passthroughType:T}}function gde(){var e;const t=D(AL);if(t)return{character:{id:t.id,locationId:(e=t.location)==null?void 0:e.id}}}function Y_(){var v,y;const t=ve("labs-actions"),e=D(tp),n=ve("labs-actions-skipprocheck"),r=ve("freemium-actions-upsell")&&be.instance().config().proSubscription.enabled,o=xr(),i=!!D(rI),s=D(ao),a=!s||uz.includes(s),c=((v=be.instance().config().actions)==null?void 0:v.overrideFreemiumActionsUpsellFeatureEnabled)??!1,u=(r||c)&&o&&!i&&!a,d=D(Rm),f=((y=be.instance().config().actions)==null?void 0:y.overrideLabsActionsFeatureEnabled)??!1,[p,g]=m.useState(!1);return m.useEffect(()=>{async function b(){var S;await(((S=be.instance().config().actions)==null?void 0:S.enableActions)??(()=>Promise.resolve(!1)))()&&g(!0)}b().catch(()=>{})},[g,d]),(f||t)&&(e||n||u)&&p}function Q_(){const t=ga(In),e=Te(ST);return m.useCallback((n,r)=>{t(o=>{const i=o.get(n);if(i){const{history:s}=i;r(s);const a=s.at(-1);if(a){const c=new Date(i.updatedAt),u=new Date(a.createdAt);c<u&&(i.updatedAt=a.createdAt)}s.length>2&&(i.isNew=!1,e(!0))}return o})},[t,e])}function vde(){const t=ve("bing-uet");m.useEffect(()=>{if(!t)return()=>{};const e=()=>{if(!window.UET)return;window.uetq=window.uetq??[];const r={ti:"355045625",enableAutoSpaTracking:!0};window.uetq=new window.UET(r),window.uetq.push("pageLoad")},n=document.createElement("script");return n.src="https://bat.bing.com/bat.js",n.async=!0,n.onload=e,document.head.appendChild(n),()=>{document.head.removeChild(n)}},[t])}let DP=!1;function yde(){DP||(DP=!0,window.uetq=window.uetq??[],window.uetq.push("event","outbound_click",{}))}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var bde=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cde=Object.prototype.hasOwnProperty;function hw(t,e){return Cde.call(t,e)}function fw(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var r=[];for(var o in t)hw(t,o)&&r.push(o);return r}function to(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function pw(t){for(var e=0,n=t.length,r;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Ua(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function u4(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function mw(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(mw(t[e]))return!0}else if(typeof t=="object"){for(var r=fw(t),o=r.length,i=0;i<o;i++)if(mw(t[r[i]]))return!0}}return!1}function jP(t,e){var n=[t];for(var r in e){var o=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof o<"u"&&n.push(r+": "+o)}return n.join(`
`)}var d4=function(t){bde(e,t);function e(n,r,o,i,s){var a=this.constructor,c=t.call(this,jP(n,{name:r,index:o,operation:i,tree:s}))||this;return c.name=r,c.index=o,c.operation=i,c.tree=s,Object.setPrototypeOf(c,a.prototype),c.message=jP(n,{name:r,index:o,operation:i,tree:s}),c}return e}(Error),bn=d4,Sde=to,ru={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=Iv(n,this.path);r&&(r=to(r));var o=pc(n,{op:"remove",path:this.from}).removed;return pc(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=Iv(n,this.from);return pc(n,{op:"add",path:this.path,value:to(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Of(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},Ede={add:function(t,e,n){return pw(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:ru.move,copy:ru.copy,test:ru.test,_get:ru._get};function Iv(t,e){if(e=="")return t;var n={op:"_get",path:e};return pc(t,n),n.value}function pc(t,e,n,r,o,i){if(n===void 0&&(n=!1),r===void 0&&(r=!0),o===void 0&&(o=!0),i===void 0&&(i=0),n&&(typeof n=="function"?n(e,0,t,e.path):_v(e,0)),e.path===""){var s={newDocument:t};if(e.op==="add")return s.newDocument=e.value,s;if(e.op==="replace")return s.newDocument=e.value,s.removed=t,s;if(e.op==="move"||e.op==="copy")return s.newDocument=Iv(t,e.from),e.op==="move"&&(s.removed=t),s;if(e.op==="test"){if(s.test=Of(t,e.value),s.test===!1)throw new bn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return s.newDocument=t,s}else{if(e.op==="remove")return s.removed=t,s.newDocument=null,s;if(e.op==="_get")return e.value=t,s;if(n)throw new bn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,t);return s}}else{r||(t=to(t));var a=e.path||"",c=a.split("/"),u=t,d=1,f=c.length,p=void 0,g=void 0,v=void 0;for(typeof n=="function"?v=n:v=_v;;){if(g=c[d],g&&g.indexOf("~")!=-1&&(g=u4(g)),o&&(g=="__proto__"||g=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[g]===void 0?p=c.slice(0,d).join("/"):d==f-1&&(p=e.path),p!==void 0&&v(e,0,t,p)),d++,Array.isArray(u)){if(g==="-")g=u.length;else{if(n&&!pw(g))throw new bn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,t);pw(g)&&(g=~~g)}if(d>=f){if(n&&e.op==="add"&&g>u.length)throw new bn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,t);var s=Ede[e.op].call(e,u,g,t);if(s.test===!1)throw new bn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return s}}else if(d>=f){var s=ru[e.op].call(e,u,g,t);if(s.test===!1)throw new bn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return s}if(u=u[g],n&&d<f&&(!u||typeof u!="object"))throw new bn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,t)}}}function tc(t,e,n,r,o){if(r===void 0&&(r=!0),o===void 0&&(o=!0),n&&!Array.isArray(e))throw new bn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=to(t));for(var i=new Array(e.length),s=0,a=e.length;s<a;s++)i[s]=pc(t,e[s],n,!0,o,s),t=i[s].newDocument;return i.newDocument=t,i}function wde(t,e,n){var r=pc(t,e);if(r.test===!1)throw new bn("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function _v(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new bn("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(ru[t.op]){if(typeof t.path!="string")throw new bn("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new bn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new bn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new bn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&mw(t.value))throw new bn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var o=t.path.split("/").length,i=r.split("/").length;if(o!==i+1&&o!==i)throw new bn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new bn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var s={op:"_get",path:t.from,value:void 0},a=h4([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new bn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new bn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function h4(t,e,n){try{if(!Array.isArray(t))throw new bn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)tc(to(e),to(t),n||!0);else{n=n||_v;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(o){if(o instanceof bn)return o;throw o}}function Of(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),o,i,s;if(n&&r){if(i=t.length,i!=e.length)return!1;for(o=i;o--!==0;)if(!Of(t[o],e[o]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(t);if(i=a.length,i!==Object.keys(e).length)return!1;for(o=i;o--!==0;)if(!e.hasOwnProperty(a[o]))return!1;for(o=i;o--!==0;)if(s=a[o],!Of(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}const Tde=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:bn,_areEquals:Of,applyOperation:pc,applyPatch:tc,applyReducer:wde,deepClone:Sde,getValueByPointer:Iv,validate:h4,validator:_v},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var J_=new WeakMap,Ide=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),_de=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function Ade(t){return J_.get(t)}function kde(t,e){return t.observers.get(e)}function xde(t,e){t.observers.delete(e.callback)}function Rde(t,e){e.unobserve()}function Pde(t,e){var n=[],r,o=Ade(t);if(!o)o=new Ide(t),J_.set(t,o);else{var i=kde(o,e);r=i&&i.observer}if(r)return r;if(r={},o.value=to(t),e){r.callback=e,r.next=null;var s=function(){gw(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=t,r.unobserve=function(){gw(r),clearTimeout(r.next),xde(o,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},o.observers.set(e,new _de(e,r)),r}function gw(t,e){e===void 0&&(e=!1);var n=J_.get(t.object);X_(n.value,t.object,t.patches,"",e),t.patches.length&&tc(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function X_(t,e,n,r,o){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=fw(e),s=fw(t),a=!1,c=s.length-1;c>=0;c--){var u=s[c],d=t[u];if(hw(e,u)&&!(e[u]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var f=e[u];typeof d=="object"&&d!=null&&typeof f=="object"&&f!=null&&Array.isArray(d)===Array.isArray(f)?X_(d,f,n,r+"/"+Ua(u),o):d!==f&&(o&&n.push({op:"test",path:r+"/"+Ua(u),value:to(d)}),n.push({op:"replace",path:r+"/"+Ua(u),value:to(f)}))}else Array.isArray(t)===Array.isArray(e)?(o&&n.push({op:"test",path:r+"/"+Ua(u),value:to(d)}),n.push({op:"remove",path:r+"/"+Ua(u)}),a=!0):(o&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!a&&i.length==s.length))for(var c=0;c<i.length;c++){var u=i[c];!hw(t,u)&&e[u]!==void 0&&n.push({op:"add",path:r+"/"+Ua(u),value:to(e[u])})}}}function Nde(t,e,n){n===void 0&&(n=!1);var r=[];return X_(t,e,r,"",n),r}const Ode=Object.freeze(Object.defineProperty({__proto__:null,compare:Nde,generate:gw,observe:Pde,unobserve:Rde},Symbol.toStringTag,{value:"Module"}));Object.assign({},Tde,Ode,{JsonPatchError:d4,deepClone:to,escapePathComponent:Ua,unescapePathComponent:u4});function Mde(t){var n;const e=[];for(const r of t){if(r.type!=="product"&&r.type!=="propertyPromotion"&&r.type!=="tourActivity")return null;if(!r.tags)continue;if(r.tags.length>1)return null;const o=r.tags[0];if(!(!o||!o.value))if(e.length===0)e.push(o);else{if(((n=e[0])==null?void 0:n.category)!==o.category)return null;e.find(i=>i.value===o.value)||e.push(o)}}return e}function x1e(t,e){var n;return t!=null&&t.length?JSON.stringify({tagCategory:(n=t[0])==null?void 0:n.category,tagValue:(e==null?void 0:e.value)??"recommended",tagPosition:e?t.indexOf(e)+1:null,tagCount:t.length}):""}function Lde(t){return t.every(e=>e.type==="product"||e.type==="propertyPromotion"||e.type==="tourActivity")}function R1e(t,e,n){let r=t;return e!=null&&e.length&&n?r=t.filter(o=>{var i;return o.tags&&((i=o.tags[0])==null?void 0:i.value)===n.value}):e!=null&&e.length&&!n&&(r=t.filter(o=>!o.tags)),r}class Dde{constructor(e){Z(this,"startTime",0);Z(this,"timeToFirstToken",0);Z(this,"receivedFirstToken",!1);Z(this,"receivedLastToken",!1);Z(this,"currentAdditionalData");Z(this,"currentMessageId","");Z(this,"receivedMessageTime",0);Z(this,"startMessageTime",0);Z(this,"mostRecentTokenTime",0);this.startTime=e}resetStartTime(e){this.startTime=e,this.timeToFirstToken=0}onBeforeSend(){this.receivedFirstToken=!1,this.receivedLastToken=!1}onSent(e){this.currentAdditionalData=e}onReceived(e){this.receivedMessageTime=performance.now(),K.trackEvent({name:"system",data:{eventName:"copilotChatRequest",eventInfo_additionalData:this.currentAdditionalData,eventInfo_duration:this.receivedMessageTime-this.startTime,eventInfo_conversationId:e.conversationId,eventInfo_messageId:this.currentMessageId,eventInfo_mode:e.chatMode}})}onStartMessage(e){this.startMessageTime=performance.now(),this.currentMessageId=e.messageId,this.receivedMessageTime||(this.receivedMessageTime=this.startTime),K.trackEvent({name:"system",data:{eventName:"copilotChatReqToResp",eventInfo_duration:this.startMessageTime-this.receivedMessageTime,eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:e.conversationId,eventInfo_messageId:e.messageId,eventInfo_mode:e.chatMode}})}onFirstToken(e,n,r){if(!this.receivedFirstToken&&e===this.currentMessageId){const o=performance.now()-this.startTime;this.timeToFirstToken=o,this.receivedFirstToken=!0,K.trackEvent({name:"system",data:{eventName:"copilotChatRespToReceived",eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:r,eventInfo_duration:performance.now()-this.receivedMessageTime,eventInfo_messageId:e,eventInfo_mode:n}}),K.trackEvent({name:"system",data:{eventName:"copilotFirstTokenReceived",eventInfo_conversationId:r,eventInfo_messageId:e,eventInfo_duration:o,eventInfo_mode:n,eventInfo_additionalData:this.currentAdditionalData}})}this.mostRecentTokenTime=performance.now()}onLastToken(e){const{citationCount:n,imageCount:r,messageId:o,inputMethod:i,conversationId:s,chatMode:a}=e;if(!this.receivedLastToken&&o===this.currentMessageId){const c=this.mostRecentTokenTime-this.startTime;this.receivedLastToken=!0,K.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_conversationId:s,eventInfo_messageId:o,eventInfo_numCitations:n,eventInfo_numImagesGenerated:r,eventInfo_inputMethod:i,eventInfo_responseMethod:"text",eventInfo_mode:a,eventInfo_additionalData:this.currentAdditionalData,eventInfo_landingPage:K.getLandingPage(),eventInfo_firstToLastTokenDuration:c-this.timeToFirstToken}}),K.trackEvent({name:"system",data:{eventName:"copilotLastTokenReceived",eventInfo_conversationId:s,eventInfo_messageId:o,eventInfo_duration:c,eventInfo_mode:a,eventInfo_additionalData:this.currentAdditionalData}}),K.trackEvent({name:"system",data:{eventName:"copilotChatE2E",eventInfo_conversationId:s,eventInfo_messageId:o,eventInfo_duration:performance.now()-this.startTime,eventInfo_mode:a,eventInfo_additionalData:this.currentAdditionalData}}),this.currentAdditionalData=void 0}}onAdsRender(e){const n=performance.now()-this.startTime,{ads:r}=e,i=(r==null?void 0:r.find(c=>c.type==="miniShowroom"))??(r&&r.length>0?r[0]:void 0),s=r&&Lde(r)?Mde(r):[],a=r==null?void 0:r.find(c=>c.type==="mainShowroom");K.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"render",eventInfo_adType:i==null?void 0:i.type,eventInfo_adCount:r==null?void 0:r.length,eventInfo_rguid:e.requestId,eventInfo_messageId:e.messageId,eventInfo_conversationId:e.conversationId,eventInfo_duration:n,eventInfo_additionalData:JSON.stringify({eventType:e.eventType,adTags:s!=null&&s.length?s:void 0,brandId:a==null?void 0:a.brandId})}})}onSubmitMessageBlocked(e,n,r){K.trackEvent({name:"interaction",data:{eventName:"copilotUserInputBlocked",eventInfo_inputMethod:n,eventInfo_mode:e,eventInfo_messageId:this.currentMessageId,eventInfo_conversationId:r,eventInfo_duration:performance.now()-this.startTime,eventInfo_additionalData:this.currentAdditionalData}})}onImageGenerationStart(e){const{messageId:n,conversationId:r,chatMode:o}=e,s=performance.now()-this.startTime;K.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenStarted",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_mode:o,eventInfo_duration:s}})}onImageReceived(e){const{messageId:n,conversationId:r,chatMode:o}=e,i=performance.now()-this.startTime;K.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_mode:o,eventInfo_duration:i}})}onPartialImageReceived(e){const{messageId:n,imageGenPhase:r,conversationId:o,chatMode:i}=e,s=performance.now()-this.startTime;K.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"PartialImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:o,eventInfo_mode:i,eventInfo_duration:s,eventInfo_customData:`${r}`}})}}function jde(t,e,n){switch(t.type){case"research":return{type:"task",task:{id:t.id,type:t.type,contents:[],partialOutput:[],inlineCitations:[],status:"pending",prompt:t.prompt},partId:e};case"computerUse":return{type:"task",task:{id:t.id,conversationId:t.conversationId,type:t.type,status:"running",updatedAt:n},partId:e};case"podcast":return{type:"task",task:{id:t.id,type:t.type,status:t.status,podcast:t.podcast,updatedAt:t.updatedAt??n},partId:e};default:return null}}function f4({path:t,args:e,onLoad:n,alt:r,...o}){const{data:i,isLoading:s}=il(t,async a=>{const u=await(await Uc(a,e)).blob();return URL.createObjectURL(u)});return m.useEffect(()=>{!s&&n&&n()},[s,n]),s?h.jsx("div",{...o}):h.jsx("img",{...o,src:i,alt:r})}const UP=st();function Ude(t){var e,n,r;if(t.status==="completed"){const o=UP.get(mt);if(Tp.latestLocation.pathname.startsWith("/chats")&&o&&t.conversationId===o)return;UP.set(ob,{iconProvider:()=>{var i,s,a;return h.jsx(f4,{path:`/podcasts/user/${(i=t.podcast)==null?void 0:i.id}/Files/${(a=(s=t.podcast)==null?void 0:s.thumbnail)==null?void 0:a.name}`,className:"rounded-xl object-cover"})},title:ce("podcasts.generationNotification.title"),subtitle:((e=t.podcast)==null?void 0:e.title)??"",action:{type:"GO_TO_PAGE",to:`/podcasts/user/${(n=t.podcast)==null?void 0:n.id}`},trackingArgs:{scenario:"podcastGenerationNotification",customData:JSON.stringify({podcastId:(r=t.podcast)==null?void 0:r.id})},dismissAfter:3e4})}}const FP=st();function Fde(t,e){const n=FP.get(mt);if(!n||n===e)return;const r={title:ce("research.generationNotification.title"),subtitle:ce("research.generationNotification.subTitle"),link:ce("research.generationNotification.subTitleLink"),action:{type:"GO_TO_PAGE",to:`/chats/${e}`},dismissable:!0,trackingArgs:{scenario:"researchCompletionNotification",customData:JSON.stringify({researchId:t.id,sourceConversationId:e})}};FP.set(ob,r)}const P1e=(t,e)=>{K.trackEvent({name:"interaction",data:{eventName:"activityArtifactDrawerOpened",eventInfo_messageId:t,eventInfo_partId:e.partId,eventInfo_messageType:e.type}})},Bde=t=>{K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityStart",eventInfo_errorMessage:`Could not find message with ID ${t} to start activity`,eventInfo_details:"Error starting activity"}})},Hde=(t,e)=>{K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityUpdate",eventInfo_errorMessage:`Could not find activity message with partId ${e} in message with ID ${t}`,eventInfo_details:"Error updating activity"}})},zde=t=>{K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityUpdate",eventInfo_errorMessage:`${t}`,eventInfo_details:"Error updating activity"}})},Vde=st();function $de({entryAd:t,mainAd:e,messageId:n,partId:r,conversationId:o}){let i=!1;const s=Vde.get(ad);return(!s&&t&&e||(s==null?void 0:s.conversationId)===o&&!t&&e&&e.brandId===s.brandId)&&(i=!0),i||K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_details:JSON.stringify({messageId:n,partId:r,conversationId:o,hasEntryAd:!!t,hasMainAd:!!e,mainAdBrandId:e==null?void 0:e.brandId,isShowroomOpened:!!s,showroomBrandId:s==null?void 0:s.brandId}),eventInfo_errorMessage:`Unexpcted showroom data received when showroom is ${s?"opened":"closed"}`}}),i}function Gde({card:t,messageId:e,partId:n,conversationState:r,conversationId:o}){const{ads:i}=t;if(r.timing.onAdsRender({requestId:t.requestId,messageId:e,conversationId:o,eventType:"card",ads:i}),i!=null&&i.some(s=>s.type==="mainShowroom"||s.type==="miniShowroom")){const s=i[0],a=(s==null?void 0:s.type)==="miniShowroom",c=a?s:void 0,u=a?i[1]:s;if(!$de({entryAd:c,partId:n,conversationId:o,messageId:e,mainAd:(u==null?void 0:u.type)==="mainShowroom"?u:void 0}))return}Yt(o,s=>{const a=$n(s,e);a&&a.content.push({type:"card",partId:n,card:t})})}const qde=OT.extend({actionName:l.literal("edge_get_page_content"),parameters:l.array(l.object({tabId:l.number(),windowId:l.number(),pageUrl:l.string().nullish(),pageTitle:l.string().nullish(),pageType:l.string().nullish(),lastAccessedTime:l.number().nullish()}))}),Kde=l.discriminatedUnion("actionName",[qde,eq]),Wde=st();function Yde(t){Wde.set(In,e=>ma(e,n=>{for(const{title:r,id:o,updatedAt:i,continuedAt:s}of t){const a=n.get(o);a?(a.title=r,a.id=o,a.updatedAt=i,a.continuedAt=s):n.set(o,{id:o,title:r,updatedAt:i,history:[],streamingState:"idle",continuedAt:s})}}))}const Qde=st();function Jde(t,e,n){Zde(t.map(r=>Xde(r,e,n)).filter(r=>r!==void 0))}function Xde(t,e,n){switch(t.type){case"research":return{id:t.id,conversationId:e,type:t.type,status:t.status,updatedAt:""};case"computerUse":return{id:t.id,conversationId:t.conversationId??"",type:t.type,status:t.status,updatedAt:t.updatedAt??"",title:t.title??"",lastScreenshot:t.lastScreenshot};case"podcast":return{id:t.id,conversationId:e,status:t.status==="completed"?"completed":"running",type:t.type,podcast:t.podcast,updatedAt:t.updatedAt??n};default:return}}function Zde(t){Qde.set(Yo,n=>ma(n,r=>{for(const o of t){const i=r.get(o.id);if(i)i.title=o.title,i.conversationId=o.conversationId,i.updatedAt=o.updatedAt,i.status=o.status,i.type=o.type,i.type==="computerUse"&&o.type==="computerUse"&&(i.lastScreenshot=o.lastScreenshot);else{const s={id:o.id,title:o.title,conversationId:o.conversationId,updatedAt:o.updatedAt,status:o.status,type:o.type};s.type==="computerUse"&&o.type==="computerUse"&&(s.chainOfThought=[],s.lastScreenshot=o.lastScreenshot),o.type==="podcast"&&s.type==="podcast"&&(s.podcast=o.podcast),r.set(o.id,s)}}}));const e=t.filter(n=>n.type==="computerUse"&&n.conversationId).map(n=>{const{conversationId:r,title:o,updatedAt:i}=n;return{id:r??"",title:o,updatedAt:i,continuedAt:null,history:[],streamingState:"idle"}});Yde(e)}const p4="cf-turnstile",ehe=`#${p4}`;function the(){const t=D(Lh),e=D(Cs);return Xo("kill-cf-turnstile")?null:h.jsx(pa,{isOpen:t,className:"w-3/4 sm:w-[350px]",children:h.jsx("div",{id:p4,className:"flex flex-1 items-center justify-center","data-theme":e})})}const nhe=new el(()=>new Promise((t,e)=>{const n=setTimeout(()=>{e(new Error("CF Turnstile script took too long to load"))},15e3),r=document.createElement("script");r.type="text/javascript",r.defer=!0,r.src="https://challenges.cloudflare.com/turnstile/v0/api.js",r.onload=()=>{clearTimeout(n),t()},r.onerror=()=>{clearTimeout(n),e(new Error("Failed to load turnstile script"))},document.body.appendChild(r)}));async function rhe(t){if(Zs("kill-cf-turnstile")||gt(Lh))return;const n=st();K.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"attempt"}}),$O.flushSync(()=>{n.set(Lh,!0)});try{await nhe.get()}catch{n.set(hf,"cf-turnstile");return}try{window.turnstile.render(ehe,{sitekey:"0x4AAAAAAAg146IpY3lPNWte",callback:async r=>{t(r),window.turnstile.remove(),n.set(Lh,!1),K.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"success"}})},"error-callback":r=>{K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRenderErrorCallback",eventInfo_details:"Error rendering CF Turnstile.",eventInfo_errorMessage:r}})}})}catch(r){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRender",eventInfo_details:"Error rendering CF Turnstile",eventInfo_errorMessage:r instanceof Error?r.message:""}}),n.set(hf,"cf-turnstile")}}function Av(t,e){return t?Date.now()-parseInt(t,10)<=e:!1}function Z_(t,e){return!t||parseInt(t,10)<e}var OO;const gr=(OO=be.instance().config().crossPromotion)==null?void 0:OO.aggressive;var MO,LO,DO,jO,UO;const al={"thumbs-up":{cardFeature:"cross-promo-card-thumbsup",popupFeature:"cross-promo-popup-thumbsup",cardConfig:(MO=gr==null?void 0:gr.card)==null?void 0:MO.thumbsUp,popupConfig:(LO=gr==null?void 0:gr.popup)==null?void 0:LO.thumbsUp},copied:{cardFeature:void 0,popupFeature:"cross-promo-popup-copied",cardConfig:void 0,popupConfig:(DO=gr==null?void 0:gr.popup)==null?void 0:DO.copied},engaging:{cardFeature:void 0,popupFeature:"cross-promo-popup-engaging",cardConfig:void 0,popupConfig:(jO=gr==null?void 0:gr.popup)==null?void 0:jO.engaging},"think-deeper":{cardFeature:void 0,popupFeature:"cross-promo-popup-think-deeper",cardConfig:void 0,popupConfig:(UO=gr==null?void 0:gr.popup)==null?void 0:UO.thinkDeeper}};function ohe(){return{type:"popup",title:ce("crossSelling.aggressivePromotion.popup.thumbsUpTitle"),subTitle:ce("crossSelling.aggressivePromotion.popup.thumbsUpSubTitle"),images:al["thumbs-up"].popupConfig}}function ihe(){return{type:"card",title:ce("crossSelling.aggressivePromotion.card.thumbsUpTitle"),subTitle:ce("crossSelling.aggressivePromotion.card.thumbsUpSubTitle"),images:al["thumbs-up"].cardConfig}}function she(){return{type:"popup",title:ce("crossSelling.aggressivePromotion.popup.copiedTitle"),subTitle:ce("crossSelling.aggressivePromotion.popup.copiedSubTitle"),images:al.copied.popupConfig}}function ahe(){return{type:"popup",title:ce("crossSelling.aggressivePromotion.popup.engagingTitle"),subTitle:ce("crossSelling.aggressivePromotion.popup.engagingSubTitle"),images:al.engaging.popupConfig}}function che(){return{type:"popup",title:ce("crossSelling.aggressivePromotion.popup.thinkDeeperTitle"),subTitle:ce("crossSelling.aggressivePromotion.popup.thinkDeeperSubTitle"),images:al["think-deeper"].popupConfig}}function m4(t){const n=st().get(RT),r=n===!0?!1:n!==void 0,o=pn(XT),i=!Av(o,2*lg),s=pn(vg),a=Z_(s,2);r&&uhe(t)&&i&&a&&dhe(t)}let BP=!1;function lhe(){const e=st().get(dr);!BP&&(e==="reasoning"||e==="research")&&(m4("think-deeper"),BP=!0)}function uhe(t){return kh(t)||g4(t)}function kh(t){const e=al[t];return et(e.popupFeature)&&e.popupConfig!==void 0}function g4(t){const e=al[t];return e.cardFeature!==void 0&&et(e.cardFeature)&&e.cardConfig!==void 0&&!X2()}function dhe(t){const e=st();t==="thumbs-up"&&kh(t)?e.set(es,ohe()):t==="thumbs-up"&&g4(t)?e.set(es,ihe()):t==="copied"&&kh(t)?e.set(es,she()):t==="engaging"&&kh(t)?e.set(es,ahe()):t==="think-deeper"&&kh(t)&&e.set(es,che())}const LS=V({counter:0,isActive:!0});function hhe(){const t=st(),e=t.get(LS);if(!e.isActive)return;const n=e.counter+1;n===fz?(m4("engaging"),t.set(LS,{counter:n,isActive:!1})):t.set(LS,{counter:n,isActive:e.isActive})}const fhe="group/ai-message-item space-y-3 break-words",phe=new Map([["1c","1C:Enterprise"],["abnf","Augmented Backus-Naur Form"],["accesslog","Apache Access Log"],["actionscript","ActionScript"],["ada","Ada"],["ado","Stata"],["adoc","AsciiDoc"],["ahk","AutoHotkey"],["angelscript","AngelScript"],["apache","Apache config"],["apacheconf","Apache config"],["applescript","AppleScript"],["arcade","ArcGIS Arcade"],["arduino","Arduino"],["arm","ARM Assembly"],["armasm","ARM Assembly"],["as","ActionScript"],["asc","AngelScript"],["asciidoc","AsciiDoc"],["aspectj","AspectJ"],["atom","HTML, XML"],["autohotkey","AutoHotkey"],["autoit","AutoIt"],["avrasm","AVR Assembly"],["awk","Awk"],["axapta","X++"],["bash","Bash"],["basic","BASIC"],["bat","Batch file (DOS)"],["bf","Brainfuck"],["bind","DNS Zone"],["bnf","Backus–Naur Form"],["brainfuck","Brainfuck"],["c","C"],["c#","C#"],["c++","C++"],["cal","C/AL"],["capnp","Cap’n Proto"],["capnproto","Cap’n Proto"],["cc","C++"],["ceylon","Ceylon"],["cjs","JavaScript"],["clean","Clean"],["clj","Clojure"],["clojure","Clojure"],["clojure-repl","Clojure REPL"],["cls","Caché Object Script"],["cmake","CMake"],["cmake.in","CMake"],["cmd","Batch file (DOS)"],["coffee","CoffeeScript"],["coffeescript","CoffeeScript"],["console","Shell Session"],["coq","Coq"],["cos","Caché Object Script"],["cpp","C++"],["cr","Crystal"],["craftcms","Twig"],["crm","crmsh"],["crmsh","crmsh"],["crystal","Crystal"],["cs","C#"],["csharp","C#"],["cson","CoffeeScript"],["csp","CSP"],["css","CSS"],["cts","TypeScript"],["cxx","C++"],["d","D"],["dart","Dart"],["dcl","Clean"],["delphi","Delphi"],["dfm","Delphi"],["diff","Diff"],["django","Django"],["dns","DNS Zone"],["do","Stata"],["docker","Dockerfile"],["dockerfile","Dockerfile"],["dos","Batch file (DOS)"],["dpr","Delphi"],["dsconfig","dsconfig"],["dst","Dust"],["dts","Device Tree"],["dust","Dust"],["ebnf","Extended Backus-Naur Form"],["edn","Clojure"],["elixir","Elixir"],["elm","Elm"],["erb","ERB"],["erl","Erlang"],["erlang","Erlang"],["erlang-repl","Erlang REPL"],["ex","Elixir"],["excel","Excel formulae"],["exs","Elixir"],["f#","F#"],["f90","Fortran"],["f95","Fortran"],["feature","Gherkin"],["fix","FIX"],["flix","Flix"],["fortran","Fortran"],["fs","F#"],["fsharp","F#"],["gams","GAMS"],["gauss","GAUSS"],["gcode","G-code (ISO 6983)"],["gemspec","Ruby"],["gherkin","Gherkin"],["glsl","GLSL"],["gml","GML"],["gms","GAMS"],["go","Go"],["golang","Go"],["golo","Golo"],["gql","GraphQL"],["gradle","Gradle"],["graph","Roboconf"],["graphql","GraphQL"],["groovy","Groovy"],["gss","GAUSS"],["gyp","Python"],["h","C"],["h++","C++"],["haml","HAML"],["handlebars","Handlebars"],["haskell","Haskell"],["haxe","Haxe"],["hbs","Handlebars"],["hh","C++"],["hpp","C++"],["hs","Haskell"],["hsp","HSP"],["html","HTML, XML"],["html.handlebars","Handlebars"],["html.hbs","Handlebars"],["htmlbars","Handlebars"],["http","HTTP"],["https","HTTP"],["hx","Haxe"],["hxx","C++"],["hy","Hy"],["hylang","Hy"],["i7","Inform 7"],["iced","CoffeeScript"],["icl","Clean"],["inform7","Inform 7"],["ini","TOML, also INI"],["ino","Arduino"],["instances","Roboconf"],["ipython","Python"],["irb","Ruby"],["irpf90","IRPF90"],["isbl","ISBL"],["java","Java"],["javascript","JavaScript"],["jboss-cli","JBoss CLI"],["jinja","Django"],["jldoctest","Julia REPL"],["js","JavaScript"],["json","JSON"],["jsonc","JSON"],["jsp","Java"],["jsx","JavaScript"],["julia","Julia"],["julia-repl","Julia REPL"],["k","Q"],["kdb","Q"],["kotlin","Kotlin"],["kt","Kotlin"],["kts","Kotlin"],["lasso","Lasso"],["lassoscript","Lasso"],["latex","LaTeX"],["ldif","LDIF"],["leaf","Leaf"],["less","Less"],["lisp","Lisp"],["livecodeserver","LiveCode"],["livescript","LiveScript"],["llvm","LLVM IR"],["ls","Lasso"],["ls","LiveScript"],["lsl","LSL (Linden Scripting Language)"],["lua","Lua"],["m","Mercury"],["mak","Makefile"],["make","Makefile"],["makefile","Makefile"],["markdown","Markdown"],["mathematica","Mathematica"],["matlab","Matlab"],["maxima","Maxima"],["md","Markdown"],["mel","MEL"],["mercury","Mercury"],["mikrotik","MikroTik RouterOS script"],["mips","MIPS Assembly"],["mipsasm","MIPS Assembly"],["mizar","Mizar"],["mjs","JavaScript"],["mk","Makefile"],["mkd","Markdown"],["mkdown","Markdown"],["ml","OCaml"],["ml","SML (Standard ML)"],["mm","Objective-C"],["mma","Mathematica"],["mojolicious","Mojolicious"],["monkey","Monkey"],["moo","Mercury"],["moon","MoonScript"],["moonscript","MoonScript"],["mts","TypeScript"],["n1ql","N1QL"],["nc","G-code (ISO 6983)"],["nestedtext","Nested Text"],["nginx","Nginx config"],["nginxconf","Nginx config"],["nim","Nim"],["nix","Nix"],["nixos","Nix"],["node-repl","Node REPL"],["nsis","NSIS"],["nt","Nested Text"],["obj-c","Objective-C"],["obj-c++","Objective-C"],["objc","Objective-C"],["objective-c++","Objective-C"],["objectivec","Objective-C"],["ocaml","OCaml"],["openscad","OpenSCAD"],["osascript","AppleScript"],["oxygene","Oxygene"],["p21","STEP Part 21"],["parser3","Parser3"],["pas","Delphi"],["pascal","Delphi"],["patch","Diff"],["pb","PureBASIC"],["pbi","PureBASIC"],["pcmk","crmsh"],["pde","Processing"],["perl","Perl"],["pf","Packet Filter config"],["pf.conf","Packet Filter config"],["pgsql","PostgreSQL"],["php","php"],["php-template","PHP template"],["pl","Perl"],["plaintext","Plain text"],["plist","HTML, XML"],["pm","Perl"],["podspec","Ruby"],["pony","Pony"],["postgres","PostgreSQL"],["postgresql","PostgreSQL"],["powershell","PowerShell"],["pp","Puppet"],["processing","Processing"],["profile","Python profiler"],["prolog","Prolog"],["properties",".properties"],["proto","Protocol Buffers"],["protobuf","Protocol Buffers"],["ps","PowerShell"],["ps1","PowerShell"],["puppet","Puppet"],["purebasic","PureBASIC"],["pwsh","PowerShell"],["py","Python"],["pycon","python-repl"],["python","Python"],["python-repl","python-repl"],["q","Q"],["qml","QML"],["qt","QML"],["r","R"],["rb","Ruby"],["re","ReasonML"],["reasonml","ReasonML"],["rib","RenderMan RIB"],["roboconf","Roboconf"],["routeros","MikroTik RouterOS script"],["rs","Rust"],["rsl","RenderMan RSL"],["rss","HTML, XML"],["ruby","Ruby"],["ruleslanguage","Oracle Rules Language"],["rust","Rust"],["sas","SAS"],["scad","OpenSCAD"],["scala","Scala"],["scheme","Scheme"],["sci","Scilab"],["scilab","Scilab"],["scm","Scheme"],["scss","SCSS"],["sh","Bash"],["shell","Shell Session"],["shellsession","Shell Session"],["smali","Smali"],["smalltalk","Smalltalk"],["sml","SML (Standard ML)"],["sqf","SQF"],["sql","SQL"],["st","Smalltalk"],["stan","Stan"],["stanfuncs","Stan"],["stata","Stata"],["step","STEP Part 21"],["step21","STEP Part 21"],["stp","STEP Part 21"],["styl","Stylus"],["stylus","Stylus"],["subunit","SubUnit"],["sv","Verilog"],["svg","HTML, XML"],["svh","Verilog"],["swift","Swift"],["taggerscript","Tagger Script"],["tao","XL"],["tap","Test Anything Protocol"],["tcl","Tcl"],["tex","LaTeX"],["text","Plain text"],["thor","Ruby"],["thrift","Thrift"],["tk","Tcl"],["toml","TOML, also INI"],["tp","TP"],["ts","TypeScript"],["tsx","TypeScript"],["twig","Twig"],["txt","Plain text"],["typescript","TypeScript"],["v","Verilog"],["vala","Vala"],["vb","Visual Basic .NET"],["vbnet","Visual Basic .NET"],["vbs","VBScript"],["vbscript","VBScript"],["vbscript-html","VBScript in HTML"],["verilog","Verilog"],["vhdl","VHDL"],["vim","Vim Script"],["wasm","WebAssembly"],["wildfly-cli","JBoss CLI"],["wl","Mathematica"],["wren","Wren"],["wsf","HTML, XML"],["x++","X++"],["x86asm","Intel x86 Assembly"],["xhtml","HTML, XML"],["xjb","HTML, XML"],["xl","XL"],["xls","Excel formulae"],["xlsx","Excel formulae"],["xml","HTML, XML"],["xpath","XQuery"],["xq","XQuery"],["xqm","XQuery"],["xquery","XQuery"],["xsd","HTML, XML"],["xsl","HTML, XML"],["yaml","YAML"],["yml","YAML"],["zep","Zephir"],["zephir","Zephir"],["zone","DNS Zone"],["zsh","Bash"]]),vp="&#95;{{{CITATION{{{&#95;",kv="{",mhe=Object.freeze(Object.defineProperty({__proto__:null,AI_MESSAGE_CONTAINER_CLASS:fhe,ALIAS_TO_SUPPORTED_LANGUAGE:phe,CITATION_DIVIDER:kv,CITATION_PREFIX:vp},Symbol.toStringTag,{value:"Module"}));function v4(t,e){return`[${vp}${t}${kv}](${e})`}const ghe=new RegExp(`\\[${vp}.*?\\)`,"g");function vhe(t){return t.replace(ghe,"")}const yhe=2500,bhe=255,ab=mT(new Map),N1e=V(null),Che=V(ez),She=V(bhe),Ehe=V(yhe);function whe(t,e,n){return`${t}_${e}_${n}`}function The(t,e){st().set(ab,r=>{const o=r.get(t)??[],i=[];for(const s of e.editTargets){const a={id:whe(e.id,s.startIndex,s.endIndex),pageSuggestionId:e.id,startIndex:s.startIndex,endIndex:s.endIndex,text:e.text};i.push(a)}r.set(t,[...o,...i])})}function O1e(t,e){st().set(ab,r=>{const o=r.get(t);o&&r.set(t,o.filter(i=>i.id!==e))})}function M1e(t){st().set(ab,n=>{n.delete(t)})}function Ihe(t,e,n){st().set(ab,o=>{const i=o.get(t);if(i){const s=i.filter(a=>a.pageSuggestionId===e);for(const a of s)a.text===void 0&&(a.text=""),a.text+=n}})}function _he(t){const{card:e,messageId:n,conversationId:r}=t,o={eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_impressionScenario:"answerCardReceived",eventInfo_answerCardType:e.type,eventInfo_messageId:n,eventInfo_conversationId:r};switch(e.type){case"image":o.eventInfo_answerCardContentLength=e.images.length;break;case"localEntity":o.eventInfo_answerCardContentLength=e.entities.length;break;case"financeChart":o.eventInfo_answerCardScenario=e.instrument.securityType;break}K.trackEvent({name:"system",data:o})}function Ahe(t){const{card:e,messageId:n,conversationId:r}=t,o=performance.now(),i=gt(oM);if(!i)return;const s={eventName:"copilotAnswerCardReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_cardType:e.type,eventInfo_duration:o-i};K.trackEvent({name:"system",data:s})}function khe(t){const{message:e,conversationId:n}=t;for(const r of e.content)switch(r.type){case"card":_he({card:r.card,messageId:e.id,conversationId:n}),Ahe({card:r.card,messageId:e.id,conversationId:n});break}}async function xhe(t){K.setSettings({userConsentModelTraining:!t.optOutOfTraining,userConsentPersonalization:!t.optOutOfPersonalization,userSettingPhoneConnection:!t.optOutOfPhoneConnection,userSettingGenUI:!t.optInToGenerativeUI}),await Fr({path:"/user/settings",args:{options:{method:"PATCH"},body:{optOutOfTraining:t.optOutOfTraining,optOutOfPersonalization:t.optOutOfPersonalization,optInToVoiceTraining:t.optInToVoiceTraining,optOutOfPhoneConnection:t.optOutOfPhoneConnection,optInToGenerativeUI:t.optInToGenerativeUI,allowBiometricDataUse:t.allowBiometricDataUse,allowOneDriveAccess:t.allowOneDriveAccess,features:t.features}}})}async function Rhe(){var e,n;const t=await Fn("/user",iL,{parseOptions:{safe:!0},query:{"api-version":"2"}}).then(r=>r.data);st().set(tI,((e=t.remainingCalls)==null?void 0:e.podcastGeneration)??null),st().set(nI,((n=t.remainingCalls)==null?void 0:n.research)??null)}const Vt=st();function HP(t){return{chatMode:"chat",timing:new Dde(t),citationCount:0,imageCount:0,inputMethod:"text"}}class Phe{constructor(e){Z(this,"ws");Z(this,"conversationMetadata",new Map);Z(this,"conversationIdByMessageId",new Map);Z(this,"messageIdByTaskId",new Map);Z(this,"latestMessagePartIdentifier",null);this.ws=e,this.send=this.send.bind(this),this.regenerate=this.regenerate.bind(this),this.sendChallengeResponse=this.sendChallengeResponse.bind(this),this.resetConversationState=this.resetConversationState.bind(this),this.resetConversationTiming=this.resetConversationTiming.bind(this),this.setConversationIdByMessageId=this.setConversationIdByMessageId.bind(this),this.setMessageIdByTaskId=this.setMessageIdByTaskId.bind(this),this.onSubmitMessageBlocked=this.onSubmitMessageBlocked.bind(this),this.callBeforeSendForConversation=this.callBeforeSendForConversation.bind(this),this.callOnSentForConversation=this.callOnSentForConversation.bind(this),this.setChatModeForConversation=this.setChatModeForConversation.bind(this),this.setInputMethodForConversation=this.setInputMethodForConversation.bind(this),this.setUserMessageForConversation=this.setUserMessageForConversation.bind(this),this.processEvent=this.processEvent.bind(this)}getConversationState(e){return this.conversationMetadata.has(e)||this.conversationMetadata.set(e,HP(performance.now())),this.conversationMetadata.get(e)}get latestMessagePartId(){return this.latestMessagePartIdentifier}resetConversationState(e,n){this.conversationMetadata.set(e,HP(n))}resetConversationTiming(e,n){this.getConversationState(e).timing.resetStartTime(n)}setConversationIdByMessageId(e){const{messageId:n,conversationId:r}=e;this.conversationIdByMessageId.set(n,r)}setMessageIdByTaskId(e){const{taskId:n,messageId:r}=e;this.messageIdByTaskId.set(n,r)}onSubmitMessageBlocked(e){const{timing:n,chatMode:r,inputMethod:o}=this.getConversationState(e);n.onSubmitMessageBlocked(r,o,e)}callBeforeSendForConversation(e){this.getConversationState(e).timing.onBeforeSend()}callOnSentForConversation(e,n){this.getConversationState(e).timing.onSent(n)}setChatModeForConversation(e,n){const r=this.getConversationState(e);r.chatMode=n}setInputMethodForConversation(e,n){const r=this.getConversationState(e);r.inputMethod=n}setUserMessageForConversation(e,n){const r=this.getConversationState(e);r.lastUserMessage=n}send(e){const{content:n,conversationId:r,data:o,mode:i,context:s}=e,a={event:"send",conversationId:r,content:Array.isArray(n)?n:[n],mode:i,context:s,...o};this.ws.send(JSON.stringify(a))}sendChallengeResponse(e){this.ws.send(JSON.stringify({event:"challengeResponse",token:e.token,method:e.method}))}regenerate(e){const{messageId:n,mode:r}=e,o={event:"regenerate",messageId:n,mode:r};this.ws.send(JSON.stringify(o))}processEvent(e){switch("id"in e&&(this.latestMessagePartIdentifier=e.id??null),e.event){case"received":this.handleReceived(e);break;case"connected":this.handleConnected(e);break;case"emojiReaction":this.handleEmojiReaction(e);break;case"startMessage":this.handleStartMessage(e);break;case"appendText":this.handleAppendText(e);break;case"replaceText":this.handleReplaceText(e);break;case"invokeAction":this.handleInvokeAction(e);break;case"chainOfThought":this.handleChainOfThought(e);break;case"citation":this.handleCitation(e);break;case"generatingImage":this.handleGeneratingImage(e);break;case"imageGenerated":this.handleImageGenerated(e);break;case"partialImageGenerated":this.handlePartialImageGenerated(e);break;case"imageGenerationFailed":this.handleImageGenerationFailed(e);break;case"generatingCard":this.handleGeneratingCard(e);break;case"cardGenerationFailed":this.handleCardGenerationFailed(e);break;case"page":this.handlePage(e);break;case"titleUpdate":this.handleTitleUpdate(e);break;case"challenge":this.handleChallenge();break;case"card":this.handleCard(e);break;case"taskStart":this.handleTaskStart(e);break;case"taskUpdate":this.handleTaskUpdate(e);break;case"error":this.handleError(e);break;case"banned":this.handleBanned(e);break;case"suggestedFollowups":this.handleSuggestedFollowups(e);break;case"done":this.handleDone(e);break;case"startSuggestion":this.handleStartSuggestion(e);break;case"appendSuggestion":this.handleAppendSuggestion(e);break;case"activityStart":this.handleActivityStart(e);break;case"activityUpdate":this.handleActivityUpdate(e);break;case"memoryUpdate":this.handleMemoryUpdate(e);break}}handleMemoryUpdate(e){if(!et("memory-edf"))return;const{messageId:n,partId:r,text:o,icon:i}=e,s=this.conversationIdByMessageId.get(n);s&&Yt(s,a=>{const c=$n(a,n);c&&c.content.push({type:"memoryUpdateMessagePart",partId:r,text:o,icon:i})})}clearAllStreamingStates(){const e=Vt.get(In);for(const n of e.values())Hs(n.id,r=>{r.streamingState="idle"})}handleReceived(e){const{messageId:n,conversationId:r}=e;this.conversationIdByMessageId.set(n,r);const o=this.getConversationState(r);o.timing.onReceived({messageId:n,conversationId:r,chatMode:o.chatMode}),tP([`humanMessage_${n}`,`conversation_${r}`]),Vt.set(bc,i=>i&&!qE()?i-1:i),Yt(r,i=>{const s=i.at(-1);(s==null?void 0:s.author)==="human"&&(s.id=n)}),hhe()}handleConnected(e){Zv.trackLatestChatConnectedAssignment(e)}handleEmojiReaction(e){const{messageId:n,emoji:r}=e,o=this.conversationIdByMessageId.get(n);o&&Yt(o,i=>{const s=VJ(i,n);s&&(s.emojiReaction=r)})}handleStartMessage(e){const{messageId:n,conversationId:r,createdAt:o}=e;this.conversationIdByMessageId.set(n,r);const i=this.getConversationState(r),{chatMode:s}=i;i.citationCount=0,i.timing.onStartMessage({messageId:n,conversationId:r,chatMode:s}),et("multiplecharacters")&&Vt.set(ic,"responding"),tP([`aiMesssage_${n}`,`conversation_${r}`]);const a={id:n,createdAt:o,author:"ai",content:[],mode:s};Hs(r,c=>{c.streamingState="streaming"}),Yt(r,c=>{c.length===0&&YL(Vt.get(Yo),r)||c.push(a)})}handleAppendText(e){const{text:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);if(!i)return;const s=this.getConversationState(i);s.timing.onFirstToken(r,s.chatMode,i),Yt(i,a=>{const c=$n(a,r);if(c){Dl(i,c.id);let u=_a(c.content,o);if(!u)u={type:"text",text:"",partId:o},c.content.push(u);else if(u.type!=="text"){console.error(`appendText event with partId that is not a text item. Item is of type ${u.type}`,e);return}u.text=u.text.concat(n),qJ(c)}})}handleReplaceText(e){const{text:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);i&&Yt(i,s=>{const a=$n(s,r);if(a){Dl(i,a.id);let c=_a(a.content,o);if(!c)c={type:"text",text:"",partId:o},a.content.push(c);else if(c.type!=="text"){console.error("replaceText event with partId that is not a text item",e);return}c.text=n,c.citations=void 0}})}handleCitation(e){const{title:n,url:r,messageId:o,publisher:i,iconUrl:s}=e,a=this.conversationIdByMessageId.get(o);if(!a)return;const c=this.getConversationState(a);QV(r,a,o),Yt(a,u=>{const d=$n(u,o);if(d){Dl(a,d.id);const f=$J(d.content);if(f){f.citations||(f.citations=[]);const p=f.citations.find(v=>v.url===r);let g;p?g=p.index:(c.citationCount+=1,g=`${c.citationCount}`,f.citations.push({index:g,url:r,iconUrl:s,title:n,publisher:i})),f.text=f.text.concat(v4(g,r))}}})}handleGeneratingImage(e){const{prompt:n,messageId:r,partId:o,progressionText:i}=e,s=this.conversationIdByMessageId.get(r);if(!s)return;const a=this.getConversationState(s);a.timing.onImageGenerationStart({messageId:r,conversationId:s,chatMode:a.chatMode}),Yt(s,c=>{const u=$n(c,r);u&&u.content.push({type:"image",prompt:n,partId:o,partialGenerationStep:0,status:"generating",progressionText:i})})}handleImageGenerated(e){const{url:n,partId:r,messageId:o}=e,i=this.conversationIdByMessageId.get(o);if(!i)return;const s=this.getConversationState(i);s.imageCount+=1,s.timing.onImageReceived({messageId:o,conversationId:i,chatMode:s.chatMode}),Yt(i,a=>{const c=$n(a,o);if(c){const u=_a(c.content,r);(u==null?void 0:u.type)==="image"&&(u.isPartiallyLoading=!1,u.url=n,u.partialGenerationStep=void 0,u.status="generated",u.progressionText=void 0)}})}handlePartialImageGenerated(e){const{content:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);if(!i)return;const s=this.getConversationState(i);Yt(i,a=>{const c=$n(a,r);if(c){const u=_a(c.content,o);if((u==null?void 0:u.type)==="image"){u.isPartiallyLoading=!0,u.url=`data:image/png;base64,${n}`;const d=(u.partialGenerationStep??0)+1;u.partialGenerationStep=d,u.status="generating",s.timing.onPartialImageReceived({messageId:r,conversationId:i,chatMode:s.chatMode,imageGenPhase:d})}}})}getImageGenerationErrorMessage(e){switch(e){case"not-signed-in":return ce("error.imageGenerationFailedSignedOut");case"throttled":return ce("error.imageGenerationFailedThrottled");case"blocked":return ce("error.imageGenerationFailedBlocked");default:return ce("error.imageGenerationFailed")}}handleImageGenerationFailed(e){const{messageId:n,partId:r,errorCode:o}=e,i=this.conversationIdByMessageId.get(n);if(!i)return;Yt(i,a=>{const c=$n(a,n);c&&(c.content=c.content.filter(u=>u.type!=="image"||u.partId!==r))});const s=this.getImageGenerationErrorMessage(o);o==="not-signed-in"&&Vt.set(sl,{isOpen:!0,scenario:null,reason:"imageGeneration"}),Dp(s,i)}handleCardGenerationFailed(e){const n=Vt.get(Sh);if(n&&this.isGeneratedCards(n)){Vt.set(Sh,void 0);const r=this.conversationIdByMessageId.get(e.messageId);if(!r)return;n==="quiz"&&Dp(ce("quizCard.generatedQuizFailed"),r)}}handleGeneratingCard(e){const{type:n}=e;this.isGeneratedCards(n)&&Vt.set(Sh,n)}isGeneratedCards(e){return gL.safeParse(e).success}handleTitleUpdate(e){const{conversationId:n,title:r}=e;Vt.set(In,o=>ma(o,i=>{const s=i.get(n);s&&(s.title=r)}))}handleCard(e){const{messageId:n,partId:r,card:o}=e,i=this.conversationIdByMessageId.get(n);if(!i)return;const s=this.getConversationState(i);if(o.type==="ads"){Gde({card:o,messageId:n,partId:r,conversationState:s,conversationId:i});return}Yt(i,a=>{const c=$n(a,n);c&&c.content.push({type:"card",partId:r,card:o})})}handleBanned(e){const{expiresAt:n}=e,r=j_(n);r&&U_(r,"chat",n)}handlePage(e){const{messageId:n,page:r,partId:o}=e,i=this.conversationIdByMessageId.get(n);i&&(Yt(i,s=>{const a=$n(s,n);a&&a.content.push({type:"page",partId:o,page:r})}),Kt.emit("pages:page-created",r))}handleStartSuggestion(e){const{pageId:n,suggestionId:r,editTargets:o}=e;The(n,{id:r,text:void 0,editTargets:o})}handleAppendSuggestion(e){const{pageId:n,suggestionId:r,text:o}=e;Ihe(n,r,o)}handleActivityStart(e){if(!et("ceo"))return;const{messageId:n,partId:r,activity:o}=e,i=this.conversationIdByMessageId.get(n);i&&Yt(i,s=>{const a=$n(s,n);a?(Dl(i,a.id),a.content.push({activity:o,type:"activity",partId:r})):Bde(n)})}handleActivityUpdate(e){if(!et("ceo"))return;const{messageId:n,partId:r,update:o}=e,i=this.conversationIdByMessageId.get(n);if(i)try{Yt(i,s=>{const a=$n(s,n);if(!a)return;const c=_a(a.content,r);if(!c||c.type!=="activity"){Hde(n,r);return}tc(c.activity,o)})}catch(s){zde(s)}}processInvokeAction(e){const n=Vt.get(mt);if(n)switch(e.actionName){case"phone_send_message":{Yt(n,r=>{const o=$L(r);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"phoneSendMessage",actionId:e.actionId,contactName:e.parameters.contactName,text:e.parameters.text,phoneNumber:e.parameters.phoneNumber}})});break}case"edge_get_page_content":{const r=e.parameters.map(o=>({tabId:o.tabId,windowId:o.windowId,pageUrl:o.pageUrl??""}));qce.run({actionId:e.actionId,tabs:r});break}}}handleInvokeAction(e){const{success:n,data:r}=Kde.safeParse(e);n?this.processInvokeAction(r):console.error("Invalid action data:",e)}handleTaskStart(e){const{messageId:n,task:r,partId:o}=e,i=this.conversationIdByMessageId.get(n);this.messageIdByTaskId.set(r.id,n);const s=new Date().toISOString();if(i){Jde([r],i,s),Vt.set(Oh,!1),Yt(i,c=>{const u=$n(c,n);if(u){const d=jde(r,o,s);d&&u.content.push(d)}}),$ce.run({task:r,action:"startTask"});const a=Vt.get(mt);r.type==="computerUse"&&i===a&&aX(r.conversationId,i),(r.type==="podcast"||r.type==="research")&&Rhe()}}handleTaskUpdate(e){const{taskId:n,update:r}=e;if(nX(n,r))return;let o=!1;const i=this.messageIdByTaskId.get(n),s=i?this.conversationIdByMessageId.get(i):void 0;try{i&&s&&Yt(s,a=>{const c=et("multiple-research-tasks-in-conversation")&&F2,u=$n(a,i,c);if(u){const d=zJ(u.content),f=d==null?void 0:d.task;f&&f.type==="research"&&(tc(f,r),VL.includes(f.status)&&(GJ("chat"),Fde(f,s)))}}),lI(n,a=>{var c;if(a.type==="computerUse"&&tc(a,r),a.type==="podcast"){const u=((c=a.podcast)==null?void 0:c.id)??"";tc(a,r),a.podcast&&(a.podcast.id=u)}}),o=!0}catch(a){console.error("Error applying task update patch:",a)}if(o){const a=Vt.get(Yo).get(n);switch(a==null?void 0:a.type){case"computerUse":sX(n,r);break;case"podcast":Ude(a);break}}}handleSuggestedFollowups(e){const{disableMultiturn:n}=be.instance().config();if(!n){const{suggestions:r,messageId:o}=e,i=this.conversationIdByMessageId.get(o);i&&Hs(i,s=>{s.suggestedFollowup={messageId:o,suggestions:r}})}}handleError(e){const{errorCode:n}=e;if(n==="over-turn-limit")Vt.set(bc,0);else if(n==="over-reasoning-quota"){!Vt.get(tp)&&qE()&&be.instance().config().thinkDeeperFreemiumEnabled&&(Vt.set(p$,"chat-over-reasoning-quota"),Vt.set(Ir,"reasoning-mode-pro-subscription")),Vt.set(dr,"chat");for(const[o]of this.conversationMetadata.entries())Dp(ce("chat.overCapacity"),o)}else if(n==="over-task-quota")Vt.set(Ir,"over-task-quota");else if(n==="unknown-error")for(const[r]of this.conversationMetadata.entries())Hs(r,o=>{o.streamingState="idle"});else if(n==="page-content-length-exceeded"||n==="page-count-exceeded"){Kt.emit("page:message-error",n);for(const[r]of this.conversationMetadata.entries())Hs(r,o=>{o.streamingState="idle"})}else for(const[r]of this.conversationMetadata.entries())Dp(ce("error.eventNotRecognized"),r);Vt.set(Oh,!1)}handleChainOfThought(e){const{messageId:n,partId:r,text:o}=e,i=this.conversationIdByMessageId.get(n);i&&Yt(i,s=>{const a=$n(s,n);if(a){Dl(i,a.id);let c=_a(a.content,r);if(!c)c={type:"chainOfThought",text:"",partId:r},a.content.push(c);else if(c.type!=="chainOfThought"){console.error(`chainOfThought event with partId that is not a chainOtThought item. Item is of type ${c.type}`,e);return}c.text=c.text.concat(o)}})}handleChallenge(){if(!Zs("kill-cf-turnstile")){const e=Vt.get(mt);if(!e)return;const{lastUserMessage:n}=this.getConversationState(e);rhe(r=>{this.sendChallengeResponse({token:r,method:"cloudflare"}),n&&this.send(n)})}}handleDone(e){var c;et("multiplecharacters")&&Vt.get(ic)==="responding"&&Vt.set(ic,"idle");const{messageId:n}=e,r=this.conversationIdByMessageId.get(n);if(!r)return;const o=this.getConversationState(r);o.timing.onLastToken({messageId:n,conversationId:r,citationCount:o.citationCount,imageCount:o.imageCount,chatMode:o.chatMode,inputMethod:o.inputMethod});const s=((c=Vt.get(In).get(r))==null?void 0:c.history)??[],a=$n(s,n);Yt(r,u=>{if(!a)return;const d=$n(u,a.id),f=a.content.find(p=>p.type==="image"&&p.partialGenerationStep!==void 0);if(d&&f){const p=_a(d.content,f.partId);p&&(p.partialGenerationStep===0?p.type="deleted":p.type==="image"&&(p.isPartiallyLoading=!1,p.partialGenerationStep=void 0,p.status="non-complete"))}}),Hs(r,u=>{u.streamingState="idle"}),Vt.set(Sh,void 0),Vt.set(Oh,!1),window.setTimeout(()=>{Vt.set(TT,u=>{if(u.get(r)===n){const f=new Map(u);return f.delete(r),f}return u})},o.chatMode==="reasoning"?5e3:3e3),Vt.set(lM,!0),a&&khe({message:a,conversationId:r}),Wce.run({conversationMessages:s})}}const Nhe="eval/chat";function Ohe(){const t=et("weather-cards"),e=!Zs("kill-image-cards"),n=et("local-cards"),r=et("sports-cards"),o=!Zs("kill-video-cards"),i=et("shopping-card"),s=et("shopping-curated"),a=et("media-spotlight-card"),c=et("job-cards"),u=et("safetycards"),d=et("quiz-cards"),f=et("generateads"),p=et("generateadsint"),g=et("adsparity"),v=!Zs("kill-finance-cards"),y=et("adstags"),b=et("product-ads-dynamic-filter"),C=et("property-promotion-ads-dynamic-filter"),S=et("tour-activity-ads-dynamic-filter"),w=et("adsshowroom"),E=et("emoji-reactions"),T=et("imagegenv3");et("turn-telemetry");const I=et("recipe-card"),A=et("file-cards"),{adsEnabled:_,adsShowroomEnabled:j,disableAnswerCards:R,enforceAdsOptOutOfPersonalization:$,answerCardOverrides:U}=be.instance().config(),se=!!st().get(tp),P=(f||p||g)&&_&&!se,k=a&&(U==null?void 0:U.shouldEnableMediaSpotlightCard),N=[];R||(t&&N.push("weather"),n&&N.push("local"),e&&N.push("image"),r&&N.push("sports"),o&&N.push("video"),i&&N.push("shopping"),c&&N.push("job"),P&&N.push("ads"),u&&N.push("safetyHelpline"),d&&N.push("quiz"),v&&N.push("finance"),s&&N.push("shoppingCurated"),I&&N.push("recipe"),A&&N.push("file"),k&&N.push("mediaSpotlight"));const x={supportedTypes:["text","product","multimedia","tourActivity","propertyPromotion"]};$&&(x.optOutOfPersonalization=!0),w&&_&&j&&x.supportedTypes.push("showroom"),(b||y)&&(x.product={tagsSupported:!0}),C&&(x.propertyPromotion={tagsSupported:!0}),S&&(x.tourActivity={tagsSupported:!0});const M=[];return E&&M.push("emoji-reactions"),T&&M.push("partial-generated-images"),{supportedFeatures:M,supportedCards:N.length>0?N:void 0,ads:P?x:null}}const zP=1e3,Mhe=3e4,Lhe=5e3;class Dhe{constructor({autoReconnect:e=!1}={}){Z(this,"connection");Z(this,"autoReconnect");Z(this,"reconnectInterval");Z(this,"maxReconnectInterval");Z(this,"reconnectTimeout");Z(this,"sendQueue",[]);Z(this,"connecting",!1);Z(this,"state",null);Z(this,"cachedSendData",null);Z(this,"pongTimeout",null);Z(this,"boundReconnectIfNeeded");Z(this,"boundDisconnect");Z(this,"boundVisibilityChange");Z(this,"getUrl",null);Z(this,"onopen");Z(this,"onmessage");Z(this,"onclose");Z(this,"onerror");this.connection=null,this.autoReconnect=e,this.reconnectInterval=zP,this.maxReconnectInterval=e?Mhe:0,this.reconnectTimeout=null,this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.connect=this.connect.bind(this),this.reconnect=this.reconnect.bind(this),this.processSendQueue=this.processSendQueue.bind(this)}async initialize(){this.state=null,await this.connect(),this.autoReconnect&&(this.boundReconnectIfNeeded=this.reconnectIfNeeded.bind(this),this.boundDisconnect=this.disconnect.bind(this),this.boundVisibilityChange=()=>{document.visibilityState==="visible"&&this.reconnectIfNeeded()},window.addEventListener("online",this.boundReconnectIfNeeded),window.addEventListener("offline",this.boundDisconnect),document.addEventListener("visibilitychange",this.boundVisibilityChange))}async connect(){var n;if(((n=this.connection)==null?void 0:n.readyState)===WebSocket.CONNECTING||this.connecting||this.pongTimeout)return;if(!this.getUrl)throw new Error("getUrl function is not set");this.connecting=!0;const e=await this.getUrl();this.connection=new WebSocket(e),this.connecting=!1,this.connection.onopen=r=>{this.state=null,this.onopen&&this.onopen(r),this.processSendQueue(),this.reconnectInterval=zP,this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},this.connection.onmessage=r=>{if(this.state!=="destroyed")try{const o=JSON.parse(r.data);this.onmessage&&this.onmessage(o),o.event==="pong"&&(this.removePongTimeout(),this.processSendQueue())}catch{}},this.connection.onclose=r=>{this.connection&&this.connection.bufferedAmount>0&&this.cachedSendData&&(this.sendQueue.push(this.cachedSendData),this.cachedSendData=null),this.onclose&&this.onclose(r),this.autoReconnect&&this.state===null&&this.reconnect(),this.removePongTimeout()},this.connection.onerror=r=>{this.onerror&&this.onerror(r),this.connection&&this.connection.close(),this.removePongTimeout()}}reconnect(){this.reconnectTimeout&&window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=window.setTimeout(this.connect,this.reconnectInterval),this.reconnectInterval=Math.min(this.reconnectInterval*2,this.maxReconnectInterval)}processSendQueue(){if(this.sendQueue.length>0){const e=this.sendQueue;this.sendQueue=[];for(const n of e)this.send(n)}}reconnectIfNeeded(){if(this.state!=="destroyed"){if(!this.connection||this.connection.readyState!==WebSocket.OPEN){this.reconnect();return}this.pongTimeout===null&&(this.connection.send(JSON.stringify({event:"ping"})),this.pongTimeout=window.setTimeout(()=>{var e;this.pongTimeout=null,(e=this.connection)==null||e.close(),this.reconnect()},Lhe))}}removePongTimeout(){this.pongTimeout!==null&&(window.clearTimeout(this.pongTimeout),this.pongTimeout=null)}send(e){if(this.state!=="destroyed")if(this.connection&&this.connection.readyState===WebSocket.OPEN&&this.pongTimeout===null)try{this.cachedSendData=e,this.connection.send(e)}catch{this.sendQueue.push(e),this.connect()}else this.sendQueue.push(e),this.connect()}cleanup(){this.boundReconnectIfNeeded&&window.removeEventListener("online",this.boundReconnectIfNeeded),this.boundDisconnect&&window.removeEventListener("offline",this.boundDisconnect),this.boundVisibilityChange&&document.removeEventListener("visibilitychange",this.boundVisibilityChange)}disconnect(){this.connection&&(this.state="disconnected",this.connection.close())}destroy(){this.connection&&(this.state="destroyed",this.cleanup(),this.connection.close(),this.connection=null)}}async function nc({useMockConnection:t}={}){const e=async({cursor:n})=>{const r=yU()?Nhe:"chat";return n?eP(r,{cursor:n}):eP(r)};return Wm.get({getUrl:e})}async function jhe({getUrl:t}){return typeof WebSocket>"u"?{destroy:()=>{},send:()=>{},regenerate:()=>{},sendAudioStart:()=>{},sendAudio:()=>{},sendAudioEnd:()=>{},setCallType:()=>{},stop:()=>{},setOnEvent:()=>()=>{},sendChallengeResponse:()=>{},sendActionResult:()=>{},resetConversationState:()=>{},resetConversationTiming:()=>{},setConversationIdByMessageId:()=>{},setMessageIdByTaskId:()=>{},setChatModeForConversation:()=>{},setInputMethodForConversation:()=>{},callBeforeSendForConversation:()=>{},callOnSentForConversation:()=>{},setUserMessageForConversation:()=>{},onSubmitMessageBlocked:()=>{}}:new Promise((e,n)=>{const r=Zs("kill-chat-auto-reconnect"),o=new Dhe({autoReconnect:!r}),i=new Phe(o);o.getUrl=()=>t({cursor:i.latestMessagePartId}),o.onopen=()=>{const a={event:"setOptions",...Ohe()};o.send(JSON.stringify(a)),o.onmessage=c=>{try{o1.parse(c)}catch(u){u instanceof ng&&df(u,"/chat")}i.processEvent(c)},e({destroy:()=>{o.destroy(),i.clearAllStreamingStates()},stop:(c={})=>{const{conversationId:u,taskId:d}=c;o.send(JSON.stringify({event:"stop",conversationId:u})),d&&o.send(JSON.stringify({event:"send",conversationId:u,content:[{type:"command",command:{type:"cancelTask",taskId:d}}],mode:"research"})),u&&Hs(u,f=>{f.streamingState="idle"})},send:i.send,regenerate:i.regenerate,sendAudioStart:(c,u,d)=>{const f={event:"audioStart",conversationId:c,options:u,clientType:d};o.send(JSON.stringify(f))},sendAudio:c=>{const u={event:"audio",audio:c};o.send(JSON.stringify(u))},sendAudioEnd:()=>{const c={event:"audioEnd"};o.send(JSON.stringify(c))},setCallType:c=>{const u={event:"setCallType",callType:c};o.send(JSON.stringify(u))},sendChallengeResponse:i.sendChallengeResponse,setOnEvent:c=>{o.onmessage=u=>{try{o1.parse(u),i.processEvent(u)}catch(d){d instanceof ng&&df(d,"/chat")}c(u)}},sendActionResult:c=>{o.send(JSON.stringify({event:"actionResult",actionId:c.actionId,result:c.result}))},resetConversationState:i.resetConversationState,resetConversationTiming:i.resetConversationTiming,setConversationIdByMessageId:i.setConversationIdByMessageId,setMessageIdByTaskId:i.setMessageIdByTaskId,setChatModeForConversation:i.setChatModeForConversation,setInputMethodForConversation:i.setInputMethodForConversation,callBeforeSendForConversation:i.callBeforeSendForConversation,callOnSentForConversation:i.callOnSentForConversation,setUserMessageForConversation:i.setUserMessageForConversation,onSubmitMessageBlocked:i.onSubmitMessageBlocked})},o.onclose=()=>{},o.onerror=s=>{const a=s instanceof ErrorEvent?s.message:"Unknown WebSocket error";K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketError",eventInfo_errorMessage:a,eventInfo_details:JSON.stringify(s)}}),n(new Error(`WebSocket connection error: ${a}`))},o.initialize().catch(s=>{const a=s instanceof Error?s.message:"Unknown WebSocket error";K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketInitializationError",eventInfo_errorMessage:a,eventInfo_details:s instanceof Error?s.stack??"":""}}),n(new Error(`WebSocket initialization error: ${a}`))})})}async function y4(){if(Wm.isInstantiated){const t=gt(Po),e=(t==null?void 0:t.streamingState)==="streaming",n=await Wm.get();n.stop(),n.destroy(),n.stop({conversationId:t==null?void 0:t.id}),Wm.reset();try{K.trackEvent({name:"system",data:{eventName:"chatClientReset",eventInfo_isMessageStreaming:e}})}catch{}}}const Wm=new el(t=>jhe(t));function Uhe(t){return t?t.startsWith("!"):!1}function Mf(t){return t==="reasoning"?hz:ce(`composer.chatModes.${t}.title`)}const VP={global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lrn_uni;u1={REGION};u2={LANG_LOCALE};u6=CMC;u50=submit_message;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://secure.adnxs.com/px?id=1869141&t=2","https://servedby.flashtalking.com/spot/1/5155;147512;16638/?spotName=USA_FY25H2_Copilot_Consumer_Chat_Send_button_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=Custom&m.customEventName=COPChatSend&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1"],gb:["https://secure.adnxs.com/px?id=1869542&t=2&seg=39793132&consent={CONSENT}","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://servedby.flashtalking.com/spot/1/3360;147492;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Chat_Send_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}"]},Ym={onPageLoad:{global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lp_uniq;u1={REGION};u2={LANG_LOCALE};u6=CMC;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869069&t=2","https://servedby.flashtalking.com/spot/1/5155;147507;16638/?spotName=USA_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=PageVisit&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140"],gb:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869539&seg=39793125&t=2&consent={CONSENT}","https://servedby.flashtalking.com/spot/1/3360;147490;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}"]},onMessageSend:VP,onStartVoiceChat:VP,onSuggestionChipClicked:{global:[],us:[],gb:[],other:[]},onDiscoverCardClicked:{global:[],us:[],gb:[],other:[]},onQueryParamSubmit:{global:[],us:[],gb:[],other:[]}},Fhe={onPageLoad:{behavior:20,Content:{Id:"CMCChatLoaded",cN:"CMC Chat Loaded"}},onMessageSend:{behavior:63,Content:{Id:"ChatManualMessage",cN:"Chat Manual Message"}},onStartVoiceChat:{behavior:300,Content:{Id:"VoiceMessageClick",cN:"Voice Message Click"}},onSuggestionChipClicked:{behavior:60,Content:{Id:"SuggestionChipClicked",cN:"Suggestion Chip Clicked"}},onDiscoverCardClicked:{behavior:144,Content:{Id:"DiscoverCardClicked",cN:"Discover Card Clicked"}},onQueryParamSubmit:{behavior:141,Content:{Id:"QueryParamMessageSubmit",cN:"Query Param Message Submit"}}};function Bhe(t,e){return e==="US"?Ym[t].us:e==="GB"?Ym[t].gb:e&&["AU","CA","DE","FR","JP"].includes(e)?Ym[t].other:[]}function Hhe(t){if(!et("ads-pixels"))return;const e=st().get(ao),n=It.language,r=Date.now().toString(),o=Ym[t].global,i=Bhe(t,e),{set:s}=st();s(pM,a=>{for(const c of o.concat(i))a[c]||(a[c]={url:c.replace("{CACHE_BUSTER}",r).replace("{REGION}",e??"").replace("{LANG_LOCALE}",n).replace("{CONSENT}",$he(e)),isMounted:!0,timestamp:Date.now()});return{...a}})}function zhe(t){et("custom-1ds")&&(window.OneDsAzureAnalytics.capturePageAction(null,Fhe[t]),Y2())}function ou(t){try{Hhe(t),zhe(t)}catch{aa({feature:"sendIdeasTelemetry",customData:JSON.stringify({eventName:t})})}}function Vhe(t){ou(t==="suggestion"?"onSuggestionChipClicked":t==="discover"?"onDiscoverCardClicked":t==="queryParam"?"onQueryParamSubmit":"onMessageSend")}function $he(t){return(t&&Jv.includes(t))===!0?qf().advertising?"1":"0":""}function cb(){const[t,e]=tt(dr),n=Q_(),r=ga(In),o=D(mt),i=Te(fp),s=Te(oM),a=gde(),c=D(ad),u=Te(Oh),[d,f]=tt(M_),p=Y_(),g=ve("multi-file-upload"),v=m.useCallback(async S=>{var nt,J,pe,X;const{text:w}=S,{filesWithAttachment:E=[],inputMethod:T,command:I,context:A,reference:_,scenario:j,customData:R,entryPoint:$}=S,{result:U}=await Yce.run({chatMode:t,message:w??""});if(U){t==="computerUse"&&e("chat");return}const se=performance.now();s(se),i("bottom");const P=gt(mt),k=E.length===0||E.every(({error:H,attachment:ae})=>!!H||!ae);if(!P||!w&&k&&!I)return;const x=I&&XY.safeParse(I.type).success;p&&(t==="computerUse"?(at({source:"copilotActionsStartTask",customData:JSON.stringify({conversationId:P})}),u(!0)):u(!1));let M=0,te=0;const Y=[];for(const H of E)H.attachment&&(H.attachment.item.type==="image"?M+=1:H.attachment.item.type==="document"&&(H.attachment.item.partId=`${te}`,te+=1),Y.push(H));r(H=>{const ae=H.get(P);ae&&(ae.suggestedFollowup=void 0)});const Q=[],ee={id:"",createdAt:new Date().toISOString(),author:"human",content:[],inputMethod:T};c&&c.conversationId===P&&(ee.brand=c);for(const{attachment:H}of Y)H&&(ee.content.push(H.item),Q.push(H.content));d.size>0&&ee.content.push({type:"browserTabs",tabs:Array.from(d.values()).map(H=>({id:H.id,title:H.title,url:H.url,windowId:H.windowId,favIconUrl:H.favIconUrl}))}),w&&(ee.content.push({type:"text",text:w}),Q.push({type:"text",text:w})),I&&Q.push({type:"command",command:I}),_&&Q.push({type:"reference",reference:_}),x||n(P,H=>{H.push(ee)});const oe=await nc({useMockConnection:Uhe(w)}),{sendData:Ce,additionalData:fe}=await Bce.run(ee);d.size>0&&f(new Map);const Pe={content:Q,conversationId:P,data:Ce,mode:t,context:{...a,...A,ads:c?{showroom:{brandId:c.brandId,brandName:c.brandLogo.businessName,adId:c.adId??void 0}}:void 0}};oe.send(Pe),oe.resetConversationState(P,se),oe.setChatModeForConversation(P,t),oe.setInputMethodForConversation(P,T),oe.callBeforeSendForConversation(P),oe.callOnSentForConversation(P,fe),oe.setUserMessageForConversation(P,Pe);const ze={eventName:"copilotCompose",eventInfo_conversationId:P,eventInfo_inputMethod:T,eventInfo_numImagesUploaded:M,eventInfo_numDocumentsUploaded:te,eventInfo_mode:t,eventInfo_landingPage:K.getLandingPage(),...Y.length>0?{eventInfo_uploadFileSize:((J=(nt=Y[0])==null?void 0:nt.file)==null?void 0:J.size)??0,eventInfo_uploadFileType:(X=(pe=Y[0])==null?void 0:pe.attachment)==null?void 0:X.type}:{}};g&&(ze.eventInfo_uploadFilesInfo=JSON.stringify(Y.map(({file:H,attachment:ae,scenario:Ee})=>({scenario:Ee,type:(ae==null?void 0:ae.type)??"",size:(H==null?void 0:H.size)??""})))),fe&&(ze.eventInfo_additionalData=fe),j&&(ze.eventInfo_scenario=j),R&&(ze.eventInfo_customData=R),c&&(ze.eventInfo_adsContext=JSON.stringify({showroomBrandId:c.brandId,showroomBrandName:c.brandLogo.businessName})),$&&(ze.eventInfo_entryPoint=$),K.trackEvent({name:"interaction",data:ze}),yde(),Vhe(T),lhe(),t==="computerUse"&&e("chat")},[i,u,s,r,n,t,a,p,c,e,d,f,g]),y=m.useCallback(async()=>{const S=gt(mt);S&&(await nc()).onSubmitMessageBlocked(S)},[]),b=m.useCallback(async()=>{var E,T;const S=await nc(),w=(T=(E=GL(o))==null?void 0:E.part.task)==null?void 0:T.id;S.stop({conversationId:o,taskId:w})},[o]),C=m.useCallback(async S=>{const{messageId:w}=S,E=performance.now(),T=gt(mt);if(!T)return;n(T,A=>{const _=$L(A);_&&_.id===w&&A.pop()});const I=await nc();I.regenerate(S),I.resetConversationTiming(T,E),I.setChatModeForConversation(T,t),I.callBeforeSendForConversation(T)},[n,t]);return{submitMessage:v,stopMessage:b,onSubmitMessageBlocked:y,regenerateMessage:C}}function L1e(t,e){return t.find(n=>n.partId===e)}let Qm=null;function Ghe(){const t=Te(dr),e=Y_();m.useEffect(()=>{const n=jV();Qm===null&&(Qm=n);const r=i=>i==="td"?"reasoning":e&&i==="ac"?"computerUse":null,o=r(n||Qm);o&&t(o)},[t,e])}function qhe(){return Qm}function b4(t){const{deferred:e=!1}=t??{},n=!!D(mt),r=D(uy),[o,i]=tt(kT),s=Te(pp),a=Te(dr),{submitMessage:c}=cb();m.useEffect(()=>{const f=qhe()==="ac"?null:UV();f&&(i(f),s({source:"queryInUrl",prompt:f}))},[a,s,i]);const u=m.useCallback(()=>{i(null)},[i]),d=m.useCallback(f=>{f&&(s({source:"queryInUrl",prompt:f}),(async()=>{if(n&&r&&f){const g=c({text:f,inputMethod:"queryParam"});u(),await g}})().catch(console.error))},[s,n,r,c,u]);return m.useEffect(()=>{!e&&o&&d(o)},[e,d,o]),{prompt:o,handler:e?d:void 0,clear:u}}function C4(){const t=Khe(),e=Whe();return t.prompt?t:e}function Khe(){const{t}=Fe(),{formCode:e,lengthVariant:n,treatment:r,passthroughType:o}=mde();if(e&&n&&r){const i=t(`promptsByFormCode.${e}.${r}.${n}`,"");return{passthroughType:o,prompt:i,source:i?{type:"formCode",formCode:e}:void 0}}return{passthroughType:null}}function Whe(){const{prompt:t}=l4({deferred:!0}),{prompt:e}=b4({deferred:!0});let n=null,r;return t?(n="partial",r=t):e&&(n="full",r=e),{passthroughType:n,prompt:r,source:r?{type:"query"}:void 0}}function S4(){const t=D(kT),{passthroughType:e}=C4();return!!t&&e==="full"}function Yhe(){var c,u;const t=Wt(),e=D(jr),n=D(PT),{isMediaViewerOpen:r}=zi(),{disableMultiturn:o}=be.instance().config(),i=((c=be.instance().config().composer)==null?void 0:c.largeScreen)===!0&&((u=be.instance().config().composer)==null?void 0:u.voiceOnly)===!0,s=["/pro/subscribe","/pro/ewallet/return","/referrals","/referrals/rules","/subscription/manage","/subscription/start"],a=S4();return!s.includes(t)&&!t.startsWith("/topic-selection")&&(!t.startsWith("/fang")||r)&&!t.startsWith("/login")&&!t.startsWith("/pro/redeem")&&!t.startsWith("/gaming")&&!t.startsWith("/labs")&&!t.startsWith("/portrait")&&!t.startsWith("/memory/narrative")&&!t.startsWith("/conversations")&&!t.startsWith("/campaigns")&&!t.startsWith("/pages")&&!t.startsWith("/shares/pages")&&e!=="detail-only"&&!n&&!i&&!o&&!a}function Qhe(){var r,o;const t=Wt(),e=rb();return((r=be.instance().config().composer)==null?void 0:r.largeScreen)===!0&&((o=be.instance().config().composer)==null?void 0:o.voiceOnly)===!0&&!t.startsWith("/login-dcf")&&!e}function eA(){const[t,e]=tt(id);return m.useEffect(()=>{e(n=>n||BV())},[e]),t}function Jhe(t){const{showSettings:e,showSettingsRelyOnChatDetailLayout:n}=t,r=eA(),o=D(jr);return m.useMemo(()=>n?e&&!r&&o!=="side-by-side"&&o!=="detail-only":e&&!r,[n,e,r,o])}function E4(){const t=Object.assign({"../../assets/lottie/chain-of-thought-dark.json":()=>q(()=>import("./chain-of-thought-dark-DAdrbVMG.js"),[]).then(e=>e.default),"../../assets/lottie/chain-of-thought-light.json":()=>q(()=>import("./chain-of-thought-light-Cr0oOWNN.js"),[]).then(e=>e.default),"../../assets/lottie/character-thinking-cloud-animation.json":()=>q(()=>import("./character-thinking-cloud-animation-BPHslFRh.js"),[]).then(e=>e.default),"../../assets/lottie/image-gen-dark.json":()=>q(()=>import("./image-gen-dark-Xe9QwJfO.js"),[]).then(e=>e.default),"../../assets/lottie/image-gen-light.json":()=>q(()=>import("./image-gen-light-CvTKvF-o.js"),[]).then(e=>e.default),"../../assets/lottie/loader-gradient.json":()=>q(()=>import("./loader-gradient-nOUtNO79.js"),[]).then(e=>e.default),"../../assets/lottie/loader-image-generating.json":()=>q(()=>import("./loader-image-generating-CXsAaCuT.js"),[]).then(e=>e.default),"../../assets/lottie/loader-reasoning-dark.json":()=>q(()=>import("./loader-reasoning-dark-BWb0u6bB.js"),[]).then(e=>e.default),"../../assets/lottie/loader-reasoning-light.json":()=>q(()=>import("./loader-reasoning-light-DeS5Bpum.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-dark.json":()=>q(()=>import("./loader-spinner-dark-OIzWyRIV.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-light.json":()=>q(()=>import("./loader-spinner-light-DwSZ3tXn.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-white.json":()=>q(()=>import("./loader-spinner-white-B1ATuHTQ.js"),[]).then(e=>e.default),"../../assets/lottie/pages-welcome-dark.json":()=>q(()=>import("./pages-welcome-dark-r64A2mUI.js"),[]).then(e=>e.default),"../../assets/lottie/pages-welcome-light.json":()=>q(()=>import("./pages-welcome-light-DDUDcHxX.js"),[]).then(e=>e.default),"../../assets/lottie/voicemail-dark.json":()=>q(()=>import("./voicemail-dark-BtARQIb1.js"),[]).then(e=>e.default),"../../assets/lottie/voicemail-light.json":()=>q(()=>import("./voicemail-light-DeMSWjpH.js"),[]).then(e=>e.default)});return{load:e=>{const n=t[e];return n?n():Promise.reject(new Error(`Lottie animation not found: ${e}`))},exists:e=>e in t,getPaths:()=>Object.keys(t)}}const Xhe=m.lazy(()=>q(()=>import("./index.es-D4CGDrX3.js"),__vite__mapDeps([225,1]))),Zhe=E4();function At(t){const{type:e,className:n,rendererSettings:r,colorTheme:o}=t,i=D(Cs),s=o??i,[a,c]=m.useState(null),d=`../../assets/lottie/${m.useMemo(()=>{switch(e){case"gradient":return"loader-gradient.json";case"reasoning":return s==="dark"?"loader-reasoning-dark.json":"loader-reasoning-light.json";case"chainOfThought":return s==="dark"?"chain-of-thought-dark.json":"chain-of-thought-light.json";case"spinnerWhite":return"loader-spinner-white.json";case"imageGen":return s==="dark"?"image-gen-dark.json":"image-gen-light.json";case"spinnerThemed":default:return s==="dark"?"loader-spinner-dark.json":"loader-spinner-light.json"}},[e,s])}`;return m.useEffect(()=>{Zhe.load(d).then(c).catch(()=>c(null))},[d]),a?h.jsx(m.Suspense,{fallback:h.jsx("div",{}),children:h.jsx(Xhe,{animationData:a,loop:!0,className:n,rendererSettings:r})}):h.jsx("div",{})}const w4=Object.freeze(Object.defineProperty({__proto__:null,default:At},Symbol.toStringTag,{value:"Module"})),efe=16/9,tfe=48,T4=296,nfe=T4/efe,rfe=nfe+tfe;function ofe(){return h.jsx("div",{className:"pointer-events-none absolute inset-0 mb-[calc(var(--composer-container-height)+20px)] me-4 ms-2 mt-[72px]",children:h.jsx("div",{className:"absolute bottom-0 end-4",style:{width:`${T4}px`,height:`${rfe}px`},children:h.jsx("div",{className:G("relative flex h-full flex-col overflow-hidden rounded-4xl","bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]"),style:{boxShadow:"0px 16px 24px -2px rgba(0, 0, 0, 0.12)"},children:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(At,{className:"size-12"})})})})})}let iu=null;async function ife(t){return iu||(iu=(await q(async()=>{const{default:e}=await import("./katex-CfZphoad.js");return{default:e}},[])).default,t==null||t(),iu)}function I4(t,e,n){return iu?iu.renderToString(t,{output:"mathml",displayMode:e,throwOnError:!1}):(ife(n),t)}var Oa={},uh={},Ma={},$P;function _4(){if($P)return Ma;$P=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Node=Ma.NodeType=void 0;var t;(function(i){i[i.element=1]="element",i[i.text=3]="text"})(t||(Ma.NodeType=t={}));let e=class{constructor({nodeType:s,namespace:a,selfCloseTag:c,text:u,nodeName:d,childNodes:f,parentNode:p,attributes:g}){this.namespace=a||null,this.nodeType=s,this.isSelfCloseTag=!!c,this.text=u||null,this.nodeName=s===t.element?d:"#text",this.childNodes=f||[],this.parentNode=p,this.attributes=g||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce((s,a)=>s+(a.nodeType===t.text?a.text:a.outerHTML),"")}get outerHTML(){if(this.nodeType===t.text)return this.textContent;const s=o(this.attributes),a=`<${this.nodeName}${s.length?" ":""}${s}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return a;const c=this.childNodes.map(d=>d.outerHTML).join(""),u=`</${this.nodeName}>`;return[a,c,u].join("")}get textContent(){return this.nodeType===t.text?this.text:this.childNodes.map(s=>s.textContent).join("").replace(/\x20+/g," ")}getAttribute(s){const a=this.attributes.find(c=>c.name===s);return a?a.value:null}getElementsByTagName(s){return n(this,a=>a.nodeName.toUpperCase()===s.toUpperCase())}getElementsByClassName(s){const a=new RegExp(`^(.*?\\s)?${s}(\\s.*?)?$`);return n(this,c=>!!(c.attributes.length&&a.test(c.getAttribute("class")||"")))}getElementsByName(s){return n(this,a=>!!(a.attributes.length&&a.getAttribute("name")===s))}getElementById(s){return r(this,a=>!!(a.attributes.length&&a.getAttribute("id")===s))}};Ma.Node=e,e.ELEMENT_NODE=t.element,e.TEXT_NODE=t.text;function n(i,s){return i.nodeType===t.text?[]:i.childNodes.reduce((a,c)=>c.nodeType!==t.text&&s(c)?[...a,c,...n(c,s)]:[...a,...n(c,s)],[])}function r(i,s){for(let a=0,c=i.childNodes.length;a<c;a++){const u=i.childNodes[a];if(s(u))return u;const d=r(u,s);if(d)return d}return null}function o(i){return i.map(s=>s.name+(s.value?`="${s.value}"`:"")).join(" ")}return Ma}var dh={},GP;function sfe(){if(GP)return dh;GP=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.NodeAttribute=void 0;let t=class{constructor({name:n,value:r}){this.name=n,this.value=r}};return dh.NodeAttribute=t,dh}var qP;function KP(){if(qP)return uh;qP=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.Dom=void 0;const t=_4(),e=sfe(),n=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,r=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,o=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,i=/^<[a-z]/,s=/\/>$/,a=/^<\//,c=/^[^<]/,u=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,d=/^('|")|('|")$/g,f=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;let p=class{constructor(I){this.rawHTML=I}find(I,A){const _=g(this.rawHTML,I,A);return A?_[0]||null:_}getElementsByClassName(I){const A=new RegExp(`^(.*?\\s)?${I}(\\s.*?)?$`);return this.find(_=>!!(_.attributes.length&&A.test(_.getAttribute("class")||"")))}getElementsByTagName(I){return this.find(A=>A.nodeName.toUpperCase()===I.toUpperCase())}getElementById(I){return this.find(A=>A.getAttribute("id")===I,!0)}getElementsByName(I){return this.find(A=>A.getAttribute("name")===I)}getElementsByAttribute(I,A){return this.find(_=>_.getAttribute(I)===A)}};uh.Dom=p;function g(T,I,A=!1){const _=v(T),j=[];for(const R of _)if(R&&I(R)&&(j.push(R),A))return j;return j}function*v(T){const I=b(T);let A=null;for(let _=0,j=I.length;_<j;_++){const R=I[_];A=C(R,A)||A,y(A,R)&&(yield A,A=A.parentNode)}for(;A;)yield A,A=A.parentNode}function y(T,I){if(!I)return!1;const A=a.test(I),[,_]=I.match(u)||[];return A&&T.nodeName===_||T.isSelfCloseTag||T.nodeType===t.NodeType.text}function b(T){return T.match(n)||[]}function C(T,I){const A=c.test(T),_=i.test(T);return A?E(T,I):_?S(T,I):null}function S(T,I){var A;const[,_,j]=T.match(u)||[],R=s.test(T)||f.test(_),$=w(T),U=new t.Node({nodeType:t.NodeType.element,nodeName:_,namespace:j,attributes:$,childNodes:[],parentNode:I,selfCloseTag:R});return(A=I==null?void 0:I.childNodes)===null||A===void 0||A.push(U),U}function w(T){return(T.match(r)||[]).map(I=>{o.lastIndex=0;const A=o.exec(I)||[],[,_="",j=""]=A;return new e.NodeAttribute({name:_.trim(),value:j.trim().replace(d,"")})})}function E(T,I){var A;const _=new t.Node({nodeType:t.NodeType.text,nodeName:"#text",text:T,parentNode:I});return(A=I==null?void 0:I.childNodes)===null||A===void 0||A.push(_),_}return uh}var WP;function afe(){return WP||(WP=1,function(t){var e=Oa&&Oa.__createBinding||(Object.create?function(i,s,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(s,a);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,c,u)}:function(i,s,a,c){c===void 0&&(c=a),i[c]=s[a]}),n=Oa&&Oa.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFromString=void 0;const r=KP();function o(i){return new r.Dom(i)}t.parseFromString=o,n(KP(),t),n(_4(),t)}(Oa)),Oa}var YP=afe();function tA(t){const e=[];let n="",r=!1;for(const o of t)o===" "||o===`
`?r=!0:r&&(e.push(n),n="",r=!1),n+=o;return n.length>0&&e.push(n),e}function cfe(t){const n=YP.parseFromString(`<html>${t}</html>`).getElementsByTagName("html")[0];let r=[];for(const o of n.childNodes)o.nodeType===YP.NodeType.text?o.textContent&&(r=r.concat(tA(o.textContent))):r.push(o.outerHTML);return r}function lfe(t){return t===" "||t===`
`||t==="	"}function F1e(t,e,n={}){if(t.length<=e)return t;function r(a){const c=a.trim();return n.ellipsis?`${c}...`:c}const o=t.indexOf(`
`,0);if(o>=0&&o<e){const a=t.slice(0,o);return r(a)}let i=e;for(;i>0;){const a=t[i];if(a&&!lfe(a))i-=1;else break}let s=t.slice(0,e);return i>0&&(s=t.slice(0,i)),r(s)}let Si=null;function A4(t){return Si||(q(()=>import("./core-BHFwQFA7.js"),__vite__mapDeps([226,1])).then(e=>e.default).then(e=>{Si=e,t==null||t()}),null)}async function ufe(t){const[{ALIAS_TO_SUPPORTED_LANGUAGE:e},{loadLanguageModule:n}]=await Promise.all([q(()=>Promise.resolve().then(()=>mhe),void 0),q(()=>import("./language-loader-CeBtiVlG.js"),__vite__mapDeps([227,1]))]),r=e.get(t);if(!r)return!1;const o=await n(r);return o?Si?(Si.registerLanguage(t,o),!0):(A4(()=>{Si==null||Si.registerLanguage(t,o)}),!1):!1}const dfe={jsx:["xml"],tsx:["xml"]};async function hfe(t){const e=t.map(async r=>Si?Si.getLanguage(r)?!1:ufe(r):!1);return(await Promise.allSettled(e)).some(r=>r.status==="fulfilled"&&r.value)}async function ffe(t){const e=dfe[t]??[];return hfe([...e,t])}const ql=.018;function Rl({items:t,delay:e,isHtml:n,forceRender:r}){var i;const o=[];for(const s of t){if(s.type==="citation"){const p=e.getValue();e.queueUpdate(ql),o.push({type:"citation",delay:p,...s.props});continue}if(s.type==="latex"){const p=I4(s.props.content,!1,r),g=e.getValue();e.queueUpdate(ql),o.push({type:"word",word:p,delay:g,format:"latexAsHtml"});continue}if(s.props.link){const p=s.props.text,{url:g}=s.props.link,v=e.getValue();e.queueUpdate(ql),o.push({type:"word",word:p,delay:v,url:g});continue}let a=null,c=null;if(s.props.annotations){for(const p of["italic","bold","strikethrough","code","sub","sup"])if(s.props.annotations[p]){const v={type:p,items:[]};(p==="code"||p==="sup"||p==="sub")&&(v.delay=e.getValue(),e.queueUpdate(ql)),c?(c.items.push(v),c=v):(a=v,c=v)}}const u=[],d=(i=s.props.annotations)==null?void 0:i.code;let f;n?f=cfe(s.props.text):f=tA(s.props.text);for(let p=0;p<f.length;p+=1)u.push({type:"word",word:f[p],delay:e.getValue(),format:d?"code":void 0}),e.queueUpdate(ql);c&&a?(c.items.push(...u),o.push(a)):o.push(...u)}return o}function xv(t,e,n){const r=[];for(const o of t)switch(o.type){case"paragraph":{r.push({type:"paragraph",items:Rl({items:o.props.items,delay:e,forceRender:n})});continue}case"list":{r.push({type:"list",ordered:o.props.ordered,start:o.props.start,items:o.props.items.map(i=>({delay:e.getValue(),items:xv(i,e,n)}))});continue}case"heading":{r.push({type:"heading",level:o.props.level,items:Rl({items:o.props.items,delay:e})});continue}case"hr":{r.push({type:"hr",delay:e.getValue()}),e.queueUpdate(ql);continue}case"code":{const{language:i,content:s}=o.props;if(s.type!=="text")continue;let a=s.props.text,c=!1;if(i){const d=A4(n);if(ffe(i).then(f=>{f&&n()}),d!=null&&d.getLanguage(i)){const{value:f}=d.highlight(s.props.text,{language:i});f&&(a=f,c=!0)}}const u={...s,props:{...s.props,text:a}};r.push({type:"code",content:Rl({items:[u],delay:e,isHtml:c}),original:s.props.text,language:i,delay:e.getValue(),dangerouslyUseHtml:c});continue}case"latex":{const{content:i}=o.props;if(i.type!=="text")continue;i.props.text=I4(i.props.text,!0,n),r.push({type:"latex",content:Rl({items:[i],isHtml:!0,delay:e}),delay:e.getValue(),dangerouslyUseHtml:!0});continue}case"table":{r.push({type:"table",columns:o.props.columns.map(i=>Rl({items:i,delay:e})),data:o.props.data.map(i=>i.map(s=>Rl({items:s,delay:e})))});continue}case"blockquote":{r.push({type:"blockquote",delay:e.getValue(),items:xv(o.props.items,e,n)});continue}default:{console.log(`Unhandled block type: ${o.type}`);continue}}return r}var mm;function k4(t){return mm=mm||document.createElement("textarea"),mm.innerHTML="&"+t+";",mm.value}var pfe=Object.prototype.hasOwnProperty;function mfe(t,e){return t?pfe.call(t,e):!1}function x4(t){var e=[].slice.call(arguments,1);return e.forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}var gfe=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Lf(t){return t.indexOf("\\")<0?t:t.replace(gfe,"$1")}function R4(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function vw(t){if(t>65535){t-=65536;var e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var vfe=/&([a-z#][a-z0-9]{1,31});/gi,yfe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function bfe(t,e){var n=0,r=k4(e);return e!==r?r:e.charCodeAt(0)===35&&yfe.test(e)&&(n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),R4(n))?vw(n):t}function Hc(t){return t.indexOf("&")<0?t:t.replace(vfe,bfe)}var Cfe=/[&<>"]/,Sfe=/[&<>"]/g,Efe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function wfe(t){return Efe[t]}function Dr(t){return Cfe.test(t)?t.replace(Sfe,wfe):t}var Ve={};Ve.blockquote_open=function(){return`<blockquote>
`};Ve.blockquote_close=function(t,e){return"</blockquote>"+cl(t,e)};Ve.code=function(t,e){return t[e].block?"<pre><code>"+Dr(t[e].content)+"</code></pre>"+cl(t,e):"<code>"+Dr(t[e].content)+"</code>"};Ve.fence=function(t,e,n,r,o){var i=t[e],s="",a=n.langPrefix,c="",u,d,f;if(i.params){if(u=i.params.split(/\s+/g),d=u.join(" "),mfe(o.rules.fence_custom,u[0]))return o.rules.fence_custom[u[0]](t,e,n,r,o);c=Dr(Hc(Lf(d))),s=' class="'+a+c+'"'}return n.highlight?f=n.highlight.apply(n.highlight,[i.content].concat(u))||Dr(i.content):f=Dr(i.content),"<pre><code"+s+">"+f+"</code></pre>"+cl(t,e)};Ve.fence_custom={};Ve.heading_open=function(t,e){return"<h"+t[e].hLevel+">"};Ve.heading_close=function(t,e){return"</h"+t[e].hLevel+`>
`};Ve.hr=function(t,e,n){return(n.xhtmlOut?"<hr />":"<hr>")+cl(t,e)};Ve.bullet_list_open=function(){return`<ul>
`};Ve.bullet_list_close=function(t,e){return"</ul>"+cl(t,e)};Ve.list_item_open=function(){return"<li>"};Ve.list_item_close=function(){return`</li>
`};Ve.ordered_list_open=function(t,e){var n=t[e],r=n.order>1?' start="'+n.order+'"':"";return"<ol"+r+`>
`};Ve.ordered_list_close=function(t,e){return"</ol>"+cl(t,e)};Ve.paragraph_open=function(t,e){return t[e].tight?"":"<p>"};Ve.paragraph_close=function(t,e){var n=!(t[e].tight&&e&&t[e-1].type==="inline"&&!t[e-1].content);return(t[e].tight?"":"</p>")+(n?cl(t,e):"")};Ve.link_open=function(t,e,n){var r=t[e].title?' title="'+Dr(Hc(t[e].title))+'"':"",o=n.linkTarget?' target="'+n.linkTarget+'"':"";return'<a href="'+Dr(t[e].href)+'"'+r+o+">"};Ve.link_close=function(){return"</a>"};Ve.image=function(t,e,n){var r=' src="'+Dr(t[e].src)+'"',o=t[e].title?' title="'+Dr(Hc(t[e].title))+'"':"",i=' alt="'+(t[e].alt?Dr(Hc(Lf(t[e].alt))):"")+'"',s=n.xhtmlOut?" /":"";return"<img"+r+i+o+s+">"};Ve.table_open=function(){return`<table>
`};Ve.table_close=function(){return`</table>
`};Ve.thead_open=function(){return`<thead>
`};Ve.thead_close=function(){return`</thead>
`};Ve.tbody_open=function(){return`<tbody>
`};Ve.tbody_close=function(){return`</tbody>
`};Ve.tr_open=function(){return"<tr>"};Ve.tr_close=function(){return`</tr>
`};Ve.th_open=function(t,e){var n=t[e];return"<th"+(n.align?' style="text-align:'+n.align+'"':"")+">"};Ve.th_close=function(){return"</th>"};Ve.td_open=function(t,e){var n=t[e];return"<td"+(n.align?' style="text-align:'+n.align+'"':"")+">"};Ve.td_close=function(){return"</td>"};Ve.strong_open=function(){return"<strong>"};Ve.strong_close=function(){return"</strong>"};Ve.em_open=function(){return"<em>"};Ve.em_close=function(){return"</em>"};Ve.del_open=function(){return"<del>"};Ve.del_close=function(){return"</del>"};Ve.ins_open=function(){return"<ins>"};Ve.ins_close=function(){return"</ins>"};Ve.mark_open=function(){return"<mark>"};Ve.mark_close=function(){return"</mark>"};Ve.sub=function(t,e){return"<sub>"+Dr(t[e].content)+"</sub>"};Ve.sup=function(t,e){return"<sup>"+Dr(t[e].content)+"</sup>"};Ve.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};Ve.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Ve.text=function(t,e){return Dr(t[e].content)};Ve.htmlblock=function(t,e){return t[e].content};Ve.htmltag=function(t,e){return t[e].content};Ve.abbr_open=function(t,e){return'<abbr title="'+Dr(Hc(t[e].title))+'">'};Ve.abbr_close=function(){return"</abbr>"};Ve.footnote_ref=function(t,e){var n=Number(t[e].id+1).toString(),r="fnref"+n;return t[e].subId>0&&(r+=":"+t[e].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+r+'">['+n+"]</a></sup>"};Ve.footnote_block_open=function(t,e,n){var r=n.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return r+`<section class="footnotes">
<ol class="footnotes-list">
`};Ve.footnote_block_close=function(){return`</ol>
</section>
`};Ve.footnote_open=function(t,e){var n=Number(t[e].id+1).toString();return'<li id="fn'+n+'"  class="footnote-item">'};Ve.footnote_close=function(){return`</li>
`};Ve.footnote_anchor=function(t,e){var n=Number(t[e].id+1).toString(),r="fnref"+n;return t[e].subId>0&&(r+=":"+t[e].subId),' <a href="#'+r+'" class="footnote-backref">↩</a>'};Ve.dl_open=function(){return`<dl>
`};Ve.dt_open=function(){return"<dt>"};Ve.dd_open=function(){return"<dd>"};Ve.dl_close=function(){return`</dl>
`};Ve.dt_close=function(){return`</dt>
`};Ve.dd_close=function(){return`</dd>
`};function P4(t,e){return++e>=t.length-2?e:t[e].type==="paragraph_open"&&t[e].tight&&t[e+1].type==="inline"&&t[e+1].content.length===0&&t[e+2].type==="paragraph_close"&&t[e+2].tight?P4(t,e+2):e}var cl=Ve.getBreak=function(e,n){return n=P4(e,n),n<e.length&&e[n].type==="list_item_close"?"":`
`};function nA(){this.rules=x4({},Ve),this.getBreak=Ve.getBreak}nA.prototype.renderInline=function(t,e,n){for(var r=this.rules,o=t.length,i=0,s="";o--;)s+=r[t[i].type](t,i++,e,n,this);return s};nA.prototype.render=function(t,e,n){for(var r=this.rules,o=t.length,i=-1,s="";++i<o;)t[i].type==="inline"?s+=this.renderInline(t[i].children,e,n):s+=r[t[i].type](t,i,e,n,this);return s};function uo(){this.__rules__=[],this.__cache__=null}uo.prototype.__find__=function(t){for(var e=this.__rules__.length,n=-1;e--;)if(this.__rules__[++n].name===t)return n;return-1};uo.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};uo.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null};uo.prototype.before=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};uo.prototype.after=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};uo.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};uo.prototype.enable=function(t,e){t=Array.isArray(t)?t:[t],e&&this.__rules__.forEach(function(n){n.enabled=!1}),t.forEach(function(n){var r=this.__find__(n);if(r<0)throw new Error("Rules manager: invalid rule name "+n);this.__rules__[r].enabled=!0},this),this.__cache__=null};uo.prototype.disable=function(t){t=Array.isArray(t)?t:[t],t.forEach(function(e){var n=this.__find__(e);if(n<0)throw new Error("Rules manager: invalid rule name "+e);this.__rules__[n].enabled=!1},this),this.__cache__=null};uo.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Tfe(t){t.inlineMode?t.tokens.push({type:"inline",content:t.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):t.block.parse(t.src,t.options,t.env,t.tokens)}function ll(t,e,n,r,o){this.src=t,this.env=r,this.options=n,this.parser=e,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}ll.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};ll.prototype.push=function(t){this.pending&&this.pushPending(),this.tokens.push(t),this.pendingLevel=this.level};ll.prototype.cacheSet=function(t,e){for(var n=this.cache.length;n<=t;n++)this.cache.push(0);this.cache[t]=e};ll.prototype.cacheGet=function(t){return t<this.cache.length?this.cache[t]:0};function Df(t,e){var n,r,o,i=-1,s=t.posMax,a=t.pos,c=t.isInLabel;if(t.isInLabel)return-1;if(t.labelUnmatchedScopes)return t.labelUnmatchedScopes--,-1;for(t.pos=e+1,t.isInLabel=!0,n=1;t.pos<s;){if(o=t.src.charCodeAt(t.pos),o===91)n++;else if(o===93&&(n--,n===0)){r=!0;break}t.parser.skipToken(t)}return r?(i=t.pos,t.labelUnmatchedScopes=0):t.labelUnmatchedScopes=n-1,t.pos=a,t.isInLabel=c,i}function Ife(t,e,n,r){var o,i,s,a,c,u;if(t.charCodeAt(0)!==42||t.charCodeAt(1)!==91||t.indexOf("]:")===-1||(o=new ll(t,e,n,r,[]),i=Df(o,1),i<0||t.charCodeAt(i+1)!==58))return-1;for(a=o.posMax,s=i+2;s<a&&o.src.charCodeAt(s)!==10;s++);return c=t.slice(2,i),u=t.slice(i+2,s).trim(),u.length===0?-1:(r.abbreviations||(r.abbreviations={}),typeof r.abbreviations[":"+c]>"u"&&(r.abbreviations[":"+c]=u),s)}function _fe(t){var e=t.tokens,n,r,o,i;if(!t.inlineMode){for(n=1,r=e.length-1;n<r;n++)if(e[n-1].type==="paragraph_open"&&e[n].type==="inline"&&e[n+1].type==="paragraph_close"){for(o=e[n].content;o.length&&(i=Ife(o,t.inline,t.options,t.env),!(i<0));)o=o.slice(i).trim();e[n].content=o,o.length||(e[n-1].tight=!0,e[n+1].tight=!0)}}}function yw(t){var e=Hc(t);try{e=decodeURI(e)}catch{}return encodeURI(e)}function N4(t,e){var n,r,o,i=e,s=t.posMax;if(t.src.charCodeAt(e)===60){for(e++;e<s;){if(n=t.src.charCodeAt(e),n===10)return!1;if(n===62)return o=yw(Lf(t.src.slice(i+1,e))),t.parser.validateLink(o)?(t.pos=e+1,t.linkContent=o,!0):!1;if(n===92&&e+1<s){e+=2;continue}e++}return!1}for(r=0;e<s&&(n=t.src.charCodeAt(e),!(n===32||n<32||n===127));){if(n===92&&e+1<s){e+=2;continue}if(n===40&&(r++,r>1)||n===41&&(r--,r<0))break;e++}return i===e||(o=Lf(t.src.slice(i,e)),!t.parser.validateLink(o))?!1:(t.linkContent=o,t.pos=e,!0)}function O4(t,e){var n,r=e,o=t.posMax,i=t.src.charCodeAt(e);if(i!==34&&i!==39&&i!==40)return!1;for(e++,i===40&&(i=41);e<o;){if(n=t.src.charCodeAt(e),n===i)return t.pos=e+1,t.linkContent=Lf(t.src.slice(r+1,e)),!0;if(n===92&&e+1<o){e+=2;continue}e++}return!1}function M4(t){return t.trim().replace(/\s+/g," ").toUpperCase()}function Afe(t,e,n,r){var o,i,s,a,c,u,d,f,p;if(t.charCodeAt(0)!==91||t.indexOf("]:")===-1||(o=new ll(t,e,n,r,[]),i=Df(o,0),i<0||t.charCodeAt(i+1)!==58))return-1;for(a=o.posMax,s=i+2;s<a&&(c=o.src.charCodeAt(s),!(c!==32&&c!==10));s++);if(!N4(o,s))return-1;for(d=o.linkContent,s=o.pos,u=s,s=s+1;s<a&&(c=o.src.charCodeAt(s),!(c!==32&&c!==10));s++);for(s<a&&u!==s&&O4(o,s)?(f=o.linkContent,s=o.pos):(f="",s=u);s<a&&o.src.charCodeAt(s)===32;)s++;return s<a&&o.src.charCodeAt(s)!==10?-1:(p=M4(t.slice(1,i)),typeof r.references[p]>"u"&&(r.references[p]={title:f,href:d}),s)}function kfe(t){var e=t.tokens,n,r,o,i;if(t.env.references=t.env.references||{},!t.inlineMode){for(n=1,r=e.length-1;n<r;n++)if(e[n].type==="inline"&&e[n-1].type==="paragraph_open"&&e[n+1].type==="paragraph_close"){for(o=e[n].content;o.length&&(i=Afe(o,t.inline,t.options,t.env),!(i<0));)o=o.slice(i).trim();e[n].content=o,o.length||(e[n-1].tight=!0,e[n+1].tight=!0)}}}function xfe(t){var e=t.tokens,n,r,o;for(r=0,o=e.length;r<o;r++)n=e[r],n.type==="inline"&&t.inline.parse(n.content,t.options,t.env,n.children)}function Rfe(t){var e,n,r,o,i,s,a,c,u,d=0,f=!1,p={};if(t.env.footnotes&&(t.tokens=t.tokens.filter(function(g){return g.type==="footnote_reference_open"?(f=!0,c=[],u=g.label,!1):g.type==="footnote_reference_close"?(f=!1,p[":"+u]=c,!1):(f&&c.push(g),!f)}),!!t.env.footnotes.list)){for(s=t.env.footnotes.list,t.tokens.push({type:"footnote_block_open",level:d++}),e=0,n=s.length;e<n;e++){for(t.tokens.push({type:"footnote_open",id:e,level:d++}),s[e].tokens?(a=[],a.push({type:"paragraph_open",tight:!1,level:d++}),a.push({type:"inline",content:"",level:d,children:s[e].tokens}),a.push({type:"paragraph_close",tight:!1,level:--d})):s[e].label&&(a=p[":"+s[e].label]),t.tokens=t.tokens.concat(a),t.tokens[t.tokens.length-1].type==="paragraph_close"?i=t.tokens.pop():i=null,o=s[e].count>0?s[e].count:1,r=0;r<o;r++)t.tokens.push({type:"footnote_anchor",id:e,subId:r,level:d});i&&t.tokens.push(i),t.tokens.push({type:"footnote_close",level:--d})}t.tokens.push({type:"footnote_block_close",level:--d})}}var QP=` 
()[]'".,!?-`;function DS(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function Pfe(t){var e,n,r,o,i,s,a,c,u,d,f,p,g=t.tokens;if(t.env.abbreviations){for(t.env.abbrRegExp||(p="(^|["+QP.split("").map(DS).join("")+"])("+Object.keys(t.env.abbreviations).map(function(v){return v.substr(1)}).sort(function(v,y){return y.length-v.length}).map(DS).join("|")+")($|["+QP.split("").map(DS).join("")+"])",t.env.abbrRegExp=new RegExp(p,"g")),d=t.env.abbrRegExp,n=0,r=g.length;n<r;n++)if(g[n].type==="inline"){for(o=g[n].children,e=o.length-1;e>=0;e--)if(i=o[e],i.type==="text"){for(c=0,s=i.content,d.lastIndex=0,u=i.level,a=[];f=d.exec(s);)d.lastIndex>c&&a.push({type:"text",content:s.slice(c,f.index+f[1].length),level:u}),a.push({type:"abbr_open",title:t.env.abbreviations[":"+f[2]],level:u++}),a.push({type:"text",content:f[2],level:u}),a.push({type:"abbr_close",level:--u}),c=d.lastIndex-f[3].length;a.length&&(c<s.length&&a.push({type:"text",content:s.slice(c),level:u}),g[n].children=o=[].concat(o.slice(0,e),a,o.slice(e+1)))}}}}var Nfe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Ofe=/\((c|tm|r|p)\)/ig,Mfe={c:"©",r:"®",p:"§",tm:"™"};function Lfe(t){return t.indexOf("(")<0?t:t.replace(Ofe,function(e,n){return Mfe[n.toLowerCase()]})}function Dfe(t){var e,n,r,o,i;if(t.options.typographer){for(i=t.tokens.length-1;i>=0;i--)if(t.tokens[i].type==="inline")for(o=t.tokens[i].children,e=o.length-1;e>=0;e--)n=o[e],n.type==="text"&&(r=n.content,r=Lfe(r),Nfe.test(r)&&(r=r.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1—$2").replace(/(^|\s)--(\s|$)/mg,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1–$2")),n.content=r)}}var jfe=/['"]/,JP=/['"]/g,Ufe=/[-\s()\[\]]/,XP="’";function ZP(t,e){return e<0||e>=t.length?!1:!Ufe.test(t[e])}function Pl(t,e,n){return t.substr(0,e)+n+t.substr(e+1)}function Ffe(t){var e,n,r,o,i,s,a,c,u,d,f,p,g,v,y,b,C;if(t.options.typographer){for(C=[],y=t.tokens.length-1;y>=0;y--)if(t.tokens[y].type==="inline"){for(b=t.tokens[y].children,C.length=0,e=0;e<b.length;e++)if(n=b[e],!(n.type!=="text"||jfe.test(n.text))){for(a=b[e].level,g=C.length-1;g>=0&&!(C[g].level<=a);g--);C.length=g+1,r=n.content,i=0,s=r.length;e:for(;i<s&&(JP.lastIndex=i,o=JP.exec(r),!!o);){if(c=!ZP(r,o.index-1),i=o.index+1,v=o[0]==="'",u=!ZP(r,i),!u&&!c){v&&(n.content=Pl(n.content,o.index,XP));continue}if(f=!u,p=!c,p){for(g=C.length-1;g>=0&&(d=C[g],!(C[g].level<a));g--)if(d.single===v&&C[g].level===a){d=C[g],v?(b[d.token].content=Pl(b[d.token].content,d.pos,t.options.quotes[2]),n.content=Pl(n.content,o.index,t.options.quotes[3])):(b[d.token].content=Pl(b[d.token].content,d.pos,t.options.quotes[0]),n.content=Pl(n.content,o.index,t.options.quotes[1])),C.length=g;continue e}}f?C.push({token:e,pos:o.index,single:v,level:a}):p&&v&&(n.content=Pl(n.content,o.index,XP))}}}}}var jS=[["block",Tfe],["abbr",_fe],["references",kfe],["inline",xfe],["footnote_tail",Rfe],["abbr2",Pfe],["replacements",Dfe],["smartquotes",Ffe]];function L4(){this.options={},this.ruler=new uo;for(var t=0;t<jS.length;t++)this.ruler.push(jS[t][0],jS[t][1])}L4.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)};function ul(t,e,n,r,o){var i,s,a,c,u,d,f;for(this.src=t,this.parser=e,this.options=n,this.env=r,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",s=this.src,d=0,f=!1,a=c=d=0,u=s.length;c<u;c++){if(i=s.charCodeAt(c),!f)if(i===32){d++;continue}else f=!0;(i===10||c===u-1)&&(i!==10&&c++,this.bMarks.push(a),this.eMarks.push(c),this.tShift.push(d),f=!1,d=0,a=c+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}ul.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};ul.prototype.skipEmptyLines=function(e){for(var n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};ul.prototype.skipSpaces=function(e){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===32;e++);return e};ul.prototype.skipChars=function(e,n){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};ul.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};ul.prototype.getLines=function(e,n,r,o){var i,s,a,c,u,d=e;if(e>=n)return"";if(d+1===n)return s=this.bMarks[d]+Math.min(this.tShift[d],r),a=o?this.eMarks[d]+1:this.eMarks[d],this.src.slice(s,a);for(c=new Array(n-e),i=0;d<n;d++,i++)u=this.tShift[d],u>r&&(u=r),u<0&&(u=0),s=this.bMarks[d]+u,d+1<n||o?a=this.eMarks[d]+1:a=this.eMarks[d],c[i]=this.src.slice(s,a);return c.join("")};function Bfe(t,e,n){var r,o;if(t.tShift[e]-t.blkIndent<4)return!1;for(o=r=e+1;r<n;){if(t.isEmpty(r)){r++;continue}if(t.tShift[r]-t.blkIndent>=4){r++,o=r;continue}break}return t.line=r,t.tokens.push({type:"code",content:t.getLines(e,o,4+t.blkIndent,!0),block:!0,lines:[e,t.line],level:t.level}),!0}function Hfe(t,e,n,r){var o,i,s,a,c,u=!1,d=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(d+3>f||(o=t.src.charCodeAt(d),o!==126&&o!==96)||(c=d,d=t.skipChars(d,o),i=d-c,i<3)||(s=t.src.slice(d,f).trim(),s.indexOf("`")>=0))return!1;if(r)return!0;for(a=e;a++,!(a>=n||(d=c=t.bMarks[a]+t.tShift[a],f=t.eMarks[a],d<f&&t.tShift[a]<t.blkIndent));)if(t.src.charCodeAt(d)===o&&!(t.tShift[a]-t.blkIndent>=4)&&(d=t.skipChars(d,o),!(d-c<i)&&(d=t.skipSpaces(d),!(d<f)))){u=!0;break}return i=t.tShift[e],t.line=a+(u?1:0),t.tokens.push({type:"fence",params:s,content:t.getLines(e+1,a,i,!0),lines:[e,t.line],level:t.level}),!0}function zfe(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v,y=t.bMarks[e]+t.tShift[e],b=t.eMarks[e];if(y>b||t.src.charCodeAt(y++)!==62||t.level>=t.options.maxNesting)return!1;if(r)return!0;for(t.src.charCodeAt(y)===32&&y++,c=t.blkIndent,t.blkIndent=0,a=[t.bMarks[e]],t.bMarks[e]=y,y=y<b?t.skipSpaces(y):y,i=y>=b,s=[t.tShift[e]],t.tShift[e]=y-t.bMarks[e],f=t.parser.ruler.getRules("blockquote"),o=e+1;o<n&&(y=t.bMarks[o]+t.tShift[o],b=t.eMarks[o],!(y>=b));o++){if(t.src.charCodeAt(y++)===62){t.src.charCodeAt(y)===32&&y++,a.push(t.bMarks[o]),t.bMarks[o]=y,y=y<b?t.skipSpaces(y):y,i=y>=b,s.push(t.tShift[o]),t.tShift[o]=y-t.bMarks[o];continue}if(i)break;for(v=!1,p=0,g=f.length;p<g;p++)if(f[p](t,o,n,!0)){v=!0;break}if(v)break;a.push(t.bMarks[o]),s.push(t.tShift[o]),t.tShift[o]=-1337}for(u=t.parentType,t.parentType="blockquote",t.tokens.push({type:"blockquote_open",lines:d=[e,0],level:t.level++}),t.parser.tokenize(t,e,o),t.tokens.push({type:"blockquote_close",level:--t.level}),t.parentType=u,d[1]=t.line,p=0;p<s.length;p++)t.bMarks[p+e]=a[p],t.tShift[p+e]=s[p];return t.blkIndent=c,!0}function Vfe(t,e,n,r){var o,i,s,a=t.bMarks[e],c=t.eMarks[e];if(a+=t.tShift[e],a>c||(o=t.src.charCodeAt(a++),o!==42&&o!==45&&o!==95))return!1;for(i=1;a<c;){if(s=t.src.charCodeAt(a++),s!==o&&s!==32)return!1;s===o&&i++}return i<3?!1:(r||(t.line=e+1,t.tokens.push({type:"hr",lines:[e,t.line],level:t.level})),!0)}function eN(t,e){var n,r,o;return r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],r>=o||(n=t.src.charCodeAt(r++),n!==42&&n!==45&&n!==43)||r<o&&t.src.charCodeAt(r)!==32?-1:r}function tN(t,e){var n,r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(r+1>=o||(n=t.src.charCodeAt(r++),n<48||n>57))return-1;for(;;){if(r>=o)return-1;if(n=t.src.charCodeAt(r++),!(n>=48&&n<=57)){if(n===41||n===46)break;return-1}}return r<o&&t.src.charCodeAt(r)!==32?-1:r}function $fe(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].tight=!0,t.tokens[n].tight=!0,n+=2)}function Gfe(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v,y,b,C,S,w,E,T,I=!0,A,_,j,R;if((f=tN(t,e))>=0)b=!0;else if((f=eN(t,e))>=0)b=!1;else return!1;if(t.level>=t.options.maxNesting)return!1;if(y=t.src.charCodeAt(f-1),r)return!0;for(S=t.tokens.length,b?(d=t.bMarks[e]+t.tShift[e],v=Number(t.src.substr(d,f-d-1)),t.tokens.push({type:"ordered_list_open",order:v,lines:E=[e,0],level:t.level++})):t.tokens.push({type:"bullet_list_open",lines:E=[e,0],level:t.level++}),o=e,w=!1,A=t.parser.ruler.getRules("list");o<n&&(C=t.skipSpaces(f),p=t.eMarks[o],C>=p?g=1:g=C-f,g>4&&(g=1),g<1&&(g=1),i=f-t.bMarks[o]+g,t.tokens.push({type:"list_item_open",lines:T=[e,0],level:t.level++}),a=t.blkIndent,c=t.tight,s=t.tShift[e],u=t.parentType,t.tShift[e]=C-t.bMarks[e],t.blkIndent=i,t.tight=!0,t.parentType="list",t.parser.tokenize(t,e,n,!0),(!t.tight||w)&&(I=!1),w=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=a,t.tShift[e]=s,t.tight=c,t.parentType=u,t.tokens.push({type:"list_item_close",level:--t.level}),o=e=t.line,T[1]=o,C=t.bMarks[e],!(o>=n||t.isEmpty(o)||t.tShift[o]<t.blkIndent));){for(R=!1,_=0,j=A.length;_<j;_++)if(A[_](t,o,n,!0)){R=!0;break}if(R)break;if(b){if(f=tN(t,o),f<0)break}else if(f=eN(t,o),f<0)break;if(y!==t.src.charCodeAt(f-1))break}return t.tokens.push({type:b?"ordered_list_close":"bullet_list_close",level:--t.level}),E[1]=o,t.line=o,I&&$fe(t,S),!0}function qfe(t,e,n,r){var o,i,s,a,c,u=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(u+4>d||t.src.charCodeAt(u)!==91||t.src.charCodeAt(u+1)!==94||t.level>=t.options.maxNesting)return!1;for(a=u+2;a<d;a++){if(t.src.charCodeAt(a)===32)return!1;if(t.src.charCodeAt(a)===93)break}return a===u+2||a+1>=d||t.src.charCodeAt(++a)!==58?!1:(r||(a++,t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.refs||(t.env.footnotes.refs={}),c=t.src.slice(u+2,a-2),t.env.footnotes.refs[":"+c]=-1,t.tokens.push({type:"footnote_reference_open",label:c,level:t.level++}),o=t.bMarks[e],i=t.tShift[e],s=t.parentType,t.tShift[e]=t.skipSpaces(a)-a,t.bMarks[e]=a,t.blkIndent+=4,t.parentType="footnote",t.tShift[e]<t.blkIndent&&(t.tShift[e]+=t.blkIndent,t.bMarks[e]-=t.blkIndent),t.parser.tokenize(t,e,n,!0),t.parentType=s,t.blkIndent-=4,t.tShift[e]=i,t.bMarks[e]=o,t.tokens.push({type:"footnote_reference_close",level:--t.level})),!0)}function Kfe(t,e,n,r){var o,i,s,a=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(a>=c||(o=t.src.charCodeAt(a),o!==35||a>=c))return!1;for(i=1,o=t.src.charCodeAt(++a);o===35&&a<c&&i<=6;)i++,o=t.src.charCodeAt(++a);return i>6||a<c&&o!==32?!1:(r||(c=t.skipCharsBack(c,32,a),s=t.skipCharsBack(c,35,a),s>a&&t.src.charCodeAt(s-1)===32&&(c=s),t.line=e+1,t.tokens.push({type:"heading_open",hLevel:i,lines:[e,t.line],level:t.level}),a<c&&t.tokens.push({type:"inline",content:t.src.slice(a,c).trim(),level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"heading_close",hLevel:i,level:t.level})),!0)}function Wfe(t,e,n){var r,o,i,s=e+1;return s>=n||t.tShift[s]<t.blkIndent||t.tShift[s]-t.blkIndent>3||(o=t.bMarks[s]+t.tShift[s],i=t.eMarks[s],o>=i)||(r=t.src.charCodeAt(o),r!==45&&r!==61)||(o=t.skipChars(o,r),o=t.skipSpaces(o),o<i)?!1:(o=t.bMarks[e]+t.tShift[e],t.line=s+1,t.tokens.push({type:"heading_open",hLevel:r===61?1:2,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:t.src.slice(o,t.eMarks[e]).trim(),level:t.level+1,lines:[e,t.line-1],children:[]}),t.tokens.push({type:"heading_close",hLevel:r===61?1:2,level:t.level}),!0)}var D4={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(t){D4[t]=!0});var Yfe=/^<([a-zA-Z]{1,15})[\s\/>]/,Qfe=/^<\/([a-zA-Z]{1,15})[\s>]/;function Jfe(t){var e=t|32;return e>=97&&e<=122}function Xfe(t,e,n,r){var o,i,s,a=t.bMarks[e],c=t.eMarks[e],u=t.tShift[e];if(a+=u,!t.options.html||u>3||a+2>=c||t.src.charCodeAt(a)!==60)return!1;if(o=t.src.charCodeAt(a+1),o===33||o===63){if(r)return!0}else if(o===47||Jfe(o)){if(o===47){if(i=t.src.slice(a,c).match(Qfe),!i)return!1}else if(i=t.src.slice(a,c).match(Yfe),!i)return!1;if(D4[i[1].toLowerCase()]!==!0)return!1;if(r)return!0}else return!1;for(s=e+1;s<t.lineMax&&!t.isEmpty(s);)s++;return t.line=s,t.tokens.push({type:"htmlblock",level:t.level,lines:[e,t.line],content:t.getLines(e,s,0,!0)}),!0}function US(t,e){var n=t.bMarks[e]+t.blkIndent,r=t.eMarks[e];return t.src.substr(n,r-n)}function Zfe(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v;if(e+2>n||(c=e+1,t.tShift[c]<t.blkIndent)||(s=t.bMarks[c]+t.tShift[c],s>=t.eMarks[c])||(o=t.src.charCodeAt(s),o!==124&&o!==45&&o!==58)||(i=US(t,e+1),!/^[-:| ]+$/.test(i))||(u=i.split("|"),u<=2))return!1;for(f=[],a=0;a<u.length;a++){if(p=u[a].trim(),!p){if(a===0||a===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(p))return!1;p.charCodeAt(p.length-1)===58?f.push(p.charCodeAt(0)===58?"center":"right"):p.charCodeAt(0)===58?f.push("left"):f.push("")}if(i=US(t,e).trim(),i.indexOf("|")===-1||(u=i.replace(/^\||\|$/g,"").split("|"),f.length!==u.length))return!1;if(r)return!0;for(t.tokens.push({type:"table_open",lines:g=[e,0],level:t.level++}),t.tokens.push({type:"thead_open",lines:[e,e+1],level:t.level++}),t.tokens.push({type:"tr_open",lines:[e,e+1],level:t.level++}),a=0;a<u.length;a++)t.tokens.push({type:"th_open",align:f[a],lines:[e,e+1],level:t.level++}),t.tokens.push({type:"inline",content:u[a].trim(),lines:[e,e+1],level:t.level,children:[]}),t.tokens.push({type:"th_close",level:--t.level});for(t.tokens.push({type:"tr_close",level:--t.level}),t.tokens.push({type:"thead_close",level:--t.level}),t.tokens.push({type:"tbody_open",lines:v=[e+2,0],level:t.level++}),c=e+2;c<n&&!(t.tShift[c]<t.blkIndent||(i=US(t,c).trim(),i.indexOf("|")===-1));c++){for(u=i.replace(/^\||\|$/g,"").split("|"),t.tokens.push({type:"tr_open",level:t.level++}),a=0;a<u.length;a++)t.tokens.push({type:"td_open",align:f[a],level:t.level++}),d=u[a].substring(u[a].charCodeAt(0)===124?1:0,u[a].charCodeAt(u[a].length-1)===124?u[a].length-1:u[a].length).trim(),t.tokens.push({type:"inline",content:d,level:t.level,children:[]}),t.tokens.push({type:"td_close",level:--t.level});t.tokens.push({type:"tr_close",level:--t.level})}return t.tokens.push({type:"tbody_close",level:--t.level}),t.tokens.push({type:"table_close",level:--t.level}),g[1]=v[1]=c,t.line=c,!0}function gm(t,e){var n,r,o=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];return o>=i||(r=t.src.charCodeAt(o++),r!==126&&r!==58)||(n=t.skipSpaces(o),o===n)||n>=i?-1:n}function epe(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].tight=!0,t.tokens[n].tight=!0,n+=2)}function tpe(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v,y,b,C;if(r)return t.ddIndent<0?!1:gm(t,e)>=0;if(d=e+1,t.isEmpty(d)&&++d>n||t.tShift[d]<t.blkIndent||(o=gm(t,d),o<0)||t.level>=t.options.maxNesting)return!1;u=t.tokens.length,t.tokens.push({type:"dl_open",lines:c=[e,0],level:t.level++}),s=e,i=d;e:for(;;){for(C=!0,b=!1,t.tokens.push({type:"dt_open",lines:[s,s],level:t.level++}),t.tokens.push({type:"inline",content:t.getLines(s,s+1,t.blkIndent,!1).trim(),level:t.level+1,lines:[s,s],children:[]}),t.tokens.push({type:"dt_close",level:--t.level});;){if(t.tokens.push({type:"dd_open",lines:a=[d,0],level:t.level++}),y=t.tight,p=t.ddIndent,f=t.blkIndent,v=t.tShift[i],g=t.parentType,t.blkIndent=t.ddIndent=t.tShift[i]+2,t.tShift[i]=o-t.bMarks[i],t.tight=!0,t.parentType="deflist",t.parser.tokenize(t,i,n,!0),(!t.tight||b)&&(C=!1),b=t.line-i>1&&t.isEmpty(t.line-1),t.tShift[i]=v,t.tight=y,t.parentType=g,t.blkIndent=f,t.ddIndent=p,t.tokens.push({type:"dd_close",level:--t.level}),a[1]=d=t.line,d>=n||t.tShift[d]<t.blkIndent)break e;if(o=gm(t,d),o<0)break;i=d}if(d>=n||(s=d,t.isEmpty(s))||t.tShift[s]<t.blkIndent||(i=s+1,i>=n)||(t.isEmpty(i)&&i++,i>=n)||t.tShift[i]<t.blkIndent||(o=gm(t,i),o<0))break}return t.tokens.push({type:"dl_close",level:--t.level}),c[1]=d,t.line=d,C&&epe(t,u),!0}function npe(t,e){var n,r,o,i,s,a=e+1,c;if(n=t.lineMax,a<n&&!t.isEmpty(a)){for(c=t.parser.ruler.getRules("paragraph");a<n&&!t.isEmpty(a);a++)if(!(t.tShift[a]-t.blkIndent>3)){for(o=!1,i=0,s=c.length;i<s;i++)if(c[i](t,a,n,!0)){o=!0;break}if(o)break}}return r=t.getLines(e,a,t.blkIndent,!1).trim(),t.line=a,r.length&&(t.tokens.push({type:"paragraph_open",tight:!1,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:r,level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"paragraph_close",tight:!1,level:t.level})),!0}var vm=[["code",Bfe],["fences",Hfe,["paragraph","blockquote","list"]],["blockquote",zfe,["paragraph","blockquote","list"]],["hr",Vfe,["paragraph","blockquote","list"]],["list",Gfe,["paragraph","blockquote"]],["footnote",qfe,["paragraph"]],["heading",Kfe,["paragraph","blockquote"]],["lheading",Wfe],["htmlblock",Xfe,["paragraph","blockquote"]],["table",Zfe,["paragraph"]],["deflist",tpe,["paragraph"]],["paragraph",npe]];function rA(){this.ruler=new uo;for(var t=0;t<vm.length;t++)this.ruler.push(vm[t][0],vm[t][1],{alt:(vm[t][2]||[]).slice()})}rA.prototype.tokenize=function(t,e,n){for(var r=this.ruler.getRules(""),o=r.length,i=e,s=!1,a,c;i<n&&(t.line=i=t.skipEmptyLines(i),!(i>=n||t.tShift[i]<t.blkIndent));){for(c=0;c<o&&(a=r[c](t,i,n,!1),!a);c++);if(t.tight=!s,t.isEmpty(t.line-1)&&(s=!0),i=t.line,i<n&&t.isEmpty(i)){if(s=!0,i++,i<n&&t.parentType==="list"&&t.isEmpty(i))break;t.line=i}}};var rpe=/[\n\t]/g,ope=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,ipe=/\u00a0/g;rA.prototype.parse=function(t,e,n,r){var o,i=0,s=0;if(!t)return[];t=t.replace(ipe," "),t=t.replace(ope,`
`),t.indexOf("	")>=0&&(t=t.replace(rpe,function(a,c){var u;return t.charCodeAt(c)===10?(i=c+1,s=0,a):(u="    ".slice((c-i-s)%4),s=c-i+1,u)})),o=new ul(t,this,e,n,r),this.tokenize(o,o.line,o.lineMax)};function spe(t){switch(t){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function ape(t,e){for(var n=t.pos;n<t.posMax&&!spe(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}function cpe(t,e){var n,r,o=t.pos;if(t.src.charCodeAt(o)!==10)return!1;if(n=t.pending.length-1,r=t.posMax,!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){for(var i=n-2;i>=0;i--)if(t.pending.charCodeAt(i)!==32){t.pending=t.pending.substring(0,i+1);break}t.push({type:"hardbreak",level:t.level})}else t.pending=t.pending.slice(0,-1),t.push({type:"softbreak",level:t.level});else t.push({type:"softbreak",level:t.level});for(o++;o<r&&t.src.charCodeAt(o)===32;)o++;return t.pos=o,!0}var oA=[];for(var nN=0;nN<256;nN++)oA.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){oA[t.charCodeAt(0)]=1});function lpe(t,e){var n,r=t.pos,o=t.posMax;if(t.src.charCodeAt(r)!==92)return!1;if(r++,r<o){if(n=t.src.charCodeAt(r),n<256&&oA[n]!==0)return e||(t.pending+=t.src[r]),t.pos+=2,!0;if(n===10){for(e||t.push({type:"hardbreak",level:t.level}),r++;r<o&&t.src.charCodeAt(r)===32;)r++;return t.pos=r,!0}}return e||(t.pending+="\\"),t.pos++,!0}function upe(t,e){var n,r,o,i,s,a=t.pos,c=t.src.charCodeAt(a);if(c!==96)return!1;for(n=a,a++,r=t.posMax;a<r&&t.src.charCodeAt(a)===96;)a++;for(o=t.src.slice(n,a),i=s=a;(i=t.src.indexOf("`",s))!==-1;){for(s=i+1;s<r&&t.src.charCodeAt(s)===96;)s++;if(s-i===o.length)return e||t.push({type:"code",content:t.src.slice(a,i).replace(/[ \n]+/g," ").trim(),block:!1,level:t.level}),t.pos=s,!0}return e||(t.pending+=o),t.pos+=o.length,!0}function dpe(t,e){var n,r,o,i=t.posMax,s=t.pos,a,c;if(t.src.charCodeAt(s)!==126||e||s+4>=i||t.src.charCodeAt(s+1)!==126||t.level>=t.options.maxNesting||(a=s>0?t.src.charCodeAt(s-1):-1,c=t.src.charCodeAt(s+2),a===126)||c===126||c===32||c===10)return!1;for(r=s+2;r<i&&t.src.charCodeAt(r)===126;)r++;if(r>s+3)return t.pos+=r-s,e||(t.pending+=t.src.slice(s,r)),!0;for(t.pos=s+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===126&&t.src.charCodeAt(t.pos+1)===126&&(a=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==126&&a!==126&&(a!==32&&a!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=s+2,e||(t.push({type:"del_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"del_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=s,!1)}function hpe(t,e){var n,r,o,i=t.posMax,s=t.pos,a,c;if(t.src.charCodeAt(s)!==43||e||s+4>=i||t.src.charCodeAt(s+1)!==43||t.level>=t.options.maxNesting||(a=s>0?t.src.charCodeAt(s-1):-1,c=t.src.charCodeAt(s+2),a===43)||c===43||c===32||c===10)return!1;for(r=s+2;r<i&&t.src.charCodeAt(r)===43;)r++;if(r!==s+2)return t.pos+=r-s,e||(t.pending+=t.src.slice(s,r)),!0;for(t.pos=s+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===43&&t.src.charCodeAt(t.pos+1)===43&&(a=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==43&&a!==43&&(a!==32&&a!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=s+2,e||(t.push({type:"ins_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"ins_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=s,!1)}function fpe(t,e){var n,r,o,i=t.posMax,s=t.pos,a,c;if(t.src.charCodeAt(s)!==61||e||s+4>=i||t.src.charCodeAt(s+1)!==61||t.level>=t.options.maxNesting||(a=s>0?t.src.charCodeAt(s-1):-1,c=t.src.charCodeAt(s+2),a===61)||c===61||c===32||c===10)return!1;for(r=s+2;r<i&&t.src.charCodeAt(r)===61;)r++;if(r!==s+2)return t.pos+=r-s,e||(t.pending+=t.src.slice(s,r)),!0;for(t.pos=s+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===61&&t.src.charCodeAt(t.pos+1)===61&&(a=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==61&&a!==61&&(a!==32&&a!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=s+2,e||(t.push({type:"mark_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"mark_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=s,!1)}function rN(t){return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}function oN(t,e){var n=e,r,o,i,s=!0,a=!0,c=t.posMax,u=t.src.charCodeAt(e);for(r=e>0?t.src.charCodeAt(e-1):-1;n<c&&t.src.charCodeAt(n)===u;)n++;return n>=c&&(s=!1),i=n-e,i>=4?s=a=!1:(o=n<c?t.src.charCodeAt(n):-1,(o===32||o===10)&&(s=!1),(r===32||r===10)&&(a=!1),u===95&&(rN(r)&&(s=!1),rN(o)&&(a=!1))),{can_open:s,can_close:a,delims:i}}function ppe(t,e){var n,r,o,i,s,a,c,u=t.posMax,d=t.pos,f=t.src.charCodeAt(d);if(f!==95&&f!==42||e)return!1;if(c=oN(t,d),n=c.delims,!c.can_open)return t.pos+=n,e||(t.pending+=t.src.slice(d,t.pos)),!0;if(t.level>=t.options.maxNesting)return!1;for(t.pos=d+n,a=[n];t.pos<u;){if(t.src.charCodeAt(t.pos)===f){if(c=oN(t,t.pos),r=c.delims,c.can_close){for(i=a.pop(),s=r;i!==s;){if(s<i){a.push(i-s);break}if(s-=i,a.length===0)break;t.pos+=i,i=a.pop()}if(a.length===0){n=i,o=!0;break}t.pos+=r;continue}c.can_open&&a.push(r),t.pos+=r;continue}t.parser.skipToken(t)}return o?(t.posMax=t.pos,t.pos=d+n,e||((n===2||n===3)&&t.push({type:"strong_open",level:t.level++}),(n===1||n===3)&&t.push({type:"em_open",level:t.level++}),t.parser.tokenize(t),(n===1||n===3)&&t.push({type:"em_close",level:--t.level}),(n===2||n===3)&&t.push({type:"strong_close",level:--t.level})),t.pos=t.posMax+n,t.posMax=u,!0):(t.pos=d,!1)}var mpe=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function gpe(t,e){var n,r,o=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==126||e||i+2>=o||t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(t.src.charCodeAt(t.pos)===126){n=!0;break}t.parser.skipToken(t)}return!n||i+1===t.pos||(r=t.src.slice(i+1,t.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sub",level:t.level,content:r.replace(mpe,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0)}var vpe=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function ype(t,e){var n,r,o=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==94||e||i+2>=o||t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(t.src.charCodeAt(t.pos)===94){n=!0;break}t.parser.skipToken(t)}return!n||i+1===t.pos||(r=t.src.slice(i+1,t.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sup",level:t.level,content:r.replace(vpe,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0)}function bpe(t,e){var n,r,o,i,s,a,c,u,d=!1,f=t.pos,p=t.posMax,g=t.pos,v=t.src.charCodeAt(g);if(v===33&&(d=!0,v=t.src.charCodeAt(++g)),v!==91||t.level>=t.options.maxNesting||(n=g+1,r=Df(t,g),r<0))return!1;if(a=r+1,a<p&&t.src.charCodeAt(a)===40){for(a++;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);if(a>=p)return!1;for(g=a,N4(t,a)?(i=t.linkContent,a=t.pos):i="",g=a;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);if(a<p&&g!==a&&O4(t,a))for(s=t.linkContent,a=t.pos;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);else s="";if(a>=p||t.src.charCodeAt(a)!==41)return t.pos=f,!1;a++}else{if(t.linkLevel>0)return!1;for(;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);if(a<p&&t.src.charCodeAt(a)===91&&(g=a+1,a=Df(t,a),a>=0?o=t.src.slice(g,a++):a=g-1),o||(typeof o>"u"&&(a=r+1),o=t.src.slice(n,r)),c=t.env.references[M4(o)],!c)return t.pos=f,!1;i=c.href,s=c.title}return e||(t.pos=n,t.posMax=r,d?t.push({type:"image",src:i,title:s,alt:t.src.substr(n,r-n),level:t.level}):(t.push({type:"link_open",href:i,title:s,level:t.level++}),t.linkLevel++,t.parser.tokenize(t),t.linkLevel--,t.push({type:"link_close",level:--t.level}))),t.pos=a,t.posMax=p,!0}function Cpe(t,e){var n,r,o,i,s=t.posMax,a=t.pos;return a+2>=s||t.src.charCodeAt(a)!==94||t.src.charCodeAt(a+1)!==91||t.level>=t.options.maxNesting||(n=a+2,r=Df(t,a+1),r<0)?!1:(e||(t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.list||(t.env.footnotes.list=[]),o=t.env.footnotes.list.length,t.pos=n,t.posMax=r,t.push({type:"footnote_ref",id:o,level:t.level}),t.linkLevel++,i=t.tokens.length,t.parser.tokenize(t),t.env.footnotes.list[o]={tokens:t.tokens.splice(i)},t.linkLevel--),t.pos=r+1,t.posMax=s,!0)}function Spe(t,e){var n,r,o,i,s=t.posMax,a=t.pos;if(a+3>s||!t.env.footnotes||!t.env.footnotes.refs||t.src.charCodeAt(a)!==91||t.src.charCodeAt(a+1)!==94||t.level>=t.options.maxNesting)return!1;for(r=a+2;r<s;r++){if(t.src.charCodeAt(r)===32||t.src.charCodeAt(r)===10)return!1;if(t.src.charCodeAt(r)===93)break}return r===a+2||r>=s||(r++,n=t.src.slice(a+2,r-1),typeof t.env.footnotes.refs[":"+n]>"u")?!1:(e||(t.env.footnotes.list||(t.env.footnotes.list=[]),t.env.footnotes.refs[":"+n]<0?(o=t.env.footnotes.list.length,t.env.footnotes.list[o]={label:n,count:0},t.env.footnotes.refs[":"+n]=o):o=t.env.footnotes.refs[":"+n],i=t.env.footnotes.list[o].count,t.env.footnotes.list[o].count++,t.push({type:"footnote_ref",id:o,subId:i,level:t.level})),t.pos=r,t.posMax=s,!0)}var Epe=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],wpe=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Tpe=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function Ipe(t,e){var n,r,o,i,s,a=t.pos;return t.src.charCodeAt(a)!==60||(n=t.src.slice(a),n.indexOf(">")<0)?!1:(r=n.match(Tpe),r?Epe.indexOf(r[1].toLowerCase())<0||(i=r[0].slice(1,-1),s=yw(i),!t.parser.validateLink(i))?!1:(e||(t.push({type:"link_open",href:s,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=r[0].length,!0):(o=n.match(wpe),o?(i=o[0].slice(1,-1),s=yw("mailto:"+i),t.parser.validateLink(s)?(e||(t.push({type:"link_open",href:s,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=o[0].length,!0):!1):!1))}function lb(t,e){return t=t.source,e=e||"",function n(r,o){return r?(o=o.source||o,t=t.replace(r,o),n):new RegExp(t,e)}}var _pe=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,Ape=/[^"'=<>`\x00-\x20]+/,kpe=/'[^']*'/,xpe=/"[^"]*"/,Rpe=lb(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",Ape)("single_quoted",kpe)("double_quoted",xpe)(),Ppe=lb(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",_pe)("attr_value",Rpe)(),Npe=lb(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",Ppe)(),Ope=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,Mpe=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,Lpe=/<[?].*?[?]>/,Dpe=/<![A-Z]+\s+[^>]*>/,jpe=/<!\[CDATA\[[\s\S]*?\]\]>/,Upe=lb(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",Npe)("close_tag",Ope)("comment",Mpe)("processing",Lpe)("declaration",Dpe)("cdata",jpe)();function Fpe(t){var e=t|32;return e>=97&&e<=122}function Bpe(t,e){var n,r,o,i=t.pos;return!t.options.html||(o=t.posMax,t.src.charCodeAt(i)!==60||i+2>=o)||(n=t.src.charCodeAt(i+1),n!==33&&n!==63&&n!==47&&!Fpe(n))||(r=t.src.slice(i).match(Upe),!r)?!1:(e||t.push({type:"htmltag",content:t.src.slice(i,i+r[0].length),level:t.level}),t.pos+=r[0].length,!0)}var Hpe=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,zpe=/^&([a-z][a-z0-9]{1,31});/i;function Vpe(t,e){var n,r,o,i=t.pos,s=t.posMax;if(t.src.charCodeAt(i)!==38)return!1;if(i+1<s){if(n=t.src.charCodeAt(i+1),n===35){if(o=t.src.slice(i).match(Hpe),o)return e||(r=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),t.pending+=R4(r)?vw(r):vw(65533)),t.pos+=o[0].length,!0}else if(o=t.src.slice(i).match(zpe),o){var a=k4(o[1]);if(o[1]!==a)return e||(t.pending+=a),t.pos+=o[0].length,!0}}return e||(t.pending+="&"),t.pos++,!0}var FS=[["text",ape],["newline",cpe],["escape",lpe],["backticks",upe],["del",dpe],["ins",hpe],["mark",fpe],["emphasis",ppe],["sub",gpe],["sup",ype],["links",bpe],["footnote_inline",Cpe],["footnote_ref",Spe],["autolink",Ipe],["htmltag",Bpe],["entity",Vpe]];function ub(){this.ruler=new uo;for(var t=0;t<FS.length;t++)this.ruler.push(FS[t][0],FS[t][1]);this.validateLink=$pe}ub.prototype.skipToken=function(t){var e=this.ruler.getRules(""),n=e.length,r=t.pos,o,i;if((i=t.cacheGet(r))>0){t.pos=i;return}for(o=0;o<n;o++)if(e[o](t,!0)){t.cacheSet(r,t.pos);return}t.pos++,t.cacheSet(r,t.pos)};ub.prototype.tokenize=function(t){for(var e=this.ruler.getRules(""),n=e.length,r=t.posMax,o,i;t.pos<r;){for(i=0;i<n&&(o=e[i](t,!1),!o);i++);if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};ub.prototype.parse=function(t,e,n,r){var o=new ll(t,this,e,n,r);this.tokenize(o)};function $pe(t){var e=["vbscript","javascript","file","data"],n=t.trim().toLowerCase();return n=Hc(n),!(n.indexOf(":")!==-1&&e.indexOf(n.split(":")[0])!==-1)}var Gpe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},qpe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},Kpe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},Wpe={default:Gpe,full:qpe,commonmark:Kpe};function j4(t,e,n){this.src=e,this.env=n,this.options=t.options,this.tokens=[],this.inlineMode=!1,this.inline=t.inline,this.block=t.block,this.renderer=t.renderer,this.typographer=t.typographer}function Ca(t,e){typeof t!="string"&&(e=t,t="default"),e&&e.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new ub,this.block=new rA,this.core=new L4,this.renderer=new nA,this.ruler=new uo,this.options={},this.configure(Wpe[t]),this.set(e||{})}Ca.prototype.set=function(t){x4(this.options,t)};Ca.prototype.configure=function(t){var e=this;if(!t)throw new Error("Wrong `remarkable` preset, check name/content");t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enable(t.components[n].rules,!0)})};Ca.prototype.use=function(t,e){return t(this,e),this};Ca.prototype.parse=function(t,e){var n=new j4(this,t,e);return this.core.process(n),n.tokens};Ca.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Ca.prototype.parseInline=function(t,e){var n=new j4(this,t,e);return n.inlineMode=!0,this.core.process(n),n.tokens};Ca.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};function Ype(t){const e="\\(",n="\\)";function r(a,c){const u=a.pos,d=a.posMax;let f=u;if(a.src.charAt(f)!==e[0]||a.src.charAt(f+1)!==e[1])return!1;f+=e.length;const p=a.src.slice(u,f);if(p.length>2)return!1;const g=f;let v=0;for(;f<d;){const y=a.src.charAt(f),b=y===n[0]&&a.src.charAt(f+1)===n[1];if(y==="{"&&(f===0||a.src.charAt(f-1)!=="\\"))v+=1;else if(y==="}"&&(f===0||a.src.charAt(f-1)!=="\\")){if(v-=1,v<0)return!1}else if(b&&v===0){const C=f,S=f+n.length;if(S-C===p.length){if(!c){const w=a.src.slice(g,C).replace(/[ \n]+/g," ").trim();a.push({type:"latex",content:w,block:!1,level:a.level})}return a.pos=S,!0}}f+=1}return c||(a.pending+=p),a.pos+=p.length,!0}const o={start:"$$",end:"$$"},i={start:"\\[",end:"\\]"};function s(a,c,u,d){const f=a.tShift[c],p=a.bMarks[c]+f;let g=a.src.slice(p,a.eMarks[c]),v=null;if(g.startsWith(o.start)?v=o:g.startsWith(i.start)&&(v=i),!v)return!1;let y=c,b=!1;for(;y<=u;){const S=a.tShift[y],w=a.bMarks[y]+S;if(g=a.src.slice(w,a.eMarks[y]),g.endsWith(v.end)&&(y>c||g!==v.end)){b=!0;break}y+=1}if(!b)return!1;if(d)return!0;const C=a.src.slice(p+v.start.length,a.eMarks[y]-v.end.length);return a.tokens.push({type:"latex_block",content:C.trim(),lines:[c,y],level:a.level}),a.line=y+1,!0}t.inline.ruler.push("latex",r,{}),t.block.ruler.after("fences","latex_block",s,{})}function Qpe(t){return t.replaceAll(/(\n\n\$\$.*?\$\$) *(\n\n)/g,"$1$2")}function Jpe(t){return[Xpe,Zs("kill-post-process-latex-double-dollar")?null:Qpe].filter(n=>n!==null).reduce((n,r)=>r(n),t)}const BS="\\[",iN="\\]";function Xpe(t){return t.includes(BS)?t.replaceAll(BS,`

${BS}`).replaceAll(iN,`${iN}

`):t}const yp=new Ca;yp.use(Ype);yp.inline.ruler.enable(["text","emphasis","links","backticks","sup","sub","latex","del"],!0);yp.block.ruler.enable(["list","paragraph","heading","hr","fences","table","blockquote","latex_block"],!0);yp.core.ruler.enable(["block","inline","references"],!0);function Zpe(t){const[e="",...n]=t.replace(vp,"").split(kv);return{index:e,title:n.join(kv)}}function U4(t,e={}){const n=[];let r=null,o=!1,i=!1,s=!1;for(const a of t)switch(a.type){case"text":case"sup":case"sub":if("content"in a&&a.content){const c={},u=a.content.startsWith(vp)?{type:"citation",props:{index:"",title:"",url:"",iconUrl:null,publisher:null}}:{type:"text",props:{text:a.content}};if(u.type==="text"&&(r&&(u.props.link=r),o&&(c.bold=!0),i&&(c.italic=!0),s&&(c.strikethrough=!0),a.type==="text"&&(u.props.text=u.props.text.replaceAll("\\$","$")),a.type==="sup"&&(c.sup=!0),a.type==="sub"&&(c.sub=!0),Object.keys(c).length>0&&(u.props.annotations=c)),u.type==="citation"&&r){const{citations:d}=e,{index:f,title:p}=Zpe(a.content),g=d==null?void 0:d.find(v=>v.index===f);u.props={index:f,title:(g==null?void 0:g.title)??p,url:r.url,iconUrl:null,publisher:null}}n.push(u)}break;case"code":"content"in a&&n.push({type:"text",props:{text:a.content,annotations:{code:!0}}});break;case"latex":"content"in a&&n.push({type:"latex",props:{content:a.content}});break;case"strong_open":o=!0;break;case"strong_close":o=!1;break;case"em_open":i=!0;break;case"em_close":i=!1;break;case"del_open":s=!0;break;case"del_close":s=!1;break;case"link_open":r="href"in a?{url:ea(a.href)}:null;break;case"link_close":r=null;break}return n}function ym(t,e){return t!==void 0&&t.type==="inline"&&"children"in t?U4(Array.isArray(t.children)?t.children:[],e):null}function eme(t,e){let n=0;function r(){var s;let i=t[n];if(!i)return null;if(i.type==="hr")return n+=1,i=t[n],{type:"hr"};if(i.type==="latex_block")return n+=1,"content"in i?{type:"latex",props:{content:{type:"text",props:{text:i.content}}}}:null;if(i.type==="paragraph_open"){n+=1,i=t[n],n+=1;const a=ym(i,e);return a?{type:"paragraph",props:{items:a}}:null}if(i.type==="blockquote_open"){const a={type:"blockquote",props:{items:[]}};for(n+=1,i=t[n];(i==null?void 0:i.type)!=="blockquote_close";){const c=r();c&&"type"in c&&a.props.items.push(c),i=t[n]}return n+=1,a}if(i.type==="ordered_list_open"||i.type==="bullet_list_open"){const a={type:"list",props:{items:[],ordered:i.type==="ordered_list_open"}};"order"in i&&(a.props.start=i.order);const c=i.type==="ordered_list_open"?"ordered_list_close":"bullet_list_close";for(n+=1,i=t[n];(i==null?void 0:i.type)!==c;){const u=r(),d=[];if(u&&Array.isArray(u)){for(const f of u)(f.type==="paragraph"||f.type==="list"||f.type==="code"||f.type==="heading")&&d.push(f);a.props.items.push(d)}i=t[n]}return n+=1,a}if(i.type==="list_item_open"){const a=[];for(n+=1,i=t[n];(i==null?void 0:i.type)!=="list_item_close";){const c=r();if(c)for(const u of[c].flat())(u.type==="paragraph"||u.type==="list"||u.type==="code"||u.type==="heading")&&a.push(u);i=t[n]}return n+=1,a}if(i.type==="heading_open"){const a="hLevel"in i?i.hLevel:1;n+=1,i=t[n],n+=1;const c=ym(i,e);return c?{type:"heading",props:{level:a,items:c}}:null}if(i.type==="fence"&&"content"in i){const a={type:"code",props:{content:{type:"text",props:{text:vhe(i.content)}},language:"params"in i?i.params:void 0}};return n+=1,a}if(i.type==="table_open"){const a=[],c=[];for(;(i==null?void 0:i.type)!=="table_close";){if((i==null?void 0:i.type)==="th_open"){n+=1,i=t[n];const u=ym(i,e);u&&a.push(u)}if((i==null?void 0:i.type)==="tr_open"&&!i.lines&&c.push([]),(i==null?void 0:i.type)==="td_open"){n+=1,i=t[n];const u=ym(i,e);u&&((s=c[c.length-1])==null||s.push(u))}n+=1,i=t[n]}return{type:"table",props:{columns:a,data:c}}}return i.type==="inline"&&"children"in i?(n+=1,U4(i.children??[])):(n+=1,null)}const o=[];for(;n<t.length;){const i=r();i&&!Array.isArray(i)&&o.push(i)}return o}function F4(t,e={}){const n=yp.parse(Jpe(t),{});return eme(n,e)}function tme(t){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"DownloadFileError",eventInfo_details:"Error downloading file.",eventInfo_errorMessage:t}})}const nme=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...t},m.createElement("path",{d:"M10 6.5V2H5.5C4.67157 2 4 2.67157 4 3.5V16.5C4 17.3284 4.67157 18 5.5 18H14.5C15.3284 18 16 17.3284 16 16.5V8H11.5C10.6716 8 10 7.32843 10 6.5ZM6.5 10H13.5C13.7761 10 14 10.2239 14 10.5C14 10.7761 13.7761 11 13.5 11H6.5C6.22386 11 6 10.7761 6 10.5C6 10.2239 6.22386 10 6.5 10ZM6.5 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7761 13.7761 13 13.5 13H6.5C6.22386 13 6 12.7761 6 12.5C6 12.2239 6.22386 12 6.5 12ZM6.5 14H13.5C13.7761 14 14 14.2239 14 14.5C14 14.7761 13.7761 15 13.5 15H6.5C6.22386 15 6 14.7761 6 14.5C6 14.2239 6.22386 14 6.5 14ZM11 6.5V2.25L15.75 7H11.5C11.2239 7 11 6.77614 11 6.5Z",fill:"currentColor"})),rme=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t},m.createElement("path",{d:"M12 2V8C12 9.10457 12.8954 10 14 10H20V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4C4 2.89543 4.89543 2 6 2H12ZM13.5 2.5V8C13.5 8.27614 13.7239 8.5 14 8.5H19.5L13.5 2.5Z",fill:"currentColor"})),ome="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/pdf-DuUY2RJ0.svg",ime=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",...t},m.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H11.5C11.7761 2 12 2.22386 12 2.5V4.5C12 4.77614 11.7761 5 11.5 5C11.2238 5 11 4.77614 11 4.5V3H7.99997L7.99998 13H9C9.27614 13 9.5 13.2239 9.5 13.5C9.5 13.7761 9.27614 14 9 14H6C5.72386 14 5.5 13.7761 5.5 13.5C5.5 13.2239 5.72386 13 6 13H6.99998L6.99997 3H4V4.5C4 4.77614 3.77614 5 3.5 5C3.22386 5 3 4.77614 3 4.5V2.5Z",fill:"currentColor"}));function B4(t){const{fileType:e,className:n}=t;switch(e){case"application/pdf":return h.jsx(er,{url:ome,className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return h.jsx(nme,{className:n});case"text/plain":return h.jsx(ime,{className:n});case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return h.jsx(rme,{className:n})}}const H4=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M18.2498 20.5009C18.664 20.5008 19 20.8365 19 21.2507C19 21.6649 18.6644 22.0008 18.2502 22.0009L5.25022 22.0047C4.836 22.0048 4.5 21.6691 4.5 21.2549C4.5 20.8407 4.83557 20.5048 5.24978 20.5047L18.2498 20.5009ZM11.6482 2.01271L11.75 2.00586C12.1297 2.00586 12.4435 2.28801 12.4932 2.65409L12.5 2.75586L12.499 16.4409L16.2208 12.7205C16.4871 12.4543 16.9038 12.4301 17.1974 12.648L17.2815 12.7206C17.5477 12.9869 17.5719 13.4036 17.354 13.6972L17.2814 13.7813L12.2837 18.7779C12.0176 19.044 11.6012 19.0683 11.3076 18.8507L11.2235 18.7782L6.22003 13.7816C5.92694 13.4889 5.92661 13.014 6.21931 12.7209C6.48539 12.4545 6.90204 12.43 7.1958 12.6477L7.27997 12.7202L10.999 16.4339L11 2.75586C11 2.37616 11.2822 2.06237 11.6482 2.01271L11.75 2.00586L11.6482 2.01271Z",fill:"currentColor"})),B1e=Object.freeze(Object.defineProperty({__proto__:null,default:H4},Symbol.toStringTag,{value:"Module"})),sme=10*1024*1024,ame=5*1024*1024,cme=50*1024*1024,bw=3,lme={"image/png":["png"],"image/jpeg":["jpg","jpeg"]},iA={"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/json":["json"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"]},jf={...lme,...iA};function bp(t){return t in iA}function z4(t){if(!t)return!1;const e=ys(t);return e===""?!1:e in jf}const ume=Object.keys(jf).map(t=>{const e=jf[t].map(n=>`.${n}`);return[t,...e]}).flat();Object.values(jf).flat().map(t=>`.${t}`);const dme=Object.values(iA).flat().map(t=>`.${t}`);function V4(){return{documentMaxSize:et("fileasyncprocessing")?cme:ame,imageMaxSize:sme}}function sA(t){var r;const e=(r=t.split(".").pop())==null?void 0:r.toLowerCase(),n=Object.entries(jf).find(([,o])=>o.includes(e??""));return n?n[0]:""}function ys(t){return t?t.type!==""?t.type:sA(t.name):""}function hme(t){let e,n=null;const r=et("multi-file-upload"),o=V4();if(!z4(t))e={title:ce("composer.errors.unsupportedAttachmentTypeV2.title"),message:ce("composer.errors.unsupportedAttachmentTypeV2.message")},n="fileType";else if(!$4(t)){const i=ys(t);e=r?{title:ce("composer.errors.multi.attachmentTooLarge.title"),message:ce("composer.errors.multi.attachmentTooLarge.message",{limit:bp(i)?o.documentMaxSize/1024/1024:o.imageMaxSize/1024/1024})}:{title:ce("composer.errors.attachmentTooLargeV2.title"),message:ce("composer.errors.attachmentTooLargeV2.message")},n="fileSize"}return K.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:n,eventInfo_fileType:ys(t),eventInfo_fileSize:t.size}}),e}function fme(t){return t.type==="text/x-markdown"?new File([t],t.name,{type:"text/markdown"}):t}function $4(t){const e=V4(),n=ys(t),r=bp(n)?e.documentMaxSize:e.imageMaxSize;return t.size<=r}function pme(t){var n;const e=(n=t.clipboardData)==null?void 0:n.items;if(e)for(let r=0;r<e.length;r+=1){const o=e[r];if((o==null?void 0:o.kind)==="file"){const i=o.getAsFile();if(!z4(i))continue;const s=ys(i);if(i!==null)return $4(i)?{file:i,error:void 0}:(K.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:"fileType",eventInfo_fileSize:i.size,eventInfo_fileType:s,eventInfo_errorMessage:"File size too large in paste"}}),{file:void 0,error:{title:ce("composer.errors.attachmentTooLargeV2.title"),message:ce("composer.errors.attachmentTooLargeV2.message")}})}}return{file:void 0,error:void 0}}function G4(t){switch(t){case"unsupported-content-type":return{title:ce("composer.errors.unsupportedAttachmentTypeV2.title"),message:ce("composer.errors.unsupportedAttachmentTypeV2.message")};case"attachment-too-large":return{title:ce("composer.errors.attachmentTooLargeV2.title"),message:ce("composer.errors.attachmentTooLargeV2.message")};case"empty-attachment":return{title:ce("composer.errors.emptyAttachmentV2.title"),message:ce("composer.errors.emptyAttachmentV2.message")};case"content-blocked":return{title:ce("composer.errors.attachmentContentBlockedV2.title"),message:ce("composer.errors.attachmentContentBlockedV2.message")};case"rate-limit-exceeded":return{title:ce("composer.errors.attachmentRateLimitExceededV2.title"),message:ce("composer.errors.attachmentRateLimitExceededV2.message")};default:return{title:ce("composer.errors.attachmentDefault.title"),message:ce("composer.errors.attachmentDefault.message")}}}function q4(t,e){const n=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=n,r.download=e,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),r.remove()}function H1e(t,e,n){const r=new Blob([n],{type:e});q4(r,t)}async function mme(t){const{url:e,fileName:n}=t,r=l2(e)?await fetch(e):await Uc(e);if(!r.ok)throw new Error(`Failed to fetch file: ${n} from ${e} (status: ${r.status})`);const o=await r.blob();q4(o,n)}function gme({name:t,size:e,message:n,kind:r}){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:n,eventInfo_details:`Error uploading ${r} attachment`,eventInfo_uploadFileSize:e,eventInfo_uploadFileType:t,eventInfo_numDocumentsUploaded:1}})}function vme(t){const{fileName:e,contentType:n,url:r}=t,{t:o}=Fe(),i=m.useCallback(()=>{mme({url:r,fileName:e}).catch(s=>{const a=s instanceof Error?s.message:"unknown file download button error";tme(a)})},[r,e]);return r?h.jsxs(Ue,{title:o("common.downloadFile",{fileName:e}),className:"flex w-fit max-w-full flex-row items-center gap-2",onClick:i,children:[h.jsx(B4,{fileType:n,className:"size-5 shrink-0"}),h.jsx("span",{className:"min-w-0 flex-1 truncate text-foreground-750 text-sm",children:e}),h.jsx(H4,{className:"size-4 shrink-0"})]}):null}const K4=1.2;function Sa(t={},e={}){return{start:{...t,opacity:0},end:n=>({...e,opacity:1,transition:{delay:n,ease:"easeInOut",duration:K4}})}}const yme=Sa();function bme(t){const{items:e,shouldAnimate:n,BlockRenderer:r,delay:o}=t;return h.jsx(xe.blockquote,{className:"flex flex-col gap-3 border-s-2 border-foreground-300 ps-3",variants:yme,initial:n?"start":"end",animate:"end",custom:o,children:h.jsx(r,{blocks:e,shouldAnimate:n})})}function Es(t){m.useEffect(()=>(window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}),[t])}function Cme(t){const e=D(Bi),{openMediaViewer:n}=zi(),r=m.useCallback(()=>{if(!t)return[];const s=e.find(c=>c.id===t);if(!s||s.author!=="ai")return[];const a=[];for(const c of s.content)if(c.type==="card"){if(c.card.type==="image"){const u=c.card;a.push(...u.images)}else if(c.card.type==="video"){const u=c.card;a.push(...u.videos)}}return a},[e,t]),o=m.useCallback(s=>r().some(c=>c.source.url===s),[r]),i=m.useCallback(s=>{const a=r(),c=a.findIndex(d=>d.source.url===s);if(c===-1)return;const u=a.map(d=>"image"in d?{type:"image",url:d.image.url,thumbnailUrl:d.image.thumbnailUrl,altText:d.image.altText,initLoading:!0,source:{title:d.source.title,url:d.source.url,iconUrl:d.source.iconUrl??void 0}}:{type:"video",url:d.video.url,isShort:d.video.isShort,bestMomentIndex:d.bestMomentIndex,moments:d.moments,source:{title:d.video.title,url:d.source.url,iconUrl:d.source.iconUrl??void 0}});n({currentMediaIndex:c,media:u})},[r,n]);return{checkMediaLink:o,openMediaLink:i}}function zc({onOutsideEvent:t,elements:e,shouldAttachListeners:n=!0,includeScroll:r=!0,invokeOnce:o=!0,includeFocus:i=!0}){m.useEffect(()=>{const s=a=>{e.some(u=>{var d;return(d=u.current)==null?void 0:d.contains(a.target)})||t()};return n&&(document.addEventListener("mousedown",s,{once:o}),r&&document.addEventListener("scroll",s,!0),i&&document.addEventListener("focusin",s,!0)),()=>{document.removeEventListener("mousedown",s),r&&document.removeEventListener("scroll",s,!0),i&&document.removeEventListener("focusin",s,!0)}},[n,r,e,o,i,t])}const aA=m.createContext(void 0),Sme=Sa();function Eme(t){const{url:e,title:n,index:r,shouldAnimate:o,delay:i}=t,s=m.useContext(aA),a=ve("citation-media-open"),c=m.useId(),u=m.useId(),{checkMediaLink:d,openMediaLink:f}=Cme(s??null),p=Hv("html"),g=D(mt),[v,y]=m.useState(!1),[b,C]=m.useState(null),{refs:S,floatingStyles:w}=GO({placement:"top",elements:{reference:b},middleware:[td(8),Vf(),nd()]});zc({onOutsideEvent:()=>y(!1),elements:[S.floating],includeScroll:!0,invokeOnce:!0}),Es(A=>{(A.key==="Escape"||A.key==="Control")&&y(_=>(_&&b instanceof HTMLElement&&b.focus(),!1))});const E=()=>{if(a&&d(e)){f(e);return}y(!0)},T=()=>{Sn({source:"citationLink",conversationId:g,messageId:s,destination:tf(e)}),y(!1)},I=og(e);return h.jsxs(xe.span,{initial:o?"start":"end",animate:"end",variants:Sme,custom:i,className:"mx-0.5 inline-block h-5 w-4 pb-1 align-middle","data-copy":"false",children:[h.jsx("button",{id:u,"aria-expanded":v,"aria-controls":c,"aria-label":ce("chat.citationPopoverButtonLabel",{citationNumber:r}),ref:C,type:"button",className:G("mx-px flex size-full items-center justify-center rounded-md bg-accent-200 pt-px text-foreground-800 text-3xs hover:bg-accent-250 focus:bg-accent-250 dark:bg-slate-700 hover:dark:bg-background-400 focus:dark:bg-background-400",v&&"pointer-events-none"),onClick:E,children:r}),v&&h.jsx("span",{id:c,role:"dialog","aria-labelledby":u,className:G("absolute w-screen px-4 max-sm:mb-2 sm:w-[350px] sm:px-0",qt.citations),style:w,ref:S.setFloating,children:h.jsx(xe.span,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{scale:{duration:.2},opacity:{duration:.15}},className:"origin-top-left",style:gT,children:h.jsx("a",{onClick:T,className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",href:tf(e),target:"_blank",rel:p,children:h.jsxs("span",{className:"w-full flex-1 space-y-0.5",children:[h.jsx("span",{className:"line-clamp-1 text-xs-strong",children:n}),h.jsx("span",{className:"line-clamp-1 flex items-center gap-1.5 text-foreground-600 text-2xs",children:I})]})})})})]},"citation")}const wme="https://#timestamp-",Tme="https://#settings:privacy";function W4(t){return t?t.startsWith(wme)?"VideoCitation":t.startsWith(Tme)?"PrivacySettings":"Unknown":"Unknown"}function Ime(t){return W4(t)!=="Unknown"}function _me(t){if(!/^\d{2}:\d{2}:\d{2}$/.test(t))return t;const[n,r,o]=t.split(":");return n==="00"?(r==null?void 0:r.charAt(0))==="0"?`${r.substring(1)}:${o}`:`${r}:${o}`:(n==null?void 0:n.charAt(0))==="0"?`${n.substring(1)}:${r}:${o}`:t}const Ame=Sa(),sN="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function kme(t){const{url:e,text:n,shouldAnimate:r,delay:o}=t,i=m.useContext(aA),s=D(mt),a=W4(e),c=async()=>{switch(a){case"VideoCitation":await Gce.run({url:e});break;case"PrivacySettings":await Kce.run({url:e});break}K.trackEvent({name:"interaction",data:{eventName:"localCitationClick",eventInfo_messageId:i??"",eventInfo_conversationId:s??"",eventInfo_citationType:a}})};m.useEffect(()=>{K.trackEvent({name:"interaction",data:{eventName:"localCitationImpression",eventInfo_messageId:i??"",eventInfo_conversationId:s??"",eventInfo_citationType:a}})},[i,s,a]);const u=_me(n);return r?h.jsx(xe.button,{className:sN,onClick:c,"data-url":e,initial:"start",animate:"end",variants:Ame,custom:o,children:u}):h.jsx("button",{type:"button",className:sN,onClick:c,"data-url":e,children:u})}const aN=Sa(),cN="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function Vi(t){const{items:e,shouldAnimate:n,dangerouslyUseHtml:r,shouldTestForUrl:o=!0}=t,i=Te(kU),s=Te(Ir);return h.jsx(h.Fragment,{children:e.map((a,c)=>{var b;if(a.type==="citation"){const{title:C,url:S,index:w,delay:E}=a;return h.jsx(Eme,{title:C,url:S,index:w,shouldAnimate:n,delay:E},c)}if(a.type==="italic"||a.type==="bold"||a.type==="strikethrough"||a.type==="sup"||a.type==="sub"||a.type==="code"){const C=h.jsx(Vi,{items:a.items,shouldAnimate:n,dangerouslyUseHtml:r});return a.type==="italic"?h.jsx("em",{children:C},c):a.type==="bold"?h.jsx("strong",{children:C},c):a.type==="strikethrough"?h.jsx("del",{children:C},c):a.type==="sup"?h.jsx("sup",{children:C},c):a.type==="sub"?h.jsx("sub",{children:C},c):h.jsx(xe.code,{className:"font-ligatures-none mx-0.5 rounded-[4px] border border-stroke-300 bg-accent-200/60 px-1 py-px font-mono text-foreground-800 text-sm dark:bg-accent-200",initial:n?"start":"end",animate:"end",variants:aN,custom:a.delay,children:C},c)}if(a.type!=="word")return null;const{word:u,url:d,delay:f,format:p}=a,v=xme({word:u,url:d,testForUrl:!p&&o}),y={initial:"start",animate:"end",variants:aN,custom:f,...r===!0||p==="latexAsHtml"?{dangerouslySetInnerHTML:{__html:((b=window.copilotTrustedTypesPolicy)==null?void 0:b.createHTML(u))??""}}:{children:u}};if(v.url){if(Ime(v.url))return h.jsx(kme,{url:v.url,text:v.word,shouldAnimate:n,delay:f},c);const C=()=>{i(v.url),s("confirm-link-navigation")};return h.jsxs(m.Fragment,{children:[n?h.jsx(xe.button,{className:cN,onClick:C,"data-url":v.url,...y}):h.jsx("button",{type:"button",className:cN,onClick:C,"data-url":v.url,...y}),v.suffix&&v.suffix]},c)}return n?h.jsx(xe.span,{...y},c):r===!0||p==="latexAsHtml"?h.jsx("span",{...y},c):h.jsx(m.Fragment,{children:u},c)})})}function xme({word:t,url:e,testForUrl:n}){return e?{url:e,word:t}:n?q9(t):{word:t}}function Ui(t){var e,n;return(n=(e=be.instance().config().styleOverrides)==null?void 0:e.typography)==null?void 0:n[t]}function Uf(t){var e,n;return(n=(e=be.instance().config().styleOverrides)==null?void 0:e.padding)==null?void 0:n[t]}function Rme(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h1",{className:G(Ui("h1")??"text-2xl-medium","[&:not(:first-child)]:pt-6"),children:h.jsx(Vi,{shouldAnimate:e,items:n})})}function Pme(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h2",{className:G(Ui("h2")??"text-xl-medium","[&:not(:first-child)]:pt-3.5","pb-1"),children:h.jsx(Vi,{shouldAnimate:e,items:n})})}function Nme(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h3",{className:G(Ui("h3")??"text-lg-medium","pb-1","[&:not(:first-child)]:pt-3.5"),children:h.jsx(Vi,{shouldAnimate:e,items:n})})}function Ome(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h4",{className:G(Ui("h4")??"text-md-medium"),children:h.jsx(Vi,{shouldAnimate:e,items:n})})}function Mme(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h5",{className:G(Ui("h5")??"text-base-medium"),children:h.jsx(Vi,{shouldAnimate:e,items:n})})}function Lme(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h6",{className:G(Ui("h6")??"text-base"),children:h.jsx(Vi,{shouldAnimate:e,items:n})})}const Dme=[Rme,Pme,Nme,Ome,Mme,Lme];function jme(t){const{shouldAnimate:e,items:n,level:r}=t,o=Dme[r-1];return o?h.jsx(o,{shouldAnimate:e,items:n}):null}const Ume=Sa(),lN="relative pb-6 w-full after:border-b after:border-stroke-300 after:w-full after:absolute after:mt-3";function Fme(t){const{delay:e,shouldAnimate:n}=t;return n?h.jsx(xe.div,{className:lN,initial:"start",animate:"end",variants:Ume,custom:e}):h.jsx("div",{className:lN})}const Bme=Sa();function Hme(t){const{content:e,shouldAnimate:n,delay:r,dangerouslyUseHtml:o}=t;return h.jsx(xe.div,{initial:n?"start":"end",animate:"end",custom:r,variants:Bme,children:h.jsx("div",{className:"horizontal-scrollbar overflow-x-auto whitespace-pre pb-3 pt-4 text-center",children:h.jsx(Vi,{items:e,shouldAnimate:n,dangerouslyUseHtml:o})})})}const uN="relative list-outside marker:text-foreground-750 dark:marker:text-foreground-600 flex flex-col",zme=Sa();function Vme(t){const{items:e,ordered:n,start:r,shouldAnimate:o,BlockRenderer:i}=t,s=e.map(({items:a,delay:c},u)=>h.jsx(xe.li,{initial:o?"start":"end",animate:"end",variants:zme,custom:c,className:"ps-2",children:h.jsx(i,{blocks:a,shouldAnimate:o})},u));return n?h.jsx("ol",{start:r,className:G(uN,"ms-5 marker:normal-nums marker:text-sm-strong"),children:s}):h.jsx("ul",{className:G(uN,"ms-4 px-1"),children:s})}function $me(t){const{items:e,shouldAnimate:n}=t;return h.jsx("p",{children:h.jsx("span",{className:G("font-ligatures-none",Ui("aiMessageDefault")),children:h.jsx(Vi,{items:e,shouldAnimate:n})})})}const Gme=Sa();function qme(t){const{columns:e,data:n,shouldAnimate:r}=t;return h.jsxs("div",{className:"relative max-w-full",children:[h.jsx("div",{className:"my-6 max-w-full overflow-x-auto rounded-lg bg-white/25 dark:bg-black/25",children:h.jsxs("table",{className:"t-table",style:{borderSpacing:0},children:[h.jsx("thead",{children:h.jsx("tr",{children:e.map((o,i)=>h.jsx(dN,{type:"head",items:o,shouldAnimate:r},i))})}),h.jsx("tbody",{children:n.map((o,i)=>h.jsx("tr",{children:o.map((s,a)=>h.jsx(dN,{type:"data",items:s,shouldAnimate:r},a))},i))})]})}),h.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-lg border border-stroke-300 dark:border-stroke-250"})]})}function dN(t){var i;const{type:e,items:n,shouldAnimate:r}=t,o=e==="head"?xe.th:xe.td;return h.jsx(o,{variants:Gme,initial:r?"start":"end",animate:"end",custom:((i=n[0])==null?void 0:i.delay)??0,children:h.jsx(Vi,{shouldAnimate:r,items:n})})}const Kme=m.lazy(()=>q(()=>import("./code-DVb2ThHz.js"),__vite__mapDeps([228,1,229])));function Rv(t){const{blocks:e,shouldAnimate:n}=t;return h.jsx(h.Fragment,{children:e.map((r,o)=>{const i=`${r.type}-${o}`;switch(r.type){case"paragraph":return h.jsx($me,{items:r.items,shouldAnimate:n},i);case"list":return h.jsx(Vme,{ordered:r.ordered,start:r.start,items:r.items,BlockRenderer:Rv,shouldAnimate:n},i);case"heading":return h.jsx(jme,{items:r.items,level:r.level,shouldAnimate:n},i);case"code":return h.jsx(Kme,{content:r.content,original:r.original,delay:r.delay,shouldAnimate:n,language:r.language,dangerouslyUseHtml:r.dangerouslyUseHtml},i);case"latex":return h.jsx(Hme,{content:r.content,delay:r.delay,shouldAnimate:n,dangerouslyUseHtml:r.dangerouslyUseHtml},i);case"table":return h.jsx(qme,{columns:r.columns,data:r.data,shouldAnimate:n},i);case"blockquote":return h.jsx(bme,{items:r.items,delay:r.delay,shouldAnimate:n,BlockRenderer:Rv},i);case"hr":return h.jsx(Fme,{delay:r.delay,shouldAnimate:n},i);default:return null}})})}const Wme={getValue:()=>0,queueUpdate:()=>{}},Yme=()=>{};function Qme(t){const{artifact:e}=t;switch(e.type){case"code":{const{language:n,content:r}=e,o=`\`\`\`${n}
${r}
\`\`\``,i=F4(o),s=xv(i,Wme,Yme);return h.jsx(Rv,{blocks:s,shouldAnimate:!1})}case"file":{const{contentType:n,name:r,url:o}=e;return h.jsx(vme,{fileName:r,contentType:n,url:o})}default:return null}}function Jme(t){const{activities:e}=t;return h.jsx("div",{className:"flex flex-col gap-4 overflow-y-auto",children:e.map((n,r)=>h.jsxs("div",{className:"flex flex-col gap-4 pt-3",children:[h.jsx("h3",{children:n.title}),n.artifacts.map((o,i)=>h.jsx(Qme,{artifact:o},i))]},r))})}const Xme=V(void 0);function Zme(){const[t,e]=tt(Xme),n=!!t,r=()=>{e(void 0)};return!t||t.length===0?null:h.jsx(pa,{className:"w-96 p-4",isOpen:n,variant:"drawer",onClose:r,children:h.jsx(Jme,{activities:t})})}function Cp(t){const e=m.useRef(null),{isOpen:n,headerText:r,fullBleed:o,children:i,onClose:s,className:a,closeButtonTestId:c}=t,u=m.useRef(null),{t:d}=Fe(),f=m.useId();zc({onOutsideEvent:n&&s!==void 0?s:()=>{},elements:[u],includeScroll:!1,includeFocus:!1});const{modalAttributes:p}=zO({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return m.useEffect(()=>{var g,v;n?(g=e.current)==null||g.showModal():(v=e.current)==null||v.close()},[n]),m.useEffect(()=>{const g=e.current;if(!g)return()=>{};const v=()=>{s==null||s()};return g.addEventListener("cancel",v),()=>{g.removeEventListener("cancel",v)}},[s]),h.jsx(xe.dialog,{className:"fixed inset-0 m-auto rounded-4xl border border-white/10 bg-background-150 text-foreground-800 shadow-xl backdrop:bg-stone-850/30 dark:bg-background-250 dark:backdrop:bg-midnight-850/70",animate:n?"animate":"initial",initial:"initial",exit:"exit",variants:{initial:rt,animate:Ot},transition:{duration:_o.default,ease:"easeInOut"},ref:e,role:"dialog","aria-modal":"true","aria-labelledby":r?f:void 0,...n?p:{},children:n&&h.jsxs("div",{"data-modal-overlay":"true",className:G("flex min-h-[150px] flex-col gap-3",!o&&"p-6",a),ref:u,children:[!o&&h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&h.jsx("h2",{id:f,className:"text-foreground-800 text-md-strong",children:r}),s&&h.jsx(Ue,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:d("common.closeText"),"aria-label":d("common.closeText"),onClick:s,testId:c,children:h.jsx(Io,{className:"size-5"})})]}),i]})})}const ege="XF86Back",z1e="XF86BTVoice",tge=461;function nge(t){return t.key===ege||t.keyCode===tge}function rge(t){const{className:e,children:n}=t;return h.jsx("span",{className:G("inline-block h-4 min-w-4 rounded-md bg-accent-200 px-1 pt-px text-center leading-4 text-foreground-800 text-3xs dark:bg-accent-200",e),children:n})}const oge={default:"border-black/10 dark:border-white/10",accent:"border-stroke-300"};function cA(t){const{horizontalMargin:e=!0,verticalMargin:n=!0,color:r="default",className:o}=t;return h.jsx("div",{className:G("border-t-[1px]",e&&"mx-2",n&&"my-2",oge[r],o)})}const ige=m.lazy(()=>q(()=>import("./index-BK4kHWYN.js").then(t=>t.i),__vite__mapDeps([230,1,231]))),sge="focus-within:bg-neutral-50/5 before:pointer-events-none before:absolute before:inset-0 before:rounded-3xl before:border before:border-transparent focus-within:before:border-[1px] focus-within:before:border-[rgba(255,255,255,0.1)]";function age(){var d,f;const t=D(f$),[e,n]=tt(dM),r=m.useContext(aA),o=D(mt),i=Hv("html"),s=((d=be.instance().config().composer)==null?void 0:d.largeScreen)===!0&&((f=be.instance().config().composer)==null?void 0:f.voiceOnly)===!0,a=()=>{n(null),at({source:"citationOverflowModal",scenario:"close"})},{focusable:c}=rd({isFocusBoundary:!0});Es(p=>{nge(p)&&(p.stopPropagation(),a())});const u=m.useMemo(()=>new Map((e??[]).map((p,g)=>[g,m.createRef()])),[e]);return h.jsx(Cp,{isOpen:t,onClose:s?void 0:a,headerText:`${e==null?void 0:e.length} ${ce("chat.references")}`,className:G(s?"max-h-[40vh]":"max-h-[80vh]",s?"w-[480px]":"w-[440px]","mx-4 px-2"),children:h.jsx(Jw.Provider,{value:c.focusKey??"",children:h.jsx("div",{className:G("flex flex-col gap-2 overflow-y-auto",s?"no-scrollbar":"t-custom-scrollbar"),children:e==null?void 0:e.map((p,g)=>h.jsx(Y4,{ref:u.get(g),index:g,citation:p,currentConversationId:o,messageId:r,isLargeScreenVoiceComposer:s,citationsModalData:e,rel:i},g))})})})}const Y4=m.forwardRef(({index:t,citation:e,currentConversationId:n,messageId:r,citationsModalData:o,isLargeScreenVoiceComposer:i=!1,rel:s},a)=>{const{title:c,url:u,publisher:d}=e,{refCallback:f,focusable:p}=rd({autoRestoreFocus:!0,forceFocus:!0,scrollIntoViewOnFocus:!0},a);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:G(i&&sge,"group relative flex flex-row items-center gap-2 rounded-3xl p-2"),children:[h.jsxs("a",{rel:s,ref:f,className:"flex flex-1 flex-col items-start gap-2 py-1","data-spatial-navigation-autofocus":!0,href:u,"data-spatial-focus-key":p.focusKey,target:"_blank",onClick:g=>{if(i){g.preventDefault();return}at({source:"citationModalLink",customData:JSON.stringify({destination:tf(u),conversationId:n,messageId:r})})},children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(rge,{children:e.index}),h.jsx("div",{className:"text-foreground-550 text-xs",children:d??og(u)})]}),h.jsx("div",{children:c}),h.jsx("div",{className:"text-foreground-550 text-xs",children:og(u)})]}),i&&h.jsx(m.Suspense,{fallback:h.jsx("span",{}),children:h.jsx("div",{className:"flex size-28 items-center justify-center rounded-2xl bg-white opacity-0 group-focus-within:opacity-100",children:h.jsx(ige,{value:u,size:86})})})]}),t<o.length-1&&h.jsx(cA,{horizontalMargin:!1,verticalMargin:!1,className:"my-4"})]})});Y4.displayName="CitationItem";const cge=m.lazy(()=>q(()=>Promise.resolve().then(()=>w4),void 0));async function lge(t){await Fr({path:t,args:{options:{method:"DELETE"}}})}function uge(){const{t}=Fe(),e=Te(hM),{trigger:n,isMutating:r}=hT("/conversations/history",lge),o=async()=>{await n(),e(null)},i=()=>{e(null)};return h.jsxs(Cp,{isOpen:!0,onClose:i,headerText:t("settings.clearHistory.header"),className:"min-h-[328px] w-full max-w-[400px]",children:[h.jsx("p",{className:"text-start",children:t("settings.clearHistory.description")}),h.jsx(Ue,{title:t("settings.clearHistory.confirm"),color:"default",size:"56-xl",variant:"rect",className:"mt-3 w-full text-system-red-550 dark:text-system-red-350",onClick:o,disabled:r,children:r?h.jsx(cge,{type:"spinnerThemed",className:"size-6"}):t("settings.clearHistory.confirm")}),h.jsx(Ue,{title:t("common.cancel"),color:"strong",size:"56-xl",variant:"rect",className:"mt-3 w-full",onClick:i,children:t("common.cancel")})]})}const Q4=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M17.7545 14.0002C18.9966 14.0002 20.0034 15.007 20.0034 16.2491V16.8245C20.0034 17.7188 19.6838 18.5836 19.1023 19.263C17.5329 21.0965 15.1457 22.0013 12.0004 22.0013C8.8545 22.0013 6.46849 21.0962 4.90219 19.2619C4.32242 18.583 4.00391 17.7195 4.00391 16.8267V16.2491C4.00391 15.007 5.01076 14.0002 6.25278 14.0002H17.7545ZM17.7545 15.5002H6.25278C5.83919 15.5002 5.50391 15.8355 5.50391 16.2491V16.8267C5.50391 17.3624 5.69502 17.8805 6.04287 18.2878C7.29618 19.7555 9.26206 20.5013 12.0004 20.5013C14.7387 20.5013 16.7063 19.7555 17.9627 18.2876C18.3117 17.8799 18.5034 17.361 18.5034 16.8245V16.2491C18.5034 15.8355 18.1681 15.5002 17.7545 15.5002ZM12.0004 2.00488C14.7618 2.00488 17.0004 4.24346 17.0004 7.00488C17.0004 9.76631 14.7618 12.0049 12.0004 12.0049C9.23894 12.0049 7.00036 9.76631 7.00036 7.00488C7.00036 4.24346 9.23894 2.00488 12.0004 2.00488ZM12.0004 3.50488C10.0674 3.50488 8.50036 5.07189 8.50036 7.00488C8.50036 8.93788 10.0674 10.5049 12.0004 10.5049C13.9334 10.5049 15.5004 8.93788 15.5004 7.00488C15.5004 5.07189 13.9334 3.50488 12.0004 3.50488Z"})),V1e=Object.freeze(Object.defineProperty({__proto__:null,default:Q4},Symbol.toStringTag,{value:"Module"})),HS="relative size-full rounded-full aspect-square",hN="flex items-center justify-center uppercase",zS="after:absolute after:-inset-px after:rounded-full after:border-[0.5px] after:border-black/10 dark:after:border-white/20";function dge(t){const{firstName:e,imgSrc:n,nameSizeClass:r,altText:o}=t;return n?h.jsx("img",{className:G("overflow-hidden object-cover",HS,zS),src:n,alt:o??ce("common.profileImage")}):e?h.jsx("div",{className:G(HS,hN,zS,r??"text-md"),children:h.jsx("div",{children:e[0]})}):h.jsx("div",{className:G(HS,hN,zS),children:h.jsx(Q4,{className:"size-6 fill-foreground-800","alt-text":o??ce("common.profileImage")})})}function hge(){const t=ve("aad-student"),e=D(VQ),{t:n}=Fe(),r=t&&e,o=t&&e===void 0,i=n(r?"entraRedirect.guestTitle":"entraRedirect.workTitle"),s=n(r?"entraRedirect.guestDescription":"entraRedirect.workDescription");return{isStudentEnabled:r,isLoadingEnabled:o,workTitle:i,workDescription:s,titleGapClass:r?"mb-6 sm:mb-10":"mb-8 sm:mb-14",eventInfoScenario:r?"Student":"Enterprise",getPageTitle:()=>n(r?"aadStudent.title":"entraRedirect.pageTitle"),getPageSubTitle:p=>r?n("aadStudent.subtitle",{email:p}):void 0,getWorkButtonText:p=>r?n("aadStudent.continueAsGuestButtonText"):n("entraRedirect.goToWorkButton",{redirectUrl:p})}}function fge(){var k;const t=D(MX),e=D(pd),n=D(hr),r=Kc(),o=co(),{isStudentEnabled:i,isLoadingEnabled:s,workTitle:a,workDescription:c,titleGapClass:u,eventInfoScenario:d,getPageTitle:f,getPageSubTitle:p,getWorkButtonText:g}=hge(),v=!i&&(n==null?void 0:n.email);m.useEffect(()=>{t&&rr(mg,JSON.stringify(t))},[t]);let y=!1;try{y=JSON.parse(pn(mg)??"false")}catch(N){console.error("Failed to parse authentication status:",N),y=!1}const b=t?e:!y&&!!((k=window.cwcRedirect)!=null&&k.cwcRedirectUrl),[C,S]=m.useState(b),[w,E]=m.useState(),{t:T}=Fe(),{login:I,logout:A}=Id(),_=(N,x,M)=>ea(`${N}?fromCode=cmcv2&redirectId=${x}${M?`&login_hint=${M}`:""}`),j=async()=>{let N=crypto.randomUUID().replace(/-/g,"").toUpperCase(),x=Xb,M="AadUnknown";if(e){const Y=await ZR();x=_(Xb,N,Y==null?void 0:Y.username)}else window.cwcRedirect&&(x=window.cwcRedirect.cwcRedirectUrl,N=window.cwcRedirect.redirectId,M=window.cwcRedirect.chatEligibility);be.instance().config().entraRedirectModalBehaviour==="new-tab"?window.open(ea(x),"_blank","noopener,noreferrer"):eb(ea(x)),K.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirect",...w,eventInfo_traceId:N,eventInfo_redirectUrl:x,eventInfo_chatEligibility:M}})},R=async()=>{K.trackEvent({name:"interaction",data:{eventName:"copilotStudentRedirectSignOut",...w}}),await A()},$=async()=>{K.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirectSwitchAccount",eventInfo_scenario:d,...w}}),S(!1),r?(await A(!1),await o({from:"/",to:"/login"})):await I({provider:"microsoft"})},U=async()=>{K.trackEvent({name:"interaction",data:{eventName:t?"copilotEnterpriseRedirectSignOut":"copilotEnterpriseRedirectContinueSignedOut",...w}}),t?await A():S(!1)};if(m.useEffect(()=>{S(b),b&&(async()=>{var M;let x={};if(e){const te=await ZR();x={userAadId:(M=te==null?void 0:te.idTokenClaims)==null?void 0:M.oid,userAadTenantId:te==null?void 0:te.tenantId}}else window.cwcRedirect&&(x={userAadId:window.cwcRedirect.userId,userAadTenantId:window.cwcRedirect.tenantId});K.trackEvent({name:"system",data:{eventName:"copilotEnterpriseRedirectImpression",eventInfo_redirectReason:e?"AAD":"CWC",eventInfo_scenario:d,...x}}),E(x)})().catch(console.error)},[e,b,d]),!C)return null;const se=!y&&window.cwcRedirect?new URL(window.cwcRedirect.cwcRedirectUrl).hostname:Xb,P=p(n==null?void 0:n.email);return h.jsxs(xn,{id:String(C),duration:0,mode:"sync",className:G("fixed inset-0",qt.modal),children:[h.jsx(vs,{forceGradient:!0}),h.jsx("main",{className:"relative m-auto flex size-full max-w-chat flex-col items-center justify-center overflow-y-auto p-4 pb-8 pt-20 sm:py-4",children:s?h.jsx(At,{className:"size-8"}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"mb-9",children:h.jsx(gp,{className:"size-12"})}),h.jsx("h1",{className:G("mb-8 w-full whitespace-pre-wrap break-words px-4 text-center text-3xl sm:mb-14",u),children:f()}),i&&P&&h.jsx("p",{className:"mb-10 w-full whitespace-pre-wrap break-words px-4 text-center text-base sm:mb-16",children:P}),h.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:gap-16",children:[h.jsx(fN,{title:a,description:c,onClick:i?R:j,children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{children:g(se)}),v&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("div",{className:"relative size-5",children:h.jsx(dge,{firstName:n.firstName??n.givenName??void 0,imgSrc:n.imgSrc,nameSizeClass:"text-xs"})}),h.jsx("p",{className:"text-xs",children:n.email})]})]})}),h.jsx(fN,{title:T("entraRedirect.personalTitle"),description:T("entraRedirect.personalDescription"),onClick:$,children:h.jsx("p",{className:"text-xs",children:T("entraRedirect.switchToPersonalButton")})})]}),!i&&h.jsx("div",{className:"mt-8 sm:mt-12",children:h.jsx(Fo,{i18nKey:t?"entraRedirect.signOut":"entraRedirect.continueSignedOut",components:{[t?"entraSignOut":"entraContinue"]:h.jsx("button",{type:"button",className:"underline",onClick:U,children:T(t?"entraRedirect.signOut":"entraRedirect.continueSignedOut")})}})})]})})]})}function fN({title:t,onClick:e,description:n,children:r}){return h.jsxs("div",{className:"flex flex-col justify-between rounded-4xl bg-white/70 p-4 dark:bg-midnight-700/70 md:p-6 md:pb-8",children:[h.jsxs("div",{children:[h.jsx("div",{className:"mb-2.5 text-lg",children:t}),h.jsx("p",{className:"mb-6 text-sm",children:n})]}),h.jsx(Ue,{color:"default",variant:"rect",title:t,onClick:e,children:r})]})}function Sp(t,e=!0,n=!1){m.useEffect(()=>{var r;e&&((r=t.current)==null||r.focus({preventScroll:n}))},[t,e,n])}const pge=m.lazy(()=>q(()=>import("./index-BK4kHWYN.js").then(t=>t.i),__vite__mapDeps([230,1,231])));function mge(t){const{onClose:e,interceptedLink:n}=t,{t:r}=Fe(),o=m.useRef(null);return Sp(o),Es(i=>{(i.key==="Escape"||i.key==="Control")&&e()}),h.jsxs("div",{className:"flex w-[400px] max-w-[80vw] flex-col items-center p-4 text-center",children:[h.jsx("div",{className:"bg-white p-2",children:h.jsx(m.Suspense,{fallback:h.jsx("span",{}),children:h.jsx(pge,{value:n,size:96})})}),h.jsx("h1",{className:"py-3 text-lg",children:r("composer.interceptedLink.title")}),h.jsx("p",{className:"w-full pb-7",children:h.jsx(Fo,{i18nKey:"composer.interceptedLink.description",components:{span:h.jsx("span",{className:"break-words underline"})},values:{link:n}})}),h.jsx(Ue,{ref:o,onClick:e,title:"close",variant:"pill",size:"48-lg",className:"w-full",children:r("common.closeText")})]})}const pN={translateY:"100%"},gge={translateY:0};function vge(t){const{children:e,id:n,onClose:r,className:o}=t,i=m.useRef(null);return Es(s=>{const{current:a}=i;!a||!a.contains(document.activeElement)||s.key==="Escape"&&r()}),h.jsxs(h.Fragment,{children:[h.jsx(xe.div,{initial:rt,animate:Ot,exit:rt,transition:dw,className:"fixed inset-0 bg-black/50"}),h.jsx(xe.div,{id:n,initial:pN,animate:gge,exit:pN,transition:dw,className:G("absolute bottom-0 max-h-expanded-section w-full overflow-y-hidden rounded-4xl",qt.modal,o),ref:i,children:h.jsx("div",{className:"flex h-full flex-col items-start gap-4 overflow-y-auto bg-background-100 p-6",children:e})})]})}function yge(t){var a;const{children:e,id:n,onClose:r,className:o}=t,i=lo(),s=(a=be.instance().config().uiOverrides)==null?void 0:a.disableConversationsModalWrapper;return i||s?h.jsx("div",{className:"flex max-w-96 flex-col items-start gap-4 p-2",children:e}):h.jsx(vge,{id:n,onClose:r,className:o,children:e})}function bge(){const[t,e]=m.useState(!1),n=ga(In),{createConversation:r}=hp(),o=m.useCallback(async i=>{if(!i)return;const s=QL(i);Sn({source:"deleteConversation",conversationId:i,scenario:s?"actions":void 0}),e(!0),s?await Uc(`/tasks/${s}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/tasks/*"}}):await Uc(`/conversations/${i}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*"}}),gt(mt)===i&&await r(!1),e(!1),n(a=>{a.delete(i)})},[n,r]);return{loading:t,deleteConversation:o}}const J4=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...t},m.createElement("path",{fill:"currentColor",d:"M 20.292969 5.2929688 L 9 16.585938 L 4.7070312 12.292969 L 3.2929688 13.707031 L 9 19.414062 L 21.707031 6.7070312 L 20.292969 5.2929688 z"})),$1e=Object.freeze(Object.defineProperty({__proto__:null,default:J4},Symbol.toStringTag,{value:"Module"}));function X4(t){const{disabled:e,checked:n,label:r,className:o,labelClassName:i,setChecked:s}=t,a=m.useId();return h.jsxs("label",{className:G("relative flex cursor-pointer items-center",o),htmlFor:a,children:[h.jsx("input",{checked:n,type:"checkbox",id:a,className:"peer sr-only",onChange:c=>s(c.target.checked),disabled:e}),h.jsx("span",{className:G("flex aspect-square size-5 items-center justify-center rounded-full border transition-colors duration-200 peer-focus:ring-1 peer-focus:ring-black peer-focus:ring-offset-2 peer-disabled:pointer-events-none peer-disabled:opacity-40 dark:peer-focus:ring-white","contrast-more:peer-focus:outline contrast-more:peer-focus:outline-2 contrast-more:peer-focus:outline-offset-2",n&&"bg-black contrast-more:bg-white dark:bg-white"),children:h.jsx(J4,{className:G("size-3 text-white transition-opacity duration-200 contrast-more:text-current dark:text-black contrast-more:dark:text-current",n?"opacity-100":"opacity-0")})}),h.jsx("span",{className:G("mt-px ps-4 peer-disabled:pointer-events-none peer-disabled:opacity-40",i),children:r})]})}function Cge(t){var v;const{conversationId:e,onClose:n}=t,r=m.useId(),{t:o}=Fe(),[i,s]=m.useState(!1),{loading:a,deleteConversation:c}=bge(),u=()=>{i&&rr(NQ,"true"),n()},d=async()=>{await c(e),u()},f=lo(),g=!((v=be.instance().config().uiOverrides)==null?void 0:v.disableDeleteConfirmationCheckbox)&&!f;return h.jsxs(yge,{id:r,onClose:n,className:"h-96",children:[h.jsx("h2",{className:"text-lg",children:o("composer.deleteConversation.header")}),h.jsx("p",{children:o("composer.deleteConversation.description")}),g&&h.jsx(X4,{disabled:a,checked:i,label:o("composer.deleteConversation.dontRemindMeCheck"),setChecked:s,className:"flex-1"}),h.jsx(Ue,{title:o("common.delete"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",disabled:a,onClick:d,children:a?h.jsx(At,{className:"size-8"}):o("common.delete")}),h.jsx(Ue,{title:o("common.keep"),color:"strong",size:"56-xl",variant:"rect",className:"w-full",disabled:a,onClick:u,children:o("common.keep")})]})}const Sge=V(void 0);function Ege({url:t,disableAutoCopy:e=!1}){const{t:n}=Fe(),r=n("share.copied"),o=n("share.copy"),[i,s]=m.useState(""),a=m.useRef(null),c=m.useCallback(()=>{a.current=window.setTimeout(()=>{s(o)},nz)},[o]),u=m.useCallback(()=>{a.current&&clearTimeout(a.current)},[]);m.useEffect(()=>e?(s(o),u):(mN(t).then(f=>{s(f?r:o),f&&c()}),u),[c,u,t,r,o,e]);const d=async()=>{await mN(t),s(r),u(),c()};return h.jsx(Ue,{title:i,color:"strong",size:"56-xl",className:"w-full",onClick:d,"aria-live":"polite","aria-label":i,children:i})}async function mN(t){try{return await navigator.clipboard.writeText(t),!0}catch(e){return K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:"Error copying shared conversation url.",eventInfo_errorMessage:e instanceof Error?e.message:""}}),!1}}function wge(t){const{onClose:e,shareUrl:n,imagePath:r,title:o}=t,[i,s]=m.useState(!0),{t:a}=Fe(),c=()=>{e(!1)};return h.jsxs(Cp,{isOpen:!0,onClose:c,headerText:a("podcasts.share"),className:"w-full max-w-[640px]",children:[h.jsxs("div",{className:"mt-3 flex flex-col gap-6",children:[h.jsxs("div",{className:"mx-2 flex flex-col items-center gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx(f4,{alt:a("podcasts.share"),path:r,onLoad:()=>s(!1),className:"rounded-2xl"}),h.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-podcast-share-modal-light dark:bg-gradient-podcast-share-modal-dark"}),!i&&h.jsx("h1",{className:"absolute bottom-8 mx-8 inline text-foreground-800 text-xl",children:o})]}),i&&h.jsx("div",{className:"flex h-[328px] items-center justify-center",children:h.jsx(At,{type:"spinnerThemed",className:"size-6"})})]}),h.jsx("div",{className:"py-4",children:h.jsx(Ege,{url:n,disableAutoCopy:!0})})]}),h.jsx("div",{className:"m-auto mb-3 max-w-[484px] text-center text-foreground-600 text-2xs",children:a("podcasts.sharePodcastsDisclaimer")})]})}const Tge=m.lazy(()=>q(()=>import("./sender-share-conversation-modal-BbgacZdJ.js"),__vite__mapDeps([232,1,233,234])).then(t=>({default:t.ShareConversationModal})));function Ige(){const[t,e]=tt(Sge),{t:n}=Fe(),r=()=>{e(void 0)};switch(t==null?void 0:t.action){case"delete":return h.jsx(pa,{isOpen:!0,className:"w-3/4 max-w-fit",children:h.jsx(Cge,{onClose:r,conversationId:t.conversationId})});case"share":return h.jsx(pa,{trapFocus:!0,isOpen:!!t.conversationId,disableCloseOutside:!0,onClose:r,headerText:t.messageId?n("share.shareModalHeaderOneTurn"):n("share.shareModalHeader"),headerTextClassName:"text-lg",className:"relative max-h-full w-3/4 max-w-[640px] overflow-y-auto",children:h.jsx(m.Suspense,{fallback:h.jsx(Ue,{color:"strong",size:"56-xl",className:"w-full",title:n("common.loading"),disabled:!0,children:h.jsx(At,{className:"size-8"})}),children:h.jsx(Tge,{conversationId:t.conversationId,scenario:t.scenario,messageId:t.messageId})})});case"share-podcast":return h.jsx(wge,{onClose:r,shareUrl:t.shareUrl,imagePath:t.imagePath,title:t.title});default:return null}}const _ge="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-dark-CEuF11Ih.jpg",Age="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-light-BSlP2HSn.jpg";function Z4(t){const{dismiss:e,source:n,beforeContinue:r}=t,{t:o}=Fe(),{login:i}=Id(),s=o("logIn.proUpsellHeader"),a=o("logIn.proUpsellDescription"),c=o("common.notNow"),u=o("signInPrompt.continueWithMicrosoft"),d=D(Cs),f=Wt();m.useEffect(()=>{fd({page:f,scenario:`UpsellProForAuth0AccountFrom${n}`})},[f,n]);const p=()=>{at({source:`UpsellProForAuth0AccountFrom${n}`,scenario:"ProUpsellForAuth0AccountLinkWithMSA",destination:"MicrosoftLoginPage"}),r==null||r(),sessionStorage.setItem(dE,`${new Date().getTime().toString()}-link`),i({provider:"microsoft"})},g=()=>{at({source:`UpsellProForAuth0AccountFrom${n}`,scenario:"dismissProUpsellForAuth0Account",destination:f}),e()};return h.jsxs("div",{className:"flex flex-col items-center p-4 text-center",children:[h.jsx("img",{src:d==="dark"?_ge:Age,alt:o("images.birds"),className:"h-44 w-full rounded-xl object-cover"}),h.jsx("h1",{className:"pb-3 pt-6 text-lg",children:s}),h.jsx("p",{className:"max-w-[95%] break-words pb-7",children:a}),h.jsxs(Ue,{onClick:p,title:u,variant:"pill",size:"48-lg",className:"w-full",color:"strong",testId:"prompt-sign-in-msft-composer-action",children:[h.jsx(Vv,{className:"size-6"}),u]}),h.jsx(Ue,{onClick:g,title:c,variant:"pill",size:"48-lg",color:"overlay-bright",className:"mt-3 w-full",testId:"not-now-button-composer-action",children:c})]})}const kge=Object.freeze(Object.defineProperty({__proto__:null,default:Z4},Symbol.toStringTag,{value:"Module"}));function xge(){const t=eA(),e=ve("ceo"),n=D(zo),r=D(hM),[o,i]=tt(xT),[s,a]=tt(v$),c=be.instance().config().entraRedirectModalBehaviour!=="skip";return h.jsxs(h.Fragment,{children:[n&&h.jsx(KU,{accountActionRequired:n}),t&&o&&h.jsx(pa,{isOpen:!0,children:h.jsx(mge,{interceptedLink:o,onClose:()=>{i(void 0)}})}),h.jsx(Ige,{}),r&&h.jsx(uge,{}),s&&h.jsx(pa,{isOpen:!0,className:"min-h-[328px] max-w-[528px]",children:h.jsx(Z4,{dismiss:()=>a(null),source:"ProSubPage"})}),c&&h.jsx(fge,{}),h.jsx(the,{}),h.jsx(age,{}),e&&h.jsx(Zme,{})]})}const eF=t=>m.createElement("svg",{width:96,height:93,viewBox:"0 0 96 93",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_140_39981",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93},m.createElement("mask",{id:"path-1-outside-1_140_39981",maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93,fill:"black"},m.createElement("rect",{fill:"white",width:96,height:93}),m.createElement("path",{d:"M4 46.5C4 23.0279 23.0279 4 46.5 4H49.5C72.9721 4 92 23.0279 92 46.5V46.5C92 69.9721 72.9721 89 49.5 89H46.5C23.0279 89 4 69.9721 4 46.5V46.5Z"})),m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",fill:"url(#paint0_linear_140_39981)",fillOpacity:.8,mask:"url(#path-1-outside-1_140_39981)"}),m.createElement("g",{clipPath:"url(#paint1_angular_140_39981_clip_path)","data-figma-skip-parse":"true",mask:"url(#path-1-outside-1_140_39981)"},m.createElement("g",{transform:"matrix(0 -0.0425 0.0556447 0 48 46.5)"},m.createElement("foreignObject",{x:-1094.12,y:-1094.12,width:2188.24,height:2188.24},m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(214, 147, 237, 1) 0deg,rgba(250, 176, 198, 1) 60.2401deg,rgba(244, 185, 234, 1) 85.1532deg,rgba(141, 152, 255, 1) 126.663deg,rgba(170, 110, 238, 1) 209.329deg,rgba(255, 103, 119, 1) 250.911deg,rgba(255, 186, 113, 1) 291.415deg,rgba(198, 134, 255, 1) 332.659deg,rgba(214, 147, 237, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),m.createElement("g",{mask:"url(#mask0_140_39981)"},m.createElement("g",{clipPath:"url(#paint2_angular_140_39981_clip_path)","data-figma-skip-parse":"true"},m.createElement("g",{transform:"matrix(0 -0.071 0.0897903 0 48 47.0001)"},m.createElement("foreignObject",{x:-1014.09,y:-1014.09,width:2028.17,height:2028.17},m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(0, 0, 0, 1) 0deg,rgba(255, 255, 255, 1) 52.2deg,rgba(197, 197, 197, 1) 122.4deg,rgba(0, 0, 0, 1) 147.6deg,rgba(255, 255, 255, 1) 171deg,rgba(174, 174, 174, 1) 235.8deg,rgba(0, 0, 0, 1) 250.911deg,rgba(217, 238, 247, 1) 266.4deg,rgba(255, 255, 255, 1) 332.659deg,rgba(0, 0, 0, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),m.createElement("rect",{x:-23,y:-24,width:142,height:142})),m.createElement("defs",null,m.createElement("clipPath",{id:"paint1_angular_140_39981_clip_path"},m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),m.createElement("clipPath",{id:"paint2_angular_140_39981_clip_path"},m.createElement("rect",{x:-23,y:-24,width:142,height:142})),m.createElement("linearGradient",{id:"paint0_linear_140_39981",x1:4,y1:89,x2:101.93,y2:75.3765,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#FFAB4E"}),m.createElement("stop",{offset:1,stopColor:"#FF7791"})))),G1e=Object.freeze(Object.defineProperty({__proto__:null,default:eF},Symbol.toStringTag,{value:"Module"})),tF=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M20.2899 16.4358C20.6074 15.5282 20.78 14.5526 20.78 13.5366V9.5241C20.78 9.10859 20.4432 8.77175 20.0277 8.77175C19.6122 8.77175 19.2753 9.10859 19.2753 9.5241V13.5366C19.2753 14.1176 19.2072 14.6827 19.0785 15.2244L20.2899 16.4358Z",fill:"currentColor"}),m.createElement("path",{d:"M15.263 11.1575V6.51431C15.263 4.71377 13.8034 3.25414 12.0028 3.25414C10.7464 3.25414 9.65599 3.96485 9.11167 5.00618L8.01336 3.90787C8.86428 2.60809 10.3333 1.74944 12.0028 1.74944C14.6344 1.74944 16.7677 3.88274 16.7677 6.51431V12.6622L15.263 11.1575Z",fill:"currentColor"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0026 20.8093C7.986 20.8093 4.7299 17.5532 4.7299 13.5366L4.7299 9.5241C4.7299 9.10859 4.39306 8.77175 3.97755 8.77175C3.56204 8.77175 3.2252 9.10859 3.2252 9.5241L3.2252 13.5366C3.2252 18.3843 7.15498 22.314 12.0026 22.314C14.6664 22.314 17.053 21.1274 18.6628 19.2539L21.0006 21.5917C21.2944 21.8855 21.7707 21.8855 22.0645 21.5917C22.3584 21.2979 22.3584 20.8215 22.0645 20.5277L3.00504 1.46823C2.71123 1.17442 2.23487 1.17442 1.94106 1.46823C1.64725 1.76204 1.64725 2.2384 1.94106 2.53221L7.23793 7.82908V13.5362C7.23793 16.1678 9.37124 18.3011 12.0028 18.3011C13.5589 18.3011 14.9407 17.5552 15.8103 16.4015L17.5951 18.1862C16.261 19.7891 14.251 20.8093 12.0026 20.8093ZM8.74263 13.5362C8.74263 15.3368 10.2023 16.7964 12.0028 16.7964C13.1441 16.7964 14.1484 16.21 14.7308 15.322L8.74263 9.33378L8.74263 13.5362Z",fill:"currentColor"})),q1e=Object.freeze(Object.defineProperty({__proto__:null,default:tF},Symbol.toStringTag,{value:"Module"})),lA=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7673 6.54284C16.7673 3.91128 14.634 1.77799 12.0024 1.77799C9.37089 1.77799 7.2376 3.91129 7.2376 6.54284L7.2376 13.5647C7.2376 16.1963 9.37089 18.3296 12.0024 18.3296C14.634 18.3296 16.7673 16.1963 16.7673 13.5647L16.7673 6.54284ZM12.0024 3.28268C13.803 3.28268 15.2626 4.7423 15.2626 6.54284L15.2626 13.5647C15.2626 15.3652 13.803 16.8249 12.0024 16.8249C10.2019 16.8249 8.74229 15.3652 8.74229 13.5647L8.74229 6.54284C8.74229 4.7423 10.2019 3.28268 12.0024 3.28268Z",fill:"currentColor"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0274 8.79987C19.6119 8.79987 19.2751 9.1367 19.2751 9.55221V13.5647C19.2751 17.5813 16.019 20.8374 12.0024 20.8374C7.98587 20.8374 4.72979 17.5813 4.72979 13.5647L4.72979 9.55221C4.72979 9.1367 4.39295 8.79987 3.97744 8.79987C3.56193 8.79987 3.2251 9.1367 3.2251 9.55221L3.2251 13.5647C3.2251 18.4123 7.15485 22.3421 12.0024 22.3421C16.85 22.3421 20.7798 18.4123 20.7798 13.5647V9.55221C20.7798 9.1367 20.443 8.79987 20.0274 8.79987Z",fill:"currentColor"})),K1e=Object.freeze(Object.defineProperty({__proto__:null,default:lA},Symbol.toStringTag,{value:"Module"})),nF=t=>m.createElement("svg",{width:63,height:73,viewBox:"0 0 63 73",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{filter:"url(#filter0_d_3118_29179)"},m.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",fill:"white",fillOpacity:.8,shapeRendering:"crispEdges"}),m.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",stroke:"white",strokeWidth:1.5,shapeRendering:"crispEdges"})),m.createElement("path",{d:"M43.06 50.7014C44.3479 49.7757 44.5485 48.2871 44.5004 46.9375L44.469 46.4069C44.397 45.4896 44.2259 44.4068 44.0083 43.1722L43.7279 41.6191L43.7271 41.6113L43.7263 41.6119L41.2578 28.06L40.7794 25.455C40.3207 22.9993 39.9105 20.9984 39.4527 19.5092L39.3346 19.1407C39.0928 18.4125 38.8119 17.7441 38.4599 17.1874L38.2786 16.9184C37.7807 16.2335 37.0781 15.6722 36.1346 15.5382L35.9428 15.5173C35.0273 15.4462 34.264 15.7987 33.6613 16.3187L33.4134 16.551C32.8862 17.0835 32.4355 17.7951 32.024 18.597L31.8493 18.9462C31.1633 20.3587 30.4435 22.2885 29.6039 24.6656L28.7214 27.1892L28.7014 27.2468C28.4821 27.8767 28.3253 28.323 28.1864 28.662L28.0522 28.9689C27.8919 29.3038 27.7981 29.3776 27.7565 29.4075C27.7254 29.4298 27.6614 29.4719 27.4758 29.5106L27.2465 29.5479C27.0436 29.5728 26.806 29.587 26.5081 29.5964L25.4073 29.6142L25.3455 29.6153C22.0505 29.6503 19.3668 29.6775 17.3562 29.8624L16.5355 29.9519C15.6246 30.0688 14.7765 30.2424 14.0635 30.5367L13.7674 30.6702C13.0061 31.0434 12.328 31.6403 12.0348 32.5515L11.9812 32.738C11.7577 33.624 11.971 34.4332 12.3786 35.1149L12.5645 35.3986C13.059 36.0947 13.7998 36.7301 14.6458 37.3375L15.3198 37.8019C16.9879 38.9103 19.3175 40.1961 22.1748 41.7746L34.238 48.4394L35.6206 49.2003C36.9417 49.9202 38.0776 50.5066 39.0333 50.8666L39.516 51.0344C40.6626 51.3952 41.933 51.5114 43.06 50.7014Z",stroke:"black",strokeWidth:1.5}),m.createElement("defs",null,m.createElement("filter",{id:"filter0_d_3118_29179",x:2.64307,y:6.25732,width:51.1152,height:66.3022,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),m.createElement("feMorphology",{radius:2,operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_3118_29179"}),m.createElement("feOffset",{dy:16}),m.createElement("feGaussianBlur",{stdDeviation:4}),m.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),m.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),m.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3118_29179"}),m.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3118_29179",result:"shape"})))),W1e=Object.freeze(Object.defineProperty({__proto__:null,default:nF},Symbol.toStringTag,{value:"Module"}));function Rge(t){const{renderFocusedElement:e,children:n,className:r,options:o={},isOpen:i}=t,{offset:s=1,placement:a="bottom-end",adjustArrowPosition:c=S=>S}=o,u=m.useRef(null),{state:d,setState:f}=K_({controlledValue:i,defaultValue:!1}),{y:p=0}=c({x:0,y:0})??{},{refs:g,context:v,floatingStyles:y,middlewareData:b}=zf({open:d,placement:a,onOpenChange:f,middleware:[td(s),nd(),qO({element:u,padding:{right:-38,bottom:p}})],whileElementsMounted:ed}),C=c(b.arrow);return h.jsxs(h.Fragment,{children:[e==null?void 0:e({ref:g.setReference},d),d&&h.jsx(Fv,{children:h.jsx(Bv,{context:v,modal:!1,children:h.jsxs("div",{ref:g.setFloating,style:y,className:bt("flex outline-none",qt.composerCoachmark),children:[h.jsx("div",{className:bt("start-0 flex rounded-ee-md rounded-es-3xl rounded-se-3xl rounded-ss-3xl border border-background-200 border-white shadow-sm",r),children:n}),h.jsx("div",{ref:u,style:{position:"absolute",left:C==null?void 0:C.x,top:(C==null?void 0:C.y)??p},className:"pointer-events-none",children:h.jsx(nF,{className:"my-5 size-14"})})]})})})]})}const bm="absolute inset-0 rounded-full",gN="relative size-6 transition-colors",vN=2,Pge=50,Nge=20,rF=.6,Oge=3,Mge=.55,Lge=1,Dge={opacity:0,scale:rF},jge={opacity:1,scale:1,transition:{...$U,delay:qU}};function Uge(t){const{t:e}=Fe(),{isMuted:n,inputVolume:r,isOutputPlaying:o,className:i,coachUserUnmute:s=!1,onClick:a}=t,c=!o&&!n,[u,d]=m.useState(!1),f=tr({breakpoint:"sm"});m.useEffect(()=>{let C;return s&&(C=setTimeout(()=>d(!0),600)),()=>clearTimeout(C)},[s]);const p=KO(r,VU),g=Pu(p,[vN,Pge],[rF,Oge]),v=Pu(p,[vN,Nge],[Mge,Lge]),{focusable:y,refCallback:b}=rd({autoRestoreFocus:!0,forceFocus:!0});return h.jsx(Rge,{className:"max-w-72 border-white bg-black/90 p-2 dark:bg-white",isOpen:u,options:{placement:"top-end",offset:f?{mainAxis:27,crossAxis:10}:{mainAxis:15,crossAxis:-55},adjustArrowPosition:C=>f?{x:C!=null&&C.x?C.x-20:void 0,y:12}:C},renderFocusedElement:C=>h.jsxs(h.Fragment,{children:[u?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:h.jsx(xn,{duration:.6,exitDelay:4.5,exitDuration:.5,children:h.jsx(xe.div,{animate:{rotate:360},transition:{duration:2.5,repeat:1,ease:"linear"},children:h.jsx(eF,{className:"size-20"})})})}),h.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:h.jsx(xe.div,{className:"size-[80px] rounded-full border-4 border-solid border-black/80 shadow-sm dark:border-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:4.5,ease:"linear"}})})]}):null,h.jsx(xe.button,{...C,title:e(n?"composer.unmuteMicrophone":"composer.muteMicrophone"),className:G("size-12 rounded-full",nf,zv,i),layout:!s,initial:"initial",animate:"enter",variants:{initial:Dge,enter:jge},onClick:a,ref:S=>{C.ref(S),b(S)},"data-spatial-focus-key":y.focusKey,children:h.jsxs(xe.span,{className:G("flex items-center justify-center overflow-hidden border",n?"border-transparent bg-black/8 dark:bg-white/5":"border-white bg-white/50 hover:bg-white/80 dark:border-white/12 dark:bg-black/40",c&&"text-spot-blue-450 dark:text-midnight-300",bm),layout:!s,children:[h.jsx(Tn,{children:c&&h.jsx(xe.div,{className:G("flex items-center justify-center overflow-hidden rounded-full blur-[6px]",bm),layout:!0,initial:rt,animate:Ot,exit:rt,style:{scale:g},children:h.jsx(xe.div,{className:G(bm),layout:!0,style:{opacity:v},children:h.jsx(xe.div,{className:G("animate-spin-slow bg-gradient-audio-input-light dark:bg-gradient-audio-input-dark",bm)})})})}),n?h.jsx(tF,{className:gN,"aria-hidden":!0}):h.jsx(lA,{className:gN,"aria-hidden":!0})]})})]}),children:h.jsx("div",{className:"flex p-0 px-3 text-white text-sm dark:text-foreground-300",children:e("voice.v2.waitingInteractionUnmuteSubheader")})})}function db(t,e={},n){const{initialize:r=!1}=e,o=m.useRef(null);return m.useEffect(()=>{const i=n??o.current,s=new ResizeObserver(([a])=>{a&&t(a.contentRect)});return i&&(s.observe(i),r&&t(i.getBoundingClientRect())),()=>s.disconnect()},[t,r,n]),o}const oF=24e3,Ff=24e3;function Fge(t){const e=atob(t),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o+=1)r[o]=e.charCodeAt(o);return r.buffer}function Bge(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o+=1){const i=n[o];typeof i=="number"&&(e+=String.fromCharCode(i))}return btoa(e)}function iF(t){const e=Fge(t),n=new Int16Array(e),r=new Float32Array(n.length);for(let o=0;o<n.length;o+=1)r[o]=n[o]/32768;return r}function Hge(t){const e=t<0?t*32768:t*32767;return Math.max(-32768,Math.min(32767,e))}const Cw=AB(0);function zge(t){let e=0;for(const n of t){const r=n-128;e+=r*r}return Math.sqrt(e/t.length)}function uA(t){return t/Xv}function Y1e(t){return`${uA(t)}x`}function Q1e(){const t=st().get(IL);return uA(t)}const yN=48,bN=50;function CN(t){const{isNested:e}=t,[n,r]=m.useState(1),[o,i]=m.useState(1),s=m.useRef(void 0),a=m.useRef(void 0),c=db(p=>{s.current=p.width,a.current=p.height,r((s.current+yN)/s.current),i((a.current+yN)/a.current)},{initialize:!0}),u=KO(Cw,VU),d=Pu(u,[0,bN],[1,n]),f=Pu(u,[0,bN],[1,o]);return h.jsx(xe.div,{className:"absolute inset-0",ref:c,initial:rt,animate:{...Ot,transition:{delay:qU}},exit:rt,children:h.jsx(xe.div,{className:G("absolute inset-0 flex items-center justify-center overflow-hidden rounded-6xl",e?"-scale-x-100 rounded-5xl blur-lg":"bg-stone-100/30 bg-blend-luminosity backdrop-blur-xl after:absolute after:inset-px after:rounded-6xl after:border after:border-transparent dark:bg-midnight-800/30"),layout:!0,style:{scaleX:d,scaleY:f},children:h.jsx(xe.div,{className:G("absolute -inset-16 aspect-square bg-gradient-audio-output-light bg-blend-saturation saturate-150 dark:bg-gradient-audio-output-dark dark:saturate-100",e?"animate-spin-slower opacity-20 dark:opacity-30":"animate-spin-slow opacity-40 dark:opacity-50")})})})}function Vge(t){const{dynamicHeight:e}=t;return h.jsx(xe.div,{className:G("t-bottom-fade absolute bottom-0 mx-4 box-content w-bottom-fade rounded-lg pt-bottom-fade",e?"h-bottom-fade":"h-composer"),initial:rt,animate:Ot,exit:rt,transition:nb,children:h.jsx(vs,{isBottomFade:!0})})}function $ge(t,e){const{children:n,className:r,margins:o,data:i}=t,s=i.isDisabled?"":i.title;return h.jsx(xe.div,{className:bt("relative shrink-0",o??"my-1",i.isVisible?"size-10":"h-10 overflow-hidden"),layout:!0,initial:!1,ref:e,children:h.jsx(xe.button,{type:"button",className:bt("absolute flex size-10 items-center justify-center rounded-xl fill-foreground-750 p-2",mc["subtle-dimmed"],"disabled:active:bg-transparent disabled:active:bg-none",r),layout:"position",disabled:!i.isVisible||i.isDisabled,"aria-hidden":!i.isVisible,"aria-label":s,title:s,onClick:i.onClick,"data-testid":i.testId,"aria-expanded":typeof i.ariaExpanded=="boolean"?i.ariaExpanded:void 0,children:n})})}const Xs=m.forwardRef($ge);function Gge(){return D(AT).map(e=>e.id)}function sF(t){if(t.length===0)throw new Error("Array must have at least one element");return Math.floor(Math.random()*t.length)}function J1e(t,e){if(t.length===1)throw new Error("Array must have at least two elements");let n;do n=sF(t);while(n===e);return n}function qge(t){if(t.length!==0)return t[sF(t)]}function Kge(t){const e=[...t];for(let n=t.length-1;n>0;n-=1){const r=Math.floor(Math.random()*(n+1)),o=e[n];o&&e[r]&&(e[n]=e[r],e[r]=o)}return e}function X1e(t,e){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>o===r[i])}const Wge=m.lazy(()=>q(()=>import("./character-Dqu56dCZ.js"),__vite__mapDeps([235,1,236])).then(t=>({default:t.Character})));function Yge(){const[t,e]=tt(ep),{createConversation:n}=hp(),[r,o]=m.useState(!1),i=Te(sM),s=Te(ic),a=Gge(),c=m.useRef(null),u=D(Bi);m.useEffect(()=>{if(c.current===null){const y=qge(a);y&&(c.current=y)}},[a]);const{t:d}=Fe();m.useEffect(()=>{r&&c.current&&K.trackEvent({name:"system",data:{eventName:"characterPromotionShown",eventInfo_characterId:c.current}})},[r]),m.useEffect(()=>{const y=localStorage.getItem(MQ);o(!y&&u.length>=10&&u.length<14)},[t,u.length]);function f(y){switch(y){case"mica":return"mica-head";case"aqua":return"aqua-head";case"erin":return"erin-head";default:return"mica-head"}}async function p(){c.current&&(s("clicking"),K.trackEvent({name:"interaction",data:{eventName:"characterPromotionClicked",eventInfo_characterId:c.current}}),i(!0),eX({settingName:"characterId",oldValue:"",newValue:c.current}),K.setSettings({userSettingCharacterId:c.current}),await Promise.all([Fr({path:"/user/settings",args:{options:{method:"PATCH"},body:{preferredCharacter:c.current}}})]))}const g=m.useCallback(async()=>{o(!1)},[]),v=m.useCallback(async()=>{c.current&&(o(!1),i(!0),e(c.current),await n())},[i,e,n]);return r?h.jsx("div",{className:"pointer-events-auto absolute -top-40 end-4 size-56 pb-2",onClick:p,onKeyDown:async y=>{y.key==="Enter"&&await p()},role:"button",tabIndex:0,"aria-label":d("characterAnimation.characterOptInAriaLabelText"),children:h.jsx(Wge,{className:"outline-none",characterId:f(c.current),onCharacterDismissed:g,onCharacterClicked:v})}):null}const SN="0px 0px 0px 1px rgb(255, 255, 255) inset",EN="0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset",Qge="0px 16px 24px -2px rgba(0, 0, 0, 0.1)",Jge="0px 10px 24px 0px rgba(0, 0, 0, 0.18)",Xge="0px 42px 30px 0px rgba(0, 0, 0, 0.06)",Zge="0px 4px 8px 0px rgba(0, 0, 0, 0.18)",eve="0px 21px 15px 0px rgba(0, 0, 0, 0.06)",tve="0px 16px 48px -2px rgba(244, 190, 146, 0.18)",Cm=28,nve=24,rve="relative flex grow flex-col overflow-hidden before:absolute before:inset-0 before:rounded-3xl before:border-2 before:border-stroke-350",Z1e="bg-white/90 shadow-composer-input dark:bg-midnight-900/80 dark:shadow-none",ove="w-auto rounded-3xl contrast-more:border-2",ive="bg-gradient-to-b from-white/90 to-white/0 dark:from-black/30 dark:to-midnight-800/10",sve="bg-white dark:bg-midnight-850/60";function dA(t){const{title:e,onClick:n,appearDelay:r=rz,appearDuration:o=_o.audio.unavailable,className:i}=t;return h.jsx(xe.div,{layout:"position",initial:"initial",animate:"animate",className:"relative flex h-12 shrink-0 items-center",variants:{initial:{...rt,scale:.9},animate:{...Ot,scale:1,transition:{...$U,delay:r,duration:o}}},children:h.jsx("button",{type:"button",onClick:n,title:e,className:G("min-w-44",nf,mc.strong,eT["40-base"],tT["40-base"],zv,"rounded-2xl before:rounded-2xl",i),children:e})})}function Sm(t){const{children:e,className:n}=t;return h.jsx(xe.div,{className:n,initial:rt,animate:Ot,exit:rt,transition:{delay:GU},children:e})}const ave={initial:rt,animate:Ot};function cve(t){const{titleKey:e,textKey:n,buttonTextKey:r,button:o,cancelButton:i,onClick:s,closeDialogCallback:a}=t,{t:c}=Fe(),u=c(e),d=c(o.textKey);return h.jsxs(h.Fragment,{children:[h.jsx(xe.div,{layout:!0,variants:ave,initial:"initial",animate:"animate",role:"dialog","aria-label":u,tabIndex:-1,children:h.jsxs("div",{className:"m-3 text-center text-foreground-800",children:[h.jsx("p",{className:"py-3",children:u}),h.jsx("p",{className:"text-xs",children:c(n)}),r&&h.jsx("div",{className:"mx-auto flex w-full max-w-xs justify-around px-5 py-3 text-accent-600",children:h.jsx("button",{onClick:s,type:"button",className:"text-xs",children:c(r)})})]})}),h.jsxs(xe.div,{className:"relative mx-0.5 my-1 flex w-full items-center justify-center gap-2 px-2 align-middle",onClick:a,children:[i&&h.jsx(Ue,{variant:"rect",title:c(i.textKey),className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:i.onClick,children:c(i.textKey)}),h.jsx(Ue,{variant:"rect",title:d,className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:o.onClick,children:d})]})]})}function aF(){const t=ve("composer-creation-button");return!Xo("kill-composer-creation-button")&&t}function wN({config:t}){const{t:e}=Fe(),n=aF();if(t)switch(t.mode){case"stop":return h.jsx(Ue,{testId:"stop-button",color:"accent",variant:"circle",className:"my-1","aria-label":e("composer.stopButton"),title:e("composer.stopButton"),onClick:()=>t.onClick(),children:h.jsx("div",{className:"size-3.5 rounded bg-accent-550 contrast-more:border-2 dark:bg-accent-150"})});case"submit":return h.jsx(Ue,{testId:"submit-button",color:"strong",variant:"square",className:bt("my-1",n?"rounded-2xl":"rounded-submitButton"),"aria-label":e("userInput.submitButtonText"),title:e("userInput.submitButtonText"),onClick:()=>t.onClick(),disabled:t.disabled,children:h.jsx(mp,{className:"size-6"})});case"microphone":return h.jsx(Xs,{data:{title:e("composer.startAudioCall"),testId:"audio-call-button",onClick:()=>t.onClick(),isVisible:!0},className:mc["subtle-dimmed"],children:h.jsx(lA,{className:"size-6","aria-hidden":!0})});default:return}}function lve(t){var i;const{item:e,onClick:n}=t,r=D(mt),o=m.useRef(void 0);return m.useEffect(()=>{r&&o.current!==r&&e.onImpression&&(o.current=r,e.onImpression(r))},[r,e]),h.jsxs(Ue,{title:e.title,"aria-label":e.title,variant:"rect",color:"subtle-dimmed-inverted",onClick:n,size:"40-base",alignment:"start",className:"min-w-[230px] px-3 py-2",testId:e.testId,children:[h.jsx("div",{className:"size-6 min-w-6",children:e.icon}),h.jsxs("div",{className:"grow text-left",children:[h.jsxs("div",{className:"line-clamp-1 inline-flex gap-1.5 text-xs",children:[e.title,(i=e.tags)==null?void 0:i.map(s=>h.jsx("div",{className:"flex items-center",children:h.jsx(Km,{color:s.color,children:h.jsx("span",{className:"leading-4",children:s.label})},s.label)},s.label))]}),h.jsx("p",{className:"line-clamp-1 leading-4 text-foreground-600 text-2xs dark:text-foreground-700",children:e.description})]})]},e.key)}const uve="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/dismiss-BcarQlxK.svg";function dve(t){const{renderTrigger:e,renderSurface:n,containerClassNames:r,color:o="default",onOutsideEvent:i,placement:s="bottom",floatingOffset:a=10}=t,[c,u]=m.useState(!1),d=m.useRef(null),f=m.useRef(null),{refs:p,floatingStyles:g,context:v}=zf({placement:s,strategy:"fixed",middleware:[td(a),Vf(),nd()],whileElementsMounted:ed,open:c,onOpenChange:u}),y=m.useCallback(C=>{C.stopPropagation(),C.preventDefault(),u(S=>!S)},[]),b=m.useCallback(()=>{u(!1),i==null||i()},[i]);return zc({onOutsideEvent:b,elements:[p.floating,d],includeScroll:!0,invokeOnce:!0}),Es(C=>{C.key==="Escape"&&c&&b()}),h.jsxs("div",{ref:p.setReference,className:G("relative",r==null?void 0:r.trigger),children:[e({openPopover:y,isOpen:c,ref:d}),$O.createPortal(h.jsx(Tn,{children:c&&h.jsx(Bv,{context:v,modal:!0,returnFocus:!0,initialFocus:f,children:h.jsx(xe.div,{ref:p.setFloating,className:bt("rounded-2xl p-3 shadow-lg",o==="thin"?Ws:Fi,r==null?void 0:r.surface,qt.modal),style:{...g,...gT},role:"dialog",tabIndex:-1,initial:"initial",animate:"animate",exit:"exit",variants:{initial:rt,animate:Ot,exit:{...rt,transition:{duration:_o.default}}},transition:{duration:_o.default,ease:"easeInOut"},children:h.jsx("div",{className:G("pointer-events-auto relative max-h-expanded-section overflow-visible",qt.modal),children:n({closePopover:b,isOpen:c,focusRef:f})})})})}),document.getElementById("popoverPortal")??document.body)]})}const hA=m.forwardRef((t,e)=>{const{items:n,defaultSelectedItemIndex:r,onSelect:o,onReset:i,onMenuClick:s,disabled:a,showDefaultItemInDropdown:c=!1}=t,u=D(mt),d=m.useRef(void 0),f=m.useMemo(()=>!r||r<0||r>=n.length?0:r,[r,n]),[p,g]=m.useState(f);m.useImperativeHandle(e,()=>({setSelectedItemIndex:C=>g(C)}),[]);const{selectedItem:v,dropdownItems:y,selectedNonDefault:b}=m.useMemo(()=>({selectedItem:n[p]??void 0,dropdownItems:c?n:n.filter((C,S)=>S!==p),selectedNonDefault:p!==f}),[n,p,f,c]);return m.useEffect(()=>{u&&d.current!==u&&v&&v.onImpression&&(d.current=u,v.onImpression(u))},[u,v]),h.jsx(dve,{renderTrigger:({openPopover:C})=>v&&h.jsxs(Ue,{title:v.key,"aria-label":v.title,variant:"rect",size:"36-sm",disabled:a,color:b?"composer-selected":"subtle-dimmed",className:"my-1 h-10 border border-black/8 px-3 py-2 dark:border-white/8",onClick:S=>{var w;s==null||s(),(w=v.beforeClick)==null||w.call(v,u??""),b?(g(f),i==null||i()):C(S)},testId:v.testId,children:[b?h.jsx(er,{url:uve,className:"size-4"}):v.icon,h.jsx("span",{className:"font-medium leading-4 text-sm",children:v.buttonTitle??v.title})]}),renderSurface:({closePopover:C})=>h.jsx("div",{className:"flex flex-col",children:y.map(S=>h.jsx(lve,{item:S,onClick:w=>{var T;(T=S.beforeClick)==null||T.call(S,u??"");const E=n.findIndex(I=>I.key===S.key);g(E),o(E),C(w)}},S.key))}),containerClassNames:{surface:"p-1 bg-white dark:bg-slate-800/90 border-white/25 dark:border-slate-600/25"},placement:"bottom-start",floatingOffset:4})});hA.displayName="ComposerDropdownButton";const TN=l.object({lastShown:l.string().datetime()});function hve(t){const e=m.useCallback(()=>{Ei(t,TN,{lastShown:new Date().toISOString()})},[t]),n=m.useCallback(()=>!!so(t,TN),[t]),[r,o]=m.useState(()=>!n()),i=m.useCallback(()=>{o(!1),e()},[o,e]);return{showCoachmark:r,dismissCoachmark:i}}function fve(t){const{renderReferenceElement:e,children:n,className:r,placement:o,offset:i,isOpen:s=!0,portalId:a,withArrow:c=!1,arrowClassName:u="dark:fill-black fill-white",animation:d="none",onOutsideEvent:f}=t,p=m.useRef(null),{refs:g,x:v,y,strategy:b,context:C,placement:S}=zf({open:s,placement:o??"right",middleware:[td(i??1),Vf({fallbackAxisSideDirection:"end"}),nd(),qO({element:p})],whileElementsMounted:ed});zc({onOutsideEvent:()=>{f==null||f()},invokeOnce:!0,elements:[g.floating]});const w=Gw(C),E=qw(C),T=Kw(C),{getReferenceProps:I,getFloatingProps:A}=Ww([w,E,T]),_=D(Cs),j=pve(d,S);return h.jsxs(h.Fragment,{children:[e==null?void 0:e({ref:g.setReference,...I()},s),s&&h.jsx(Fv,{id:a,children:h.jsxs(xe.div,{ref:g.setFloating,style:{position:b,top:`${y}px`,insetInlineStart:`${v}px`,boxShadow:_==="dark"?"0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset":void 0},...j,...A({}),className:G("start-0 flex rounded-2xl p-4 shadow-xl",qt.modal,M7,c&&"!overflow-visible",r),children:[n,c?h.jsx(kB,{ref:p,context:C,tipRadius:3,strokeWidth:2,className:u}):null]})})]})}function pve(t,e){switch(t){case"bounce":return mve(e);case"none":return{};default:return{}}}function mve(t){const n=t.startsWith("top")||t.startsWith("bottom"),r=t.startsWith("top")||t.startsWith("left")?-1:1;return n?{animate:{y:`${r*10}px`,transition:vP}}:{animate:{x:`${r*10}px`,transition:vP}}}function cF({triggerComponent:t,offset:e=10}){const{t:n}=Fe(),{showCoachmark:r,dismissCoachmark:o}=hve(UQ);return h.jsx(fve,{className:"max-w-48 bg-black dark:bg-midnight-150",arrowClassName:"dark:fill-midnight-150 fill-black",isOpen:r,placement:"right",offset:e,withArrow:!0,renderReferenceElement:i=>h.jsx(xe.div,{ref:i.ref,className:"relative",children:t}),portalId:"composer-container",onOutsideEvent:o,children:h.jsxs("div",{className:"flex flex-col gap-0.5 bg-black text-white dark:bg-midnight-150 dark:text-black",children:[h.jsx("div",{className:"text-2xs-strong",children:n("composer.chatModes.smart.coachmarkTitle")}),h.jsx("div",{className:"text-2xs",children:n("composer.chatModes.smart.description")})]})})}const lF="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/quick-cde2uaJN.svg",uF="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/smart-rYPQLFDN.svg",gve="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/think-DxNkOoJG.svg";function vve(t,e){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerCreateButton",eventInfo_impressionScenario:t??"off",eventInfo_conversationId:e}})}function yve(t,e){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerThinkButton",eventInfo_impressionScenario:t?"thinkDeeperOn":"thinkDeeperOff",eventInfo_conversationId:e}})}function bve(t){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerScreenshotButton",eventInfo_conversationId:t}})}function Cve(t,e){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerCreateButton",eventInfo_clickScenario:Sve(t),eventInfo_conversationId:e}})}function Sve(t){if(!t)return"showDrawer";switch(t){case"image":return"exitImage";case"podcast":return"exitPodcast";case"researchReport":return"exitResearchReport";case"quiz":return"exitQuiz";default:return"showDrawer"}}function Eve(t,e){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerThinkButton",eventInfo_clickScenario:t?"disableThinkDeeper":"enableThinkDeeper",eventInfo_conversationId:e}})}function wve(t){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerScreenshotButton",eventInfo_conversationId:t}})}function Tve(t){const{disabled:e=!1}=t,n=Ive(),r=ve("smart-mode"),[o,i]=tt(dr),[s,a]=m.useState(!1),c=m.useRef(null),u=m.useCallback(f=>{const p=n[f];((p==null?void 0:p.key)==="chat"||(p==null?void 0:p.key)==="smart"||(p==null?void 0:p.key)==="reasoning")&&(a(!0),i(p.key))},[n,i]);m.useEffect(()=>{var f;if(s)a(!1);else{const p=n.findIndex(g=>g.key===o);(f=c.current)==null||f.setSelectedItemIndex(p)}},[n,o,s,a]);const d=h.jsx(hA,{ref:c,items:n,onSelect:u,defaultSelectedItemIndex:0,showDefaultItemInDropdown:!0,onReset:()=>{i("chat")},disabled:e,onMenuClick:()=>at({source:"composerChatModeDropdownButton",pageName:"chatPage",customData:JSON.stringify({currentMode:o})})});return r?h.jsx(cF,{triggerComponent:d,offset:10}):d}function IN(t){return e=>yve(t,e)}function _N(t){return e=>Eve(t,e)}function Ive(){const{t}=Fe("translation"),e=ve("smart-mode"),n={key:"chat",title:t("composer.chatModes.chat.title"),buttonTitle:t("composer.chatModes.chat.buttonTitle"),icon:h.jsx(er,{url:lF,className:"size-5"}),description:t("composer.chatModes.chat.description"),testId:"composer-chat-mode-quick-button",onImpression:IN(!1),beforeClick:_N(!1),tags:[{label:t("composer.chatModes.chat.latency"),color:"neutral"}]},r={key:"reasoning",title:t("composer.chatModes.reasoning.title"),icon:h.jsx(er,{url:gve,className:"size-6"}),description:t("composer.chatModes.reasoning.description"),testId:"composer-chat-mode-reasoning-button",onImpression:IN(!0),beforeClick:_N(!0),tags:[{label:t("composer.chatModes.reasoning.latency"),color:"neutral"}]},o=[n,r];if(e){const i={key:"smart",title:t("composer.chatModes.smart.title"),icon:h.jsx(er,{url:uF,className:"size-6"}),description:t("composer.chatModes.smart.description"),testId:"composer-chat-mode-smart-button",tags:[{label:t("common.new"),color:"accent"}]};o.push(i)}return o}const _ve="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/research-DamIycj6.svg",Ave="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/think-deeper-C6Ziv8bd.svg",kve="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/checklist-BDS7QRqm.svg";function dF(){const t=ve("deep-research"),e=ve("deep-research-nano"),n=xr(),r=D(tp);return t&&(r||!1||!r&&n&&e)&&!be.instance().config().disableDeepResearch}const xve=100,Pv=V([]);function Rve(){const t=D(Pv),[e,n]=m.useState(!1),r=e?t:[];return h.jsxs("div",{className:"sr-only",ref:()=>setTimeout(()=>n(!0),xve),children:[h.jsx(AN,{messages:r.filter(o=>o.type==="polite"),type:"polite"}),h.jsx(AN,{messages:r.filter(o=>o.type==="assertive"),type:"assertive"})]})}function AN({messages:t,type:e}){return h.jsx("div",{"aria-live":e,"aria-atomic":"true",children:t.map(n=>h.jsx("div",{"aria-label":n.msg,children:n.msg},n.id))})}function Sw(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.floor(Math.random()*16);return(t==="x"?e:Math.floor(Math.random()*4+8)).toString(16)})}const hF=7e3;function Vc(t={}){return Pve(t),null}function Pve(t={}){const{msg:e,id:n,type:r="polite",timeout:o=hF}=t,i=Te(Pv),s=m.useRef(n??Sw());m.useEffect(()=>{e&&i(a=>{if(a.some(u=>u.id===s.current&&u.msg===e&&u.type===r))return a;s.current=n??Sw();const c={msg:e,id:s.current,type:r};return window.setTimeout(()=>{i(u=>u.filter(d=>d.id!==c.id))},o),[...a,c]})},[n,e,r,i,o])}function fA(t){const{msg:e,id:n,type:r="polite",timeout:o=hF}=t;if(!e)return;const i=st();i.set(Pv,s=>{const a={msg:e,id:n??Sw(),type:r};return window.setTimeout(()=>{i.set(Pv,c=>c.filter(u=>u.id!==a.id))},o),[...s,a]})}const Nve=["chat","reasoning"];function Ove(){const[t,e]=tt(dr),n=Y_(),{t:r}=Fe(),o=c=>{at({source:"composerChatModeMenu",customData:JSON.stringify({currentMode:t,newMode:c})}),e(c),fA({msg:r("actions.screenReaderSwitchPrefix",{chatMode:Mf(c)})})},i=dF(),s=ve("smart-mode"),a=Nve.concat(i?["research"]:[],n?["computerUse"]:[],s?["smart"]:[]);return h.jsx("div",{className:"pointer-events-auto relative flex flex-col gap-1 rounded-2xl text-xs contrast-more:border-2","data-testid":"composer-mode-menu",role:"radiogroup",children:a.map((c,u)=>h.jsx(Lve,{chatMode:c,isSelected:t===c,onSelect:o,focusOnMount:u===0},c))})}const Mve={chat:h.jsx(er,{url:lF,className:"size-5"}),reasoning:h.jsx(er,{url:Ave,className:"size-5"}),research:h.jsx(er,{url:_ve,className:"size-5"}),computerUse:h.jsx(er,{url:kve,className:"size-5"}),smart:h.jsx(er,{url:uF,className:"size-5"})};function Lve(t){const{chatMode:e,isSelected:n,focusOnMount:r,onSelect:o}=t,{t:i}=Fe(),s=m.useRef(null);Sp(s,r);const a=e==="research"||e==="smart",c=e!=="smart";return h.jsxs("button",{type:"button",ref:s,title:Mf(e),onClick:()=>o(e),className:G("flex items-center justify-between gap-4 rounded-xl px-4 py-2",mc["subtle-dimmed"]),"data-testid":`${e}-mode-option`,role:"radio","aria-checked":n,children:[h.jsxs("div",{className:"flex items-center gap-4",children:[Mve[e],h.jsxs("div",{className:"pr-4 text-left",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsxs("div",{children:[" ",Mf(e)," "]}),a&&h.jsx(Km,{color:"accent",children:h.jsx("span",{children:i("common.new")})}),e==="computerUse"&&h.jsx(Km,{color:"accent",children:h.jsx("span",{children:i("settings.labs.title")})}),c&&h.jsx(Km,{children:h.jsx("span",{children:i(`composer.chatModes.${e}.latency`)})})]}),h.jsx("div",{className:"text-foreground-600 text-2xs dark:text-foreground-700",children:i(`composer.chatModes.${e}.description`)})]})]}),h.jsx(Dve,{isSelected:n})]})}function Dve(t){const{isSelected:e}=t;return h.jsx("div",{className:G("flex size-5 items-center justify-center rounded-full border-2",e?"border-foreground-800":"border-foreground-450"),children:e&&h.jsx("div",{className:"size-2.5 rounded-full bg-foreground-800 contrast-more:border-2"})})}function jve(t){const{isChatModeMenuOpen:e,onRef:n,onClick:r,disableChatModeSwitcher:o}=t,{t:i}=Fe(),s=D(dr),a=c=>{at({source:"composerChatModeSwitcher",customData:JSON.stringify({currentMode:s,isOpen:e})}),r(c)};return h.jsx(xe.div,{layout:"position",initial:!1,children:h.jsxs(Ue,{testId:"chat-mode-switcher",title:i(e?"composer.chatModes.closeModeMenu":"composer.chatModes.openModeMenu"),onClick:a,color:"subtle-dimmed",ref:n,className:"my-1 border border-black/8",disabled:!o,children:[h.jsx("span",{className:"text-xs",children:Mf(s)}),h.jsx(Bc,{className:G("size-4",e?"-rotate-90":"rotate-90")})]})})}function Uve({disableChatModeSwitcher:t}){const[e,n]=tt(Jy),r=ve("smart-mode");return h.jsx(W_,{isOpen:e==="chatMode",onIsOpenChange:o=>n(i=>o?"chatMode":i==="chatMode"?null:i),renderTrigger:(o,i)=>{const s=h.jsx(jve,{isChatModeMenuOpen:i,onRef:o.ref,onClick:o.onClick,disableChatModeSwitcher:t});return r?h.jsx(cF,{triggerComponent:s,offset:4}):s},options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:bt(Fi,"p-2"),children:h.jsx(Ove,{})})}function Fve({state:t}){const{t:e}=Fe(),n=Wt(),r=co(),o=Te(Ir),i=Te(sd),s=Te(ry);return h.jsx(Xs,{data:{title:e("composer.goToHome"),testId:"home-button",onClick:async()=>{o(null),i(!1),s(void 0),Sn({source:"homeButton"}),await r({to:"/",from:n})},isVisible:t!=="hidden",isDisabled:t==="disabled"},children:h.jsx(gp,{className:"size-6","aria-hidden":!0})})}const fF=V(0),pF=V(),mF=V(),exe=V({}),txe=V({lastPosition:0,wasPlaying:!1});function gF(t){const{url:e,podcastId:n,schema:r}=t;return Fn(e,r,{query:n?{podcastId:n}:void 0}).then(o=>o.data)}function Bve(t,e,n,r){return r&&n?{url:`/sharing/podcasts/${n}`,schema:pg}:t?e?{url:`/podcasts/${e}/${t}`,schema:pg}:{url:"/daily-briefing",podcastId:t,schema:oL}:null}function Hve(){const{podcastId:t,podcastType:e,shareId:n}=$w({strict:!1}),r=D(pF),o=t??r,i=sb(),s=!!t||i,a=Te(mF),{data:c,isLoading:u,error:d}=il(Bve(o,e,n,s),gF);if(m.useEffect(()=>{if(c&&s){const p=pg.parse(c);a(p.podcastId)}},[c,s,a]),c&&s){const p=pg.parse(c),{isAvailable:g,podcastId:v,chapters:y,playback:{positionInSeconds:b,chapterId:C}}=p,S=n?`/sharing/podcasts/${n}/Files`:`/podcasts/${e}/${v}/Files`,w=y.map(({id:I,title:A,image:_,audio:j})=>({id:I,title:A,image:{landscape:{..._.landscape,url:`${S}/${_.landscape.name}`},portrait:{..._.portrait,url:`${S}/${_.portrait.name}`}},audio:j})),E={isAvailable:g,podcastId:t,chapters:w.map(I=>({...I,audio:{default:{url:`${S}/${I.audio.name}`,duration:I.audio.duration}},transitionMusic:null,sources:[]})),playback:{position:b,chapterId:C}},T={...p,chapters:w};return{data:E,podcastData:T,isPodcast:s,isLoading:u,error:d}}return{data:!s&&c?oL.parse(c):void 0,isPodcast:s,isLoading:u,error:d}}function nxe(){const{data:t}=il({url:"/daily-briefing/topics",schema:rL},gF);return{data:t}}async function rxe(t,e){await Fr({path:"/daily-briefing/topics/unfollow",args:{body:{ids:e}}}),await Fr({path:"/daily-briefing/topics/follow",args:{body:{ids:t}}})}function zve(){const t=co(),e=Te(Ir),n=Te(pF),[r,o]=tt(fF),i=m.useCallback(async()=>{await t({from:"/daily",to:"/"}),n(void 0),e(null)},[n,e,t]),s=m.useCallback(async u=>{n(u),o(0),e("daily-briefing-player"),await t({from:"/",to:"/daily"})},[e,o,n,t]),a=m.useCallback(async()=>{o(r),await t({from:"/daily",to:"/topic-selection"}),e(null)},[e,o,r,t]),c=m.useCallback(async()=>{o(r),e("daily-briefing-player"),await t({from:"/topic-selection",to:"/daily"})},[r,o,e,t]);return{navigateToDailyBriefing:s,navigateToTopicSelection:a,exitDailyBriefing:i,returnToDailyBriefing:c,currentChapterIndex:r}}function Vve({media:t,thresholds:e,key:n}){const r=m.useRef(0),o=m.useRef([]),i=m.useRef(new Set);return m.useEffect(()=>{o.current=(e==null?void 0:e.sort((s,a)=>s.seconds-a.seconds))??[]},[e]),m.useEffect(()=>{r.current=0,i.current=new Set;let s=null;if(!t)return()=>{};function a(){s=performance.now()}function c(p){if(s!==null){const g=(performance.now()-s)/1e3;r.current+=g,s=p?performance.now():null,f()}}function u(){c(!1)}function d(){c(!0)}const f=()=>{for(let p=0;p<o.current.length;p+=1){const g=o.current[p];g&&r.current>=g.seconds&&!i.current.has(p)&&(i.current.add(p),g.callback())}};return t.addEventListener("playing",a),t.addEventListener("pause",u),t.addEventListener("ended",u),t.addEventListener("timeupdate",d),()=>{t.removeEventListener("playing",a),t.removeEventListener("pause",u),t.removeEventListener("ended",u),t.removeEventListener("timeupdate",d)}},[t,n]),{totalTimePlayedRef:r}}const Ad="daily";function oxe(){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"personalizeButton",eventInfo_clickScenario:"",eventInfo_pageName:Ad}})}function ixe(t){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Select",eventInfo_clickScenario:t,eventInfo_pageName:Ad}})}function sxe(t){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_UnSelect",eventInfo_clickScenario:t,eventInfo_pageName:Ad}})}function axe(t){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Save",eventInfo_clickScenario:t.join(","),eventInfo_pageName:Ad}})}function cxe(){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Later",eventInfo_clickScenario:"",eventInfo_pageName:Ad}})}const Ew={Podcast:"podcastPlayer",DailyBriefing:"dailyBriefingPlayer"},Nv={Daily:Ad,Podcast:"podcast"},Nl={Skip:"skip",Rewind:"rewind",Play:"play",Pause:"pause",Next:"next",Previous:"previous",Playback:"playback"};function Ol(t,e,n){at({source:t,pageName:t===Ew.Podcast?Nv.Podcast:Nv.Daily,scenario:e,customData:n})}function vF(t,e,n){return{DailyBriefing:`${e}|${n}`,Podcast:e}[t]}function kN(t,e,n){const r=vF(t,e,n);r&&Fr({path:`/media/${t}/${r}/playback/completed`,args:{}}).catch(o=>{eM(o)})}function $ve(t,e,n,r){const o=vF(t,n,r);o&&Fr({path:`/media/${t}/${o}/playback`,args:{options:{method:"PATCH"},body:{positionInSeconds:e}}}).catch(i=>{eM(i)})}function xN(t,e){const n=Object.keys(e);if(n.length!==0)return typeof t<"u"&&n.includes(t)?e[t]:Object.values(e)[0]}const Gve=5,qve=5e3;function yF(){var ze,nt;const{exitDailyBriefing:t}=zve(),{data:e,isPodcast:n}=Hve(),r=n?Ew.Podcast:Ew.DailyBriefing,o=D(mF),i=D(Zf),s=m.useMemo(()=>e?n?e.chapters.map(J=>{var X;return[((X=J.audio.default)==null?void 0:X.duration)??0]}):e.chapters.map(J=>{var X;const pe=[((X=xN(i,J.audio))==null?void 0:X.duration)??0];return J.transitionMusic&&pe.push(J.transitionMusic.duration),pe}):[],[e,n,i]),[a,c]=tt(fF),u=m.useRef(null),[d,f]=m.useState(!1),[p,g]=m.useState(!1),v=a<s.length-1,y=a>0,b=m.useRef(performance.now()),C=m.useRef(performance.now()),S=m.useMemo(()=>{var J;return(J=e==null?void 0:e.chapters[a])!=null&&J.id?e.chapters[a].id:o&&o.split(",")[a]},[e==null?void 0:e.chapters,a,o]),w=m.useMemo(()=>e?n?e.chapters.map(J=>{var pe;return[((pe=J.audio.default)==null?void 0:pe.url)??""]}):e.chapters.map(J=>{var X;const pe=[((X=xN(i,J.audio))==null?void 0:X.url)??""];return J.transitionMusic&&pe.push(J.transitionMusic.url),pe}):[],[e,i,n]),[E,T]=m.useState(0),[I,A]=m.useState([]),[_,j]=m.useState(null),R=JSON.stringify({podcastId:o,eventInfo_chapterId:(ze=e==null?void 0:e.chapters[a])==null?void 0:ze.id,eventInfo_chapterPlayDuration:performance.now()-b.current});Vve({media:_,key:S,thresholds:[{seconds:Gve,callback:()=>{if(S&&!I.includes(S)){try{Fr({path:`/daily-briefing/${S}/viewed`,args:{analytics:{anonymousPath:"/daily-briefing/*/viewed"}}})}catch{}A([...I,S])}}}]}),m.useEffect(()=>{if(!_||!d)return;const J=setInterval(()=>{const pe=_.currentTime;$ve("DailyBriefing",pe,o,S)},qve);return()=>{clearInterval(J)}},[_,d,S,o]);function $(){var J;f(!0),(J=u.current)==null||J.playAnimation(),_==null||_.play(),Ol(r,Nl.Play,R)}function U(){var J;f(!1),(J=u.current)==null||J.pauseAnimation(),_==null||_.pause(),Ol(r,Nl.Pause,R)}function se(J){if(_){const pe=Math.min(_.currentTime+J,_.duration);_.currentTime=pe,Ol(r,Nl.Skip,JSON.stringify({seconds:J}))}}function P(J){if(_){const pe=Math.max(_.currentTime-J,0);_.currentTime=pe,Ol(r,Nl.Rewind,JSON.stringify({seconds:J}))}}function k(){var J,pe,X;kN("DailyBriefing",o,S),e!=null&&e.chapters&&K.trackEvent({name:"system",data:{eventName:"chapterPlayDuration",eventInfo_podcastId:o,eventInfo_chapterIndex:a,eventInfo_isCompleted:a===e.chapters.length-1,eventInfo_publisherName:(pe=(J=e.chapters[a])==null?void 0:J.sources)==null?void 0:pe.map(H=>H.publisherName).join(","),eventInfo_impressionElement:Nv.Daily,eventInfo_customData:JSON.stringify({eventInfo_chapterId:(X=e.chapters[a])==null?void 0:X.id,eventInfo_chapterPlayDuration:performance.now()-b.current})}})}function N(){kN("Podcast",o),K.trackEvent({name:"system",data:{eventName:"podcastPlayDuration",eventInfo_isCompleted:!0,eventInfo_podcastId:o,eventInfo_podcastPlayDuration:performance.now()-C.current,eventInfo_impressionElement:Nv.Podcast}})}function x(){_&&(_.currentTime=0)}function M(J){k(),b.current=performance.now(),x(),T(0),c(J)}function te(){v&&(M(a+1),Ol(r,Nl.Next,R))}function Y(){y&&(M(a-1),Ol(r,Nl.Previous,R))}function Q(J){_&&(_.playbackRate=J/100)}function ee(J){const X=(Zb.indexOf(J)+1)%Zb.length;return Zb[X]??Xv}function oe(){f(!0);const J=w[a]??[];E<J.length-1?T(pe=>pe+1):J.length-1===E&&v?te():(Pe(),t())}function Ce(J){J==="open"&&g(d),J==="close"&&p&&$()}function fe(){b.current=performance.now(),C.current=performance.now()}function Pe(){n?N():k()}return{isPlaying:d,currentChapterId:S,currentChapterIndex:a,chapterDurations:s,currentChapterPartIndex:E,audioElement:_,setAudioElement:j,audioChaptersProgressBarRef:u,currentChapterAudioSrc:((nt=w[a])==null?void 0:nt[E])??"",play:e?$:void 0,pause:e?U:void 0,skipForward:e?J=>se(J):()=>{},skipBack:e?J=>P(J):()=>{},goToNextChapter:v?te:void 0,goToPreviousChapter:y?Y:void 0,getNextPlaybackSpeed:e?J=>ee(J):void 0,applyPlaybackRate:e?J=>Q(J):()=>{},onChapterEnded:oe,onToggleVoiceSettings:Ce,resetAllTimers:fe,trackPlayerEndEvents:Pe}}const pA=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z"})),lxe=Object.freeze(Object.defineProperty({__proto__:null,default:pA},Symbol.toStringTag,{value:"Module"}));function Kve(t){const[e,n]=m.useState(!1),{tab:r,className:o=""}=t,{t:i}=Fe();return e||!r.favIconUrl?h.jsx(pA,{className:G("size-5",o)}):h.jsx("img",{src:r.favIconUrl,alt:i("composer.multiTabs.tabFavIconAltText"),className:G("size-4 rounded bg-white",o),onError:()=>{n(!0)}})}function Wve(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch{return null}}function Yve(t,e=5){const n=new Set;for(const r of t){if(n.size>=e)break;if(r.url){const o=Wve(r.url);o&&n.add(o)}}return Array.from(n).join(", ")}function Qve(t,e=5){const n=new Set;for(const r of t){if(n.size>=e)break;r.title&&n.add(r.title)}return Array.from(n).join(", ")}function Jve(t){const{tabs:e}=t,n=m.useMemo(()=>Qve(e,5),[e]),r=e.length-1;return h.jsxs("div",{className:"flex",children:[h.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground-750 text-xs",children:n}),r>0&&h.jsxs("span",{className:"ms-1 font-semibold text-foreground-750 text-xs",children:["+",r]})]})}function Xve(t){const{tabs:e}=t,n=m.useMemo(()=>Yve(e,5),[e]);return h.jsx("span",{className:"truncate text-foreground-750 opacity-60 text-2xs",children:n})}function bF(t){const{tabs:e,onRemove:n,showRemoveIcon:r,onClick:o}=t,{t:i}=Fe(),s=m.useMemo(()=>e.slice(0,3),[e]),a=u=>{u.stopPropagation(),n==null||n()},c=u=>{u.stopPropagation(),o==null||o()};return h.jsxs(xe.div,{className:"relative flex h-[58px] w-full flex-row items-center justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-midnight-800/80",layout:"position",initial:rt,animate:Ot,exit:rt,onClick:c,children:[h.jsx("div",{className:G("flex h-5 min-w-5 flex-none items-center justify-center rounded bg-white/90 dark:bg-midnight-800/80"),children:s.map((u,d)=>h.jsx(Kve,{tab:u,className:G(d>0&&"-ms-[6px]")},u.id))}),h.jsxs("div",{className:"me-7 flex min-w-0 flex-1 flex-col",children:[h.jsx(Jve,{tabs:e}),h.jsx(Xve,{tabs:e})]}),r&&h.jsx("button",{type:"button",title:i("composer.removeImage"),"aria-label":i("composer.removeImage"),onClick:a,tabIndex:0,className:"absolute end-0.5 top-0.5 m-1 rounded-full p-1 text-foreground-850 safe-hover:bg-black/5 dark:safe-hover:bg-black/30",children:h.jsx(Io,{className:"size-3"})})]})}function Zve({onClick:t,showRemoveIcon:e=!0}){const[n,r]=tt(M_),o=m.useMemo(()=>Array.from(n.values()),[n]);return n.size===0?null:h.jsx("div",{className:"flex min-h-[60px] flex-col gap-2",children:h.jsx(bF,{showRemoveIcon:e,tabs:o,onRemove:()=>{r(new Map)},onClick:t})})}const CF=t=>m.createElement("svg",{viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M6.5 2C4.01472 2 2 4.01472 2 6.5V11.5002C1.39278 11.0441 1 10.3179 1 9.5V6.5C1 3.46243 3.46243 1 6.5 1H9.5C10.3179 1 11.0441 1.39278 11.5002 2H6.5ZM4.06095 6.3954C4.34069 5.02835 5.55025 4 7 4H13.5002C13.0441 3.39278 12.3179 3 11.5 3H7C4.79086 3 3 4.79086 3 7V11.5C3 12.3179 3.39278 13.0441 4 13.5002V7C4 6.79289 4.02099 6.59069 4.06095 6.3954ZM5 7.5C5 6.11929 6.11929 5 7.5 5H12.5C13.8807 5 15 6.11929 15 7.5V12.5C15 13.8807 13.8807 15 12.5 15H7.5C6.11929 15 5 13.8807 5 12.5V7.5ZM7.5 6C6.67157 6 6 6.67157 6 7.5V12.5C6 13.3284 6.67157 14 7.5 14H12.5C13.3284 14 14 13.3284 14 12.5V7.5C14 6.67157 13.3284 6 12.5 6H7.5Z"})),uxe=Object.freeze(Object.defineProperty({__proto__:null,default:CF},Symbol.toStringTag,{value:"Module"})),SF=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...t},m.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM12.5 3.5C7.80558 3.5 4 7.30558 4 12C4 16.6944 7.80558 20.5 12.5 20.5C17.1944 20.5 21 16.6944 21 12C21 7.30558 17.1944 3.5 12.5 3.5ZM12.5 7C12.9142 7 13.25 7.33579 13.25 7.75V11.25H16.75C17.1642 11.25 17.5 11.5858 17.5 12C17.5 12.4142 17.1642 12.75 16.75 12.75H13.25V16.25C13.25 16.6642 12.9142 17 12.5 17C12.0858 17 11.75 16.6642 11.75 16.25V12.75H8.25C7.83579 12.75 7.5 12.4142 7.5 12C7.5 11.5858 7.83579 11.25 8.25 11.25H11.75V7.75C11.75 7.33579 12.0858 7 12.5 7Z"})),dxe=Object.freeze(Object.defineProperty({__proto__:null,default:SF},Symbol.toStringTag,{value:"Module"})),EF=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...t},m.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM15.7197 8.96967L11.25 13.4393L9.28033 11.4697C8.98744 11.1768 8.51256 11.1768 8.21967 11.4697C7.92678 11.7626 7.92678 12.2374 8.21967 12.5303L10.7197 15.0303C11.0126 15.3232 11.4874 15.3232 11.7803 15.0303L16.7803 10.0303C17.0732 9.73744 17.0732 9.26256 16.7803 8.96967C16.4874 8.67678 16.0126 8.67678 15.7197 8.96967Z"})),hxe=Object.freeze(Object.defineProperty({__proto__:null,default:EF},Symbol.toStringTag,{value:"Module"}));function wF(t){return m.useCallback(e=>{if(e.key==="Enter"&&!e.shiftKey||e.key===" "){e.preventDefault();try{const n=t(e);n instanceof Promise&&n.catch(console.error)}catch(n){console.error("Error in useEnterOrSpaceKeyDown:",n)}}},[t])}function eye(t){const e=t.children[0];return e instanceof HTMLElement?e:null}function tye(t,e=!0){m.useEffect(()=>{if(e&&t.current){const n=eye(t.current);n&&n.focus()}},[t,e])}const dl=t=>h.jsx(rye,{...t});dl.Motion=m.forwardRef(nye);function nye(t,e){const{children:n,axis:r="vertical",circular:o=!0,tabbable:i,autoFocus:s=!1,...a}=t,c=WO({axis:r,circular:o,tabbable:i}),u=m.useRef(null);return m.useImperativeHandle(e,()=>u.current,[]),Sp(u,s),ve("a11y-keyboard-navigation")?h.jsx(xe.div,{ref:u,...c,...a,children:n}):h.jsx(xe.div,{ref:u,...a,children:n})}function rye(t){const{children:e,axis:n="vertical",circular:r,tabbable:o,autoFocus:i=!1,...s}=t,a=WO({axis:n,circular:r,tabbable:o}),c=m.useRef(null);return tye(c,i),ve("a11y-keyboard-navigation")?h.jsx("div",{ref:c,...a,...s,children:e}):h.jsx("div",{ref:c,...s,children:e})}const RN="ml-auto mr-[2px] size-6 flex-none";function oye(t,e){const{tab:n,onClick:r,showHighlight:o,showActionIcon:i=!0,onFocus:s,className:a}=t,[c,u]=m.useState(!1),{t:d}=Fe(),f=m.useCallback(()=>{r==null||r({...n,added:n.specialTabType!=="all-tabs"?!n.added:n.added})},[r,n]),p=wF(f),g=c||!n.favIconUrl||n.specialTabType==="all-tabs",v=n.specialTabType==="all-tabs"?CF:pA;return h.jsxs(dl.Motion,{className:bt("my-0.5 box-border flex h-10 w-full cursor-pointer flex-row items-center rounded-lg p-1.5 active:bg-black/3 safe-hover:bg-black/5 dark:active:bg-white/5 dark:safe-hover:bg-black/30",o&&"bg-black/5 dark:bg-white/8","forced-colors:focus:outline forced-colors:focus:outline-2 forced-colors:focus:outline-black dark:forced-colors:focus:outline-white","contrast-more:focus:outline contrast-more:focus:outline-2 contrast-more:focus:outline-black dark:contrast-more:focus:outline-white",a),onClick:f,tabIndex:0,onKeyDown:p,ref:e,onFocus:s,tabbable:!0,"aria-label":n.title,children:[h.jsx("div",{className:"relative flex size-4 flex-none flex-row items-center rounded-lg bg-black/5",children:g?h.jsx(v,{className:"size-full"}):h.jsx("img",{src:n.favIconUrl,alt:d("composer.multiTabs.tabFavIconAltText"),className:"size-full rounded-[1px] object-cover",onError:()=>{u(!0)}})}),h.jsx("span",{className:"me-7 ms-2 max-h-full truncate text-foreground-850 text-xs",children:n.title}),i&&n.specialTabType!=="all-tabs"&&(n.added?h.jsx(EF,{className:RN}):h.jsx(SF,{className:RN}))]})}const iye=m.forwardRef(oye),TF=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M4.5 10a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0ZM10 3a7 7 0 1 0 4.391 12.452l5.329 5.328a.75.75 0 1 0 1.06-1.06l-5.328-5.329A7 7 0 0 0 10 3Z"})),fxe=Object.freeze(Object.defineProperty({__proto__:null,default:TF},Symbol.toStringTag,{value:"Module"})),PN="";function sye(t){const{onChange:e,defaultValue:n}=t,{t:r}=Fe(),[o,i]=m.useState(n??PN),s=()=>{i(PN)},a=wF(s),c=m.useCallback(u=>{i(u.target.value)},[]);return m.useEffect(()=>{e==null||e(o)},[e,o]),h.jsxs("div",{className:"mt-3 flex h-8 w-full flex-row items-center rounded-3xl bg-white/60 dark:bg-black/60",children:[h.jsx(TF,{className:"mx-2 size-4"}),h.jsx("input",{type:"text",id:"browser-tab-search",autoComplete:"off",spellCheck:!1,autoCorrect:"off",className:"w-full rounded-lg bg-transparent py-2 text-sm focus:outline-none",placeholder:r("composer.multiTabs.browserTabMenuSearchPlaceholder"),"aria-label":r("composer.multiTabs.browserTabMenuSearchPlaceholder"),onChange:c,value:o,maxLength:100}),o&&h.jsx("div",{role:"button",tabIndex:0,className:"me-1 ms-auto h-6 cursor-pointer rounded-xl border border-midnight-250 bg-midnight-200 px-3 py-1 text-foreground-800 text-2xs dark:border-white/50 dark:bg-white/5",onKeyDown:a,onClick:s,"aria-label":r("composer.multiTabs.browserTabMenuSearchClear"),children:r("composer.multiTabs.browserTabMenuSearchClear")})]})}function aye(t,e){let n=null;return(...r)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}const cye=300,pxe=2e3;function lye(t,e=1e3){const n=m.useRef();return n.current=t,m.useMemo(()=>aye((...i)=>{var s;(s=n.current)==null||s.call(n,...i)},e),[e])}function uye(t){const e=m.useRef(0),n=m.useCallback(async()=>{const r=window.innerHeight;r!==e.current&&(e.current=r,await t(r))},[t]);db(n,{initialize:!0},document.documentElement)}const dye="edge://discover-chat-v2",mxe="Edge.Context.Pref",gxe="Edge.Context.OnPref",vxe="browser.underside_chat_consent",hye="Edge.IsFeatureEnabled",fye="Edge.OnIsFeatureEnabled",yxe="isShowCopilotButtonSupported";class Ov{constructor(){Z(this,"resolve",null);Z(this,"isCancelled");Z(this,"token");this.token=new Promise(e=>{this.resolve=e}),this.isCancelled=!1}static cancelled(){const e=new Ov;return e.cancel(),e}static create(e){const n=new Ov;return e&&e.then(()=>n.cancel()),n}static delay(e){return this.create(new Promise(n=>{setTimeout(()=>n(null),e)}))}cancelled(){return this.isCancelled}cancel(){return!this.isCancelled&&this.resolve&&this.resolve(this),this.isCancelled=!0,this.isCancelled}dispose(){this.cancel()}}function pye(t){window.parent.postMessage(t,dye)}class mA{constructor(e,n="",r,o){Z(this,"listenerKey",mA.name);Z(this,"result",null);Z(this,"priority","Normal");Z(this,"createdDate",new Date);Z(this,"id");Z(this,"resolveListener");Z(this,"eventName");Z(this,"canResolve");this.eventName=e,this.id=n,r==null||r.then(()=>this.cancel()),this.canResolve=o}init(e){e!==void 0?this.resolveListener=e:this.result=new Promise(n=>{this.resolveListener=n})}maybeHandleEvent(e){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");const{eventName:n,requestId:r}=e;return r!==this.id?!1:n===this.eventName?this.canResolve&&!this.canResolve(e)?!1:(this.resolveListener(e),!0):!1}cancel(){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");return this.result&&this.resolveListener(null),!0}}const Wa=class Wa{constructor(){Z(this,"activeListeners",[])}static instance(){return Wa.singleton||(Wa.singleton=new Wa),Wa.singleton}push(e,n,r){return e.init(r),this.activeListeners.push(e),n&&n(),e.result===null?Promise.resolve(null):e.result.then(o=>(this.pop(e),o)).catch(()=>(this.pop(e),null))}pop(e){const n=this.activeListeners.indexOf(e);n>-1&&this.activeListeners.splice(n,1)}findAndHandleListener(e){for(const n of[...this.activeListeners].sort((r,o)=>r.createdDate<o.createdDate?-1:1))if(n.maybeHandleEvent(e))break}};Z(Wa,"singleton",null);let ww=Wa;class mye{constructor(){Z(this,"isFeatureAvailableApiSupported");Z(this,"enabledFeatures",new Map);this.isFeatureAvailableApiSupported=this.getFeatureAvailableApiSupported()}async isFeatureEnabled(e){return this.enabledFeatures.has(e)||await this.retrieveEnabledFeatures([e]),this.enabledFeatures.get(e)??!1}async retrieveEnabledFeatures(e){if(!this.isFeatureAvailableApiSupported)return;await this.waitForNativeBridgeConnected();const n=1e3,r={eventName:hye,requestId:crypto.randomUUID(),isOutgoing:!0,args:{featureNames:e}},o=await ww.instance().push(new mA(fye,r.requestId,Ov.delay(n).token),()=>{pye(r)});if(o){const i=o.args;for(const s of e){const a=i.featureNames.includes(s);this.enabledFeatures.set(s,a)}}}getFeatureAvailableApiSupported(){for(const n of navigator.userAgent.split(" "))if(n.startsWith("Edg/")){const r=n.split("/")[1];if(r!==void 0){const o=r.split(".")[0];if(o!==void 0)return parseInt(o,10)>=132}}return!1}waitForNativeBridgeConnected(){const e=st();return e.get(Rm)?Promise.resolve():new Promise(n=>{const r=e.sub(Rm,()=>{e.get(Rm)&&(r(),n())})})}}const bxe=new mye;function gye(t){return t!=null&&typeof t=="object"&&"id"in t&&typeof t.id=="number"&&"windowId"in t&&typeof t.windowId=="number"&&"url"in t&&typeof t.url=="string"}function IF(t){return Array.isArray(t)&&t.every(e=>gye(e))}const vye=5,yye=3,bye=8;function Cye(){return et("edge-multi-tabs-limit-3")?yye:et("edge-multi-tabs-limit-8")?bye:vye}const Sye={id:-1,title:"",added:!1,isAppear:!0,specialTabType:"all-tabs",active:!1,highlighted:!1,pinned:!1,selected:!1,incognito:!1,autoDiscardable:!0,discarded:!1,index:-1,windowId:-1,groupId:-1},Eye=528,wye=46,Tye=360,Iye=240;function _ye(t,e){const n=new Set(t.map(o=>o.id)),r=new Set(e.map(o=>o.id));if(n.size!==r.size)return!0;for(const o of n)if(!r.has(o))return!0;return!1}function Aye(){Kt.emit("edge:try-grow-content-height",Eye)}function kye(t){const e=new Map;for(const n of t)n.id&&n.added&&e.set(n.id,n);return e}function xye(t){const{styles:e,onRef:n,onSave:r,onClose:o=()=>{},outsideClickElements:i=[]}=t,[s,a]=tt(M_),c=m.useRef(new Map(s)),u=m.useRef(null),[d,f]=m.useState([]),[p,g]=m.useState(0),v=m.useRef(null),{t:y}=Fe(),b=m.useDeferredValue([...d]),C=D(RU),S=m.useMemo(()=>{const oe=b.filter(Ce=>Ce.isAppear);return C?[{...Sye,title:y("composer.multiTabs.allTabs",{count:oe.length}),isAppear:!0},...oe]:oe},[b,y,C]),[w,E]=m.useState(!1),T=c.current,[I,A]=m.useState(0),[_,j]=m.useState(!1),R=m.useCallback(()=>{if(u.current){const oe=u.current.getBoundingClientRect();A(oe.height+oe.top-wye)}},[A]);uye(()=>{Aye(),R()}),m.useEffect(()=>{j(!1);async function oe(){const{tabs:Ce}=await Qce.run({});if(IF(Ce)){const fe=[];for(const Pe of Ce)Pe.id&&fe.push({...Pe,added:T.has(Pe.id),isAppear:!0});f(fe)}}oe().catch(console.error).finally(()=>{j(!0)})},[T]),m.useLayoutEffect(()=>{u.current&&_&&R()},[R,_]);const $=m.useMemo(()=>d.filter(oe=>oe.added),[d]),U=m.useMemo(()=>$.length===0||$.length>Cye(),[$]),se=m.useCallback(oe=>{n==null||n(oe),u.current=oe},[n]),P=m.useCallback(oe=>{const Ce=kye(oe);a(Ce);const fe=Array.from(Ce.values()),Pe=_ye(fe,[...T.values()]);r==null||r(fe,Pe)},[T,r,a]),k=m.useCallback(()=>{U||P(d)},[U,P,d]),N=m.useCallback(oe=>{f(Ce=>Ce.map(Pe=>Pe.id===oe.id?oe:Pe))},[]),x=lye(m.useCallback(oe=>{f(Ce=>Ce.map(fe=>({...fe,isAppear:fe.title?fe.title.toLowerCase().includes(oe.toLowerCase().trim()):!0})))},[]),cye),M=m.useCallback(oe=>{g(Ce=>oe==="up"?Ce>0?Ce-1:S.length-1:Ce<S.length-1?Ce+1:0)},[g,S]);m.useEffect(()=>{v.current&&p>=0&&v.current.scrollIntoView({block:"nearest"})},[p,v]);const te=m.useCallback(oe=>{let Ce=[];oe.specialTabType==="all-tabs"?Ce=d.map(fe=>({...fe,added:S.some(Pe=>Pe.id===fe.id)})):Ce=d.map(fe=>fe.id===oe.id?oe:fe),f(Ce),P(Ce)},[S,P,d]),Y=m.useCallback(oe=>{var Ce;if(["ArrowUp","ArrowDown"].includes(oe.code))oe.preventDefault(),M(oe.code==="ArrowUp"?"up":"down");else if(oe.code==="Enter"){oe.preventDefault();const fe=S[p];fe&&te({...fe,added:!fe.added})}else oe.code==="Tab"&&((Ce=u.current)==null||Ce.focus())},[M,p,S,te]);m.useEffect(()=>(Kt.on("multi-tabs:search",x),Kt.on("multi-tabs:key-down",Y),()=>{Kt.off("multi-tabs:search",x),Kt.off("multi-tabs:key-down",Y)}),[Y,x]),zc({onOutsideEvent:o,elements:[u,...i],invokeOnce:!1,shouldAttachListeners:w}),m.useEffect(()=>{E(!0)},[]);const Q=m.useMemo(()=>C?Iye:Tye,[C]),ee=m.useMemo(()=>({maxHeight:`${I>Q?Q:I}px`,...e}),[I,Q,e]);return h.jsxs(dl.Motion,{className:bt(qt.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white p-4 shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 dark:border-white/10","bg-gradient-composer-tabs-menu-light dark:bg-gradient-composer-tabs-menu-dark","bg-blend-normal","forced-colors:bg-stroke-150 dark:forced-colors:bg-midnight-850","contrast-more:bg-stroke-150 dark:contrast-more:bg-midnight-850"),style:ee,tabbable:!0,tabIndex:0,ref:se,"data-testid":"composer-multi-tabs-menu",children:[h.jsxs("div",{className:"flex w-full flex-row items-center justify-between pt-2",children:[h.jsx("span",{className:"font-[500] text-foreground-900 text-xs",children:y("composer.multiTabs.browserTabMenuTitle")}),!C&&h.jsx(Ue,{color:"subtle-dimmed",title:y("common.closeText"),size:"32-xs",onClick:o,"aria-label":y("common.closeText"),children:h.jsx(Io,{className:"size-5 cursor-pointer"})})]}),!C&&h.jsx(sye,{onChange:x}),h.jsx("div",{className:"t-custom-scrollbar my-3 flex flex-col gap-y-1 overflow-y-auto overflow-x-hidden px-0.5",children:S.length>0?S.map((oe,Ce)=>h.jsx(iye,{tab:oe,onClick:C?te:N,showHighlight:Ce===p,ref:Ce===p?v:null,onFocus:()=>{g(Ce)},showActionIcon:!C},oe.id)):h.jsx("span",{className:"text-foreground-850 text-xs",role:"status",children:d.length===0?y("composer.multiTabs.noTabsOpen"):y("composer.multiTabs.noTabsFound")})}),!C&&h.jsx(Ue,{title:y("composer.multiTabs.browserTabMenuShareButton"),className:"mx-auto mt-auto w-full flex-none",disabled:U,onClick:k,color:"strong",size:"48-lg","aria-label":y("composer.multiTabs.browserTabMenuShareButton"),children:y("composer.multiTabs.browserTabMenuShareButton")})]})}const _F=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{id:"Shape",d:"M2 6.25C2 4.45507 3.45507 3 5.25 3H18.75C20.5449 3 22 4.45507 22 6.25V12H20.5V6.25C20.5 5.2835 19.7165 4.5 18.75 4.5H5.25C4.2835 4.5 3.5 5.2835 3.5 6.25V15.75C3.5 16.7165 4.2835 17.5 5.25 17.5H11V19H5.25C3.45507 19 2 17.5449 2 15.75V6.25ZM14 13C12.8954 13 12 13.8954 12 15V20C12 21.1046 12.8954 22 14 22H21C22.1046 22 23 21.1046 23 20V15C23 13.8954 22.1046 13 21 13H14Z",fill:"currentColor"})),Cxe=Object.freeze(Object.defineProperty({__proto__:null,default:_F},Symbol.toStringTag,{value:"Module"}));function Rye(t){const{onClick:e}=t,{t:n}=Fe();return h.jsx(Xs,{data:{title:n("videoCard.pictureInPicture.miniPlayer"),testId:"trigger-picture-in-picture",isVisible:!0,onClick:e},children:h.jsx(_F,{className:"size-6","aria-hidden":!0})})}function gA(){return D(ao)==="US"&&be.instance().config().proSubscription.enabled}function Pye(t){const{title:e,onClick:n,appearDelay:r,appearDuration:o,voiceAvailabilityStatus:i,payflowSkuType:s}=t,a=gA(),c=D(Un);return m.useEffect(()=>{c!=null&&c.accountType&&K.trackEvent({name:"interaction",data:{eventName:"payflowEntryImpression",eventInfo_loginProvider:c.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:a?"ProSubPaywall":"UniPux",eventInfo_payflowSkuType:s,eventInfo_upsellReason:i,eventInfo_upsellEntryStyle:"Button"}})},[i,s,a,c==null?void 0:c.accountType]),h.jsx(dA,{className:"mx-2",title:e,onClick:n,appearDelay:r,appearDuration:o})}const Nye="https://content.lifecycle.office.net/dime/v1/dime.js";function Oye(){return new Promise((t,e)=>{const n=document.createElement("script");n.src=Nye,n.type="text/javascript",n.async=!0,n.onload=()=>{t()},n.onerror=()=>{e(new Error("Failed to load Dime script"))},document.head.appendChild(n)})}const NN=new el(Oye);async function Mye({language:t,market:e,sessionId:n}){var r;try{const[o]=await Promise.all([Jce(),NN.get()]);return new window.Dime({language:t,market:e,sessionId:n,partnerId:"cmc",authHint:o==null?void 0:o.username,userInfo:{puid:(r=o==null?void 0:o.idTokenClaims)==null?void 0:r.puid}})}catch(o){return NN.reset(),console.log("Failed to load Dime script",o),null}}const VS=new el(t=>Mye(t));var wu,Hf;class Lye{constructor(){on(this,wu,Wo("pfcid")??crypto.randomUUID());on(this,Hf);Z(this,"ensureDime",async({language:e,market:n})=>(e!==me(this,Hf)&&VS.reset(),Mt(this,Hf,e),VS.get({language:e,market:n,sessionId:me(this,wu)})));Z(this,"overrideSessionId",e=>{VS.reset(),Mt(this,wu,e)})}get sessionId(){return me(this,wu)}}wu=new WeakMap,Hf=new WeakMap;const ON=new Lye;function $S(t){return t instanceof Error?{errorCode:t.toString(),errorDetails:t.message}:{errorCode:"unknown",errorDetails:String(t)}}function kd(t,e,n){const r={eventInfo_payflowEntryPoint:e.payflowEntryPoint,eventInfo_upsellReason:e.upsellReason??"unknown",eventInfo_loginProvider:e.loginProvider,eventInfo_payflowType:"DIME",eventInfo_payflowInstanceId:e.payflowInstanceId,eventInfo_curatedSubscription:e.curatedSubscription??"",eventInfo_correlationId:e.correlationId??"",eventInfo_dimeMarket:e.dimeMarket??"",eventInfo_campaignId:e.campaignId};let o;switch(t){case"payflowEnter":o={eventName:"payflowEnter",...r,eventInfo_upsellEntryStyle:(n==null?void 0:n.eventInfo_upsellEntryStyle)||"Banner"};break;case"payflowLoginClick":o={eventName:"payflowLoginClick",...r};break;case"dimeCheckoutRendering":o={eventName:"dimeCheckoutRendering",...r};break;case"dimeCheckoutSuccess":o={eventName:"dimeCheckoutSuccess",...r};break;case"dimeCheckoutClosed":o={eventName:"dimeCheckoutClosed",...r};break;case"dimeCheckoutError":o={eventName:"dimeCheckoutError",eventInfo_errorCode:(n==null?void 0:n.eventInfo_errorCode)??"",eventInfo_errorDetails:(n==null?void 0:n.eventInfo_errorDetails)??"",...r};break;default:o={eventName:"unknown",...r};break}K.trackEvent({name:"interaction",data:o})}function Dye(t){kd("payflowEnter",t,{eventInfo_upsellEntryStyle:"Banner"})}function Sxe(t){kd("payflowLoginClick",t)}function jye(t){kd("dimeCheckoutRendering",t)}function Uye(t){kd("dimeCheckoutSuccess",t)}function Fye(t){kd("dimeCheckoutClosed",t)}function GS(t){kd("dimeCheckoutError",t,{eventInfo_errorCode:t.errorCode,eventInfo_errorDetails:t.errorDetails})}const AF="https://go.microsoft.com/fwlink/?linkid=2281226&client=cmc&ocid=cmme6wdx8nv",Bye="sapphire://payment",kF="cmme6wdx8nv",xF="cmmjacjzqcs";function RF(t){const{urlParams:e}=be.instance().config().proSubscription;if(!e)return AF;const{client:n}=e,{linkid:r,ocid:o,language:i,market:s}=t,a=new URL("https://go.microsoft.com/fwlink/");return a.searchParams.append("linkid",r),a.searchParams.append("client",n),a.searchParams.append("ocid",o),s&&a.searchParams.append("market",s),i&&a.searchParams.append("language",i),a.toString()}function MN(t,e,n,r){var u,d,f;const{urlParams:o}=be.instance().config().proSubscription;if(!o)return AF;const{ocids:i}=o,s=e?(u=i[t])==null?void 0:u.freeTrial:(d=i[t])==null?void 0:d.buy,a=r??((f=i[t])==null?void 0:f.market);return RF({linkid:e?"2243582":"2281226",ocid:s??kF,language:n,market:a})}function Hye(t,e,n){return RF({linkid:"2281226",ocid:t??xF,language:e,market:n})}const zye="https://account.microsoft.com/services/copilot/details",Exe="https://account.microsoft.com/";function wxe(t){const{manageRefId:e}=be.instance().config().proSubscription,n=`copilot.${e}.${t}`,r=new URL(zye);return r.searchParams.append("ref",n),r.hash="billing",r.toString()}function LN(t){be.instance().config().subscribeInNewWindow?window.open(t):eb(t)}function Mv(t){const{payflowEntryPoint:e,skuType:n,upsellReason:r,beforeNavigate:o,entryStyle:i,preferPremium:s=!1}=t,a=Wt(),c=co(),u=ve("pro-sub-dime"),d=ve("cmc-m365-sku"),f=u||d,p=gA(),g=be.instance().config().proSubscription.enabled,v=D(dy),y=D(ao),{i18n:{resolvedLanguage:b}}=Fe(),C=D(Un),S=Te(Ir),w=D(Cs),E=D(ML),T=D(WQ),I=m.useMemo(()=>d?E$(E,s):"gopremium",[d,s,E]),A=u?xF:kF,_=m.useCallback(()=>{switch(e){case"VoiceLimit":return Q2()?Bye:g?MN(e,v,"",y):"";case"Settings":case"ChatReasoningLimit":case"RedirectFromAuth0Account":case"ActionsLimit":return MN(e,v,"",y);default:return""}},[g,v,e,y]),j=m.useCallback(async()=>{const P=crypto.randomUUID();if(K.trackEvent({name:"interaction",data:{eventName:"payflowEnter",eventInfo_payflowCorrelationId:P,eventInfo_loginProvider:(C==null?void 0:C.accountType)??"unknown",eventInfo_payflowEntryPoint:e,eventInfo_payflowType:p?"ProSubPaywall":"UniPux",eventInfo_payflowSkuType:n,eventInfo_upsellReason:r,eventInfo_upsellEntryStyle:i}}),p)o&&typeof o=="function"&&o(),await c({to:`/pro/subscribe?payflow-correlationId=${P}&entry-point=${e}`,from:a});else{const k=_();LN(k)}},[i,p,a,e,n,r,C==null?void 0:C.accountType,o,_,c]),R=m.useCallback(()=>{const P=Hye(A,"",y);LN(P)},[A,y]),$=m.useMemo(()=>({payflowEntryPoint:e,upsellReason:r??"unknown",loginProvider:(C==null?void 0:C.accountType)??"unknown",curatedSubscription:(T==null?void 0:T.tier)??"unknown",campaignId:A,dimeMarket:y??"unknown",payflowInstanceId:ON.sessionId}),[e,r,C==null?void 0:C.accountType,T==null?void 0:T.tier,A,y]),U=m.useCallback(async P=>{const k={...$,payflowInstanceId:P};Dye({...k});const N=await ON.ensureDime({language:b??"en-US",market:y});if(!I)throw new Error("No dime experience available");if(N)try{jye({...k}),(await N.launch({experience:I,theme:w??"light",campaignId:A},()=>{})).status==="Success"?(Uye({...k}),tb()):Fye({...k})}catch(x){GS({...k,...$S(x)}),R()}else GS({...k,...$S(new Error("Dime not a valid instance"))}),R()},[b,y,w,I,A,$,R]);return{handleProSubscription:m.useCallback(async()=>{if((!p||f)&&(C==null?void 0:C.provider)==="auth0"){S("upsell-microsoft-account-for-pro-subscription");return}if(f){const P=crypto.randomUUID();try{await U(P)}catch(k){GS({...$,...$S(k),payflowInstanceId:P}),R()}}else j()},[f,U,C==null?void 0:C.provider,p,j,S,$,R])}}function PF(t){const{provider:e="microsoft",scenario:n,from:r}=t,o=Kc(),i=co(),{login:s}=Id();return m.useCallback(async()=>{if(n&&Sn({source:"signin",scenario:n}),o){await i({from:r,to:"/login"});return}await s({provider:e})},[r,i,o,s,e,n])}function Vye(){const{t}=Fe(),e=D(Mh),n=xr(),r=D(rI),o=be.instance().config().proSubscription.enabled,i=D(dy),s=o&&i&&!r,a=Kc(),c=D(Un),u=Te(Ir),d=PF({scenario:"voice",from:"/"}),{handleProSubscription:f}=Mv({payflowEntryPoint:"VoiceLimit",skuType:s?"FreeTrial":"1Mo-Paid",upsellReason:e,entryStyle:"Button"});if(m.useEffect(()=>{r&&(c!=null&&c.accountType)&&K.trackEvent({name:"interaction",data:{eventName:"payflowHiddenEntryImpressionForTeenUser",eventInfo_loginProvider:c.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:"UniPux",eventInfo_payflowSkuType:s?"FreeTrial":"1Mo-Paid",eventInfo_upsellReason:e}})},[e,r,n,s,c==null?void 0:c.accountType]),!r)return n?h.jsx(Pye,{voiceAvailabilityStatus:e,payflowSkuType:s?"FreeTrial":"1Mo-Paid",title:t(s?"voice.freeTrialToPro":"voice.v2.subscribeToPro"),onClick:async()=>{if(a&&(c==null?void 0:c.provider)==="auth0"){u("upsell-microsoft-account-for-pro-subscription");return}Sn({source:"subscribeCopilotPro",scenario:"voice"}),await f()}}):h.jsx(dA,{className:"mx-2",title:t("voice.signUpOrLogin"),onClick:d})}const $ye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/settings-B9ohU3kQ.svg";function NF(){const t=D(ple),e=ve("edge-multi-tabs-manual");return t&&e}function Gye(){const t=NF(),[e,n]=m.useState(!1),[r,o]=m.useState(!1),[i,s]=tt(RU),{refs:a,floatingStyles:c}=GO({placement:"top-start",strategy:"absolute",whileElementsMounted:ed,middleware:[td(()=>({mainAxis:6,crossAxis:0})),nd({padding:12}),VO({apply({rects:y,elements:b}){Object.assign(b.floating.style,{width:`${y.reference.width}px`})}})]}),u=m.useCallback(async y=>{const{isTrigger:b,keyword:C}=y;s(b),b&&Kt.emit("multi-tabs:search",C),n(b)},[s,n]),d=m.useCallback(()=>{i&&(Kt.emit("mention:cancel"),s(!1))},[i,s]),f=m.useCallback(()=>{d(),n(!1)},[d]),p=m.useCallback(()=>{d(),n(!1),o(!0),Kt.emit("edge:maybe-fetch-page-context","onSaveMultiTabs")},[d]),g=m.useCallback(y=>t&&e&&i?(Kt.emit("multi-tabs:key-down",y),!0):!1,[i,t,e]);return{isMultiTabsMenuExpanded:e,floatingStyles:c,edgeTabMenuRefs:a,setIsMultiTabsMenuExpanded:n,isShowMultiTabsPreviewCard:r,setIsShowMultiTabsPreviewCard:o,handleMentionEvent:u,isMentionTriggered:i,handleMultiTabsMenuSaveBtnEvent:p,handleMultiTabsMenuCloseBtnEvent:f,handleUserInputEnterEvent:()=>i&&e&&t,handleUserInputKeydownEvent:g}}const qye=st();function OF(t){qye.set(ic,t)}function Kye(){const t=ve("multiplecharacters"),e=D(_L),[n,r]=tt(ep);m.useEffect(()=>{t&&!n&&r(e)},[t,e,n,r])}function Wye(){const{currentChapterId:t}=yF();return m.useMemo(()=>{if(t)return{type:"dailyBriefing",chapterId:t}},[t])}function Yye(t){const[e,n]=m.useState(0);return m.useEffect(()=>{if(!t)return()=>{};const r=a=>{a.preventDefault(),n(c=>c+1)},o=a=>{a.preventDefault(),n(c=>Math.max(0,c-1))},i=a=>{a.preventDefault(),n(0)},s=()=>{document.hidden&&n(0)};return window.addEventListener("dragenter",r,!0),window.addEventListener("dragleave",o,!0),window.addEventListener("drop",i,!0),document.addEventListener("visibilitychange",s),()=>{window.removeEventListener("dragenter",r,!0),window.removeEventListener("dragleave",o,!0),window.removeEventListener("drop",i,!0),document.removeEventListener("visibilitychange",s)}},[t]),e>0}async function Qye(t,e){try{const n=await t.arrayBuffer(),r=new Uint8Array(n),o=await Fn("/attachments",bY,{options:{method:"POST",headers:{"Content-Type":ys(t)},body:new Blob([r]),signal:e}}).then(i=>i.data);if("errorCode"in o)throw new Error(o.errorCode);return o.url}catch(n){throw console.error("Error uploading image",n),n}}async function Jye(t,e){try{const n=new FormData;t.type!==""?n.append("file",t):n.append("file",new File([t],t.name,{type:ys(t)}),t.name);const r=await Fn("/attachments",aL,{options:{method:"POST",body:n,signal:e}}).then(o=>o.data);if("errorCode"in r)throw new Error(r.errorCode);return r.id}catch(n){throw console.error("Error uploading document",n),n}}async function Xye(t,e){try{const n=await Fn("/attachments/onedrive",aL,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id}),signal:e}}).then(r=>r.data);if("errorCode"in n)throw new Error(n.errorCode);return n.id}catch(n){throw console.error("Error uploading OneDrive file",n),n}}async function Zye(t,e){switch(t.kind){case"local-file":return Jye(t.file,e);case"onedrive":return Xye(t.item,e);default:{const n=t;throw new Error(`Unhandled upload kind: ${n}`)}}}async function ebe(t){const{uploadTasks:e,signal:n,onSuccess:r,onError:o,onFinish:i,scenario:s}=t,a=e.map(async c=>{const u=c.upload;try{if(c.type==="document"){const f={content:{type:"document",attachmentId:await Zye(c.upload,n)},item:{type:"document",partId:c.partId,fileName:c.metadata.name,contentType:c.metadata.contentType},size:c.metadata.size,type:c.metadata.contentType},p={id:c.id,file:c.upload.file,scenario:s,processing:!1,attachment:f};r(p)}else{const d=await Qye(u.file,n),f={content:{type:"image",url:d},item:{type:"image",url:d},size:c.metadata.size,type:c.metadata.contentType},p={id:c.id,file:u.file,scenario:s,processing:!1,attachment:f};r(p)}}catch(d){o&&o(d,c)}finally{i()}return null});return Promise.all(a)}function DN(t){switch(t.kind){case"local-file":{const{file:e}=t;return{name:e.name,contentType:ys(e),size:e.size}}case"onedrive":{const{item:e}=t;return{name:e.name,contentType:sA(e.name),size:e.size}}default:{const e=t;throw new Error(`Unhandled upload kind: ${e}`)}}}function tbe(){const[t,e]=m.useState([]),n=m.useRef(new Set),r=m.useRef(0),o=Te(sl),i=m.useCallback(()=>{for(const f of n.current)f.abort();n.current.clear()},[]);m.useEffect(()=>()=>{i()},[i]);const s=m.useCallback((f,p)=>{o({isOpen:!0,scenario:p??null,reason:f})},[o]),a=m.useCallback(()=>{s("fileUpload")},[s]),c=m.useCallback(()=>{e([]),r.current=0,i()},[i]),u=m.useCallback(async f=>{const{uploads:p,scenario:g,onError:v,replaceExisting:y=!1,shouldUploadImageAsDocument:b}=f;y&&c();const C=[],S=[];for(const E of p){const T=DN(E),I=bp(T.contentType),A=`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;if(I||b){const _=String(r.current);r.current+=1,C.push({id:A,upload:E,partId:_,metadata:T,type:"document"}),S.push({id:A,file:E.file,scenario:g,processing:!0})}else C.push({id:A,upload:E,metadata:T,type:"image"}),S.push({id:A,file:E.file,scenario:g,processing:!0})}e(E=>[...E,...S]);const w=new AbortController;n.current.add(w),await ebe({signal:w.signal,uploadTasks:C,onSuccess:E=>{e(T=>T.map(I=>I.id===E.id?E:I))},onError:(E,T)=>{if(E instanceof Error&&E.message==="not-signed-in")throw c(),a(),E;const I={id:T.id,file:T.upload.file,scenario:g,processing:!1,error:E};e(A=>A.map(_=>_.id===T.id?I:_)),v&&v(E,T.upload)},onFinish:()=>{n.current.delete(w)}})},[c,a]),d=m.useCallback(f=>{e(p=>{const g=[...p];return g.splice(f,1),g})},[]);return{uploadedAttachments:t,isUploadingAttachments:t.some(f=>f.processing===!0),clearAttachments:c,uploadAttachments:u,getUploadMetadata:DN,removeAttachmentByIndex:d}}function nbe(t,e,n,r){const{t:o}=Fe(),{clearAttachments:i,uploadAttachments:s,getUploadMetadata:a,isUploadingAttachments:c,uploadedAttachments:u,removeAttachmentByIndex:d}=tbe(),f=m.useCallback(async y=>{const{uploads:b,scenario:C,replaceExisting:S=!0}=y,w=u.filter(({error:E})=>!E).length;if(!S&&w+b.length>bw){e({title:o("composer.errors.multi.tooManyFiles.title",{maxFiles:bw}),message:o("composer.errors.multi.tooManyFiles.message")});return}for(const E of b){const T=hme(E.file);if(T){e(T),n();return}}t();try{await s({uploads:b,scenario:C,replaceExisting:S,onError:(E,T)=>{if(E instanceof Error){e(G4(E.message));const{name:I,size:A}=a(T);gme({name:I,size:A,message:E.message,kind:T.kind})}else e({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}})}catch(E){E instanceof Error&&E.message==="not-signed-in"?r():e({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}},[u,t,e,o,n,s,a,r]),p=m.useCallback(async y=>{const{rawFiles:b,scenario:C,replaceExisting:S=!0}=y;if(b.length===0)return;const w=[];for(const E of b)w.push({file:fme(E),kind:"local-file"});await f({uploads:w,scenario:C,replaceExisting:S})},[f]),g=m.useCallback(()=>{i(),n()},[i,n]),v=m.useCallback(y=>{u.length===1?g():d(y)},[d,u,g]);return{processUploadedFiles:f,processUploadedLocalFiles:p,isUploadingAttachments:c,uploadedAttachments:u,resetFileUpload:g,removeAttachment:v}}function hb(){var r;const t=D(jr)==="side-by-side",e=tr({breakpoint:"sm"}),n=!!((r=be.instance().config().actions)!=null&&r.alwaysLayoutChatDetailsOverChat);return t&&(e||n)}function MF(){const t=Wt();return rbe(t)}function rbe(t){return/^\/shares\/[a-zA-Z0-9_-]+$/.test(t)}function LF(t){return t.map(e=>{if(e.author==="human"||!e.content.find(a=>a.type==="citation"))return e;const r=e.content.find(a=>a.type==="text");if(!r)return e;const o=e.content.filter(a=>a.type==="citation").sort((a,c)=>a.position-c.position),{text:i,citationMetadata:s}=obe(r.text,o);return r.text=i,r.citations=s,e})}function obe(t,e){if(!e)return{text:t,citationMetadata:[]};let n=t;const r=[];let o=0;const i=new Map;for(const a of e){const c=a.url;if(!i.has(c)){o+=1;const u=`${o}`;i.set(c,u),r.push({index:u,title:a.title,url:a.url,iconUrl:a.iconUrl??null,publisher:a.publisher??null})}}const s=e.map((a,c)=>({citation:a,originalIndex:c})).sort((a,c)=>{const u=c.citation.position-a.citation.position;return u!==0?u:c.originalIndex-a.originalIndex}).map(a=>a.citation);for(const a of s){const c=a.url,u=i.get(c);u!==void 0&&(n=C9(n,v4(u,a.url),a.position))}return{text:n,citationMetadata:r}}function ibe(){const t=MF(),{conversationId:e}=$w({strict:!1}),{data:n,error:r,isLoading:o}=xB({queryKey:["sharePage",e],queryFn:()=>sbe(`/conversations/shares/${e}`),staleTime:1/0,enabled:t&&!!e});return{data:n,error:r,isLoading:o}}async function sbe(t){const{data:e,response:n}=await Fn(t,lQ,{parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/shares/*"}});if(n.status>=400&&n.status<500)throw new abe(n.status.toString());return{...e,messages:LF(e.messages.reverse())}}class abe extends Error{}function cbe(){const t=MF(),{isMediaViewerOpen:e}=zi(),n=D(Ir),r=ve("sharecontinue"),{error:o}=ibe();return t?o?!1:r||e||!!n:!0}function vA(){return V_("(hover: hover) and (pointer: fine)")}const lbe={h550:"550",h600:"600",h760:"760"};function Lv(t){const{breakpoint:e}=t,n=lbe[e];return!V_(`(min-height: ${n}px)`)}function Ep(){const t=gt(Bi),e=gt(Po);return t.length===0&&!!(e!=null&&e.isNew)}function ube(){try{return Tp.latestLocation.pathname}catch{return typeof window<"u"&&window.location.pathname?window.location.pathname:"/"}}function xd(){const t=ube(),e=t.endsWith("/talk"),n=t.startsWith("/chats")&&!e,r=t.endsWith("/landing");return n||r}function fb(){return!gt(IT)}function dbe(){var s;const t=fb(),e=gt(sI),n=gt(fp),r=Ep(),o=xd(),i=!!((s=be.instance().config().landingPage)!=null&&s.enableCentralComposer);return t&&!e&&n==="center"&&o&&r&&i}function hbe(){var o;const t=fb(),e=Ep(),n=xd(),r=!!((o=be.instance().config().landingPage)!=null&&o.enableStarterPrompts);return t&&n&&e&&r}function DF(){var i;const t=fb(),e=Ep(),n=xd(),r=gt(XQ),o=!!((i=be.instance().config().landingPage)!=null&&i.enableWidgets);return t&&r&&n&&e&&o}function fbe(){const t=fb(),e=Ep(),n=xd(),r=DF(),o=et("appr-home");return t&&n&&e&&o&&!r}function jF(){var s;const t=et("autosuggest"),e=et("edge-autosuggest"),n=Ep(),r=xd(),o=t||e,i=!!((s=be.instance().config().landingPage)!=null&&s.enableAutoSuggest);return o&&i&&r&&n}function wp(){return{isCompatibleLandingRoute:xd(),isAutoSuggestEnabled:jF(),isCentralComposerEnabled:dbe(),isStarterPromptsEnabled:hbe(),isWidgetSectionEnabled:DF(),isAppearanceOnHomeEnabled:fbe()}}function pbe(){var r;const t=Wt(),e=ve("cmc-landing"),n=!!((r=be.instance().config().landingPage)!=null&&r.enableLandingRoute);return e&&n&&t.endsWith("/landing")}function mbe(){const t=co(),e=Uv();return m.useCallback(async()=>{await t({to:"/agents",params:{},from:e.state.location.pathname})},[t,e.state.location.pathname])}function gbe(){var d,f,p;const t=ve("cross-promo-popup"),e=(p=(f=(d=be.instance().config().crossPromotion)==null?void 0:d.aggressive)==null?void 0:f.popup)==null?void 0:p.secondDay,n=pn(PE),r=!Av(n,lg),o=pn(XT),i=!Av(o,2*lg),s=pn(vg),a=Z_(s,2),c=D(RT);return m.useMemo(()=>!!(r&&t&&i&&a&&e&&(c===!0?!1:c!==void 0)),[e,t,i,a,r,c])}function su(t){const{name:e,status:n,eventName:r,source:o,isMobile:i}=t;K.trackEvent({name:e,data:{eventName:r,eventInfo_source:o,eventInfo_isMobilePlatform:i,eventInfo_status:n}})}function UF(){const[t,e]=tt(es),n=ve("cross-promo-popup"),r=ve("top-banner-cross-promo-desktop");let o="setting";(n||(t==null?void 0:t.type)==="popup")&&(o="popup"),r&&(o="topBanner"),(t==null?void 0:t.type)==="card"&&(o="bottomRightCard");const i=Te(Ir);return m.useCallback(()=>{const s=Date.now().toString();rr(XT,s);const a=pn(vg);rr(vg,(parseInt(a??"0",10)+1).toString()),su({name:"interaction",status:"Dismissed",eventName:"crossPromotionStripCard",source:o}),i(null),e(null)},[o,i,e])}function FF(t){m.useEffect(()=>{const e=()=>{t()};return It.on("languageChanged",e),()=>{It.off("languageChanged",e)}},[t])}function BF(t){const{onStartComplete:e}=t;m.useEffect(()=>{const n=()=>{e(),Kt.off("app:start-complete",n)};return Kt.on("app:start-complete",n),()=>{Kt.off("app:start-complete",n)}},[e])}const yA=1e3*60*60,vbe={revalidateOnFocus:!1,refreshInterval:yA};async function ybe(t,e,n){return Fn(t,yQ,{query:{"api-version":"2",supportedWidgets:e.join(","),...n?{intent:n}:{}},options:{method:"GET",headers:{"Content-Type":"application/json"}},analytics:{anonymousPath:t}}).then(r=>r.data)}function bbe(t){return t?["conversation-starter"]:["conversation-starter","feature-discovery","kickstarter","image-generation","conversation-starter-prompted-greeting"]}function Cbe(t){var e;if(t.length>0){if(((e=t[0])==null?void 0:e.type)==="textAndGreeting")return t;const n=t[0];if(n)return[n]}}function Sbe(t){const e=t.toLowerCase();return e==="imagegeneration"||e==="f1"}function Ebe(){var f;const t=Te(LL),[e,n]=m.useState(!1),r=m.useMemo(()=>{const p=$V();if(p&&Sbe(p))return p},[]),o=Te(hy),i=Xo("kill-landing-widgets"),s=!!((f=be.instance().config().landingPage)!=null&&f.shouldFetchWidgetsData);BF({onStartComplete:()=>{n(!0)}});const{data:a,isLoading:c,error:u,mutate:d}=il(e&&s?"/activation/widgets":null,p=>ybe(p,bbe(i),r),vbe);o(c),FF(d),m.useEffect(()=>{if(a!=null&&a.widgets){const p=Cbe(a.widgets);t(p)}},[a,t]),m.useEffect(()=>{u&&(K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"widgets",eventInfo_errorMessage:`${u}`,eventInfo_details:"Widget API error"}}),o(!1),t(void 0))},[u,t,o])}function wbe(){const t=D(iI),e=fy(),{isCompatibleLandingRoute:n}=wp(),r=t&&e&&n;return m.useMemo(()=>{if(r)return{type:"greeting",greetingMessage:t}},[t,r])}function Tbe(){const t=gt(ao);return B_(It.resolvedLanguage,t)}function Txe(){const{i18n:t}=Fe(),e=D(ao);return B_(t.resolvedLanguage,e)}const Ibe=100,_be=70,Abe=4,$c=st(),Tw=V(null),HF=V("");let qS=null;function kbe(t){$c.set(HF,t)}function jN(){return $c.get(HF)}function au(t){$c.set(L_,t)}function zF(){const t=$c.get(Tw);t&&(t.abort(),$c.set(Tw,null))}function xbe(){zF();const t=new AbortController;return $c.set(Tw,t),t}function Rbe(t,e,n){const r=new URL("https://www.bing.com/AS/Suggestions/V2?pt=page.chat"),[o,i]=n.split("-");return r.searchParams.set("lang",(o==null?void 0:o.toLowerCase())??"en"),r.searchParams.set("cc",(i==null?void 0:i.toLowerCase())??"us"),r.searchParams.set("qry",t.toLowerCase()),r.searchParams.set("cvid",e),et("encacsc")&&r.searchParams.set("ascopilot1","1"),et("enblsuggrndmzn")&&r.searchParams.set("ascopilot2","1"),et("encpsrchdata")&&r.searchParams.set("ascopilot3","1"),r.toString()}async function Pbe(t){const{query:e,conversationId:n,market:r,abortController:o}=t,i=Rbe(e,n,r);return fetch(i,{signal:o.signal}).then(s=>s.json())}function Nbe(t,e){const n=t.toLowerCase().split(/\s+/),r=e.st.toLowerCase().split(/\s+/);let o=0;for(let c=0;c<Math.min(n.length,r.length)&&n[c]===r[c];c+=1)o+=1;const i=e.st.split(/\s+/),s=i.slice(0,o).join(" "),a=i.slice(o).join(" ");return{original:e.st,sliced:a,prefill:s+(s?" ":"")}}async function Obe(t){var n;const e=gt(mt);if(e)try{const r=xbe(),o=Tbe(),i=performance.now(),s=await Pbe({query:t,conversationId:e,market:o,abortController:r});if(t===jN()){if(!s.s.length){au(null),aa({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:e})});return}const a=s.s.map(c=>Nbe(s.qc.q,c));if(!a.length){au(null),aa({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:e})});return}au({prefill:((n=a[0])==null?void 0:n.prefill)??t,conversationId:e,type:"BCT",suggestions:a.slice(0,Abe)}),Sc({feature:"fetchChatAutoComplete",duration:performance.now()-i})}}catch(r){r instanceof DOMException&&r.name==="AbortError"||K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"autosuggest",eventInfo_errorMessage:`${r}`,eventInfo_details:"Autosuggest API error"}}),t===jN()&&au(null)}}function Mbe(t){qS&&clearTimeout(qS),qS=setTimeout(()=>{Obe(t)},Ibe)}function VF(t){var o;const e=(o=be.instance().config().landingPage)==null?void 0:o.regexForAutoSuggest,n=et("autosuggest")||et("edge-autosuggest"),r=gt(mt);if(!n||!e||!e.test(t)||t.length>=_be){au(null);return}kbe(t),!t||!r?au(null):Mbe(t)}function xh(){zF(),$c.set(L_,null)}function Iw(){return Iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Iw.apply(null,arguments)}function Lbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Dbe=m.useLayoutEffect,jbe=function(e){var n=m.useRef(e);return Dbe(function(){n.current=e}),n},UN=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},Ube=function(e,n){var r=m.useRef();return m.useCallback(function(o){e.current=o,r.current&&UN(r.current,null),r.current=n,n&&UN(n,o)},[n])},FN={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Fbe=function(e){Object.keys(FN).forEach(function(n){e.style.setProperty(n,FN[n],"important")})},BN=Fbe,vr=null,HN=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Bbe(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),vr||(vr=document.createElement("textarea"),vr.setAttribute("tabindex","-1"),vr.setAttribute("aria-hidden","true"),BN(vr)),vr.parentNode===null&&document.body.appendChild(vr);var o=t.paddingSize,i=t.borderSize,s=t.sizingStyle,a=s.boxSizing;Object.keys(s).forEach(function(p){var g=p;vr.style[g]=s[g]}),BN(vr),vr.value=e;var c=HN(vr,t);vr.value=e,c=HN(vr,t),vr.value="x";var u=vr.scrollHeight-o,d=u*n;a==="border-box"&&(d=d+o+i),c=Math.max(d,c);var f=u*r;return a==="border-box"&&(f=f+o+i),c=Math.min(f,c),[c,u]}var zN=function(){},Hbe=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},zbe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Vbe=!!document.documentElement.currentStyle,$be=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=Hbe(zbe,n),o=r.boxSizing;if(o==="")return null;Vbe&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:s}},Gbe=$be;function $F(t,e,n){var r=jbe(n);m.useLayoutEffect(function(){var o=function(s){return r.current(s)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var qbe=function(e){$F(window,"resize",e)},Kbe=function(e){$F(document.fonts,"loadingdone",e)},Wbe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Ybe=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,i=e.minRows,s=e.onChange,a=s===void 0?zN:s,c=e.onHeightChange,u=c===void 0?zN:c,d=Lbe(e,Wbe),f=d.value!==void 0,p=m.useRef(null),g=Ube(p,n),v=m.useRef(0),y=m.useRef(),b=function(){var w=p.current,E=r&&y.current?y.current:Gbe(w);if(E){y.current=E;var T=Bbe(E,w.value||w.placeholder||"x",i,o),I=T[0],A=T[1];v.current!==I&&(v.current=I,w.style.setProperty("height",I+"px","important"),u(I,{rowHeight:A}))}},C=function(w){f||b(),a(w)};return m.useLayoutEffect(b),qbe(b),Kbe(b),m.createElement("textarea",Iw({},d,{onChange:C,ref:g}))},Qbe=m.forwardRef(Ybe);const Jbe=/@([^@]*)/g;function Xbe(t,e){return[...t.slice(0,e).matchAll(Jbe)].map(r=>({keyword:r[1],start:r.index,end:r.index+r[0].length}))}function Zbe(t,e){const n=Xbe(t,e);if(n.length===0)return;const r=n[n.length-1];return(r==null?void 0:r.end)===e?r:void 0}function eCe(t){const{className:e,textAreaRef:n,onMentionChange:r,textAreaValue:o,onCancelMention:i}=t,[s,a]=m.useState(void 0),{t:c}=Fe(),u=m.useRef(!1),d=m.useRef(r),f=m.useRef(null);m.useEffect(()=>{d.current=r},[r]);const p=m.useCallback(()=>{const y=n==null?void 0:n.current;if(!y)return;const b=y.selectionStart,C=y.selectionEnd;if(b===C){const S=Zbe(o,b);S?(f.current=S,a(w=>w!==S.keyword?S.keyword:w)):(a(void 0),f.current=null)}},[n,o]),g=m.useCallback(()=>{var w;const y=f.current;if(!y)return;const b=o.slice(0,y.start),C=o.slice(y.end),S=b+C;f.current=null,(w=d.current)==null||w.call(d,{isTrigger:!1}),i==null||i(S)},[i,o]);m.useEffect(()=>{o===""?(a(void 0),f.current=null):p()},[p,o,a]),m.useEffect(()=>{var y,b;if(!u.current){u.current=!0;return}s!==void 0?(y=d.current)==null||y.call(d,{isTrigger:!0,keyword:s}):(b=d.current)==null||b.call(d,{isTrigger:!1})},[s,d]),m.useEffect(()=>(Kt.on("mention:cancel",g),()=>{Kt.off("mention:cancel",g)}),[g]);const v=s==="";return h.jsxs("div",{className:G("pointer-events-none absolute z-0 overflow-auto",e),"aria-hidden":"true",children:[h.jsx("span",{className:"invisible select-none whitespace-pre-wrap break-words",children:o}),v&&h.jsx("span",{className:"text-foreground-550 dark:text-foreground-600",children:c("userInput.mentionPlaceholderText")})]})}function tCe(t,e){const n=m.useCallback(async r=>{r.key==="Enter"&&!r.shiftKey&&!e&&await t(r)},[t,e]);Es(n)}function nCe(t,e,n){const r=m.useRef(!1),o=m.useCallback(()=>{r.current=!0},[]),i=m.useCallback(()=>{setTimeout(()=>{r.current=!1},100)},[]);return tCe(async s=>{var a;(a=t.current)!=null&&a.contains(document.activeElement)&&!r.current&&(s.preventDefault(),await e())},n),{handleCompositionStart:o,handleCompositionEnd:i}}const rCe="pointer-events-none cursor-not-allowed select-none opacity-40 shadow-none",oCe=.25,bA="userInput",CA=m.forwardRef((t,e)=>{var Y;const{t:n}=Fe(),{inputValue:r,errorMessage:o,className:i,characterLimit:s,characterLimitErrorMessage:a,disabled:c,placeholder:u=n("userInput.placeholderText"),autoFocus:d=!0,testId:f,setInput:p,setError:g,onBlur:v,onChange:y,onFocus:b,onClick:C,onEnter:S,onKeyDown:w,onMentionIfEnabled:E,rightButtons:T,isMultiLines:I,"aria-autocomplete":A,"aria-controls":_}=t,j=Wt(),{isCentralComposerEnabled:R}=wp(),$=m.useRef(null),U=m.useRef(null),se=vA()||be.instance().config().enterKeyButtonEnabled,P=n("userInput.characterLimitText",{maxCharacters:s.toString()});m.useEffect(()=>{var Q;se&&((Q=U.current)==null||Q.focus())},[j,se]);const k=m.useCallback(Q=>{const{value:ee}=Q.target;p(ee),y&&y(ee),ee.length>s?g(a??P):g(null)},[p,y,s,g,a,P]);m.useImperativeHandle(e,()=>({updateInputValue:Q=>{const ee=Q(r);p(ee)},focus:()=>{var Q;(Q=U.current)==null||Q.focus()},blur:()=>{var Q;(Q=U.current)==null||Q.blur()},contains:Q=>{var ee;return((ee=U.current)==null?void 0:ee.contains(Q))??!1},updateSelectionRange:(Q,ee)=>{var oe;(oe=U.current)==null||oe.setSelectionRange(Q,ee)},getTextAreaRef(){return U}}),[r,p]),Es(Q=>{var ee,oe;Q.key==="Escape"&&((ee=$.current)!=null&&ee.contains(document.activeElement))&&((oe=U.current)==null||oe.blur()),w==null||w(Q)});const N=m.useCallback(Q=>{(Q.clipboardData.getData("text/plain")||"").length>0&&Q.stopPropagation()},[]),{handleCompositionStart:x,handleCompositionEnd:M}=nCe($,S,!se),te=(Y=be.instance().config().composer)==null?void 0:Y.reducedUserInputHeight;return h.jsxs(xe.div,{className:G("flex grow items-end",c&&rCe,i),onClick:()=>{var Q;C==null||C(),(Q=U.current)==null||Q.focus()},ref:$,onBlur:Q=>v==null?void 0:v(Q),layout:"preserve-aspect",children:[h.jsx(xe.div,{className:"relative grow overflow-hidden",layout:!0,children:h.jsx(xe.div,{className:"relative flex size-full cursor-text overflow-hidden text-black dark:text-white",layout:!0,children:h.jsxs(xe.div,{className:"flex grow flex-col gap-4 py-user-input",layout:!0,transition:{duration:0},children:[h.jsx("div",{className:G("overflow-y-auto px-4",{"max-h-[15dvh]":te,"max-h-[25dvh]":R&&!te,"max-h-dvh-0.5":!R&&!te},be.instance().config().showScrollbarOnHover?"scrollbar-container":""),children:h.jsxs("div",{className:"relative",children:[h.jsx("label",{className:G(["invisible block h-0",{"whitespace-nowrap":!I}]),htmlFor:"userInput",children:u}),h.jsx(Qbe,{className:G("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Ui("composer")??"text-base",Uf("composerVertical")),disabled:c,placeholder:u,ref:U,id:bA,role:"textbox","aria-autocomplete":A,"aria-controls":_,spellCheck:!1,value:r,enterKeyHint:"enter",onChange:k,onFocus:()=>b==null?void 0:b(r),onCompositionStart:x,onCompositionEnd:M,onPaste:N,autoFocus:d,"data-testid":f}),E&&h.jsx(eCe,{className:G("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Ui("composer")??"text-base",Uf("composerVertical"),"inset-0"),textAreaRef:U,textAreaValue:r,onMentionChange:E,onCancelMention:Q=>{p(Q),g(null)}})]})}),o&&h.jsx("div",{className:"flex min-h-6 select-none items-center px-4 text-foreground-600 text-xs",children:o})]})})}),h.jsx(xe.div,{className:G("relative bottom-0 my-1.5 flex h-9 items-center",T!=null&&T.length?"mx-1.5 w-auto gap-1":"w-0"),children:T==null?void 0:T.map((Q,ee)=>h.jsx(Tn,{children:h.jsx(xe.div,{initial:rt,animate:{...Ot,transition:{delay:oCe}},transition:{duration:_o.default},children:Q})},ee))})]})});CA.displayName="UserInput";const Rd=st(),pb=V(""),GF=V("starter-prompts"),qF=V(!0);function _w(t){Rd.set(pb,t)}function Aw(){Rd.set(pb,"")}function Jm(t){Rd.set(GF,t)}function Fa(t){Rd.set(qF,t)}function KF(t){Rd.set(sd,t)}function SA(){return D(pb)}function iCe(){return D(GF)}function sCe(){return D(qF)}function WF(t){const e=gt(pb),n=et("multiplecharacters"),r=e4({breakpoint:"sm"}),o=gt(dr),i=gt(Ir),s=o==="computerUse",c=jF()&&!i&&!s;t||Jm("starter-prompts"),Fa(e.length<=0||t.length===0),KF(!1),Rd.set(ry,void 0),n&&OF("typing"),r&&lJ(),c&&VF(t)}function Em(t){const{prompt:e}=t,n=document.querySelector(`#${bA}`);n&&(xh(),_w(e),WF(e),setTimeout(()=>{n.focus(),n.setSelectionRange(e.length,e.length)},0))}function Ixe(t,e){at({source:"shareMenu",scenario:t,sectionName:e})}function _xe(t){const{conversationId:e,messageId:n}=t;K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_impressionElement:"shareBlockedBanner",eventInfo_conversationId:e,eventInfo_messageId:n}})}function Axe(t){const{scenario:e,uploadedfileType:n,shareId:r,conversationId:o,messageIds:i}=t;K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickScenario:e,eventInfo_uploadFileType:n,eventInfo_customData:JSON.stringify({eventInfo_shareId:r,eventInfo_oneTurn_messageId:i?i.join(","):""}),eventInfo_conversationId:o}})}function kxe(t){K.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"receivePreview",eventInfo_impressionScenario:"shareAsLink",eventInfo_customData:JSON.stringify({eventInfo_shareId:t})}})}function xxe(){K.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"talkToCopilot"}})}function Rxe(t){const{cardType:e,messageId:n,conversationId:r,scenario:o}=t;Sn({source:"shareMenu",scenario:o,messageId:n,conversationId:r,cardType:e})}function Pxe(t){const{conversationId:e,messageId:n,errorName:r,errorMessage:o,errorStack:i}=t;K.trackEvent({name:"system",data:{eventName:"shareMessagesFailed",eventInfo_conversationId:e,eventInfo_messageId:n??"",eventInfo_error:r,eventInfo_errorMessage:o,eventInfo_errorStack:i}})}function aCe(){at({source:"continueClicked"})}function cCe(t,e,n){const r=st();return new Promise((o,i)=>{let s=null;e(r.get(t))&&o(r.get(t));const a=r.sub(t,()=>{const u=r.get(t);e(u)&&(a(),o(u))}),c=()=>{a(),s&&clearTimeout(s)};s=setTimeout(()=>{c(),i(new Error("Timeout waiting for atom to be ready"))},n)})}function lCe(t){return t.some(e=>e.author==="human"&&e.content.some(n=>n.type==="image"||n.type==="document"))}function Nxe(t){var n,r;const e=t.filter(o=>o.author==="human");if(e.length===1){const o=(r=(n=e[0])==null?void 0:n.content.find(i=>i.type==="image"||i.type==="document"))==null?void 0:r.type;return o==="image"?"image":o==="document"?"file":void 0}return lCe(t)?"image|file":void 0}function uCe(t){const n=new URL(t).pathname.split("/").filter(Boolean);return n[n.length-1]??null}async function VN(){aCe();const t=st(),e=uCe(window.location.href);t.set(iw,!0);try{const n=await dCe(`/conversations/shares/${e}/continue`),{id:r,title:o}=n.conversation,i=new Date().toISOString(),s={id:r,updatedAt:i,isNew:!1,title:o,history:[],streamingState:"idle",continuedAt:i};t.set(In,a=>{const c=new Map(a);return c.set(r,s),c}),t.set(mt,r),await fCe(r)}catch(n){throw Vs({title:It.t("composer.errors.continue.title"),message:It.t("composer.errors.continue.message")}),n}finally{t.set(iw,!1)}}async function dCe(t){return(await Fn(t,uQ,{options:{method:"POST"}})).data}const hCe=1e4;async function fCe(t){await cCe(In,e=>{const n=e.get(t);return((n==null?void 0:n.history)??[]).length>0},hCe)}function pCe(t,e,n){if(!t||!e)return!1;const r=t.getTime(),o=e.getTime(),i=n?n.getTime():null;return o<=r||i===null?!1:i<=r}const mCe=11,gCe=7,vCe=2,yCe=10,bCe=21,CCe=21,SCe=10,$N=l.object({daysActive:l.array(l.coerce.date())}),kw=l.object({result:l.enum(["dismissed","positive","negative"]),date:l.coerce.date(),dismissCounter:l.number()});function ECe(t){const e=new Date;let n=t;return t.some(r=>CT(r,e))||(n=[...t,e]),n.length>SCe?n.slice(-10):n}function wCe(){const t=so(c1,$N),e=(t==null?void 0:t.daysActive)??[],n=ECe(e),r=hg(new Date,gCe),o=n.filter(i=>EE(i,r)||CT(i,r)).length;return n!==e&&Ei(c1,$N,{daysActive:n}),o}function TCe(){const t=so(NE,kw);if(!t)return!1;const e=t.result==="positive",n=t.result==="negative"&&EE(t.date,hg(new Date,CCe)),r=t.result==="dismissed"&&EE(t.date,hg(new Date,t.dismissCounter>5?bCe:yCe));return e||n||r}function ICe(t,e){let n="popUpDismiss";e==="negative"?n="appThumbDown":e==="positive"&&(n="appThumbUp"),Sn({source:n,conversationId:t});const r=so(NE,kw),o=(r==null?void 0:r.result)==="dismissed"?r.dismissCounter:0,i={result:e,date:new Date,dismissCounter:e==="dismissed"?o+1:0};Ei(NE,kw,i)}function _Ce(t={},e=!1){const[n,r]=m.useState(!1),[o,i]=m.useState(!1),{onFocus:s,onBlur:a,onPointerDown:c}=t;return[n,{onFocus:d=>{(!o||e)&&r(!0),s==null||s(d)},onBlur:d=>{r(!1),i(!1),a==null||a(d)},onPointerDown:d=>{i(!0),c==null||c(d)}}]}const YF="bg-stone-300/20 dark:bg-midnight-350/5";function ACe(t,e){return t?t===!0?{animate:{...e}}:{animate:t}:{style:e}}function kCe(t,e,n,r){const o=e?r:n;return t?{animate:o}:{style:o}}function mb(t){const{children:e,size:n="md",position:r="default",nested:o=!1,background:i="default",stroke:s,className:a,containerRef:c,interactable:u=!1,label:d,animate:f,onFocus:p,onBlur:g,onPointerDown:v,onAnimationStart:y,onAnimationComplete:b,focusOnPointerDown:C,isSelected:S=!1,...w}=t,[E,T]=_Ce({onFocus:p,onBlur:g,onPointerDown:v},C),I=S||E,_=o&&(i==="acrylic"||i==="acrylic-thin"),j=_?KS[`${n}-${r}`]:xCe[`${n}-${r}`],R=_?KS[`${n}-${r}`]:RCe[`${n}-${r}`],$=_?KS[`${n}-${r}`]:PCe[`${n}-${r}`],U={default:"bg-white/45 dark:bg-midnight-350/10",darker:YF,acrylic:Fi,"acrylic-fallback":D7,"acrylic-thin":Ws,"acrylic-thin-fallback":B7,transparent:"bg-transparent"},se=u?{"aria-label":d,role:"button",tabIndex:0,...T,onKeyDown:x=>{var M;(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),(M=w.onClick)==null||M.call(w,x))}}:{onFocus:p,onBlur:g,onPointerDown:v},P=ACe(f,j),k=kCe(f,I,R,$),N=a&&!a.includes("relative")&&!a.includes("absolute")&&!a.includes("fixed")&&"relative";return h.jsxs(xe.div,{className:G(U[i],a,N,_&&"outline-1 outline-offset-2","isolate will-change-transform"),ref:c,onAnimationComplete:b,...P,...se,...w,children:[e,h.jsx(xe.div,{className:G(I&&"border-foreground-750 dark:border-white",s&&!I&&"border-black/8 dark:border-white/8",!s&&!I&&"border-transparent",!_&&"border-[20px]",_&&s&&!I&&"border",_&&s&&I&&"border-2","pointer-events-none absolute inset-0"),...k})]})}const xCe={"xs-default":{clipPath:"var(--clip-path-squircle-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-24)"},"md-default":{clipPath:"var(--clip-path-squircle-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-48-60)"}},RCe={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-48-60)"}},PCe={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-focused-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-focused-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-focused-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-focused-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-focused-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-focused-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-focused-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-focused-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-focused-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-focused-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-48-60)"}},KS={"xs-default":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-default":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-default":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-default":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-default":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:60,borderBottomRightRadius:60},"xs-top":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:12,borderBottomRightRadius:12},"sm-top":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:16,borderBottomRightRadius:16},"md-top":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:24,borderBottomRightRadius:24},"lg-top":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:36,borderBottomRightRadius:36},"xl-top":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xs-bottom":{borderTopLeftRadius:12,borderTopRightRadius:12,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-bottom":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-bottom":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-bottom":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-bottom":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:60,borderBottomRightRadius:60}};function gb({className:t,style:e}){return h.jsx("div",{className:G("animate-[shimmer_2s_infinite] bg-black/5 bg-gradient-to-r dark:bg-white/5","from-transparent via-background-150 to-transparent","bg-[length:50%_100%] bg-no-repeat",t),style:e})}function NCe(t){const{isImageOrVideo:e}=t;return h.jsx("div",{className:"flex flex-col gap-3 px-4",children:h.jsx(gb,{className:G("w-full",e?"h-[144px] sm:h-[176px]":"h-[300px]"),style:{clipPath:"var(--clip-path-squircle-36)"}})})}function GN(t){const{type:e,length:n}=t;if(e==="ads")return h.jsx("div",{});const r=e==="image"||e==="video",o=r&&n===1;return h.jsx(mb,{size:"md",stroke:!0,className:G("relative flex",o?"w-[300px]":"w-full","flex-col py-3 transition-opacity duration-300 ease-in-out"),children:h.jsx(NCe,{isImageOrVideo:r})})}function Oxe(t){if(t.type==="image")return t.images.length;if(t.type==="video")return t.videos.length}function OCe(t){switch(t){case"application/pdf":return"bg-system-red-350";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return"bg-midnight-300";case"text/plain":return"bg-spot-blue-300";case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return"bg-neutral-300"}}function MCe(t){const{t:e}=Fe();switch(t){case"application/pdf":return e("fileUpload.fileTypeDisplayPdf");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return e("fileUpload.fileTypeDisplayDoc");case"text/plain":return e("fileUpload.fileTypeDisplayTxt");case"application/json":return e("fileUpload.fileTypeDisplayJson");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return e("fileUpload.fileTypeDisplayXlsx");case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":return e("fileUpload.fileTypeDisplayPptx");case"text/csv":return e("fileUpload.fileTypeDisplayCsv");case"text/markdown":return e("fileUpload.fileTypeDisplayMarkdown");default:return e("fileUpload.fileTypeDisplayDefault")}}const LCe=m.lazy(()=>q(()=>Promise.resolve().then(()=>w4),void 0));function QF(t){var u;const{onRemove:e,filename:n,fileType:r,isUploading:o}=t,{t:i}=Fe(),s=OCe(r),a=MCe(r),c=(u=be.instance().config().composer)==null?void 0:u.smallAttachmentCard;return h.jsxs(xe.div,{className:G("relative flex justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-midnight-800/80 sm:w-56",{"mx-1 mt-2 h-[58px] w-auto flex-row":c,"h-32 w-44 flex-col":!c}),layout:"position",initial:rt,animate:Ot,exit:rt,children:[h.jsx("div",{className:G("grid aspect-square size-8 place-items-center self-start rounded-full text-black",s),children:h.jsx(B4,{fileType:r,className:"size-5"})}),h.jsxs("div",{className:G({"min-w-0 flex-1":c}),children:[h.jsx("p",{className:G("font-ligatures-none truncate text-xs",{"overflow-hidden whitespace-nowrap":c}),children:n}),h.jsx("p",{className:"text-foreground-600 text-2xs",children:a})]}),e&&!o&&h.jsx("button",{type:"button",title:i("fileUpload.removeFile"),"aria-label":i("fileUpload.removeFile"),onClick:e,className:"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 p-1 text-foreground-850 dark:border-white/20",children:h.jsx(Io,{className:"size-3"})}),h.jsx(xn,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45",children:o?h.jsxs(h.Fragment,{children:[h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:h.jsx(LCe,{type:"spinnerThemed",className:"size-11"})}),h.jsx(Vc,{msg:i("fileUpload.uploadingFile"),type:"polite"})]}):null})]})}function DCe(t){var g;const{uploadedFile:e,onRemove:n,scenario:r,isUploading:o}=t,{t:i}=Fe(),[s,a]=m.useState(null),[c,u]=m.useState(!1),d=i(r==="screenshot"?"composer.screenshotAdded":"composer.uploadedImageAltText");m.useEffect(()=>{const v=URL.createObjectURL(e);return u(!1),a(v),()=>{URL.revokeObjectURL(v)}},[e]);const f=v=>{u(!0),v.target instanceof HTMLImageElement&&URL.revokeObjectURL(v.target.src)};if(!s)return null;const p=(g=be.instance().config().composer)==null?void 0:g.smallAttachmentCard;return h.jsxs(xe.div,{className:G("relative max-w-fit shrink-0",{"mx-1 mt-2 h-[58px]":p,"h-32":!p}),layout:"position",initial:rt,animate:c?Ot:rt,exit:rt,transition:{delay:GU},children:[h.jsx(xe.img,{className:G("w-auto rounded-xl border border-black/8 object-contain shadow-inner dark:border-white/8",{"h-[58px]":p,"h-32":!p}),src:s,role:"img","aria-label":d,alt:d,onLoad:f,onError:f,draggable:!1}),h.jsx(Vc,{msg:d}),h.jsx(xe.button,{type:"button",title:i("composer.removeImage"),"aria-label":i("composer.removeImage"),onClick:n,className:"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 bg-white fill-black p-1 text-black",children:h.jsx(Io,{className:"size-3"})}),o&&h.jsxs(xn,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45",children:[h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:h.jsx(At,{type:"spinnerThemed",className:"size-11"})}),h.jsx(Vc,{msg:i("fileUpload.uploadingFile"),type:"polite"})]})]})}function jCe(t){const{attachments:e,onRemove:n}=t,{t:r}=Fe(),o=i=>{const s=e[i];s!=null&&s.file&&(n(i),fA({msg:r("fileUpload.attachmentRemoved"),type:"polite"}))};return h.jsx("div",{className:"relative flex max-h-64 min-w-0 max-w-full flex-wrap gap-2 overflow-y-auto overflow-x-hidden px-1",children:e.map(({file:i,error:s,processing:a,scenario:c},u)=>{if(s||!i)return null;const d=ys(i);return bp(d)?h.jsx(QF,{onRemove:()=>o(u),filename:i.name,fileType:d,isUploading:a},`attachment-${u}`):h.jsx(DCe,{uploadedFile:i,onRemove:()=>o(u),scenario:c,isUploading:a},`attachment-${u}`)})})}function UCe(t){const{text:e,onClick:n,className:r,testId:o}=t;return h.jsx(Ue,{title:"",onClick:n,className:bt("min-w-fit",r),color:"chip",testId:o,children:h.jsx("span",{className:"px-1",children:e})})}const FCe=1300;function EA(){var c;const t=!!((c=be.instance().config().landingPage)!=null&&c.enablePromptedGreetings),e=ve("intent-image-gen-prompted-greeting"),n=ve("qa-intent-image-gen-prompted-greeting"),r=ve("intent-f1-prompted-greeting"),o=ve("qa-intent-f1-prompted-greeting"),i=ve("conversation-starter-prompted-greeting-c1"),s=ve("qa-conversation-starter-prompted-greeting-c1"),a=ve("qa-conversation-starter-prompted-greeting-debug");return t&&(e||n||r||o||i||s||a)}function BCe(){const[t,e]=tt(YQ),n=Te(DL),r=EA();return m.useEffect(()=>{let o;return r?(e(!1),n(!1),o=window.setTimeout(()=>{e(!0),n(!0)},FCe)):(e(!1),n(!1)),()=>{o&&clearTimeout(o)}},[e,n,r]),t}function HCe(t){var v;const{className:e,onWidgetClick:n,pageName:r="chatPage"}=t,{isAppearanceOnHomeEnabled:o}=wp(),i=m.useRef(null),s=Yw(i,{once:!0,amount:"all"}),a=D(dd),c=(a==null?void 0:a.source)??"chatStarterPills",u=D(iI),d=EA(),f=D(DL),p=(v=be.instance().config().landingPage)==null?void 0:v.stackStarterChipsForSmallScreens;m.useEffect(()=>{s&&fd({page:r,scenario:c,element:"chatStarterPills"})},[s,c,r]);const g=y=>{const{prompt:b,id:C,actionType:S,uri:w,source:E,text:T,index:I}=y;at({pageName:r,source:c,scenario:C,customData:JSON.stringify({prompt:b,text:T,index:I})}),n({actionType:S,id:C,prompt:b,uri:w,source:E})};return d&&!f||!a||!["text","textAndGreeting"].includes(a.type)?null:h.jsx(xn,{role:"list","aria-label":"",className:bt("mx-auto flex w-full gap-2 p-2 sm:flex-wrap sm:p-4",p?"mb-1 flex-col items-end space-y-1 sm:flex-row":"scrollbar-container max-h-[110px] overflow-x-auto overflow-y-hidden",o?"sm:justify-center":"sm:justify-start",e),id:u??"",ref:i,children:a.items.map((y,b)=>{const{id:C,text:S}=y,{type:w}=y.action,E="prompt"in y.action?y.action.prompt:void 0,T="uri"in y.action?y.action.uri:void 0;switch(a.type){case"text":case"textAndGreeting":return h.jsx(UCe,{text:S,onClick:()=>g({prompt:E,uri:T,id:C,actionType:w,source:"pills",text:S,index:b}),className:G(p&&"w-auto min-w-min max-w-[80%] text-start"),testId:`starter-prompt-${C}`},C);default:return null}})})}function zCe(t){const{imgAlt:e,imgSrc:n,text:r,className:o,onClick:i,fetchPriority:s}=t,[a,c]=m.useState(!1);return h.jsx("div",{className:"aspect-[155/190] w-full min-w-[100px] max-w-full sm:w-[155px] sm:min-w-[120px] sm:max-w-[155px]",children:h.jsxs("button",{className:bt("relative flex h-full w-full flex-col items-center gap-2 rounded-lg bg-white p-2 shadow-md transition-all duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025] hover:shadow-lg dark:bg-slate-700",o),onClick:i,type:"button",children:[!a&&h.jsx(gb,{className:"aspect-square w-full rounded-md"}),h.jsx("img",{className:bt("aspect-square w-full rounded-md object-cover",a?"opacity-100":"opacity-0"),src:n,alt:e,onLoad:()=>c(!0),onError:()=>c(!1),fetchPriority:s}),h.jsx("div",{className:"flex w-full flex-1 items-center justify-center px-2",children:h.jsx("p",{className:"truncate text-center text-xs-strong",children:r})})]})})}function qN(t){const{className:e,text:n,imgSrc:r,imgAlt:o,variant:i,onClick:s,fetchPriority:a}=t,[c,u]=m.useState(!1);return h.jsx("div",{className:bt("max-w-full drop-shadow-md transition-shadow hover:drop-shadow-lg sm:min-w-[120px]",i==="kickstarter"&&"aspect-[166/200] w-[166px] sm:max-w-[166px]",i==="feature-discovery"&&"aspect-[155/200] w-[155px] sm:max-w-[155px]"),children:h.jsxs(mb,{interactable:!0,stroke:!0,onClick:s,className:bt("relative h-full w-full transition-transform duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025]",e),children:[!c&&h.jsx(gb,{className:"absolute size-full"}),h.jsx("img",{src:r,alt:o,className:bt("absolute size-full object-cover",c?"opacity-100":"opacity-0"),onLoad:()=>u(!0),onError:()=>u(!1),fetchPriority:a}),c&&h.jsx("div",{className:"absolute z-10 flex size-full flex-col px-4 py-5",children:h.jsx("p",{className:G("mt-auto line-clamp-2 overflow-hidden text-center text-xs-strong",i==="feature-discovery"&&"text-white/80",i==="kickstarter"&&"text-white"),children:n})})]})})}const VCe={deepLink:"deepLink",prefillComposer:"chatBox",sendMessage:"chat"};function $Ce(t){const{className:e,onWidgetClick:n}=t,r=tr({breakpoint:"md"}),o=lo(),i=D(ba),s=o&&i&&!r,a=m.useRef(null),c=D(dd),u=Yw(a,{once:!0,amount:"all"});m.useEffect(()=>{u&&c&&fd({page:"chatPage",scenario:"widgets",element:c.id,customData:JSON.stringify({visibleItems:c.items.map(p=>p.id)})})},[u,c]);const d=p=>{const{prompt:g,id:v,actionType:y,uri:b,widgetName:C,source:S}=p,w=y==="deepLink"?JSON.stringify({uri:b}):void 0;at({pageName:"chatPage",sectionName:"widgets",scenario:C,source:v,destination:VCe[y],customData:w}),n({actionType:y,id:v,prompt:g,uri:b,source:S})},f=p=>{const g=new URL(p);return g.searchParams.set("o","7"),g.searchParams.set("rm","3"),g.toString()};return!c||c.type!=="textAndImage"?null:h.jsx("div",{className:bt("grid w-full grid-cols-2 gap-6 px-2 sm:flex sm:items-center",s&&"scrollbar-container justify-start overflow-x-auto bp-960:justify-center bp-960:overflow-x-hidden",!s&&"sm:justify-center",e),ref:a,children:c.items.map((p,g)=>{const{id:v,text:y}=p,{type:b}=p.action,C="prompt"in p.action?p.action.prompt:void 0,S="uri"in p.action?p.action.uri:void 0,{altText:w,url:E}=p.thumbnail,T={actionType:b,id:v,prompt:C,uri:S,widgetName:c.id,source:"widgets"},I=g%2===0?"-rotate-2 hover:rotate-0":"rotate-2 hover:rotate-0";switch(c.id){case"kickstarter":return h.jsx(qN,{text:y,imgSrc:f(E),imgAlt:w,variant:"kickstarter",onClick:()=>d(T),className:I,fetchPriority:"high"},v);case"feature-discovery":return h.jsx(qN,{text:y,imgSrc:f(E),imgAlt:w,variant:"feature-discovery",onClick:()=>d(T),className:I,fetchPriority:"high"},v);case"image-generation":return h.jsx(zCe,{text:y,imgSrc:f(E),imgAlt:w,className:I,onClick:()=>d(T),fetchPriority:"high"},v);default:return null}})})}const JF=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M11.7498 3C12.1295 3 12.4434 3.28201 12.4931 3.64808L12.5 3.74985L12.5012 11H19.7543C20.1685 11 20.5043 11.3358 20.5043 11.75C20.5043 12.1297 20.2221 12.4435 19.8561 12.4932L19.7543 12.5H12.5012L12.5032 19.7491C12.5033 20.1633 12.1676 20.4993 11.7534 20.4993C11.3737 20.4993 11.0598 20.2173 11.0101 19.8512L11.0032 19.7494L11.0012 12.5H3.7522C3.33798 12.5 3.0022 12.1642 3.0022 11.75C3.0022 11.3703 3.28435 11.0565 3.65043 11.0068L3.7522 11H11.0012L11 3.75015C10.9999 3.33594 11.3356 3 11.7498 3Z"})),Mxe=Object.freeze(Object.defineProperty({__proto__:null,default:JF},Symbol.toStringTag,{value:"Module"}));function GCe({onRef:t,onClick:e}){const{t:n}=Fe(),r=D(Jy);return h.jsx(Xs,{data:{title:n("common.open"),testId:"plus-button",isVisible:!0,ariaExpanded:r==="plus",onClick:e},ref:t,children:h.jsx(JF,{className:"size-6","aria-hidden":!0})})}const XF=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.92188 11.8237H19.4529C19.4529 11.8237 19.4529 9.89366 19.4529 9.6831C18.6246 6.41578 15.6854 4 12.1862 4C9.56739 4 7.26337 5.35396 5.92188 7.4044C5.92188 8.82754 5.92188 11.8237 5.92188 11.8237Z",fill:"#0364B8"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.15227 8.30349L9.15203 8.30431C8.23597 7.73294 7.1565 7.40234 6.00013 7.40234C5.97439 7.40234 5.94909 7.404 5.92344 7.40431C2.64519 7.44587 0 10.1364 0 13.4511C0 14.7371 0.399257 15.9285 1.07801 16.9086H14.1906V11.3459L9.15227 8.30349Z",fill:"#0078D4"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4514 9.68327C19.3425 9.67596 19.233 9.6709 19.1223 9.6709C18.4357 9.6709 17.7825 9.81469 17.1899 10.073L14.1875 11.3461V16.9176H23.4143C23.7861 16.2237 23.9974 15.4296 23.9974 14.5855C23.9974 11.9828 21.9902 9.85405 19.4514 9.68327Z",fill:"#1490DF"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1602 14.3467L17.9151 13.5949L15.0613 11.8716L14.1907 11.3459L11.8941 12.3202L7.49635 14.1859L5.52123 15.0238L1.07812 16.9087C2.16256 18.4747 3.96212 19.5 6.00025 19.5H19.1255C20.9807 19.5 22.5937 18.4551 23.4175 16.9175L19.1602 14.3467Z",fill:"#28A8EA"})),Lxe=Object.freeze(Object.defineProperty({__proto__:null,default:XF},Symbol.toStringTag,{value:"Module"})),wA=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",null,m.createElement("path",{id:"Shape",d:"M11.7717 3.74212C14.1132 1.39853 17.9121 1.39853 20.2553 3.74168C22.5384 6.02474 22.5969 9.68995 20.4309 12.0439L20.2428 12.2413L11.4427 21.0395L11.4062 21.0697C9.94492 22.3865 7.69092 22.3417 6.28355 20.9344C4.96453 19.6153 4.84241 17.5527 5.9172 16.096C5.94054 16.0506 5.96879 16.0068 6.002 15.9657L6.05556 15.9061L6.14247 15.8183L6.28355 15.6704L6.28647 15.6733L13.7222 8.21901C13.9881 7.95239 14.4047 7.92763 14.6986 8.14509L14.7829 8.2176C15.0495 8.48351 15.0742 8.90014 14.8568 9.19404L14.7843 9.27826L7.18966 16.8913C6.47202 17.7669 6.5219 19.0612 7.3393 19.8786C8.16836 20.7077 9.48801 20.7472 10.3638 19.997L19.1965 11.1666C20.952 9.40894 20.952 6.5597 19.1946 4.80234C17.4922 3.0999 14.765 3.0467 12.9986 4.64274L12.8307 4.80234L12.8181 4.81665L3.28179 14.353C2.9889 14.6459 2.51403 14.6459 2.22113 14.353C1.95487 14.0867 1.93066 13.67 2.14852 13.3764L2.22113 13.2923L11.77 3.74168L11.7717 3.74212Z",fill:"currentColor"}))),Dxe=Object.freeze(Object.defineProperty({__proto__:null,default:wA},Symbol.toStringTag,{value:"Module"})),ZF=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",...t},m.createElement("path",{fill:"currentColor",d:"M6.3 3A3.2 3.2 0 0 0 3 6.3v11.4C3 19.6 4.5 21 6.3 21h11.4c1.8 0 3.3-1.5 3.3-3.3V6.3C21 4.5 19.5 3 17.7 3H6.3ZM4.5 6.3c0-1 .8-1.8 1.8-1.8h11.4c1 0 1.8.8 1.8 1.8v11.4c0 1-.8 1.8-1.8 1.8H6.3c-1 0-1.8-.8-1.8-1.8V6.3ZM8 7.5c-.3 0-.5.2-.5.5v2.3a.8.8 0 0 1-1.5 0V8c0-1.1.9-2 2-2h2.3a.8.8 0 0 1 0 1.5H8Zm0 9a.5.5 0 0 1-.5-.5v-2.3a.8.8 0 0 0-1.5 0V16c0 1.1.9 2 2 2h2.3a.8.8 0 0 0 0-1.5H8ZM16.5 8c0-.3-.2-.5-.5-.5h-2.3a.8.8 0 0 1 0-1.5H16a2 2 0 0 1 2 2v2.3a.8.8 0 0 1-1.5 0V8Zm-.5 8.5c.3 0 .5-.2.5-.5v-2.3a.8.8 0 0 1 1.5 0V16a2 2 0 0 1-2 2h-2.3a.8.8 0 0 1 0-1.5H16Z"})),jxe=Object.freeze(Object.defineProperty({__proto__:null,default:ZF},Symbol.toStringTag,{value:"Module"})),e6=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M3 5.75A2.75 2.75 0 0 1 5.75 3h12.5A2.75 2.75 0 0 1 21 5.75v6.272a6.471 6.471 0 0 0-1.5-.709V5.75c0-.69-.56-1.25-1.25-1.25H5.75c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25h5.563c.173.534.412 1.037.709 1.5H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM23 17.5a5.5 5.5 0 1 0-11 0 5.5 5.5 0 0 0 11 0Zm-5 .5.001 2.503a.5.5 0 1 1-1 0V18h-2.505a.5.5 0 0 1 0-1H17v-2.5a.5.5 0 1 1 1 0V17h2.497a.5.5 0 0 1 0 1H18Z"})),Uxe=Object.freeze(Object.defineProperty({__proto__:null,default:e6},Symbol.toStringTag,{value:"Module"})),hh=G("flex w-full flex-row items-center gap-2");function qCe(t){const{startNewChatDisabled:e,startNewConversation:n,selectFile:r,selectOneDriveFile:o,takeScreenshot:i,selectUserOpenedTabs:s,uploadButtonDisabled:a=!1}=t,c=m.useRef(null),{t:u}=Fe(),d=D(id),f=D(mt),p=m.useRef(void 0);return Sp(c),m.useEffect(()=>{i&&p.current!==f&&bve(f)},[f,i]),h.jsxs(dl,{className:"pointer-events-auto relative flex flex-col rounded-2xl contrast-more:border-2","data-testid":"composer-plus-menu",role:"menu",circular:!0,children:[h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:"ps-3.5",title:u("composer.startNewChat"),onClick:n,testId:"new-chat-button",ref:c,disabled:e,children:h.jsxs("div",{className:hh,children:[h.jsx(ib,{className:"size-5"}),u("composer.startNewChatShort")]})}),r&&!d&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.upload"),disabled:a,testId:"file-upload-button",onClick:g=>{g.preventDefault(),r()},children:h.jsxs("div",{className:hh,children:[h.jsx(wA,{className:"size-6"})," ",u("composer.upload")]})}),i&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.takeScreenshot"),onClick:g=>{g.preventDefault(),g.stopPropagation(),i(),wve(f)},children:h.jsxs("div",{className:hh,children:[h.jsx(ZF,{className:"size-6"}),u("composer.takeScreenshotShort")]})}),o&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.addFromOneDrive"),onClick:g=>{g.preventDefault(),g.stopPropagation(),o()},children:h.jsxs("div",{className:hh,children:[h.jsx(XF,{className:"size-6"}),u("composer.addFromOneDrive")]})}),s&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.multiTabs.addTab"),onClick:g=>{g.preventDefault(),g.stopPropagation(),s()},children:h.jsxs("div",{className:hh,children:[h.jsx(e6,{className:"size-6"}),u("composer.multiTabs.addTab")]})})]})}function KCe(){const[t,e]=m.useState(!1);return m.useEffect(()=>{async function n(){const{uiOverrides:{showScreenshotButton:r=()=>Promise.resolve(!1)}={}}=be.instance().config(),o=await r();e(o)}n().catch(()=>{})},[]),t}function WCe({startNewChatDisabled:t,uploadButtonDisabled:e=!1,onStartNewConversation:n,onSelectFileIfEnabled:r,onSelectOneDriveFileIfEnabled:o,onTakeScreenshot:i,onSelectUserOpenedTabsIfEnabled:s}){const[a,c]=tt(Jy),u=KCe(),d=a==="plus";return h.jsx(W_,{isOpen:d,onIsOpenChange:f=>c(p=>f?"plus":p==="plus"?null:p),renderTrigger:f=>h.jsx(GCe,{onRef:f.ref,onClick:p=>{f.onClick(p),at({source:"composerPlusButton",pageName:"chatPage",customData:JSON.stringify({isOpen:d})})}}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:bt(Fi,"p-2"),children:h.jsx(qCe,{startNewChatDisabled:t,uploadButtonDisabled:e,startNewConversation:n,selectFile:r,selectOneDriveFile:o,takeScreenshot:u?i:void 0,selectUserOpenedTabs:s})})}function t6(){const t=Q_(),e=D(mt),n=D(kT),r=m.useCallback(async({url:i,args:s,conversationId:a})=>{const c=await Fn(i,mL,{query:s,analytics:{anonymousPath:"/conversations/*/history"},parseOptions:{safe:!0}}).then(u=>u.data);return c.results.length>0&&(c.results=LF(c.results),t(a,u=>{var d;u.length===0&&YCe((d=c.results.at(0))==null?void 0:d.createdAt),c.results.reverse(),u.unshift(...c.results)})),c},[t]);return G_(r,(i,s)=>{if(!e||n||!(s!=null&&s.next)&&i>0)return null;const a={url:`/conversations/${e}/history`,conversationId:e};return s!=null&&s.next&&(a.args={cursor:s.next}),a})}function YCe(t){try{const e=gt(Po),n=e==null?void 0:e.updatedAt;if(!t||!n)return;const r=new Date(n),o=new Date(t);(r.getTime()-o.getTime())/1e3/60>1&&K.trackEvent({name:"system",data:{eventName:"historyUpdatedAtDiscrepancy",eventInfo_conversationId:e.id,eventInfo_conversationUpdatedAt:n,eventInfo_lastMessageCreatedAt:t}})}catch{}}function QCe(){const t=m.useRef(0),e=m.useRef(0),n=m.useRef(0),r=m.useRef(0),o=m.useRef(0),i=m.useRef(0),s=m.useRef(""),a=m.useRef(""),c=m.useRef(""),u=m.useRef(!1),d=m.useRef(!1),f=m.useRef(!1),p=m.useRef(!1),g=m.useRef(!1),v=m.useRef(!1),y=m.useRef(!1),b=m.useRef(!1),C=m.useRef(void 0),S=m.useCallback(M=>{t.current=performance.now(),C.current=M?"appearance":void 0},[]),w=m.useCallback(M=>{o.current=0,i.current=0,u.current=!1,e.current=performance.now(),s.current=M,a.current=crypto.randomUUID(),K.trackEvent({name:"interaction",data:{eventName:"copilotCompose",eventInfo_conversationId:s.current,eventInfo_inputMethod:"voice",eventInfo_landingPage:K.getLandingPage(),eventInfo_scenario:C.current}}),K.trackEvent({name:"interaction",data:{eventName:"audioStartSent",eventInfo_conversationId:s.current,eventInfo_duration:e.current-t.current,eventInfo_scenario:C.current}})},[]),E=m.useCallback(M=>{d.current=!1,f.current=!1,p.current=!1,g.current=!1,v.current=!1,y.current=!1,b.current=!1,c.current=M,n.current=performance.now(),Sg.onStartMessage(M,n.current),i.current&&K.trackEvent({name:"system",data:{eventName:"copilotAudioReqtoResp",eventInfo_conversationId:s.current,eventInfo_messageId:c.current,eventInfo_duration:n.current-i.current,eventInfo_scenario:C.current}}),K.trackEvent({name:"system",data:{eventName:"copilotAudioStartMessage",eventInfo_conversationId:s.current,eventInfo_messageId:c.current,eventInfo_scenario:C.current,eventInfo_firstTurn:!u.current}})},[]),T=m.useCallback(()=>{d.current=!0},[]),I=m.useCallback(M=>{M===c.current&&(f.current=!0)},[]),A=m.useCallback(()=>{o.current=performance.now()},[]),_=m.useCallback(()=>{p.current=!0,!(!u.current||!c.current)&&(r.current=performance.now(),g.current||(g.current=!0,n.current&&K.trackEvent({name:"system",data:{eventName:"copilotAudioResptoReceived",eventInfo_conversationId:s.current,eventInfo_messageId:c.current,eventInfo_duration:r.current-n.current,eventInfo_scenario:C.current}}),i.current&&K.trackEvent({name:"system",data:{eventName:"copilotAudioFirstTokenReceived",eventInfo_conversationId:s.current,eventInfo_messageId:c.current,eventInfo_duration:r.current-i.current,eventInfo_scenario:C.current}})))},[]),j=m.useCallback(()=>{i.current=performance.now(),Sg.onSpeechEndDetected(i.current),o.current&&K.trackEvent({name:"system",data:{eventName:"copilotAudioInput",eventInfo_conversationId:s.current,eventInfo_duration:i.current-o.current,eventInfo_scenario:C.current}})},[]),R=m.useCallback(()=>{y.current||(y.current=!0,K.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationReceived",eventInfo_conversationId:s.current,eventInfo_duration:performance.now()-i.current,eventInfo_messageId:c.current,eventInfo_scenario:C.current}}))},[]),$=m.useCallback(M=>{const{messageId:te,voiceType:Y}=M;if(K.trackEvent({name:"system",data:{eventName:"copilotAudioMessageDone",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_messageId:te,eventInfo_scenario:C.current,eventInfo_firstTurn:!u.current,eventInfo_transcriptReceived:d.current,eventInfo_textReceived:f.current,eventInfo_audioReceived:p.current}}),!u.current){u.current=!0,K.trackEvent({name:"system",data:{eventName:"copilotAudioCallSetUp",eventInfo_duration:performance.now()-t.current,eventInfo_conversationId:s.current,eventInfo_responseVoiceType:Y,eventInfo_scenario:C.current}});return}!v.current&&te===c.current&&(v.current=!0,i.current&&K.trackEvent({name:"system",data:{eventName:"copilotAudioLastTokenReceived",eventInfo_conversationId:s.current,eventInfo_messageId:te,eventInfo_duration:r.current-i.current,eventInfo_scenario:C.current}}),K.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_inputMethod:"voice",eventInfo_responseMethod:"voice",eventInfo_conversationId:s.current,eventInfo_messageId:c.current,eventInfo_responseVoiceType:Y,eventInfo_landingPage:K.getLandingPage(),eventInfo_scenario:C.current}}))},[]),U=m.useCallback(M=>{const te=performance.now()-e.current;a.current="",K.trackEvent({name:"system",data:{eventName:"copilotAudioCallEnd",eventInfo_conversationId:s.current,eventInfo_duration:te,eventInfo_numMessages:M,eventInfo_scenario:C.current}})},[]),se=m.useCallback(M=>{K.trackEvent({name:"system",data:{eventName:"copilotAudioStartFailed",eventInfo_conversationId:s.current,eventInfo_duration:performance.now()-e.current,eventInfo_reason:M,reason:M,eventInfo_scenario:C.current}})},[]),P=m.useCallback(M=>{K.trackEvent({name:"system",data:{eventName:"copilotAudioStartTimeout",eventInfo_conversationId:s.current,eventInfo_duration:M,eventInfo_scenario:C.current}})},[]),k=m.useCallback(M=>{K.trackEvent({name:"system",data:{eventName:"copilotAudioTerminated",eventInfo_conversationId:s.current,eventInfo_duration:performance.now()-e.current,eventInfo_reason:M,reason:M,eventInfo_scenario:C.current}})},[]),N=m.useCallback(M=>{K.trackEvent({name:"system",data:{eventName:"copilotAudioError",eventInfo_conversationId:s.current,eventInfo_duration:performance.now()-e.current,eventInfo_errorCode:M,eventInfo_scenario:C.current}})},[]),x=m.useCallback(()=>{if(!b.current){b.current=!0;const M=Math.round(performance.now()-(i.current||n.current));K.trackEvent({name:"system",data:{eventName:"copilotAudioStart",eventInfo_conversationId:s.current,eventInfo_messageId:c.current,eventInfo_duration:M,eventInfo_scenario:C.current}})}},[]);return m.useMemo(()=>({onBeforeStartCall:S,onAudioStartFailed:se,onAudioStartTimeout:P,onStartCall:w,onStartMessage:E,onTranscriptReceived:T,onTextReceived:I,onAudioInterrupt:A,onAudioReceived:_,onSpeechEndDetected:j,onCharacterAnimationReceived:R,onMessageDone:$,onTerminated:k,onEndCall:U,onError:N,onAudioStart:x}),[S,se,P,w,E,T,I,A,_,R,j,$,k,U,N,x])}const JCe=V(!1),XCe=V(null),xw=V(!1),WS=V(!1),Rw=V(0),Pw=V(0),ZCe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_ending-BxIIadI4.mp3",eSe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_opening-CKuCznU5.mp3";class tSe{constructor(){Z(this,"firstEventProcessed",null);Z(this,"events",[]);Z(this,"aiMessageNeedsPadding",!1);Z(this,"aiPcmParts",[]);Z(this,"totalAIBytes",0);Z(this,"userPcmParts",[]);Z(this,"totalUserBytes",0);Z(this,"conversationId",null)}reset(){this.firstEventProcessed=null,this.events=[],this.aiMessageNeedsPadding=!1,this.aiPcmParts=[],this.totalAIBytes=0,this.userPcmParts=[],this.totalUserBytes=0,this.conversationId=null}recordEvent(e){const n=Date.now();this.firstEventProcessed===null&&(this.firstEventProcessed=n),this.events.push({...e,timestamp:n-this.firstEventProcessed})}async download(){}saveFile(e,n){const r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}processEvents(){for(const e of this.events)e.event==="userAudio"?this.addUserAudioData(e.audio):e.event==="audioEnd"?this.trimAiToUser():e.event==="startMessage"?this.onNewAiMessage():e.event==="audio"?this.addAIAudioData(e.audio):e.event==="interruptAudio"&&this.trimAiToUser()}onNewAiMessage(){this.aiMessageNeedsPadding=!0}padAiAudioData(){if(!this.aiMessageNeedsPadding)return;this.aiMessageNeedsPadding=!1;const e=2;let n=this.totalUserBytes-this.totalAIBytes;if(n<=0)return;n%e!==0&&(n+=e-n%e);const r=new Uint8Array(n);this.aiPcmParts.push(r),this.totalAIBytes+=n}trimAiToUser(){const e=this.totalUserBytes;let n=this.totalAIBytes-e;if(!(n<=0))for(let r=this.aiPcmParts.length-1;r>=0&&n>0;r-=1){const o=this.aiPcmParts[r];if(o)if(o.length<=n)n-=o.length,this.totalAIBytes-=o.length,this.aiPcmParts.pop();else{const i=o.length-n;this.aiPcmParts[r]=o.subarray(0,i),this.totalAIBytes-=n,n=0}}}addAIAudioData(e){this.padAiAudioData();const n=atob(e),r=new Uint8Array(n.length);for(let o=0;o<n.length;o+=1)r[o]=n.charCodeAt(o);this.aiPcmParts.push(r),this.totalAIBytes+=r.length}addUserAudioData(e){const n=atob(e),r=new Uint8Array(n.length);for(let o=0;o<n.length;o+=1)r[o]=n.charCodeAt(o);this.userPcmParts.push(r),this.totalUserBytes+=r.length}bytesToWavBlob(e,n,r,o){const i=e.length,s=new ArrayBuffer(44),a=new DataView(s),c=(p,g)=>{let v=0;for(const y of g)a.setUint8(p+v,y.charCodeAt(0)),v+=1};c(0,"RIFF"),a.setUint32(4,36+i,!0),c(8,"WAVE"),c(12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,r,!0),a.setUint32(24,n,!0);const u=Math.trunc(r*o/8);a.setUint32(28,n*u,!0),a.setUint16(32,u,!0),a.setUint16(34,o,!0),c(36,"data"),a.setUint32(40,i,!0);const d=new Uint8Array(44+i);return d.set(new Uint8Array(s),0),d.set(e,44),new Blob([d],{type:"audio/wav"})}combineTracks(){const r=Math.trunc(2),o=this.concatParts(this.userPcmParts,this.totalUserBytes),i=this.concatParts(this.aiPcmParts,this.totalAIBytes),s=Math.floor(o.length/r),a=Math.floor(i.length/r),c=Math.max(s,a),u=new Int16Array(o.buffer,o.byteOffset,s),d=new Int16Array(i.buffer,i.byteOffset,a),f=new Int16Array(c*2);for(let p=0;p<c;p+=1){const g=p<s?u[p]:0;typeof g=="number"&&(f[p*2]=g);const v=p<a?d[p]:0;typeof v=="number"&&(f[p*2+1]=v)}return this.bytesToWavBlob(new Uint8Array(f.buffer),24e3,2,16)}concatParts(e,n){const r=new Uint8Array(n);let o=0;for(const i of e)r.set(i,o),o+=i.length;return r}processTextLog(){let e=!1,n=`Audio Recorder Log for conversation ${this.conversationId}:

`;for(const r of this.events){const{event:o,timestamp:i}=r;if(o==="userAudio")continue;if(o==="audio"){e||(n+=`${i}ms — server-to-client — ai audio stream
`,e=!0);continue}e=!1,n+=`${i}ms — ${o==="audioEnd"||o==="audioStart"?"client-to-server":"server-to-client"} — ${o}`,o==="audioStartFailed"&&(n+=` — ${r.reason}`),n+=`
`}return n}}const nSe=new tSe;class rSe{constructor(e={}){Z(this,"options");Z(this,"antiAliasFilter");this.options={windowSize:e.windowSize??1024,overlap:e.overlap??.7,tolerance:e.tolerance??200,useAntiAlias:e.useAntiAlias??!0,correlationWindowMultiplier:e.correlationWindowMultiplier??1.5,useSampleRateAwareScaling:e.useSampleRateAwareScaling??!1,useFirstFrameCompensation:e.useFirstFrameCompensation??!0},this.options.useAntiAlias&&this.initAntiAliasFilter()}initAntiAliasFilter(){this.antiAliasFilter=new Float32Array([.03,.09,.2,.36,.2,.09,.03])}getSampleRateScaling(e){if(!this.options.useSampleRateAwareScaling||!e)return 1;const r=e/24e3;return Math.max(.5,Math.min(2,r))}process(e,n=1,r){const o=this.getSampleRateScaling(r),{tolerance:i}=this.options;let{windowSize:s}=this.options;const{overlap:a}=this.options,{useAntiAlias:c}=this.options;if(this.options.useSampleRateAwareScaling&&o!==1&&(s=Math.round(s*o),s=Math.max(256,Math.min(4096,s))),Math.abs(n-1)<.001)return e;const u=c?this.applyAntiAliasFilter(e):e,d=Math.round(s*(1-a)),f=Math.round(d*n),p=Math.ceil(u.length/n),g=new Float32Array(p),v=this.createImprovedWindow(s),y=Math.min(s,u.length,p);this.overlapAddFrameEnhanced(u,0,g,0,v,y);let b=0,C=0;for(;b<p-s&&!(C>=u.length-s-i);){const S=this.findBestMatchEnhanced(u,C,g,b,s,i);this.overlapAddFrameEnhanced(u,S,g,b,v,s),b+=d,C+=f}return g}applyAntiAliasFilter(e){if(!this.antiAliasFilter||this.antiAliasFilter.length===0)return e;const n=new Float32Array(e.length),r=this.antiAliasFilter.length,o=Math.floor(r/2);for(let i=0;i<e.length;i+=1){let s=0;for(let a=0;a<r;a+=1){const c=i-o+a;c>=0&&c<e.length&&(s+=(e[c]??0)*(this.antiAliasFilter[a]??0))}n[i]=s}return n}createImprovedWindow(e){const n=new Float32Array(e);for(let r=0;r<e;r+=1){const o=2*Math.PI*r/(e-1),i=.5*(1-Math.cos(o)),s=.04*Math.cos(2*o);n[r]=i-s}return n}setOptions(e){this.options={...this.options,...e}}overlapAddFrameEnhanced(e,n,r,o,i,s){const a=Math.min(o+s,r.length),c=Math.min(s,e.length-n,a-o),u=o===0,d=this.options.useFirstFrameCompensation??!0;let f=1;if(u&&d){const{windowSize:p,overlap:g}=this.options;p>=1700&&g>=.8?f=1.5:p>=1400&&g>=.75?f=1.15:p>=1200&&g>=.7?f=1.25:f=1.2}for(let p=0;p<c;p+=1){const g=e[n+p]??0,v=i[p]??0,y=o+p;let b=1;o>0&&p<s*.1&&(b=p/(s*.1));let C=1;if(u&&d){const S=Math.max(.1,1-p/s*.9);C=1+(f-1)*S}typeof r[y]=="number"&&(r[y]+=g*v*b*C)}}findOptimalStartPosition(e,n,r,o){const i=Math.min(o,r/4),s=Math.max(0,n-i),a=Math.min(e.length-r,n+i);let c=n,u=-1/0;for(let d=s;d<=a;d+=1){let f=0,p=0,g=0,v=0;const y=Math.min(r,512);for(let A=0;A<y;A+=1)if(d+A<e.length){const _=e[d+A]??0;f+=_*_,p+=Math.abs(_),A>0&&v*_<0&&(g+=1),v=_}const b=Math.sqrt(f/y),C=p/y,S=C>0?b/C:0,w=b*.6,E=S*.3,T=g>0?Math.min(1,10/g)*.1:0,I=w+E+T;I>u&&(u=I,c=d)}return c}findBestMatchEnhanced(e,n,r,o,i,s){if(o===0)return this.findOptimalStartPosition(e,n,i,s);const a=Math.max(0,n-s),c=Math.min(e.length-i,n+s),u=Math.floor(i*(this.options.correlationWindowMultiplier??1.5)),d=Math.min(u,i),f=new Float32Array(d),p=Math.max(0,o-d);let g=0,v=0,y=0;for(let S=0;S<d;S+=1){const w=p+S;if(w<r.length){f[S]=r[w]??0;const E=f[S]??0;g+=E*E,S>0&&y*E<0&&(v+=1),y=E}}let b=n,C=-1/0;for(let S=a;S<=c;S+=1){let w=0,E=0,T=0,I=0;for(let U=0;U<d;U+=1)if(S+U<e.length&&p+U<r.length){const se=e[S+U]??0;w+=(f[U]??0)*se,E+=se*se,U>0&&I*se<0&&(T+=1),I=se}const A=g>0&&E>0?w/Math.sqrt(g*E):0,_=Math.abs(T-v),j=Math.max(T,v),R=j>0?1-_/j:1,$=A*.8+R*.2;$>C&&(C=$,b=S)}return b}}const oSe={windowSize:2048,overlap:.5,tolerance:128,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},iSe={windowSize:1792,overlap:.5,tolerance:300,useAntiAlias:!0,correlationWindowMultiplier:1.8,useFirstFrameCompensation:!0},sSe={windowSize:1280,overlap:.65,tolerance:280,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},aSe={windowSize:1536,overlap:.75,tolerance:300,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0};function cSe(t){switch(t){case 1.5:return aSe;case 1.25:return sSe;case 1.1:return iSe;case .8:return oSe;case 1:default:return}}const KN=new rSe;function lSe(t,e,n){const r=cSe(e);return r?(KN.setOptions(r),KN.process(t,e,n)):t}function uSe(t){return new Promise(e=>{setTimeout(e,t)})}function TA({data:t,parsedAudioData:e,audioContext:n,gainNode:r,sourceNodes:o,nextBufferTime:i,updateNextBufferTime:s,onAudioEnd:a,outputVolumeMuted:c=!1,getPlaySignal:u,updateAudioDuration:d,onAudioStart:f,playbackRate:p}){const g=e??iF(t);g.length!==0&&navigator.locks.request("audio-playback",async()=>{const v=g.length/Ff;d==null||d(v);const y=u==null?void 0:u(v);if(y)try{console.log("Awaiting play signal"),await y}catch(b){b instanceof Error&&(`${b.message}`,void 0);return}try{f(),await dSe(g,n,r,o,i,s,()=>a(t),c,p)}catch(b){console.error("Error playing audio:",b)}})}async function dSe(t,e,n,r,o,i,s,a,c=1){let u=t;c!==1&&(u=lSe(t,c,Ff));const d=e.createBuffer(1,u.length,Ff);d.getChannelData(0).set(u);const f=e.createBufferSource();f.buffer=d,f.connect(n),a&&(n.gain.value=0);const p=st();if(r.size===0){const v=p.get(Pw),y=p.get(Rw),b=v+(e.currentTime-y);p.set(Pw,b)}r.add(f),f.onended=()=>{s(),p.set(Rw,e.currentTime),r.delete(f),r.size===0&&p.set(xw,!1)};const g=d.length/d.sampleRate;o.current<e.currentTime&&i(e.currentTime),f.start(o.current),p.set(xw,!0),i(o.current+g)}async function hSe(t,e,n,r,o){const i=r&&await r(),s=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0,autoGainControl:!0,sampleRate:oF,...i}}),a=s.getAudioTracks()[0];a&&(a.onended=d=>{o==null||o(d)});const c=e.createMediaStreamSource(s),u=e.createScriptProcessor(8192,1,1);return c.connect(n),n.connect(u),u.connect(e.destination),u.onaudioprocess=d=>{const f=d.inputBuffer.getChannelData(0),p=new Int16Array(f.length);for(let v=0;v<f.length;v+=1){const y=f[v];typeof y=="number"&&(p[v]=Hge(y))}const g=Bge(p.buffer);t(g)},s}async function WN(t,e){const n=await Promise.race([uSe(e),new Promise(r=>{try{const o=new Audio(t);o.addEventListener("ended",()=>r(o),{once:!0}),o.play()}catch{}})]);n==null||n.remove()}const fSe=Ff*2;class pSe{constructor(){Z(this,"audioBuffer",[]);Z(this,"totalBufferSize",0);Z(this,"lastProcessOptions",null)}addAudioData(e){if(!e)return!1;const n=iF(e),r=n.length;return r===0?!1:(this.audioBuffer.push({audioData:n,bufferSize:r}),this.totalBufferSize+=r,this.totalBufferSize>=fSe)}getLastProcessOptions(){return this.lastProcessOptions}setLastProcessOptions(e){this.lastProcessOptions=e}mergeAudioChunks(){const e=new Float32Array(this.totalBufferSize);let n=0;for(const r of this.audioBuffer){const{audioData:o}=r;e.set(o,n),n+=o.length}return e}getAudioData(){if(this.audioBuffer.length===0)return null;if(this.audioBuffer.length===1){const e=this.audioBuffer[0];return e?e.audioData:null}return this.mergeAudioChunks()}clearBuffer(){this.audioBuffer=[],this.totalBufferSize=0}}function mSe(t,e){const n=t.data;if(!e){TA(t);return}e.setLastProcessOptions(t),e.addAudioData(n)&&n6(e)}function gSe(t){t&&n6(t)}function n6(t){const e=t.getAudioData(),n=t.getLastProcessOptions();!e||!n||(TA({...n,parsedAudioData:e}),t.clearBuffer())}const Fxe={lmks_rest:"lmksRest",frames:"frames",expr:"expr",neck_pose:"neckPose",jaw_pose:"jawPose",eyes_pose:"eyesPose",eyes_open_ratio:"eyesOpenRatio",rotation:"rotation",translation:"translation",lmks:"lmks"};class vSe{constructor(e,n){Z(this,"lmksRest");Z(this,"frames");this.lmksRest=e,this.frames=n}}class ySe{constructor(e,n){Z(this,"exp");Z(this,"pose");this.exp=e,this.pose=n}isValid(){return this.exp.dtype!==""&&this.exp.data.length>0||this.pose.dtype!==""&&this.pose.data.length>0}}const bSe=3.141592653589793,YN="System.Single, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";function CSe(t){const e=[],n=[],r=(a,c)=>{if(c>=a.length)throw new Error("index out of range");return a[c]===void 0?0:a[c]};for(const{frame:a,offset:c}of t){if(a.length<97)return console.log("Invalid frame length"),null;const u=new Array(28).fill(0);u[12]=r(a,78),u[16]=r(a,43),u[17]=r(a,43),u[21]=r(a,72),u[23]=.5*r(a,52)+.5*r(a,53),u[24]=.75*r(a,76),u[26]=.75*r(a,76),e.push({exp:u,offset:c});const d=[[-1*r(a,88)+bSe,-1*r(a,89),r(a,90)],[0,r(a,92),-1*r(a,91)],[0,r(a,95),-1*r(a,94)]];n.push(d)}const o={dtype:YN,shape:[e.length,16],data:e,isColumnMajor:!1},i={dtype:YN,shape:[n.length,3,3],data:n,isColumnMajor:!1};return new ySe(o,i)}class SSe{constructor(){Z(this,"LOCK_NAME","animation-data-frames-lock");Z(this,"TIMEOUT_MSEC",XV);Z(this,"a2eState",{frames:[],timeoutId:null});Z(this,"vasaState",{frames:[],timeoutId:null});Z(this,"a2eConfig",{getAnimationData:e=>CSe(e),calculateDuration:e=>e/tM});Z(this,"vasaConfig",{getAnimationData:e=>new vSe([],e),calculateDuration:e=>e/nM});Z(this,"waitingForLock",new Set);Z(this,"lockedBy",null);Z(this,"unblock",()=>{})}async requestLock(e,n){if(typeof navigator<"u"&&navigator.locks){if(this.waitingForLock.has(e))return;this.waitingForLock.add(e),await navigator.locks.request(this.LOCK_NAME,async()=>{this.lockedBy&&this.lockedBy!==this.LOCK_NAME&&await new Promise(r=>{this.unblock=()=>{r()}}),await n(),this.waitingForLock.delete(e)})}else await n()}lockAnimation(e){this.lockedBy=e}unlockAnimation(){this.lockedBy=null,this.unblock()}setA2EFrame(e,n,r){e&&(this.a2eState.frames.push({frame:e,offset:n}),this.addFrames(this.a2eState,this.a2eConfig,r))}setVasaFrame(e,n){e&&(this.vasaState.frames.push(e),this.addFrames(this.vasaState,this.vasaConfig,n))}async addFrames(e,n,r){const o=e;this.requestLock("addFrames",async()=>{if(o.frames.length>=r$){o.timeoutId&&clearTimeout(o.timeoutId),this.flushFrames(o,n,r);return}if(!o.timeoutId){const i=window.setTimeout(()=>{this.flushFrames(o,n,r)},this.TIMEOUT_MSEC);o.timeoutId=i}})}flushFrames(e,n,r){this.requestLock("flushFrames",async()=>{if(e.frames.length===0)return;st().set(fM,{animationData:n.getAnimationData(e.frames)});const o=n.calculateDuration(e.frames.length);r==null||r(o),`${e.frames.length}`;const i=e;i.frames=[],i.timeoutId=null})}resetFrames(){for(const e of[this.a2eState,this.vasaState])e.timeoutId&&clearTimeout(e.timeoutId),e.frames=[],e.timeoutId=null}}class Dv{constructor(){Z(this,"totalAudioDuration",0);Z(this,"totalAnimationDataDuration",0);Z(this,"nonInitialPromiseChecked",0);Z(this,"animationDataFrameHandler");Z(this,"isFrameAppendable",!1);this.animationDataFrameHandler=new SSe}lockAnimation(e){this.animationDataFrameHandler&&this.animationDataFrameHandler.lockAnimation(e)}unlockAnimation(){this.animationDataFrameHandler&&this.animationDataFrameHandler.unlockAnimation()}addAnimationDataDuration(e){this.totalAnimationDataDuration+=e*1e3}addAudioDuration(e){const n=e*1e3;this.totalAudioDuration+=n}getAnimationSyncPromise(e,n){return`${this.totalAudioDuration}${this.totalAnimationDataDuration}`,e===0?Dv.constructCharacterTalkPromise(ZV):n===0?null:this.totalAudioDuration>this.totalAnimationDataDuration+n$&&(this.nonInitialPromiseChecked+=1,this.nonInitialPromiseChecked%t$===1)?Dv.constructCharacterTalkPromise(e$):null}resetAudioAnimationSync(e=null){this.animationDataFrameHandler&&(this.animationDataFrameHandler.resetFrames(),this.totalAudioDuration=0,this.totalAnimationDataDuration=0);const n=st();n.set(XCe,e??null),n.set(xw,!1),n.set(Pw,0),n.set(Rw,0)}enableFramesAppending(){this.isFrameAppendable=!0}disableFramesAppending(){this.isFrameAppendable=!1}setA2EFrame(e,n){if(this.isFrameAppendable&&this.animationDataFrameHandler){if(((e==null?void 0:e.length)??0)===0)return;n!==this.totalAnimationDataDuration&&(`${n}${this.totalAnimationDataDuration}`,void 0),this.totalAnimationDataDuration+=1/tM*1e3,this.animationDataFrameHandler.setA2EFrame(e,n),`${this.totalAudioDuration}${this.totalAnimationDataDuration}`}}setVasaFrameData(e){this.isFrameAppendable&&this.animationDataFrameHandler&&(this.totalAnimationDataDuration+=1/nM*1e3,this.animationDataFrameHandler.setVasaFrame(e))}static constructCharacterTalkPromise(e){const n="start-audio-playback-custom",r=new AbortController,{signal:o}=r,i=new Promise(c=>{const u=()=>{c(),r.abort()};window.addEventListener(n,u,{once:!0,signal:o})}),s=new Promise((c,u)=>{const d=()=>{u(new Error("Audio interrupted")),r.abort()};Kt.on("voice:audio-interrupted",d)}),a=new Promise(c=>{setTimeout(()=>{c(),r.abort()},e)});return Promise.race([i,s,a])}}const ESe=null;function wSe(t){return t instanceof Error&&(t.name==="NotFoundError"||t.name==="OverconstrainedError")}const TSe=1;function wm(t,e){Kt.emit(`voice:audio-${e}-volume-changed`,t)}function ISe({initAudio:t,getAudioConstraints:e,onCallTerminated:n,onSpeechEndDetected:r,keepAudioInputAlive:o=!1}){const i=Te(ic),s=Te(fM),a=ve("client-type-open"),c=ve("experimental-vasa"),u=my(),d=Te(Cc),f=ve("voice-call-jingles"),p=Te(c$),g=D(mt),v=D(ny),y=D(Zf),b=Te(Mh),C=Te(l$),S=Te(bc),w=Te(sd),E=ve("voice-speed"),T=D(IL),I=Q_(),{refetch:A}=t6(),{showBoundary:_}=e2(),j=m.useRef(),R=m.useRef(),$=m.useRef(),U=RB(0),se=m.useRef(null),P=m.useRef(null),k=m.useRef(null),N=m.useRef(null),x=m.useRef(new Set),M=m.useRef(null),[te,Y]=m.useState(!1),Q=m.useRef(0),ee=W=>{Q.current=W},oe=W=>{var ne;return(ne=M.current)==null?void 0:ne.addAudioDuration(W)},Ce=m.useRef("inactive"),fe=m.useCallback(()=>u?!!gt(Cc):!1,[u]),Pe=m.useRef(!1),ze=m.useRef(""),nt=m.useRef(E?new pSe:void 0),J=m.useRef(0),pe=m.useCallback(W=>{Pe.current&&W===ze.current&&(p("listening"),i("listening"),Y(!1))},[p,i]),X=m.useCallback(W=>{const{analyser:ne,frameIdRef:_e,volume:Me}=W;if(!ne)return;const We=new Uint8Array(ne.frequencyBinCount),Ne=TSe,z=()=>{var he;ne.getByteTimeDomainData(We);const re=zge(We);Math.abs(re-Me.get())>Ne&&((he=W.update)==null||he.call(W,re),Me.set(re)),_e.current=requestAnimationFrame(z)};z()},[]),H=W=>{W.current!==null&&(cancelAnimationFrame(W.current),W.current=null)};m.useEffect(()=>()=>{H(k),H(P)},[]);const[ae,Ee]=m.useState(!t),L=QCe();m.useEffect(()=>{t||(Ee(!0),b("waiting-for-user-interaction"))},[t,Ee,b]);const de=m.useCallback(async()=>{g&&(I(g,W=>W.splice(0)),await A())},[A,g,I]),Se=m.useCallback(async()=>{if($.current){for(const W of $.current.getTracks())W.stop();$.current=null}if(j.current)try{await j.current.close(),j.current=null}catch(W){console.error("Unable to close audioContextIn",W)}H(P),U.set(0),wm(0,"input")},[U]),ie=m.useCallback(async W=>{if(Ce.current="inactive",await Se(),R.current)try{await R.current.close(),R.current=null}catch(ne){console.error("Unable to close audioContextOut",ne)}H(k),Cw.set(0),wm(0,"output"),Y(!1),Ee(!1),W.sendAudioEnd(),p("idle"),gt(Mh)==="available"&&(f&&WN(ZCe,3e3),await de(),L.onEndCall(J.current),J.current=0,w(!0))},[Se,p,f,de,L,w]),ge=m.useCallback(async W=>{j.current=new AudioContext({sampleRate:oF}),se.current=j.current.createAnalyser(),Q.current=0;const ne=async()=>{o&&Ce.current==="active"&&(await Se(),await ge(W))};let _e=null;try{_e=await hSe(W.sendAudio,j.current,se.current,e,ne)}catch(Me){Me instanceof Error&&(Me.name==="NotAllowedError"||Me.name==="NotSupportedError")?(b("microphone-denied"),await ie(W),K.trackEvent({name:"system",data:{eventName:"copilotNoMicrophoneAccess"}})):wSe(Me)?(b("microphone-not-found"),await ie(W),K.trackEvent({name:"system",data:{eventName:"copilotMicrophoneNotFound"}})):_(new Error(`Error starting audio capture: ${Me}`))}if(_e){if(ae)for(const Me of _e.getTracks())Me.enabled=!1;$.current=_e,X({volume:U,analyser:se.current,frameIdRef:P,update:Me=>{wm(Me,"input")}})}},[ae,X,U,o,Se,e,b,ie,_]),He=m.useRef(!1),Xe=m.useCallback(()=>{if(H(k),!R.current)return;const W=R.current.createGain(),ne=R.current.createAnalyser();W.connect(ne),ne.connect(R.current.destination),N.current=W,Y(!0),X({volume:Cw,analyser:ne,frameIdRef:k,update:_e=>{wm(_e,"output")}})},[X]),ct=m.useCallback(W=>{const ne=W==="mute";if(Ee(ne),Qs(JCe,ne),$.current)for(const _e of $.current.getTracks())_e.enabled=W==="unmute"},[]),lt=m.useCallback(W=>{var ne;if(fe())return(ne=M.current)==null?void 0:ne.getAnimationSyncPromise(Q.current,W)},[fe]),je=m.useCallback(async W=>{R.current=new AudioContext({sampleRate:Ff}),Q.current=0,Xe(),He.current||(He.current=!0,await ge(W)),gt(PT)&&ct("mute")},[ge,Xe,ct]),Qe=m.useCallback(()=>{if(fe())return"character";if(a)return be.instance().config().audioConfigClientType},[a,fe]),dt=m.useCallback(async W=>{var We;if(!g||!t)return;b("checking-availability"),C(null),He.current=!1;const{sendAudioStart:ne}=W,_e=Qe();ne(g,{voice:y??((We=v[0])==null?void 0:We.id)},_e);const Me=1e4;setTimeout(()=>{gt(Mh)==="checking-availability"&&Ce.current==="active"&&L.onAudioStartTimeout(Me)},Me),L.onStartCall(g),f&&await navigator.locks.request("audio-playback",async()=>{var Ne,z;(Ne=M.current)==null||Ne.lockAnimation("audio-playback"),await WN(eSe,3e3),(z=M.current)==null||z.unlockAnimation()}),ou("onStartVoiceChat")},[g,t,b,y,v,L,C,f,Qe]),Ut=m.useCallback(()=>{var W,ne;for(const _e of x.current)_e.stop();x.current.clear(),(W=R.current)==null||W.close(),R.current=null,Y(!1),(ne=M.current)==null||ne.resetAudioAnimationSync()},[]),Ft=m.useCallback(async W=>{Ut(),await ie(W),n()},[ie,n,Ut]),rn=uA(E?T:Xv),vn=m.useCallback(W=>ne=>{var _e,Me,We,Ne,z,re,he;switch(ne.event){case"startMessage":{const{messageId:ye}=ne;if(L.onStartMessage(ye),Ut(),Ce.current==="inactive")break;je(W),b("available"),p("listening"),Y(!0),Qs(WS,!1),(_e=M.current)==null||_e.resetAudioAnimationSync(R.current),(Me=M.current)==null||Me.enableFramesAppending();break}case"transcriptEvent":{L.onTranscriptReceived();break}case"appendText":{const{messageId:ye}=ne;L.onTextReceived(ye);break}case"audioStartFailed":{const{reason:ye}=ne,{success:Le}=vL.safeParse(ye);b(Le?ye:"error"),L.onAudioStartFailed(ye);break}case"audioTimeRemaining":{const{seconds:ye}=ne;C(ye);break}case"audio":{if(Ce.current==="inactive")break;if(L.onAudioReceived(),p("responding"),Y(!0),ze.current=ne.audio,R.current&&N.current){const ye={data:ne.audio,audioContext:R.current,gainNode:N.current,sourceNodes:x.current,nextBufferTime:Q,updateNextBufferTime:ee,onAudioEnd:pe,outputVolumeMuted:c,getPlaySignal:lt,updateAudioDuration:fe()?oe:void 0,onAudioStart:L.onAudioStart,playbackRate:rn};E?mSe(ye,nt.current):TA(ye)}break}case"characterAnimation":{if(L.onCharacterAnimationReceived(),fe()){const{frame:ye}=ne;(ye==null?void 0:ye.model)==="spda2e"&&((We=M.current)==null||We.setA2EFrame(ye.poseDiffusion,ne.offsetInMilliseconds)),(ye==null?void 0:ye.model)==="vasa"&&((Ne=M.current)==null||Ne.setVasaFrameData(ye))}break}case"interruptAudio":{fe()&&(Kt.emit("voice:audio-interrupted"),(z=M.current)==null||z.resetAudioAnimationSync(),(re=M.current)==null||re.disableFramesAppending(),s(null)),p("listening"),i("listening"),L.onAudioInterrupt(),Ut(),Qs(WS,!0);break}case"speechEndDetected":{L.onSpeechEndDetected(),i("thinking"),r==null||r();break}case"callTerminated":{Ft(W),L.onTerminated(ne.reason);break}case"error":{const{errorCode:ye}=ne;switch(ye){case"over-turn-limit":{S(0);break}case"character-out-of-capacity":{W.setCallType("standard");break}}Ce.current==="active"&&L.onError(ye);break}case"done":{const{messageId:ye}=ne;Pe.current=!0,J.current+=1,nt.current&&gSe(nt.current),L.onMessageDone({messageId:ye,voiceType:y??((he=v[0])==null?void 0:he.id)}),Qs(WS,!0);break}case"banned":{const{expiresAt:ye}=ne,Le=j_(ye);Le&&(U_(Le,"voice",ye),Ut(),ie(W));break}case"callTypeChanged":{const{callType:ye}=ne;ye==="standard"&&d(void 0);break}}},[L,Ut,je,b,fe,C,p,pe,c,lt,i,s,r,Ft,S,y,v,ie,d,rn,E]);return{toggleVoiceChat:m.useCallback(async W=>{if(W==="start"&&Ce.current==="active")return;if(W==="start"){const _e=FE();L.onBeforeStartCall(_e)}if(W==="end"&&Ce.current==="inactive")return;Ce.current=W==="start"&&t?"active":"inactive",W==="start"&&fe()&&(M.current=new Dv),Sg.onVoiceChatToggled(W,g);const ne=await nc({useMockConnection:!!ESe});W==="start"?(ne.setOnEvent(vn(ne)),await dt(ne)):(ne.setOnEvent(()=>{}),await ie(ne))},[vn,fe,dt,ie,L,t,g]),toggleMute:ct,isInputMuted:ae,inputVolume:U,hasOutputVolume:te}}const Bxe="https://picassostaticassetsstg.azureedge.net/character/try-now/lumi_intro_394_222";function QN(t,e){if(!t)return!1;const n=pn(DQ)??pn(jQ);return!e&&!n}function _Se({isAudioCall:t,onCallTerminated:e,onMute:n,onUnmute:r}){const o=Wt(),i=gy(),[s,a]=Qy(),c=s==="audioCall",[u,d]=m.useState(!1),f=D(Cc),p=ve("appearance-try-now-modal"),g=D(PT),{state:v,setState:y}=K_({defaultValue:!c}),{toggleVoiceChat:b,toggleMute:C,hasOutputVolume:S,inputVolume:w,isInputMuted:E}=ISe({initAudio:v,onCallTerminated:e}),T=m.useRef(b);T.current=b,m.useEffect(()=>{t?!c&&!QN(p,f)&&!g&&T.current("start"):T.current("end")},[o,t,c,T,f,g,p]);const I=m.useCallback(()=>{b("start"),v&&!u&&(d(!0),C("unmute"))},[b,v,u,C]),A=m.useCallback(()=>{a(),y(!0),b("end")},[a,y,b]),_=m.useCallback(()=>{y(!0),C(E?"unmute":"mute"),E?r==null||r():n==null||n()},[y,C,E,n,r]);m.useEffect(()=>{t&&c&&v&&I()},[v,t,c,I]);const j=m.useCallback(async(U=!1)=>{(!t||U)&&await R()!=="NotSupported"||(await i({talk:!0}),QN(p,f)||I())},[t,p,i,f,I]);m.useEffect(()=>{c&&j(!0)},[c,j]);async function R(){return(await Vce.run({onAudioCall:async()=>"NotSupported"})).onAudioCall()}const $=m.useCallback(U=>{const{toLocation:se}=U,P=se.pathname;t&&!P.endsWith("/talk")&&T.current("end")},[t]);return Xy($),{launchAudioCall:j,startAudioCallIfNotStartedAlready:I,endAudioCall:A,toggleAudioInput:_,inputVolume:w,isInputMuted:E,hasOutputVolume:S,isAudioDeepLink:c,canInitAudio:v}}const r6={sdk:"8.0",messaging:{origin:window.location.origin,channelId:crypto.randomUUID()},accessibility:{showFocusOnLoad:!1,enableFocusTrap:!0},authentication:{},entry:{oneDrive:{recent:{}}},typesAndSources:{mode:"files",filters:dme,pivots:{oneDrive:!0,recent:!0,photos:!1}}},ASe=new URLSearchParams({app:"CMC",scenario:"AnalyzeDoc",filePicker:JSON.stringify(r6),locale:It.resolvedLanguage??"en-US"}),o6="https://onedrive.live.com",kSe=`${o6}/picker?${ASe}`;async function i6(){const t=await Xce();return(t==null?void 0:t.accessToken)??""}function xSe(t){return t!==null&&typeof t=="object"&&"type"in t&&t.type==="initialize"&&"channelId"in t&&typeof t.channelId=="string"}function RSe({port:t,onClose:e,onPick:n,setIsLoading:r,onError:o}){return async i=>{let s;switch(i.data.type){case"notification":i.data.data.notification==="page-loaded"&&r(!1);break;case"command":switch(t.postMessage({type:"acknowledge",id:i.data.id}),i.data.data.command){case"authenticate":s=await i6(),typeof s<"u"?t.postMessage({type:"result",id:i.data.id,data:{result:"token",token:s}}):(t.postMessage({type:"result",id:i.data.id,data:{result:"error",error:{code:"authTokenError",message:"Could not get OneDrive authentication token."}}}),r(!1),o(),e());break;case"close":e();break;case"pick":i.data.data.items!==void 0&&i.data.data.items.length>0&&i.data.data.items[0]!==void 0&&(n(i.data.data.items[0]),t.postMessage({type:"result",id:i.data.id,data:{result:"success"}}),e());break;default:r(!1),t.postMessage({result:"error",error:{code:"unsupportedCommand",message:i.data.data.command},isExpected:!0}),o(),e();break}break}}}function PSe({onClose:t,onPick:e,onError:n}){const r=m.useRef(null),{t:o}=Fe(),[i,s]=m.useState(!0);return m.useEffect(()=>{var f;const a=()=>{const p={title:o("composer.errors.attachmentOneDrive.title"),message:o("composer.errors.attachmentOneDrive.message")};n(p),K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:p.message,eventInfo_details:"Error submitting message"}})},c=(f=r.current)==null?void 0:f.contentWindow;let u,d;return c&&(async()=>{const g=c.document.createElement("form");g.method="POST",g.action=kSe,c.document.body.appendChild(g);const v=c.document.createElement("input");v.type="hidden",v.name="access_token",v.value=await i6(),g.appendChild(v),window.addEventListener("message",y=>{if(y.origin&&y.origin===o6){const b=y.data;if(xSe(b)&&b.channelId===r6.messaging.channelId){if([d]=y.ports,!d){s(!1),a(),t();return}u=RSe({port:d,onClose:t,onPick:e,onError:a,setIsLoading:s}),d.addEventListener("message",u),d.start(),d.postMessage({type:"activate"})}}}),g.submit()})(),()=>{u&&window.removeEventListener("message",u),d&&d.close()}},[t,e,n,o]),h.jsxs(Cp,{isOpen:!0,onClose:t,className:"flex h-[90vh] max-h-[680px] w-[90vw] max-w-[1080px]",fullBleed:!0,children:[i&&h.jsxs("div",{className:"flex size-full items-center justify-center","aria-live":"polite",role:"status","aria-label":o("oneDrive.pickerLoading"),children:[h.jsx("span",{className:"sr-only",children:o("oneDrive.pickerLoading")}),h.jsx(At,{className:"size-20"})]}),h.jsx("iframe",{title:o("onedrive.filePicker"),ref:r,hidden:i,width:"100%",height:"100%"})]})}const NSe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/add-BTcFT5ig.svg",OSe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/image-zMo0jLdY.svg",MSe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/podcast-BQmBU8ew.svg",LSe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/quiz-BBvkoZrF.svg",DSe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/research-i8a7tpJF.svg";function jSe(t){const{onPrefillComposerInput:e,disabled:n=!1}=t,r=D(tI),o=D(nI),[i,s]=tt(dr),a=D(hr),c=D(dy),u=xr(),d=Te(sl),f=gA(),{handleProSubscription:p}=Mv({payflowEntryPoint:"PodcastLimit",skuType:c?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Button"}),{handleProSubscription:g}=Mv({payflowEntryPoint:"ResearchReportLimit",skuType:c?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Button"}),v=USe({remainingPodcastGeneration:r,remainingResearchReportGeneration:o,isPro:(a==null?void 0:a.isPro)??!1}),y=Te(xU),b=SA(),C=m.useCallback(E=>{const T=v[E];if(T){switch(T.key){case"image":y("image");break;case"podcast":if(!u&&r===0){d({isOpen:!0,scenario:"podcast",reason:"createPodcast"});return}if(!(a!=null&&a.isPro)&&r===0){if(!f)return;p();return}y("podcast");break;case"researchReport":if(!u&&o===0){d({isOpen:!0,scenario:"researchReport",reason:"createResearchReport"});return}if(!(a!=null&&a.isPro)&&o===0){if(!f)return;g();return}y("researchReport"),s("research");break;case"quiz":y("quiz");break;default:y(null);break}e(T.composerInputPrompt??"")}},[v,y,e,a,r,o,f,p,g,u,d,s]),S=m.useCallback(()=>{y(null),Aw(),s("chat")},[y,s]),w=m.useRef(null);return m.useEffect(()=>{var E;b.length===0&&i!=="research"&&((E=w.current)==null||E.setSelectedItemIndex(0),S())},[b,S,i]),h.jsx(hA,{ref:w,items:v,onSelect:C,defaultSelectedItemIndex:0,onReset:S,disabled:n,onMenuClick:()=>at({source:"composerCreateButton",pageName:"chatPage"})})}function fh(t){return e=>{vve(t,e)}}function ph(t){return e=>{Cve(t,e)}}function USe({remainingPodcastGeneration:t,remainingResearchReportGeneration:e,isPro:n}){const r=ve("podcast-in-create-drawer"),o=dF(),i=r,s=o,a=ve("quiz-in-create-drawer"),{t:c}=Fe("translation",{keyPrefix:"composer.create"});return m.useMemo(()=>{const d={key:"create",title:c("buttonTitle"),icon:h.jsx(er,{url:NSe,className:"size-5"}),description:c("buttonDescription"),composerInputPrompt:"",testId:"composer-create-button",onImpression:fh(null),beforeClick:ph(null)},f={key:"image",title:c("image.title"),icon:h.jsx(er,{url:OSe,className:"size-6"}),description:c("image.description"),composerInputPrompt:c("image.prompt"),testId:"composer-create-image-button",onImpression:fh("image"),beforeClick:ph("image")};function p(){return{key:"podcast",title:c("podcast.title"),icon:h.jsx(er,{url:MSe,className:"size-6"}),description:c("podcast.description"),composerInputPrompt:c("podcast.prompt"),testId:"composer-create-podcast-button",onImpression:fh("podcast"),beforeClick:ph("podcast"),tags:t!==null&&n===!1?[{label:c("podcast.remainingCalls",{remainingCalls:t.toString()}),color:t>0?"neutral":"accent"}]:void 0}}function g(){return{key:"researchReport",title:c("researchReport.title"),icon:h.jsx(er,{url:DSe,className:"size-6"}),description:c("researchReport.description"),composerInputPrompt:c("researchReport.prompt"),testId:"composer-create-research-report-button",onImpression:fh("researchReport"),beforeClick:ph("researchReport"),tags:e!==null&&n===!1?[{label:c("researchReport.remainingCalls",{remainingCalls:e.toString()}),color:e>0?"neutral":"accent"}]:void 0}}function v(){return{key:"quiz",title:c("quiz.title"),icon:h.jsx(er,{url:LSe,className:"size-6"}),description:c("quiz.description"),composerInputPrompt:c("quiz.prompt"),testId:"composer-create-quiz-button",onImpression:fh("quiz"),beforeClick:ph("quiz")}}return[d,f,s?g():void 0,i?p():void 0,a?v():void 0].filter(y=>y!==void 0)},[t,n,c,i,s,e,a])}function FSe({selectFile:t,disabled:e=!1}){const{t:n}=Fe();return h.jsx("div",{className:"flex items-center",children:h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:n("composer.upload"),disabled:e,testId:"file-upload-button","aria-label":n("composer.upload"),className:"!h-6 !px-2",onClick:r=>{r.preventDefault(),t()},children:h.jsx(wA,{className:"size-6"})})})}function BSe(t){const{createConversation:e}=hp(),n=Te(Ir),r=Te(pp),o=Te(fp);return m.useCallback(async()=>{try{n(null),r(null),t==null||t(),await e()}finally{o("center")}},[e,o,n,r,t])}const s6=st(),IA=V(null),_A=V(null);function a6(t){s6.set(IA,t)}function c6(t){s6.set(_A,t)}function HSe(t,e){var s;const n={eventInfo_inputLength:t.length};let r=n;const o=gt(IA);if(o){const{source:a,type:c,prompt:u}=o;a==="widgets"?r={...n,widget:c,widgetPromptLength:u.length}:r={...n,pill:c,pillPromptLength:u.length}}const i=gt(_A);return i&&(r={...r,autoCompleteLength:i.prompt.length}),(e==null?void 0:e.length)!==0&&((s=e==null?void 0:e[0])!=null&&s.scenario)&&(r={...r,uploadFileScenario:e[0].scenario}),JSON.stringify(r)}function zSe(t){const e=gt(IA),n=gt(_A),r=e==null?void 0:e.prompt.trim(),o=t.trim(),i=n==null?void 0:n.prompt.trim(),s=n==null?void 0:n.prefix.trim(),a=o.toLowerCase()===(i==null?void 0:i.toLowerCase());return!a&&!e?null:a?!r||!o.toLowerCase().includes(r.toLowerCase())?"autoComplete":s&&s.length>r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithTextAndAutoComplete":"pillWithTextAndAutoComplete":(s==null?void 0:s.length)===r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithAutoComplete":"pillWithAutoComplete":"autoComplete":!r||!o.toLowerCase().includes(r.toLowerCase())?null:o.length>r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithText":"pillWithText":(e==null?void 0:e.source)==="widgets"?"widget":"pill"}function VSe(){a6(null),c6(null)}const $Se=m.lazy(()=>q(()=>import("./product-purchase-CFrwGJqt.js"),__vite__mapDeps([237,1,238,239,240,241,242,243,244,245,231])).then(t=>({default:t.ProductPurchase}))),GSe=1.25,qSe=64,KSe={opacity:0,scale:GSe,translateY:qSe},WSe={opacity:1,scale:1,translateY:0},Tm="size-6",YSe=m.lazy(()=>q(()=>import("./upsell-block-DDDZRHy8.js"),__vite__mapDeps([246,1,247]))),QSe=m.lazy(()=>q(()=>import("./price-tracking-block-BhA5tacP.js").then(t=>t.p),__vite__mapDeps([248,1,249,250,251,252,253])).then(t=>({default:t.PriceTrackingBlock}))),JSe=m.lazy(()=>q(()=>import("./composer-auto-complete-BKcQFjPe.js"),__vite__mapDeps([254,1]))),XSe=m.lazy(()=>q(()=>import("./composer-actions-prompt-suggestions-CIC5X68R.js"),__vite__mapDeps([255,1,256,257,258,259,260,261,262,263,264,265])).then(t=>({default:t.ComposerActionsPromptSuggestions}))),ZSe=m.lazy(()=>q(()=>import("./voice-options-C1jSEvK0.js").then(t=>t.v),__vite__mapDeps([266,1]))),eEe=m.lazy(()=>q(()=>import("./think-deeper-pro-subscription-ZbGvZEWK.js"),__vite__mapDeps([267,1]))),tEe=m.lazy(()=>q(()=>import("./over-task-quota-Cd5zaadX.js"),__vite__mapDeps([268,1,269])).then(t=>({default:t.OverTaskQuota}))),nEe=m.lazy(()=>q(()=>import("./computer-use-task-closed-DReumW0v.js"),__vite__mapDeps([270,1,269])).then(t=>({default:t.ComputerUseTaskClosed}))),rEe=m.lazy(()=>q(()=>import("./safety-risk-card-BvsdS5lz.js"),__vite__mapDeps([271,1,272,269])).then(t=>({default:t.SafetyRiskCard}))),oEe=m.lazy(()=>q(()=>import("./add-to-page-BrBj6Rs1.js"),__vite__mapDeps([273,1])).then(t=>({default:t.AddToPage}))),iEe=m.lazy(()=>q(()=>import("./cross-selling-strip-consumer-7Z8pXPpz.js"),__vite__mapDeps([274,1,247]))),sEe=m.lazy(()=>q(()=>import("./composer-prompt-review-BqYQ-I6M.js"),__vite__mapDeps([275,1,276]))),YS=m.lazy(()=>q(()=>import("./composer-action-D2Ips0qp.js"),__vite__mapDeps([269,1]))),aEe=m.lazy(()=>q(()=>import("./biometric-consent-B0_Lx5F0.js"),__vite__mapDeps([277,1])).then(t=>({default:t.BiometricConsent}))),cEe=m.lazy(()=>q(()=>Promise.resolve().then(()=>kge),void 0)),lEe=m.lazy(()=>q(()=>import("./daily-briefing-chat-DVyXzafk.js"),__vite__mapDeps([278,1,279,280])).then(t=>({default:t.DailyBriefingChat}))),uEe=m.lazy(()=>q(()=>import("./composer-sign-in-BuTvDVNT.js"),__vite__mapDeps([281,1,282]))),dEe=m.lazy(()=>q(()=>import("./daily-briefing-composer-player-CDdvyX0C.js"),__vite__mapDeps([283,1,284,285,286,287,280])));function hEe(){var sk,ak;const{t}=Fe(),{submitMessage:e,onSubmitMessageBlocked:n,stopMessage:r}=cb(),o=ve("image-copy-paste"),i=D(id),s=ve("pay-native-checkout"),a=ve("shopping-card"),c=ve("multiplecharacters"),u=ve("anonymousattachmentupload"),d=ve("onedrive-file-upload"),f=ve("ds-editprompt"),p=!Zy(),g=D(AL),v=ve("multi-file-upload"),y=co(),b=gy(),C=mbe(),S=Wt(),w=D(Un),E=lo(),T=D(ba),I=tr({breakpoint:"sm"}),A=Lv({breakpoint:"h760"}),_=Lv({breakpoint:"h550"}),j=$_(),R=sCe(),$=SA(),U=iCe(),[se,P]=m.useState(null),k=Te(iM),[N,x]=tt(sl),M=D(Kue),te=D(Wue),Y=D(u$),Q=D(uM),ee=D(a$),oe=D(iw),[Ce,fe]=m.useState(!1),Pe=ee||Ce,{startConversationDisabled:ze}=hp(),nt=D(Cs),[J,pe]=m.useState(!1),[X,H]=tt(Ir),ae=Te(lle),[Ee,L]=tt(eJ),[de,Se]=tt(pp),ie=Te(cM),ge=D(es),He=(ge==null?void 0:ge.type)==="popup",Xe=gbe(),ct=He||Xe,lt=UF(),je=(sk=be.instance().config().composer)==null?void 0:sk.enableAppShadow,{isPlaying:Qe,pause:dt,onToggleVoiceSettings:Ut,resetAllTimers:Ft}=yF(),rn=Wye(),vn=wbe(),F=xr(),W=m.useRef(null),ne=m.useRef(null),_e=m.useRef(null),[Me,We]=m.useState(!1),[Ne,z]=m.useState(null),re=m.useCallback(Ie=>{z(Ie)},[z]),he=m.useCallback(()=>{We(!1)},[We]),ye=ve("imagegenv3"),Le=ve("logged-out-sharing"),qe=ve("remove-prefill-space-after-prompt-cmc"),{isMediaViewerOpen:Ze,closeMediaViewer:ot,isPictureInPictureSupported:St,triggerPictureInPicture:Bn,showOneLineComposerWhenMediaViewerOpen:yn,contentPageType:zr}=zi(),sr=Te(fp),Qn=S.endsWith("/talk"),Hn=S.endsWith("/daily"),Vr=ve("1s-dbchat"),pr=sb(),Pd=Hn||pr,Nd=pbe(),ws=rb(),Ts=S.startsWith("/chats")&&!Qn,mr=S.startsWith("/shares"),Ip=zr==="weather",Od=D(Mh),{login:_p}=Id(),Is=X==="dialog",Md=s&&X==="checkout",Je=cbe(),[B]=tt(dr),[Re,$e]=m.useState(!1),tn=D(xU),nn=NF(),{isCentralComposerEnabled:Rn,isAutoSuggestEnabled:ar,isStarterPromptsEnabled:ho,isWidgetSectionEnabled:Ea,isAppearanceOnHomeEnabled:Jn}=wp(),{floatingStyles:Ap,edgeTabMenuRefs:Ld,isMultiTabsMenuExpanded:v8,setIsMultiTabsMenuExpanded:y8,isShowMultiTabsPreviewCard:b8,setIsShowMultiTabsPreviewCard:C8,handleMentionEvent:S8,handleMultiTabsMenuSaveBtnEvent:E8,handleMultiTabsMenuCloseBtnEvent:w8,handleUserInputEnterEvent:T8,handleUserInputKeydownEvent:MA}=Gye(),Dd=B==="computerUse",hl=Rn&&(!X||X==="biometric-consent"),bb=ar&&!X&&!Dd,LA=m.useId(),I8=D(sI),_8=ho&&(!X||X==="biometric-consent")&&!Dd&&!I8&&(!_||I),A8=hl&&Ea&&!Dd&&!I&&!A,jd=m.useRef(null),k8=Hv("programmatic"),x8=!Qn&&!Hn&&!pr&&!hl&&!Md&&!Ip;let DA=!0;const Cb=(ws||Ts||Nd||mr)&&(!X||X==="biometric-consent")&&!(Ze&&!yn);Cb&&((ak=be.instance().config().composer)!=null&&ak.disableTextInput)&&(DA=!1);const jA=Md,Sb=D(L_),UA=D(h$),[Eb,FA]=tt(hle),fl=D(fle);ve("multiple-research-tasks-in-conversation");const pl=FJ(),Ud=D(jr),ml=Ud==="side-by-side"&&(pl==null?void 0:pl.type)==="computerUse",BA=hb(),kp=ml&&!WL(pl.status),Fd=ml&&oX(pl),R8=ml&&iX(pl),P8=!S.endsWith("/agents")&&!Hn&&!Nd&&!mr&&!Jn&&!Ze,HA=Fd||ml||Hn||fl||Ze,N8=m.useCallback(()=>{const Ie=[];if(W.current){const Ke=W.current.getTextAreaRef();Ke.current&&Ie.push(Ke)}return Ie},[W]),zA=!(Ze&&!yn)&&!Qn&&(!X||X==="daily-briefing-chat"),xp=Y||!zA||kp||Fd||R8||fl,wb=Yye(zA),Bd=D(dle),_s=D(ule),[Tb,VA]=tt(kU),Ib=Kc(),Hd=X==="prompt-sign-in"||X==="prompt-3p-sign-in"||X==="prompt-location"||X==="prompt-review"||X==="confirm-link-navigation"||X==="cross-promo-card"||X==="shopping-upsell-card"||X==="shopping-price-tracking"||X==="add-to-page"||X==="safety-risk-card"||X==="computer-use-task-closed"||X==="over-task-quota"||X==="daily-briefing-chat"||X==="upsell-microsoft-account-for-pro-subscription"||X==="biometric-consent"||X==="finance-watchlist-unfollow-toast",$A=!Qn&&X!=="daily-briefing-player"&&X!=="audioSettings"&&X!=="reasoning-mode-pro-subscription"&&X!=="checkout"&&!Hd&&!(Ze&&!yn),O8=m.useCallback(Ie=>{Vs(Ie)},[]),M8=()=>{var Ke;const Ie=((Ke=be.instance().config().composer)==null?void 0:Ke.homeButtonState)??"enabled";return Ie!=="enabled"?Ie:ws?"disabled":"enabled"},L8=m.useCallback(()=>{var Ie;(Ie=W.current)==null||Ie.focus(),Fa(!0)},[]),D8=m.useCallback(()=>{ne.current&&(ne.current.value="")},[]),gl=m.useCallback((Ie,Ke)=>{x({isOpen:!0,scenario:Ke??null,reason:Ie})},[x]),j8=m.useCallback(()=>{gl("fileUpload")},[gl]),{processUploadedFiles:GA,processUploadedLocalFiles:As,isUploadingAttachments:U8,uploadedAttachments:zd,resetFileUpload:F8,removeAttachment:B8}=nbe(L8,Vs,D8,j8),ei=zd.filter(({error:Ie})=>!Ie),_b=(ei.length>0||wb)&&!Qn,qA=ei.length>0,H8=U8,KA=!!($.trim().length>0||qA)&&!xp,WA=!!((se&&se.length>0)===!0||H8||Pe||oe||$.trim().length===0&&B==="computerUse"),YA=v&&ei.length>=bw,[z8,V8]=m.useMemo(()=>{const{reason:Ie}=N;return Ie?[t(`signInPrompt.${Ie}Header`,t("signInPrompt.header")),t(`signInPrompt.${Ie}Text`,t("signInPrompt.text"))]:[t("signInPrompt.header"),t(Le?"signInPrompt.textV2":"signInPrompt.textV3")]},[Le,N,t]),[QA,$8]=m.useState({onSubmitCallback:null,onCancelCallback:null}),G8=m.useCallback(async()=>new Promise(Ie=>{if(gt(xL)||ei.length===0){Ie(!0);return}H("biometric-consent"),$8({onSubmitCallback:()=>{H(null),Ie(!0)},onCancelCallback:()=>{H(null),Ie(!1)}})}),[ei,H]),q8=m.useCallback(Ie=>{var Bt;if(!MA(Ie)&&Ie.key==="ArrowDown"&&(Bt=W.current)!=null&&Bt.contains(document.activeElement)&&jd.current){Ie.preventDefault();const Nt=jd.current.querySelector("button");Nt&&Nt.focus()}},[MA]),Ab=async Ie=>{var Ke,Bt;if(mr&&await VN(),!KA||!$&&!qA||WA){n();return}ye&&!await G8()||(C8(!1),Aw(),nB?(Bt=W.current)==null||Bt.focus():(Ke=W.current)==null||Ke.blur(),await lB(Ie??$))},K8=m.useCallback(async()=>{await b()},[b]),{launchAudioCall:kb,startAudioCallIfNotStartedAlready:xb,endAudioCall:Vd,toggleAudioInput:W8,hasOutputVolume:Rb,inputVolume:Y8,isInputMuted:Q8,isAudioDeepLink:J8,canInitAudio:X8}=_Se({isAudioCall:Qn,onCallTerminated:K8,onMute:()=>Sn({source:"audioCall",scenario:"mute"})});m.useEffect(()=>{M&&(H(Ib?"prompt-3p-sign-in":"prompt-sign-in"),N.isOpen&&x({...N,isOpen:!1,reason:N.reason??(Y?"overTurnLimit":null)}),Fa(!0))},[H,x,M,N,Ib,Y]),m.useEffect(()=>{te&&("geolocation"in navigator?setTimeout(()=>{H("prompt-location"),Fa(!0),rr("hasBeenPromptedForLocation","true"),K.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"seen"}})},tz):K.trackEvent({name:"system",data:{eventName:"geolocationUnavailable"}}))},[H,te]),m.useEffect(()=>{Pd?H("daily-briefing-player"):ct?(Fa(!0),H("cross-promo-card")):H(Fd?"safety-risk-card":kp?"computer-use-task-closed":null)},[H,ct,kp,Fd,Pd]);const Pb=m.useRef(null),Z8=db(Ie=>{const Ke=document.getElementById("app");Ke&&(ae(Ie.height),Ke.style.setProperty("--composer-container-height",`${Ie.height}px`))}),eB=()=>{Lo(),L(void 0)},JA=()=>{J&&(xb(),pe(!1))},Lo=()=>{if(Hn&&X==="daily-briefing-chat"&&(H("daily-briefing-player"),Aw()),X==="prompt-3p-sign-in"&&(pr||Hn)&&H("daily-briefing-player"),!(Y||Hn||pr||kp||Fd)){if(Is&&(_s!=null&&_s.closeDialogCallback)){_s.closeDialogCallback();return}X==="prompt-review"&&ICe(gt(mt),"dismissed"),X==="cross-promo-card"&&lt(),X==="audioSettings"&&JA(),H(null),X==="prompt-sign-in"&&N.scenario&&x({isOpen:!1,scenario:null})}},Nb=m.useCallback(async()=>{Vd(),sr("bottom"),await b()},[b,Vd,sr]);m.useEffect(()=>{be.instance().config().endAudioOnVisibilityHidden&&!UA&&(Qe?dt==null||dt():Qn&&Nb())},[Nb,Qn,Qe,dt,UA]);const XA={title:t("composer.endAudioCall"),icon:h.jsx(Io,{className:Tm,"aria-hidden":!0}),isVisible:!0,onClick:Nb},tB=Vye(),ZA=()=>{Hn||pr?dt==null||dt():Qn&&Vd(),pe(!0)},Rp=Te(Jy),Ob=(B==="chat"||B==="reasoning"||B==="smart")&&!ml,nB=vA(),ti=aF(),rB=ti&&(B==="chat"||B==="research"),oB=ti&&tn===null,$d=m.useCallback(()=>{Rp(null)},[Rp]);m.useEffect(()=>{$d()},[$A,$d]),m.useEffect(()=>{Jm($&&Sb?"autosuggest":Dd&&!$?"actions-autosuggest":"starter-prompts")},[Sb,$,Dd]),zc({onOutsideEvent:()=>{Lo()},elements:[Pb],includeScroll:!1,invokeOnce:!1}),zc({onOutsideEvent:xh,elements:[Pb,jd],includeScroll:!1,invokeOnce:!1});const ek={title:t("composer.closeVoiceSettings"),icon:h.jsx(Io,{className:Tm,"aria-hidden":!0}),isVisible:!0,onClick:Lb},tk={title:t("imageCard.composer.closeImageViewer"),icon:h.jsx(Io,{className:Tm,"aria-hidden":!0}),isVisible:!0,onClick:ot},iB=Ie=>{var Nt;Fa(!0),c&&OF("idle");const{relatedTarget:Ke}=Ie;((Nt=jd.current)==null?void 0:Nt.contains(Ke))||setTimeout(()=>xh(),100)},sB=Ie=>{bb&&Ie&&VF(Ie)},nk=m.useCallback(async Ie=>{const{actionType:Ke,id:Bt,prompt:Nt,uri:wa,source:vl}=Ie;switch(Ke){case"prefillComposer":{if(Nt){Bt&&a6({prompt:Nt,type:Bt,source:vl});const ni=qe?Nt:`${Nt} `;Em({prompt:ni})}break}case"sendMessage":{if(Nt)try{fe(!0),await e({text:Nt,inputMethod:"text"})}finally{fe(!1)}break}case"deepLink":{wa&&wa==="copilotn://voiceCall"&&await kb();break}}},[qe,kb,e]),aB=(Ie,Ke)=>{c6({prompt:Ie,prefix:Ke}),Ab(Ie)},rk=m.useCallback(Ie=>{Em({prompt:Ie}),Se(null),ie(null)},[Se,ie]);m.useEffect(()=>{((de==null?void 0:de.source)==="promptInUrl"||(de==null?void 0:de.source)==="edgeOnAskCopilot")&&rk(de.prompt)},[de,rk]);const Mb=m.useCallback((Ie,Ke)=>{const{scenario:Bt,reasonIfSignInError:Nt}=Ke;Ie.message==="not-signed-in"?gl(Nt,Bt):Vs(G4(Ie.message))},[gl]),cB=ve("local-agents"),lB=async Ie=>{var vl,ni,ck,lk;const Ke=zSe(Ie),Bt=HSe(Ie,zd),Nt=Ie.trim(),wa=B==="research"&&f?{research:{awaitUserConfirmation:!0}}:void 0;if(X!=="daily-briefing-chat"&&(F8(),Fa(!0),KF(!1),k(!0),H(null)),xh(),cB){if(Nt.startsWith("/agent")){await C();return}if(S.endsWith("/agents"))return}X!=="daily-briefing-chat"&&await b();try{fe(!0);let Ta;rn&&(Ta=rn),vn&&(Ta=vn),await e({text:Nt,filesWithAttachment:zd,inputMethod:"text",scenario:Ke??void 0,customData:Bt??void 0,reference:Ta,context:wa})}catch(Ta){if(Ta instanceof Error){let uk={};ei.length>0&&(uk={eventInfo_uploadFileSize:((ni=(vl=ei[0])==null?void 0:vl.file)==null?void 0:ni.size)??0,eventInfo_uploadFileType:((lk=(ck=ei[0])==null?void 0:ck.file)==null?void 0:lk.type)??"",eventInfo_numDocumentsUploaded:ei.length}),K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:Ta.message,eventInfo_details:"Error submitting message",...uk}}),Mb(Ta,{reasonIfSignInError:"fileUpload"})}else K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:"Unknown error",eventInfo_details:"Error submitting message"}}),Vs({title:t("composer.errors.default.title"),message:t("composer.errors.default.message")})}finally{fe(!1),VSe()}},Gd=m.useCallback(Ie=>{const Ke=!F&&!u;return Ke&&gl("fileUpload",Ie),Ke},[F,u,gl]),ok=m.useCallback(()=>{var Ie;Gd()||(Ie=ne.current)==null||Ie.click()},[Gd]);m.useEffect(()=>{if(xp||!o)return()=>{};const Ie=async Ke=>{const{file:Bt,error:Nt}=pme(Ke);(Bt??Nt)&&(Ke.preventDefault(),Nt?Mb(Nt,{reasonIfSignInError:"fileUpload"}):Bt&&As({rawFiles:[Bt],scenario:"pasteUpload",replaceExisting:!v}))};return document.addEventListener("paste",Ie),()=>document.removeEventListener("paste",Ie)},[As,xp,o,Mb,v]),m.useEffect(()=>{Eb!==null&&(As({rawFiles:[Eb],scenario:"fileUpload",replaceExisting:!v}),FA(null))},[Eb,As,FA,v]),m.useEffect(()=>{Ne&&!Me&&(GA({uploads:[{kind:"onedrive",item:Ne,file:new File([],Ne.name)}],scenario:"fileUpload",replaceExisting:!v}),z(null))},[Ne,z,Me,GA,v]),m.useEffect(()=>{Hn&&Ft()},[Hn]);function uB(Ie){const Ke=Array.from(Ie.target.files??[]),Bt=Ke[0];Ke.length===0||!Bt||As({rawFiles:v?Ke:[Bt],scenario:"fileUpload",replaceExisting:!v})}const dB=Ie=>{if(!Ob||(Ie.preventDefault(),Gd()))return;$d();const Ke=Ie.dataTransfer.files[0],Bt=Array.from(Ie.dataTransfer.files);Ke&&As({rawFiles:v?Bt:[Ke],scenario:"fileUpload",replaceExisting:!v})};function Lb(){$e(!0),H(Ie=>Ie==="audioSettings"?Hn||pr?(Ut("close"),"daily-briefing-player"):(JA(),null):"audioSettings")}async function hB(){mr&&await VN(),Sn({source:"audioCallButton"}),await kb()}m.useEffect(()=>{const Ie=Ke=>Ke==="start"?xb():Vd();return Kt.on("composer:request-voice",Ie),()=>{Kt.off("composer:request-voice",Ie)}},[Vd,xb]),m.useEffect(()=>{const Ie=()=>{var Ke;(Ke=W.current)==null||Ke.focus()};return Kt.on("composer:focus-input",Ie),()=>{Kt.off("composer:focus-input",Ie)}},[]);const fB=m.useCallback(()=>{var Ie;(Ie=W.current)==null||Ie.focus()},[W]),pB=BSe(fB),mB=m.useCallback(async()=>{if(Gd())return;$d();const{file:Ie,error:Ke}=await Hce.run({});Ie?As({rawFiles:[Ie],scenario:"screenshot",replaceExisting:!v}):Ke&&Vs(Ke)},[$d,Gd,As,v]),gB=async()=>{Lo(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async Ie=>{const{latitude:Ke,longitude:Bt,accuracy:Nt}=Ie.coords;K.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"shared",eventInfo_locationAccuracy:Nt}}),await Fr({path:"/user/location",args:{body:{latitude:Ke,longitude:Bt,accuracyInMeters:Nt,provider:Nt<100?"gps":"wifi"}}})},Ie=>{K.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"denied",eventInfo_error:{code:Ie.code,message:Ie.message}}}),Vs({title:t("composer.errors.location.title"),message:t("composer.errors.location.message")})},{enableHighAccuracy:!0})},vB=PF({from:"/",scenario:"voice"}),yB=()=>{const Ie=h.jsx(Xs,{className:"end-0",data:XA,children:XA.icon});if(X==="dismiss-audio-call-only")return Ie;switch(Od){case"requires-account":case"signed-out":return h.jsxs(h.Fragment,{children:[Ie,h.jsx(dA,{className:"mx-2",title:t("voice.signUpOrLogin"),onClick:vB})]});case"time-expired-non-pro":case"time-expired-month-non-pro":return h.jsxs(h.Fragment,{children:[Ie,tB]});case"time-expired":case"checking-availability":case"error":case"not-in-flight":case"throttled":case"throttled-non-pro":case"region-not-available":case"time-expired-month":case"microphone-denied":case"microphone-not-found":return Ie;case"waiting-for-user-interaction":case"available":return h.jsx(xe.div,{className:G(X!=="audioSettings"&&"flex"),children:X==="audioSettings"?h.jsx(Xs,{className:"end-0",data:ek,children:ek.icon}):h.jsxs(h.Fragment,{children:[Ie,h.jsx(Uge,{className:"mx-2",inputVolume:Y8,isMuted:Q8,isOutputPlaying:Rb,coachUserUnmute:J8&&!X8&&!Re,onClick:W8}),h.jsx(Sm,{children:h.jsx(Xs,{className:"start-0",data:{title:t("composer.voiceSettings"),isVisible:!0,onClick:Lb},children:h.jsx(er,{url:$ye,className:Tm,"aria-hidden":!0})})})]})});default:return Od}},Db=({enableActionButtons:Ie})=>{var Nt;let Ke;ei.length>0?Ke=t("userInput.messageRequiredPlaceholderText"):wb?Ob?Ke=t("userInput.imageDropPreviewPlaceHolderText"):Ke=t("userInput.fileDropNotSupportedPlaceHolderText",{chatMode:Mf(B)}):mr?Ke=t("userInput.continueConversationInputPlaceholderText"):g!=null&&g.name&&c?Ke=t("userInput.characterPlaceholderText",{character:g.name}):fl?Ke=t("research.placeholder"):Vr&&Hn&&(Ke=t(X==="daily-briefing-chat"?"userInput.dailyChatInputPlaceholderText":"userInput.dailyComposerInputPlaceholderText"));const Bt=(Nt=be.instance().config().composer)==null?void 0:Nt.smallAttachmentCard;return h.jsxs(h.Fragment,{children:[h.jsxs(xe.div,{className:G("w-full",{"mt-2 h-auto min-h-32 px-2":_b&&!nn&&!Bt,"mt-2 h-[58px] px-2":_b&&!nn&&Bt,"h-auto":nn,"h-0":!_b&&!nn}),layout:!0,children:[zd.length>0&&h.jsx(jCe,{onRemove:B8,attachments:zd}),nn&&b8&&h.jsx(xe.div,{className:"z-10 mt-2 w-full px-2","data-testid":"browser-tabs-preview",children:h.jsx(Zve,{})})]}),h.jsx(CA,{ref:W,className:"w-auto grow",disabled:xp,inputValue:$,errorMessage:se,onClick:async()=>{P8&&(ws&&at({source:"composerInput",scenario:"clickNavigateToChat",pageName:"discover"}),await b())},onBlur:iB,onChange:WF,onFocus:sB,onEnter:async()=>{T8()||await Ab()},onKeyDown:q8,onMentionIfEnabled:nn?S8:void 0,setInput:_w,setError:P,placeholder:Ke,characterLimit:Q,rightButtons:Ie?[h.jsx(wN,{config:ik()},"composer-action-button")]:void 0,testId:"composer-input","aria-autocomplete":"both","aria-controls":bb?LA:void 0})]})},ik=()=>{if(Pe||fl)return{mode:"stop",onClick:r};if(KA)return{mode:"submit",disabled:WA,onClick:Ab};if(!i&&!HA)return{mode:"microphone",onClick:hB}},bB=({showChatModeSwitcherButton:Ie,showPlusButton:Ke,showUploadFileButton:Bt,homeButtonState:Nt,enableInputActionButtons:wa})=>{const vl=ti?"to-stone-400/8 from-stone-400/5 dark:from-midnight-800/65 dark:to-midnight-800/65":"from-stone-400/10 to-white/35 dark:from-slate-700/35 dark:to-midnight-800/65";return h.jsx(xe.div,{className:G("relative max-h-full w-expanded-composer max-w-chat bg-gradient-to-b p-1.5",vl),layout:!0,style:{borderRadius:Cm,boxShadow:nt==="dark"?EN:SN},ref:Ld.setReference,children:h.jsxs(xe.div,{className:G(ti?sve:ive),layout:!0,style:{borderRadius:nve},children:[h.jsx(xe.div,{className:G(rve,ove,wb?"before:opacity-100 before:delay-100 before:duration-200":"before:opacity-0"),layout:!0,onDragOver:ni=>ni.preventDefault(),onDrop:ni=>dB(ni),children:Db({enableActionButtons:wa})}),!wa&&h.jsxs("div",{className:"flex justify-between px-2 pb-0.5",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx(Fve,{state:Nt}),h.jsxs("div",{className:"flex gap-2",children:[Ie&&h.jsx(Uve,{disableChatModeSwitcher:!HA}),rB&&h.jsx(jSe,{onPrefillComposerInput:ni=>{Em({prompt:ni})},disabled:Pe||fl}),oB&&h.jsx(Tve,{disabled:Pe||fl})]})]}),h.jsxs("div",{className:"flex gap-2",children:[Ke&&h.jsx(WCe,{startNewChatDisabled:ze,onStartNewConversation:pB,onSelectFileIfEnabled:Ob?ok:void 0,uploadButtonDisabled:YA,onSelectOneDriveFileIfEnabled:(w==null?void 0:w.provider)==="microsoft"&&d?()=>{We(!0),Rp(null)}:void 0,onTakeScreenshot:mB,onSelectUserOpenedTabsIfEnabled:nn?()=>{Rp(null),y8(!0)}:void 0}),Bt&&h.jsx(FSe,{selectFile:ok,disabled:YA}),h.jsx(wN,{config:ik()})]})]})]})})},CB=async()=>{N.scenario&&(Sn({source:"signin",scenario:N.scenario}),x({isOpen:!1,scenario:null})),Ib?await y({from:"/conversations",to:"/login"}):await _p({provider:"microsoft"})};if(!Je||!DA)return null;let jb=Jge;je?jb=Zge:nt==="light"&&ti&&(jb=tve);let Ub=SN;return nt==="dark"?Ub=EN:ti&&(Ub=Qge),h.jsxs(h.Fragment,{children:[jA&&h.jsx("div",{className:G("fixed inset-0 size-full bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70")}),h.jsxs("div",{"data-testid":"composer",ref:Z8,className:G("pointer-events-none absolute bottom-0 flex",hl&&"sm:bottom-1/2 sm:translate-y-1/2 sm:pt-36",qt.composer,Ud==="side-by-side"&&Ts&&E&&!BA&&"mb-2",Ud==="side-by-side"&&Ts&&!BA&&"w-1/4 min-w-chat-side-by-side",Ud==="side-by-side"&&Ts&&"end-0 pe-1",(Ud==="chat-only"||I||!Ts)&&"w-full"),children:[h.jsx("input",{type:"file",accept:ume.join(","),className:"hidden",ref:ne,onChange:uB,"aria-hidden":"true",multiple:v}),h.jsx(Tn,{children:x8&&h.jsx(Vge,{dynamicHeight:X===null&&!ws})}),h.jsxs(xe.div,{className:G("relative flex w-full flex-col-reverse items-center px-3 sm:flex-col",hl?"sm:mb-0":"sm:mb-8",je?"mb-3":"mb-4",(Hn||pr)&&"min-w-72"),initial:p?"enter":!1,animate:"animate",variants:{enter:KSe,animate:WSe},transition:nb,style:gT,children:[A8&&h.jsx(xn,{className:"pointer-events-auto flex h-[250px] w-full max-w-chat justify-center px-2 pb-4",initial:p?"initial":!1,children:h.jsx($Ce,{onWidgetClick:nk})}),h.jsx(YO,{transition:R?uue:{duration:0},children:h.jsxs(xe.div,{className:G("relative max-h-full min-h-composer min-w-16 max-w-chat rounded-5xl",nn&&"z-40",E&&T&&!hl&&!j&&"md:top-2"),children:[c&&$A&&h.jsx(Yge,{}),h.jsx(xe.div,{className:"absolute inset-0",layout:!0,style:{borderRadius:Cm,boxShadow:jb}}),h.jsx(Tn,{children:Rb&&h.jsx(CN,{})}),h.jsx(xe.div,{className:G("relative",F7),layout:!0,style:{borderRadius:Cm,boxShadow:je?eve:Xge},children:h.jsxs(xe.div,{className:G("pointer-events-auto relative flex flex-col contrast-more:border-2",Is&&"max-w-72",jA&&Ws),"data-testid":"composer-content",ref:Pb,layout:!0,style:{borderRadius:Cm,boxShadow:Ub},children:[h.jsx(Tn,{children:Rb&&h.jsx(CN,{isNested:!0})}),X&&X!=="daily-briefing-player"&&X!=="dismiss-audio-call-only"&&h.jsxs(xe.div,{className:G(!Is&&!Hd&&X!=="reasoning-mode-pro-subscription"&&"border-b border-black/10 dark:border-white/10",X==="reasoning-mode-pro-subscription"&&"sm:w-think-deeper-pro-subscription",X==="audioSettings"&&"w-settings",Hd&&X!=="daily-briefing-chat"&&"w-prompt-sign-in",Hd&&(X==="computer-use-task-closed"||X==="safety-risk-card")&&"max-w-single-image",X==="daily-briefing-chat"&&(T?"min-w-chat-side-by-side bp-960:max-w-full lg:w-expanded-composer":"w-expanded-composer")),layout:!0,children:[X!=="dialog"&&h.jsxs(xe.div,{"data-testid":"audio-settings-dialog",className:G("t-custom-scrollbar max-h-expanded-section overflow-auto",be.instance().config().wkWebViewScrollbarFix&&"wk-webview-scrollbar-fix",X==="audioSettings"&&"px-2 py-4"),layout:!0,initial:rt,animate:{...Ot,transition:{delay:_o.default}},ref:_e,children:[h.jsx(Tn,{children:Hd&&h.jsxs(Sm,{children:[X==="biometric-consent"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:h.jsx(aEe,{onSubmit:QA.onSubmitCallback,onCancel:QA.onCancelCallback})}),X==="prompt-sign-in"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(YS,{header:z8,text:V8,primaryAction:{title:t("common.loginText"),onClick:CB},testid:"prompt-sign-in-composer-action",secondaryAction:Y?void 0:{onClick:Lo,title:t("common.maybeLater"),testid:"maybe-later-button"}})}),X==="prompt-3p-sign-in"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(uEe,{dismiss:Lo})}),X==="upsell-microsoft-account-for-pro-subscription"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(cEe,{dismiss:Lo,source:"Composer"})}),X==="daily-briefing-chat"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(lEe,{dismiss:Lo,inputUI:Db({enableActionButtons:!0})})}),X==="prompt-location"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(YS,{header:t("locationPermission.header"),text:t("locationPermission.text"),primaryAction:{title:t("locationPermission.share"),onClick:gB},secondaryAction:{onClick:Lo,title:t("common.maybeLater")}})}),X==="confirm-link-navigation"&&Tb&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(YS,{showImage:!1,header:t("composer.linkConfirmation.header"),text:t("composer.linkConfirmation.text",{url:Tb}),primaryAction:{title:t("common.continue"),onClick:()=>{Sn({source:"linkNavigationConfirmButton"}),window.open(ea(tf(Tb)),"_blank",k8),Lo(),VA(void 0)}},secondaryAction:{onClick:()=>{Lo(),VA(void 0)},title:t("common.cancel")}})}),X==="prompt-review"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(sEe,{})}),X==="cross-promo-card"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(iEe,{variant:"aggressive"})}),a&&X==="shopping-upsell-card"&&h.jsx(m.Suspense,{fallback:h.jsx(GN,{}),children:h.jsx(YSe,{onDismiss:()=>H(null)})}),X==="shopping-price-tracking"&&Ee&&h.jsx(m.Suspense,{fallback:h.jsx(GN,{}),children:h.jsx(QSe,{content:Ee.data,messageId:Ee.messageId,cardType:Ee.cardType,onConfirm:()=>H("shopping-upsell-card"),onCancel:eB})}),X==="add-to-page"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(oEe,{onClose:Lo})}),X==="safety-risk-card"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(rEe,{})}),X==="computer-use-task-closed"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(nEe,{})}),X==="over-task-quota"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(tEe,{})})]})}),X==="audioSettings"&&h.jsx(Sm,{children:h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(ZSe,{onVoiceSelected:ZA,onVoiceSpeedChange:ZA})})}),X==="reasoning-mode-pro-subscription"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(eEe,{})}),Md&&h.jsx(Sm,{children:h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex max-h-expanded-section w-prompt-sign-in flex-col overflow-auto rounded-t-5xl p-5 sm:w-checkout-composer",children:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(At,{className:"size-12"})})}),children:h.jsx($Se,{})})})]}),Is&&Bd&&_s&&h.jsx(cve,{titleKey:Bd.titleKey,textKey:Bd.textKey,buttonTextKey:Bd.buttonTextKey,onClick:Bd.onClick,button:_s.button,cancelButton:_s.cancelButton,closeDialogCallback:_s.closeDialogCallback})]}),(Hn&&X!=="daily-briefing-chat"||pr)&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-composer w-daily-briefing items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(dEe,{onDismissAudioSettingClick:()=>Lb(),isPodcast:pr,inputUI:Vr&&!pr?Db({enableActionButtons:!1}):void 0})}),Qn&&(!X||X==="audioSettings"||X==="dismiss-audio-call-only")&&h.jsx("div",{className:"flex justify-center p-2",children:yB()}),Cb&&bB({showChatModeSwitcherButton:!ti,showPlusButton:!ti,showUploadFileButton:ti&&!i,homeButtonState:ml||ti?"hidden":M8(),enableInputActionButtons:Ze&&yn}),Ze&&!yn&&h.jsxs(xe.div,{className:G("relative flex max-h-full max-w-chat justify-center",!X&&"p-2",!Is&&"h-composer"),layout:!0,children:[h.jsx(Xs,{data:tk,children:tk.icon}),St&&h.jsx(Rye,{onClick:Bn})]}),Me&&h.jsx(PSe,{onPick:re,onClose:he,onError:O8}),nn&&v8&&Cb&&h.jsx(xye,{onSave:E8,styles:Ap,onRef:Ld.setFloating,onClose:w8,outsideClickElements:N8()})]})})]})}),hl&&h.jsxs(xn,{id:U,className:G("pointer-events-auto flex h-[150px] w-full max-w-chat flex-none items-end px-2 sm:flex-initial sm:items-start",qt.composerBottomSlot),delay:.2,initial:p?"initial":!1,children:[U==="autosuggest"&&bb&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(JSe,{id:LA,dataResponse:Sb,onClick:(Ie,Ke)=>aB(Ie,Ke),onHighlight:Ie=>_w(Ie),onDismiss:xh,className:"mb-3 sm:mb-0 sm:mt-3",ref:jd})}),U==="actions-autosuggest"&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(XSe,{onClick:Ie=>Em({prompt:Ie})})}),U==="starter-prompts"&&_8&&h.jsx(HCe,{className:"sm:mt-8",onWidgetClick:nk})]})]})]})]})}function l6(t){const e=ve("force-cookie-banner-location");return(t&&Jv.includes(t))===!0||e}function fEe(t){const{isChecked:e,label:n,description:r,className:o,onChange:i,accessory:s,disabled:a}=t,c=m.useId(),[u,d]=m.useState(!1),f=()=>d(!0),p=()=>d(!1),{focusable:g}=rd({autoRestoreFocus:!0,forceFocus:!0});let v=e?"bg-system-green-400":"bg-black/20 dark:bg-white/20";return a&&(v="bg-black/20 after:bg-white/40 dark:bg-white/20 dark:after:bg-black/40"),h.jsxs("label",{className:G("flex items-center justify-between gap-4",!a&&"cursor-pointer",o),htmlFor:c,ref:g.ref,children:[h.jsxs("div",{className:"flex flex-1 flex-col",children:[h.jsx("span",{className:"text-foreground-800 text-sm",children:n}),r&&h.jsx("span",{className:"font-medium text-foreground-450 text-xs",children:r})]}),h.jsxs("span",{className:"flex flex-row items-center gap-2",children:[s,h.jsx("input",{id:c,type:"checkbox",title:n,checked:e,onChange:y=>i(y.target.checked),onFocus:f,onBlur:p,className:"sr-only",disabled:a}),h.jsx("div",{className:G("relative h-6 w-10 rounded-full","after:absolute after:start-[2px] after:top-[2px] after:size-5 after:rounded-full after:transition-all contrast-more:forced-color-adjust-none",v,!a&&"after:bg-white after:shadow-switch after:hover:scale-110 after:active:w-6",e&&"after:translate-x-4",e&&!a&&"after:active:translate-x-3",u&&"outline")})]})]})}function pEe(){const t=Xo("kill-cookie-banner"),e=D(ao),[n,r]=tt(NT),[o,i]=m.useState("main"),[s,a]=m.useState(!1),[c,u]=m.useState(!1),[d,f]=m.useState(!1),p=l6(e),g=!!q2(),v=!t&&p&&!g&&!n;if(m.useEffect(()=>{v&&K.trackEvent({name:"system",data:{eventName:"cookieBannerShown",eventInfo_region:e}})},[e,v]),!v)return null;const y=b=>{K.trackEvent({name:"interaction",data:{eventName:"cookieBannerChoice",eventInfo_analytics:b.analytics,eventInfo_advertising:b.advertising,eventInfo_socialMedia:b.socialMedia}}),PV(b),r(!0)};return h.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[h.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),h.jsx("div",{className:G("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Fi,qt.modal),children:h.jsxs("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:[o==="main"&&h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("h3",{className:"text-md",children:ce("cookies.heading")}),h.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[h.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[h.jsx("p",{children:ce("cookies.bannerIntro")}),h.jsxs("p",{children:[ce("cookies.bannerExplanation"),h.jsx(ta,{href:Ju,title:ce("cookies.privacyLink"),className:"ps-1 underline",children:ce("cookies.privacyLink")})]})]}),h.jsxs("div",{className:"flex min-w-44 shrink-0 grow flex-col gap-2",children:[h.jsx(Ue,{variant:"rect",size:"32-xs",onClick:()=>y({analytics:!0,advertising:!0,socialMedia:!0}),title:ce("cookies.accept"),testId:"cookie-banner-accept-button",children:ce("cookies.accept")}),h.jsx(Ue,{variant:"rect",size:"32-xs",onClick:()=>y({analytics:!1,advertising:!1,socialMedia:!1}),title:ce("cookies.reject"),testId:"cookie-banner-reject-button",children:ce("cookies.reject")}),h.jsx(Ue,{variant:"rect",color:"subtle-dimmed",size:"32-xs",onClick:()=>{i("more-options")},title:ce("cookies.moreOptions"),testId:"cookie-banner-options-button",children:ce("cookies.moreOptions")})]})]})]}),o==="more-options"&&h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ue,{title:ce("common.backText"),variant:"circle",color:"subtle-dimmed",size:"32-xs",onClick:()=>i("main"),children:h.jsx(Bc,{className:"rotate-180"})}),h.jsx("h3",{className:"ps-3 text-md",children:ce("cookies.moreOptionsHeading")})]}),h.jsx("p",{className:"py-3 text-2xs",children:ce("cookies.essentialCookiesExplanation")}),h.jsx(QS,{label:ce("cookies.advertisingLabel"),explanation:ce("cookies.advertisingDescription"),isChecked:c,onChange:()=>u(b=>!b)}),h.jsx(QS,{label:ce("cookies.analyticsLabel"),explanation:ce("cookies.analyticsDescription"),isChecked:s,onChange:()=>a(b=>!b)}),h.jsx(QS,{label:ce("cookies.socialMediaLabel"),explanation:ce("cookies.socialMediaDescription"),isChecked:d,onChange:()=>f(b=>!b)}),h.jsx("div",{className:"flex justify-end",children:h.jsx(Ue,{variant:"rect",size:"36-sm",className:"w-fit px-7",onClick:()=>{y({analytics:s,advertising:c,socialMedia:d})},title:ce("cookies.savePreferences"),children:ce("cookies.savePreferences")})})]})]})})]})}function QS(t){const{label:e,explanation:n,isChecked:r,onChange:o}=t;return h.jsxs(h.Fragment,{children:[h.jsx(cA,{horizontalMargin:!1}),h.jsx(fEe,{label:e,className:"w-full py-2 pe-1",isChecked:r,onChange:o}),h.jsx("p",{className:"pb-4 pt-1 text-2xs",children:n})]})}function mEe(){const[t,e]=m.useState(!0),n=D(es),r=UF(),o=m.useMemo(()=>n==null?void 0:n.images,[n]),i=m.useMemo(()=>({title:n==null?void 0:n.title,subTitle:n==null?void 0:n.subTitle}),[n]),a=D(Cs)==="dark"?o==null?void 0:o.dark:o==null?void 0:o.light,c=i;m.useEffect(()=>{su({name:"interaction",status:"Shown",eventName:"crossPromotionStripCard",source:"bottomRightCard"})},[]);const u=()=>{e(!1),r()};return n===null||!t?null:h.jsx(xn,{mode:"sync",className:"fixed bottom-5 end-5 z-[1000]",children:h.jsxs("div",{className:G("flex h-32 w-96 flex-col justify-center rounded-5xl border border-white bg-background-100 p-3 dark:border-white/5 dark:bg-background-250"),children:[h.jsxs("div",{className:"flex items-center",children:[a&&h.jsx("img",{src:a,alt:ce("crossSelling.imageAlt"),className:"size-24 rounded-lg object-cover"}),h.jsxs("div",{className:"ml-3 mr-6",children:[h.jsx("div",{className:"mb-1 text-sm",children:h.jsx("strong",{children:c.title})}),h.jsx("div",{className:"text-sm",children:c.subTitle})]})]}),h.jsx("div",{className:"absolute end-1.5 top-1.5 flex self-start",children:h.jsx(Ue,{title:ce("common.closeText"),variant:"square",color:"subtle-dimmed","aria-label":ce("common.closeText"),onClick:u,className:"flex size-8 items-center justify-center p-1.5",children:h.jsx(Io,{className:"m-0 size-5 self-center p-0"})})})]})})}function JN({icon:t,text:e,buttonText:n,buttonColor:r,buttonOnClick:o,className:i=""}){return h.jsxs("div",{className:G("flex items-center justify-between",i),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex size-10 items-center justify-center rounded-[8.5px] border border-black/10 bg-background-200 dark:border-white/10",children:h.jsx("div",{className:"m-1 size-6",children:t})}),h.jsx("p",{className:"text-base",children:e})]}),h.jsx(Ue,{className:"h-10 w-24",color:r,title:n,"aria-label":n,variant:"rect",onClick:o,children:n})]})}const u6=t=>m.createElement("svg",{viewBox:"0 0 192 192",xmlns:"http://www.w3.org/2000/svg",fill:"none",...t},m.createElement("circle",{cx:96,cy:96,r:74,stroke:"currentColor",strokeWidth:12}),m.createElement("ellipse",{cx:96,cy:96,stroke:"currentColor",strokeWidth:12,rx:30,ry:74}),m.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M28 72h136M28 120h136"})),Hxe=Object.freeze(Object.defineProperty({__proto__:null,default:u6},Symbol.toStringTag,{value:"Module"})),gEe="https://ercz.adj.st/home?network=1g17o7tz&campaign=1gl0zo0u&adj_t=1gl0zo0u&adj_deep_link=sapphirecopilot%3A%2F%2Fhome%3Fnetwork%3D1g17o7tz%26campaign%3D1gl0zo0u&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.microsoft.copilot&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fmicrosoft-copilot%2Fid6472538445%3Fct%3DCMC_Copilot_ContinueChatting%26pt%3D80423";function vEe(){const t=vA(),e=X2(),n=Q2(),r=GV(),o=m.useRef(null),[i,s]=m.useState(!1),a=D(uy),c=D(pd),u=D(lM);m.useEffect(()=>{if(!u||!a||c||t||n||r||!e){s(!1);return}const p=pn(i1),g=pn(rC),v=!Av(p,3*lg),y=Z_(g,3);v||y?(s(!0),su({name:"system",status:"Shown",eventName:"copilotMobileCrossSelling"})):su({name:"system",status:"TriggeredButSnoozed",eventName:"copilotMobileCrossSelling"})},[c,t,n,r,a,u,e]);const d=()=>{rr(i1,Date.now().toString());const p=pn(rC);rr(rC,`${parseInt(p??"0",10)+1}`),s(!1),su({name:"interaction",status:"Dismissed",eventName:"copilotMobileCrossSelling"})},f=()=>{window.open(gEe),s(!1),su({name:"interaction",status:"Clicked",eventName:"copilotMobileCrossSelling"})};return i?h.jsx(xn,{mode:"sync",className:G("relative",qt.modal),children:h.jsx("div",{className:"fixed inset-0 grid bg-stone-850/30 dark:bg-midnight-850/70",children:h.jsx("div",{ref:o,className:"mb-0 h-fit w-full self-end justify-self-center rounded-t-3xl border border-white/10 bg-background-200 p-2 contrast-more:border-2 md:mb-5 md:w-fit md:rounded-3xl",children:h.jsxs("div",{className:"mx-3 mb-6 mt-3 flex flex-col gap-4",children:[h.jsx("div",{className:"text-md md:text-center",children:ce("crossSelling.header")}),h.jsx(JN,{icon:h.jsx(gp,{}),text:ce("crossSelling.copilotApp"),buttonText:ce("common.open"),buttonColor:"strong",buttonOnClick:f,className:"gap-14"}),h.jsx(JN,{icon:h.jsx(u6,{}),text:ce("crossSelling.browser"),buttonText:ce("common.continue"),buttonColor:"subtle-bright",buttonOnClick:d,className:"gap-14"})]})})})}):null}function yEe(){m.useEffect(()=>{const t=document.activeElement;return()=>{t.focus()}},[])}const d6=t=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M3.28034 2.21968C2.98745 1.92678 2.51257 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98743 2.21966 3.28032L3.48326 4.54395C3.17684 5.03983 3 5.62426 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C18.3757 21 18.96 20.8232 19.4559 20.5169L20.7194 21.7805C21.0123 22.0734 21.4872 22.0734 21.7801 21.7805C22.073 21.4876 22.073 21.0127 21.7801 20.7198L3.28034 2.21968ZM11.1189 12.1797C10.8678 12.2864 10.6322 12.4409 10.4258 12.643L4.60326 18.3437C4.53643 18.1583 4.5 17.9584 4.5 17.75V6.25C4.5 6.0437 4.5357 5.84574 4.60125 5.66196L11.1189 12.1797ZM19.5 6.25V16.3183L20.9993 17.8176C20.9998 17.7951 21 17.7726 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25C6.2275 3 6.20505 3.00023 6.18265 3.00068L7.68194 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25ZM18.3305 19.4014C18.1489 19.4653 17.9535 19.5 17.75 19.5H6.25C6.04613 19.5 5.8504 19.4651 5.66845 19.4011L11.4752 13.7148L11.5588 13.644C11.8501 13.4316 12.2596 13.4553 12.5247 13.7148L18.3305 19.4014ZM15.2521 6.5C16.4959 6.5 17.5042 7.50831 17.5042 8.75212C17.5042 9.99592 16.4959 11.0042 15.2521 11.0042C14.0083 11.0042 13 9.99592 13 8.75212C13 7.50831 14.0083 6.5 15.2521 6.5ZM15.2521 8C14.8367 8 14.5 8.33673 14.5 8.75212C14.5 9.1675 14.8367 9.50423 15.2521 9.50423C15.6675 9.50423 16.0042 9.1675 16.0042 8.75212C16.0042 8.33673 15.6675 8 15.2521 8Z",fill:"currentColor"})),zxe=Object.freeze(Object.defineProperty({__proto__:null,default:d6},Symbol.toStringTag,{value:"Module"}));function bEe(t,e=200,n=50){const[r,o]=m.useState(!1),[i,s]=m.useState(null);return m.useEffect(()=>{let a;if(!t)a=setTimeout(()=>{o(!0),s(Date.now())},e);else if(r){const c=i?Date.now()-i:1/0,u=n-c;u>0?a=setTimeout(()=>{o(!1),s(null)},u):(o(!1),s(null))}return()=>{clearTimeout(a)}},[t,e,n,r,i]),r}function CEe(t){const{onError:e,onLoad:n,loadingPlaceholder:r,alt:o,errorClass:i,className:s,src:a,fallbackSrc:c,stableKey:u,...d}=t,[f,p]=m.useState(!1),[g,v]=m.useState(!1),[y,b]=m.useState(!1),C=bEe(g);if(m.useEffect(()=>{p(!1),v(!1),b(!1)},[a]),f)return h.jsx(SEe,{className:i});const S=y&&c?c:a;return h.jsxs(h.Fragment,{children:[C&&(r==null?void 0:r()),m.createElement("img",{...d,alt:o,key:u??S,src:S,className:G(s,!g&&r&&"hidden"),onLoad:w=>{v(!0),n==null||n(w)},onError:w=>{c&&!y?b(!0):p(!0),e==null||e(w)}})]})}function SEe(t){const{className:e}=t;return h.jsx("div",{className:G("flex size-full items-center justify-center",YF,e),children:h.jsx(d6,{})})}function EEe(t){const{className:e}=t;return h.jsx(Tn,{children:h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:h.jsx(xe.div,{className:G(e,"flex size-full items-center justify-center"),"aria-hidden":!0,children:h.jsx(At,{type:"spinnerThemed",className:"size-11 text-center",rendererSettings:{preserveAspectRatio:"xMidYMid slice"}})})})})}function wEe(t){const e=gt(mt);K.trackEvent({name:"system",data:{eventName:"clientImageError",eventInfo_url:t,eventInfo_conversationId:e}})}const TEe=m.lazy(()=>q(()=>import("./video-player-BZDJMibJ.js"),__vite__mapDeps([288,1,289,290,291,292])).then(t=>({default:t.VideoPlayer})));function IEe(){const{closeMediaViewer:t,isMediaViewerOpen:e}=zi(),n=D(_d),r=n==null?void 0:n.media[n.currentMediaIndex],o=m.useRef(null),{t:i}=Fe();Xy(()=>{t()}),yEe(),Sp(o);const s=m.useCallback(u=>{u.key==="Escape"&&e&&t()},[t,e]);if(Es(s),!n||!r)return null;const a=n.media.length>1,c=i("mediaViewer.mediaCountOfTotal",{count:n.currentMediaIndex+1,total:n.media.length});return r.type==="custom-view"?h.jsxs("div",{className:G("pointer-events-auto absolute inset-0",n.customZIndex),ref:o,tabIndex:-1,children:[n.hasBackgroundForCustomView&&h.jsx(vs,{}),h.jsx("div",{className:G("absolute inset-x-0 bottom-0 overflow-auto",n.customViewTopClass??"top-16"),children:r.render()})]}):h.jsxs("div",{className:G("pointer-events-auto absolute inset-0 flex justify-center overflow-auto"),ref:o,tabIndex:-1,children:[h.jsx(vs,{}),h.jsx(Vc,{msg:c}),h.jsx("div",{className:"relative h-full max-w-full px-2 pb-[144px] pt-[88px] sm:px-[104px]",children:h.jsxs("div",{className:"flex h-full min-h-[200px] flex-col items-center justify-center overflow-auto",children:[h.jsxs("div",{className:G("flex min-h-14 w-full gap-4",n.isCurrentMediaLoading&&"hidden"),children:[h.jsx("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:h.jsx(_Ee,{})}),a&&h.jsx("div",{className:"flex shrink-0 justify-end text-xs",children:c})]}),h.jsx(AEe,{})]})}),a&&h.jsx(kEe,{})]})}function _Ee(){var n,r;const t=D(_d),e=t==null?void 0:t.media[t.currentMediaIndex];return!e||e.type==="custom-view"?null:e.type==="card"?e.renderHeader():h.jsxs(h.Fragment,{children:[((n=e.source)==null?void 0:n.title)&&h.jsx("div",{className:"truncate text-xs",children:e.source.title}),((r=e.source)==null?void 0:r.url)&&h.jsxs("div",{className:"flex text-2xs",children:[e.source.iconUrl&&h.jsx("img",{src:e.source.iconUrl,alt:e.source.title,className:"mr-2 inline-block size-4 rounded-full"}),h.jsx("a",{href:e.source.url,className:"block truncate",children:og(e.source.url)})]})]})}function AEe(){var a,c;const[t,e]=GH(_d),n=m.useRef(null),r=ve("image-fallback-thumbnail"),o=t==null?void 0:t.media[t.currentMediaIndex];m.useEffect(()=>{n.current&&e(u=>{if(u){const d=u.media[u.currentMediaIndex];d&&d.type==="video"&&n.current&&(d.player=n.current)}})},[n,e]);const i=m.useCallback(u=>{e(d=>{d&&(d.isCurrentMediaLoading=!u)})},[e]);if(!o)return null;const s=()=>h.jsx(EEe,{});switch(o.type){case"card":return o.renderCard();case"image":return h.jsx(CEe,{loadingPlaceholder:s,src:o.url,fallbackSrc:r?o.thumbnailUrl:void 0,alt:o.altText,referrerPolicy:"no-referrer",errorClass:"h-[calc(100%-56px-44px)] squircle-16 aspect-video",onError:()=>wEe(o.url),onLoad:()=>i(!0),className:G("max-h-[calc(100%-56px-44px)] squircle-16")},o.url?o.url:Math.random());case"video":return h.jsx(mb,{background:o.isShort?"transparent":"default",className:"flex size-full max-h-[calc(100%-56px-32px)] max-w-full",label:(a=o.source)==null?void 0:a.title,size:o.moments&&o.moments.length>0?"md":"xs",children:h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex size-full items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(TEe,{isShort:o.isShort,url:o.url,title:((c=o.source)==null?void 0:c.title)??"",bestMomentIndex:o.bestMomentIndex,moments:o.moments,autoPlay:!0,allowFullScreen:!0,ref:n})})});default:return null}}function kEe(){const t=D(_d),{next:e,previous:n}=zi(),{t:r}=Fe(),o=m.useCallback(a=>{a.key==="ArrowRight"?e():a.key==="ArrowLeft"&&n()},[e,n]);if(Es(o),!t)return null;const i=t.currentMediaIndex>0,s=t.currentMediaIndex<t.media.length-1;return h.jsxs(h.Fragment,{children:[h.jsx(XN,{title:r("mediaViewer.control.previousMedia"),onClick:n,disabled:!i,className:"start-4 sm:start-7",children:h.jsx(Bc,{className:"size-6 rotate-180"})}),h.jsx(XN,{title:r("mediaViewer.control.nextMedia"),onClick:e,disabled:!s,className:"end-4 sm:end-7",children:h.jsx(Bc,{className:"size-6"})})]})}function XN(t){const{onClick:e,disabled:n,children:r,title:o,className:i}=t,s=tr({breakpoint:"sm"});return h.jsx("div",{className:G("absolute top-[calc(50%-20px)]",qt.mediaViewer,i),children:h.jsx(Ue,{size:s?"40-base":"48-lg",variant:"circle",color:s?"acrylic-thin":"subtle-dimmed-inverted",title:o,onClick:e,disabled:n,children:r})})}function xEe({pixelUrl:t,onComplete:e}){return m.useEffect(()=>{const n=setTimeout(()=>{e()},3e3);return()=>{clearTimeout(n)}},[t,e]),h.jsx("img",{className:"hidden",src:t,width:"1",height:"1",alt:"",referrerPolicy:"no-referrer-when-downgrade",onLoad:e,onError:e})}function REe(){const t=ve("ads-pixels"),[e,n]=tt(pM),r=D(NT),o=D(ao),i=(o&&Jv.includes(o))===!0,s=m.useMemo(()=>qf(),[r]),a=!i||s.advertising;if(!t||!a)return null;const c=Object.values(e).filter(u=>u.isMounted).map(u=>u.url);return h.jsx("div",{className:"absolute start-[-9999px] top-[-9999px] size-px overflow-hidden",children:c.map(u=>h.jsx(xEe,{pixelUrl:u,onComplete:()=>n(d=>d[u]?{...d,[u]:{...d[u],isMounted:!1}}:d)},u))})}function PEe({onClick:t}){return h.jsx("div",{className:"absolute end-0 top-0 z-10 p-1 rtl:right-auto",children:h.jsx(Ue,{title:ce("product.dismiss"),"aria-label":ce("product.dismiss"),variant:"rect",color:"subtle-bright-inverted",size:"32-xs",onClick:t,children:h.jsx(Io,{className:"size-4"})})})}const NEe=["overflow-hidden","rounded-[20px]","border","border-solid","border-white/20","shadow-[0px_6px_12px_0px_rgba(0,0,0,0.08)]","backdrop-blur-[30px]","bg-acrylic-default-tint-light/95","dark:bg-acrylic-default-tint-dark/95"];function OEe(t){const{title:e,subtitle:n,dismiss:r,link:o,dismissable:i=!0,className:s,Icon:a,iconClassName:c,isRTL:u,onClick:d}=t,f=n??o?h.jsxs(h.Fragment,{children:[typeof n=="string"?`${n} `:null,o&&h.jsx("span",{className:"font-sans font-normal leading-5 text-accent-450 underline text-sm dark:text-accent-600",role:"button",tabIndex:0,"aria-label":o,children:o})]}):null;return h.jsx("div",{className:G("pointer-events-none absolute start-1/2 top-5 -translate-x-1/2",qt.toastNotification,s),children:h.jsx(Tn,{children:h.jsxs(xe.div,{className:G("pointer-events-auto","relative",NEe,d&&"cursor-pointer"),initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:400,damping:30},onClick:d,children:[i&&h.jsx(PEe,{onClick:r}),h.jsx("div",{className:G("flex","flex-col","items-center","justify-center","py-2","ps-2","pe-1.5",{"w-[min(381px,100vw)]":!!f}),children:h.jsxs("div",{className:G("relative flex w-full items-center p-0",{"gap-x-3":a,"flex-row-reverse":a&&u}),children:[a&&h.jsx("div",{className:"flex size-16 shrink-0 items-center justify-center rounded-xl border border-black/10 dark:border-white/10",children:h.jsx(a,{className:c})}),h.jsxs("div",{className:G("flex flex-1 flex-col justify-center py-1",{"ps-4":!a&&f,"pe-10":i&&f,"px-4":!f}),children:[h.jsx("header",{className:G("flex w-full overflow-hidden",{"items-center":!!f,"items-center justify-center":!f}),children:h.jsx("h2",{className:G("font-sans text-foreground-750",{"text-base-strong":!!f,"text-sm":!f}),children:e})}),f&&h.jsx("p",{className:"w-full font-sans font-normal leading-5 text-foreground-700 text-sm",children:f}),h.jsx(Vc,{msg:`${e??""} ${typeof n=="string"?n:""}`,type:"assertive"})]})]})})]})},e)})}function MEe(){const[t,e]=tt(ob),n=F_(),r=JL(),o=co(),{openMediaViewer:i}=zi(),s=Te(Ir),a=Te(nJ),c=m.useCallback(()=>{t!=null&&t.trackingArgs&&at({source:"toastNotification",scenario:t.trackingArgs.scenario,customData:t.trackingArgs.customData})},[t]),u=m.useCallback(()=>{e(null)},[e]),d=m.useCallback(()=>{if(!(t!=null&&t.action))return;c();const{action:f}=t;switch(f.type){case"SWITCH_CONVERSATION":r({id:f.conversationId});break;case"GO_TO_PAGE":o({from:window.location.pathname,to:f.to});break;case"OPEN_URL":window.open(f.target,"_blank","noopener,noreferrer");break;case"OPEN_MEDIA_VIEWER":i(f.mediaViewerParams);break;case"EXPAND_COMPOSER":s(f.composerSection);break;case"EXPAND_SHOPPING_OVERLAY":a(f.overlaySection);break}u()},[t,c,u,r,o,i,s,a]);return m.useEffect(()=>{let f;return t!=null&&t.dismissAfter&&(f=window.setTimeout(u,t.dismissAfter)),()=>clearTimeout(f)},[t,u]),t?h.jsx(OEe,{title:t.title,subtitle:t.subtitle,link:t.link,dismissable:t.dismissable,className:t.className,Icon:t.iconProvider,dismiss:f=>{f==null||f.stopPropagation(),u()},isRTL:n,onClick:t.action?d:void 0}):null}function LEe(){var o;const t=ve("top-banner-upgrade-surface-app"),e=(o=be.instance().config().uiOverrides)==null?void 0:o.showUpgradeAppTopBanner,n=t&&e;m.useEffect(()=>{n&&K.trackEvent({name:"system",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Shown"}})},[n]);const r=()=>{K.trackEvent({name:"interaction",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Clicked"}}),window.open("macappstore://apps.apple.com/app/id6738511300")};return n?h.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[h.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),h.jsx("div",{className:G("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Fi,qt.modal),children:h.jsx("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("h3",{className:"text-md",children:ce("upgradeSurface.heading")}),h.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[h.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[h.jsx("p",{children:ce("upgradeSurface.primaryDescription")}),h.jsx("p",{children:ce("upgradeSurface.secondaryDescription")})]}),h.jsx("div",{className:"flex min-w-44 shrink-0 grow flex-col justify-center gap-2",children:h.jsx(Ue,{variant:"rect",size:"32-xs",onClick:r,title:ce("upgradeSurface.buttonText"),children:ce("upgradeSurface.buttonText")})})]})]})})})]}):null}function DEe(t){const{children:e,className:n,clipPathBreakpoint:r="md",backgroundColor:o}=t,i=tr({breakpoint:r}),s=lo();return h.jsxs("div",{className:bt("relative h-full overflow-hidden",n),children:[h.jsx("div",{className:G("absolute size-full",s&&!i&&"t-main-clip-path"),children:h.jsx(vs,{customColor:o,isFixed:!0})}),h.jsx("div",{className:G("relative size-full overflow-hidden",s&&!i&&"rounded-[10px]"),children:e})]})}var JS={exports:{}},ZN;function jEe(){return ZN||(ZN=1,function(t){var e=function(){function n(p,g){return g!=null&&p instanceof g}var r;try{r=Map}catch{r=function(){}}var o;try{o=Set}catch{o=function(){}}var i;try{i=Promise}catch{i=function(){}}function s(p,g,v,y,b){typeof g=="object"&&(v=g.depth,y=g.prototype,b=g.includeNonEnumerable,g=g.circular);var C=[],S=[],w=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof v>"u"&&(v=1/0);function E(T,I){if(T===null)return null;if(I===0)return T;var A,_;if(typeof T!="object")return T;if(n(T,r))A=new r;else if(n(T,o))A=new o;else if(n(T,i))A=new i(function(x,M){T.then(function(te){x(E(te,I-1))},function(te){M(E(te,I-1))})});else if(s.__isArray(T))A=[];else if(s.__isRegExp(T))A=new RegExp(T.source,f(T)),T.lastIndex&&(A.lastIndex=T.lastIndex);else if(s.__isDate(T))A=new Date(T.getTime());else{if(w&&Buffer.isBuffer(T))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(T.length):A=new Buffer(T.length),T.copy(A),A;n(T,Error)?A=Object.create(T):typeof y>"u"?(_=Object.getPrototypeOf(T),A=Object.create(_)):(A=Object.create(y),_=y)}if(g){var j=C.indexOf(T);if(j!=-1)return S[j];C.push(T),S.push(A)}n(T,r)&&T.forEach(function(x,M){var te=E(M,I-1),Y=E(x,I-1);A.set(te,Y)}),n(T,o)&&T.forEach(function(x){var M=E(x,I-1);A.add(M)});for(var R in T){var $;_&&($=Object.getOwnPropertyDescriptor(_,R)),!($&&$.set==null)&&(A[R]=E(T[R],I-1))}if(Object.getOwnPropertySymbols)for(var U=Object.getOwnPropertySymbols(T),R=0;R<U.length;R++){var se=U[R],P=Object.getOwnPropertyDescriptor(T,se);P&&!P.enumerable&&!b||(A[se]=E(T[se],I-1),P.enumerable||Object.defineProperty(A,se,{enumerable:!1}))}if(b)for(var k=Object.getOwnPropertyNames(T),R=0;R<k.length;R++){var N=k[R],P=Object.getOwnPropertyDescriptor(T,N);P&&P.enumerable||(A[N]=E(T[N],I-1),Object.defineProperty(A,N,{enumerable:!1}))}return A}return E(p,v)}s.clonePrototype=function(g){if(g===null)return null;var v=function(){};return v.prototype=g,new v};function a(p){return Object.prototype.toString.call(p)}s.__objToStr=a;function c(p){return typeof p=="object"&&a(p)==="[object Date]"}s.__isDate=c;function u(p){return typeof p=="object"&&a(p)==="[object Array]"}s.__isArray=u;function d(p){return typeof p=="object"&&a(p)==="[object RegExp]"}s.__isRegExp=d;function f(p){var g="";return p.global&&(g+="g"),p.ignoreCase&&(g+="i"),p.multiline&&(g+="m"),g}return s.__getRegExpFlags=f,s}();t.exports&&(t.exports=e)}(JS)),JS.exports}var UEe=jEe();const eO=zw(UEe);function FEe(){const t=D(TL),e=m.useRef(!1);m.useEffect(()=>{t&&!e.current&&(K.trackEvent({name:"system",data:{eventName:"copilotStart",eventInfo_duration:window.appEnd-window.appStart,eventInfo_landingPage:K.getLandingPage()}}),e.current=!0)},[t])}const BEe={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:yA};function HEe(t){return function(n){return Fn(n,sY,t?{query:{"api-version":"2"}}:void 0).then(r=>r.data)}}function Ki(t){return Array.isArray(t)?Xh(t):{positive:Xh(t.positive),negative:Xh(t.negative)}}function Xh(t){const e=t,n=e.slice(0,-1),r=e.slice(-1);return[...Kge(n),...r]}function zEe(){const t=ve("ads1_postiviefeedbacksurvey"),e=HEe(t),{data:n,mutate:r}=il("/config",e,BEe),o=Te(ny),i=Te(aM),s=Te(uM),a=Te(Che),c=Te(She),u=Te(Ehe),d=Te(_T),f=Te(AT);FF(r),m.useEffect(()=>{n&&(o(n.voices),i(n.signInPrompts),s(n.maxTextMessageLength),a(n.maxPageContentLength),u(n.pageLimit),c(n.maxPageTitleLength),n.characters&&f(n.characters),n.feedbackOptions.text=Xh(n.feedbackOptions.text),n.feedbackOptions.image=Xh(n.feedbackOptions.image),n.feedbackOptions.card.local=Ki(n.feedbackOptions.card.local),n.feedbackOptions.card.ads=Ki(n.feedbackOptions.card.ads),n.feedbackOptions.card.video=Ki(n.feedbackOptions.card.video),n.feedbackOptions.card.image=Ki(n.feedbackOptions.card.image),n.feedbackOptions.card.shopping=Ki(n.feedbackOptions.card.shopping),n.feedbackOptions.card.sports=Ki(n.feedbackOptions.card.sports),n.feedbackOptions.card.finance=Ki(n.feedbackOptions.card.finance),n.feedbackOptions.card.quiz=Ki(n.feedbackOptions.card.quiz),n.feedbackOptions.card.weather=Ki(n.feedbackOptions.card.weather),d(n.feedbackOptions))},[n,i,o,s,a,c,d,f,u])}function VEe(){const t=ga(In);return m.useCallback(n=>{t(r=>{for(const{id:o,title:i,updatedAt:s,characterId:a,continuedAt:c}of n){const u=r.get(o);u?(u.title=i,u.updatedAt=s,u.characterId=a??null,u.continuedAt=c):r.set(o,{id:o,title:i,updatedAt:s,characterId:a??null,streamingState:"idle",history:[],continuedAt:null})}})},[t])}function $Ee(t,e){if(!(e!=null&&e.next)&&t>0)return null;const n={url:"/conversations",isFirstPage:t===0};return e!=null&&e.next&&(n.args={cursor:e.next}),n}function GEe(){const t=VEe(),e=Te(ST),n=m.useCallback(async({url:r,args:o,isFirstPage:i})=>{const s=await Fn(r,SY,{query:o}).then(a=>a.data);if(s.results.length>0){const a=s.results.map(c=>({...c,history:[],streamingState:"idle"}));t(a),e(!0)}else i&&e(!1);return s},[t,e]);return G_(n,$Ee)}function qEe(){const t=Te(ao),e=Te($Q);return m.useCallback(async()=>{const n=await Fn("/user",iL,{parseOptions:{safe:!0},query:{"api-version":"2"}}).then(s=>s.data),{id:r,anid:o,isHistoryMigrationPending:i}=n;return K.setAnid(o),K.setPicassoId(r),e(i),t(n.regionCode),n},[e,t])}function KEe(){const t=D(Un),e=D(pd),{refetch:n}=GEe(),r=qEe(),o=Te(hr),i=Te(bc),s=Te(Zf),a=Te(_L),c=Te(kL),u=Te(ZT),d=Te(eI),f=Te(BQ),p=Te(g$),g=Te(xL),v=Te(HQ),y=Te(EL),b=Te(tI),C=Te(nI),S=Te(zQ),w=ve("multiplecharacters"),E=ve("account-change-chat-reset"),T=Qy()[0]==="audioCall";m.useEffect(()=>{(async()=>{const A=Promise.all([r(),Fn("/user/settings",yY).then(X=>X.data),n()]),_=gs.instance().getUserInfo(),[{id:j,firstName:R,isPro:$,inEeaPlusRegion:U,isEligibleForFreeTrial:se,phoneLink:P,ageGroup:k,allowedToggles:N,remainingCalls:x,subscriptions:M,accountTier:te},{preferredVoice:Y,preferredCharacter:Q,optOutOfTraining:ee,optInToVoiceTraining:oe,optOutOfPersonalization:Ce,optOutOfPhoneConnection:fe,optInToGenerativeUI:Pe,allowBiometricDataUse:ze,allowOneDriveAccess:nt,features:J}]=await A;if(K.setIsAad(e),o({id:j,firstName:R,isPro:$&&!e,inEeaPlusRegion:U,isEligibleForFreeTrial:se,phoneLink:P,ageGroup:k,allowedToggles:N,subscriptions:M,accountTier:te,isStudent:void 0}),y(R??void 0),!E&&!T&&await y4(),Y&&s(Y),w&&Q){const X=rM(Q);a(X)}c(ee),u(oe),d(Ce),f(!!fe),p(!!Pe),g(!!ze),v(!!nt),S((J==null?void 0:J.suggestedFollowups)??!0),x&&(b(x.podcastGeneration),C(x.research)),K.setSettings({userSettingVoiceType:Y??void 0,userConsentPersonalization:!Ce,userConsentModelTraining:!ee,userSubscription:$?"pro":"free",accountTier:te??void 0,activeSubscriptions:(M==null?void 0:M.map(X=>X.tier).join(","))??void 0});const pe=await _;if(pe){const{mail:X,givenName:H,imgSrc:ae,isStudent:Ee}=pe;o(L=>L&&{...L,givenName:H,email:X,imgSrc:ae,isStudent:Ee}),H&&!R&&y(H),e||i(null)}})().catch(console.error)},[t,E,o,i,n,c,s,w,f,p,u,d,g,v,r,e,a,T,y,b,C,S])}const WEe=l.object({isMobileAppInstalled:l.boolean()}),YEe="/user/install-status";async function QEe(){try{return(await Fn(YEe,WEe,{options:{method:"GET"}})).data.isMobileAppInstalled}catch(t){throw console.error("Failed to fetch mobile app install status:",t),t}}function JEe(){const t=Te(RT),{data:e,error:n,isLoading:r,mutate:o}=il("mobileAppInstallStatus",QEe,{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:6e4});return m.useEffect(()=>{e!==void 0&&t(e)},[e,t]),{isMobileAppInstalled:e,isLoading:r,error:n||null,refetch:o}}const XEe="/user/narrative";function tO(t,e){var n;return(n=t.filter(r=>r.name===e)[0])==null?void 0:n.url}function Vxe(t){const{background1:e,background2:n,background3:r}=t,i=[n,e,r].filter(a=>typeof a=="object"&&"light"in a&&"dark"in a);if(i.length===0)return[];const s=[];for(let a=0;a<i.length;a+=1){const c=i[a],u=i[(a+1)%i.length];!c||!u||(s.push({type:"gradient",from:c,to:u}),s.push({type:"solid",color:u}))}return s}function $xe(t,e,n){const r=t[e%t.length];return r?r.type==="gradient"?`linear-gradient(to bottom, ${n?`#${r.from.dark}`:`#${r.from.light}`}, ${n?`#${r.to.dark}`:`#${r.to.light}`})`:n?`#${r.color.dark}`:`#${r.color.light}`:"var(--background-color)"}function Gxe(t,e){return e==="wavy-shape"?tO(t,"hero-image-wavy-tablet"):tO(t,`hero-image-${e}-tablet`)}const ZEe=l.object({from:l.string()});function e0e(t){return ZEe.safeParse(t).success}function qxe(t){return e0e(t)?t.from:"/"}const Kxe={start:{...rt,y:300},end:{...Ot,y:0}},Wxe={duration:due,ease:hue},t0e={revalidateOnFocus:!1,shouldRetryOnError:!1,refreshInterval:yA};async function n0e(t){const{data:e,response:n}=await Fn(t,UW,{options:{method:"GET",headers:{"Content-Type":"application/json"}},query:{"api-version":"2"}});if(!n.ok)return null;const{id:r,sections:o,theme:i,masks:s,font:a,fontHandwriting:c}=e;return{id:r,sections:o.filter(u=>u.type!=="shareDefault"),config:{theme:i,masks:s,font:a,...c?{fontHandwriting:c}:{}}}}function r0e(){const t=xr(),e=ve("memory-narrative"),n=t&&e,{data:r,error:o,isLoading:i}=il(n?XEe:null,n0e,t0e);return{isLoading:i,error:o,data:i||!r?null:r}}const h6=m.forwardRef((t,e)=>{var b;const{children:n}=t,r=PB(),o=!Zy(),i=QO(),s=m.useRef(i),a=NB(),c=m.useContext(a);let u=c;const d=Wt(),f=m.useRef(d),p=m.useRef((b=window.history.state)==null?void 0:b.from),g=lo();r?s.current=eO(i):(u=eO(c),u.__store.state.matches=[...i.map((C,S)=>({...s.current[S]??C,id:C.id})),...s.current.slice(i.length)]);const v=i0e(d,p.current,g)&&o;return be.instance().config().disableRouteAnimation??!1?h.jsx("div",{ref:e,className:"relative size-full max-h-dvh",children:h.jsx(a.Provider,{value:u,children:n})}):h.jsx(xe.div,{ref:e,className:"relative size-full max-h-dvh",initial:p.current&&o?"enter":!1,animate:o?"animate":!1,exit:"exit",variants:{enter:{opacity:0,scale:nO(d,p.current,"enter",g)},animate:{opacity:1,scale:1},exit:{scale:nO(d,f.current,"exit",g),opacity:0,transition:{duration:v?void 0:0}}},layout:!0,transition:nb,style:{willChange:"transform"},children:h.jsx(a.Provider,{value:u,children:n})})});h6.displayName="AnimatedOutlet";function o0e(t){const{children:e}=t;KEe(),JEe(),r0e(),zEe(),Kye(),FEe();const n=QO(),r=OB({strict:!1}),o=n.findIndex(s=>s.id===r.id)+1,i=n[o];return h.jsx(Tn,{mode:"popLayout",children:h.jsx(h6,{children:e},i==null?void 0:i.id)})}function nO(t,e,n,r){const o=["/talk","/pages","/chats","/daily","/podcasts","/discover","/"],i=r&&t.startsWith("/chats")&&(e==null?void 0:e.startsWith("/chats")),s=t.startsWith("/pages")||t.startsWith("/chats")&&(e==null?void 0:e.startsWith("/pages")),a=t.endsWith("/talk")||(e==null?void 0:e.endsWith("/talk")),c=t.startsWith("/memory")||(e==null?void 0:e.startsWith("/memory")),u=s===!0||i===!0||a===!0||c===!0?1:.75,d=s===!0||i===!0||c===!0?1:1.5,f=o.findIndex(p=>p==="/talk"?t.endsWith(p):t.startsWith(p))<o.findIndex(p=>p==="/talk"?e==null?void 0:e.endsWith(p):e==null?void 0:e.startsWith(p));return n==="enter"?f?u:d:f?d:u}function i0e(t,e,n){return!(t.startsWith("/chats")&&(e!=null&&e.startsWith("/chats"))&&n)}const s0e=m.lazy(()=>q(()=>import("./settings-P-XyxhDK.js").then(t=>t.s),__vite__mapDeps([293,1,266,294,295,276,296,297,298,299,300,301,238,302,303,220,304,239,305,306,242,307,308,309,310,240,241,243,244,245,231,221,223,311,312,313,314,315,316,317,318,319,320,233,234,321]))),a0e=m.lazy(()=>q(()=>import("./picture-in-picture-D0Rdju7b.js"),__vite__mapDeps([322,1,286,287,288,289,290,291,292])).then(t=>({default:t.PictureInPicture}))),c0e=m.lazy(()=>q(()=>import("./composer-large-screen-CDjIJDnx.js"),__vite__mapDeps([323,1,313,324])));function l0e(t){const{children:e,sidebar:n,customLayout:r}=t,o=Wt(),{isMediaViewerOpen:i}=zi(),{isPictureInPictureOpen:s}=WU(),a=lo(),c=Yhe(),u=Qhe(),{tvCopilotIcon:d}=m.useContext(XU)??{},f=be.instance().config().appLayout,p=Jhe({showSettings:f.showSettings,showSettingsRelyOnChatDetailLayout:f.showSettingsRelyOnChatDetailLayout}),g=D(es),v=(g==null?void 0:g.type)==="card";return h.jsxs(h.Fragment,{children:[h.jsx(pde,{sidebar:n,children:r?e:h.jsxs(DEe,{className:"flex-1",children:[h.jsx(MEe,{}),h.jsx(o0e,{children:e}),i&&h.jsx(IEe,{}),c&&h.jsx(hEe,{}),u&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(c0e,{})}),p&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(s0e,{className:G("top-6",a&&"-me-1 -mt-3")})})]})}),f.showMobileCrossSelling&&o.startsWith("/chats")&&!o.endsWith("/talk")&&h.jsx(vEe,{}),v&&h.jsx(mEe,{}),d,f.showCookieBanner&&h.jsx(pEe,{}),s&&h.jsx(m.Suspense,{fallback:h.jsx(ofe,{}),children:h.jsx(a0e,{})}),h.jsx(LEe,{}),h.jsx(xge,{}),h.jsx("div",{id:"inAppFeedbackOcv"}),h.jsx("div",{id:"popoverPortal"}),h.jsx(REe,{})]})}function u0e(){const{t}=Fe(),e=D(PL);let n="main";pn(RE)&&e==="permanent"&&(n="confirm-submission");const[r,o]=m.useState(n),[i,s]=m.useState(""),[a,c]=m.useState(!1),u=!i||i.trim().length===0||a,d=async()=>{if(!u){Sn({source:"submitBanAppeal"}),c(!0);try{await Fr({path:"/user/bans/appeal",args:{body:{appealText:`APPEAL: ${i}`}}}),o("confirm-submission"),rr(RE,new Date().toISOString())}catch(f){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitBanAppeal",eventInfo_errorMessage:`${f}`,eventInfo_details:"Error submitting ban appeal"}})}c(!1)}};return h.jsxs("main",{className:"relative size-full",children:[h.jsx(vs,{forceGradient:!0}),h.jsxs(xn,{id:r,className:"relative z-10 m-auto flex h-dvh max-w-[540px] flex-col items-center justify-center gap-3 p-12 text-center",children:[r==="main"&&h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"text-3xl",children:e==="permanent"?t("composer.userBan.permanent"):t("composer.userBan.temporary",{duration:t(e==="1-hr"?"composer.userBan.duration1Hr":"composer.userBan.duration24Hr")})}),h.jsx("p",{children:t(e==="permanent"?"composer.userBan.banMessagePermanent":"composer.userBan.banMessageTemporary")}),e==="permanent"&&h.jsx(Ue,{color:"strong",size:"56-xl",className:"mt-6 w-full",title:t("composer.userBan.submitAppeal"),onClick:()=>o("submit-appeal"),children:t("composer.userBan.submitAppeal")})]}),r==="submit-appeal"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex w-full items-center pb-4",children:[h.jsx(Ue,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:t("common.backText"),onClick:()=>o("main"),children:h.jsx(mp,{className:"size-5 -rotate-90"})}),h.jsx("h2",{className:"grow pe-8",children:t("composer.userBan.submitAppeal")})]}),h.jsx("textarea",{className:"h-[240px] w-full resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",onChange:f=>s(f.target.value),disabled:a,placeholder:t("composer.userBan.submitAppealPlaceholder")}),h.jsx(Ue,{color:"strong",className:"w-full",size:"56-xl",title:t("common.submitText"),onClick:d,disabled:u,children:t("common.submitText")})]}),r==="confirm-submission"&&h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"text-3xl",children:t("composer.userBan.appealSubmitted")}),h.jsx("p",{children:t("composer.userBan.appealSubmittedDescription")}),h.jsx(Vc,{msg:`${t("composer.userBan.appealSubmitted")}, ${t("composer.userBan.appealSubmittedDescription")}`})]})]})]})}const d0e=.05,h0e=.1;function f0e(){return be.instance().config().sentryDsnOverride??"https://323dd84fb4f632ccd95493debe9312e0@o4508134825000960.ingest.us.sentry.io/4508799962644480"}async function p0e(){const t=await q(()=>import("./vendor-DSjS2lFR.js").then(r=>r.aj),[]);if(Zs("kill-sentry"))return;const n=[t.browserTracingIntegration(),t.tanstackRouterBrowserTracingIntegration(Tp)];t.init({dsn:f0e(),release:bz(),sampleRate:h0e,environment:"production",integrations:n,tracesSampleRate:d0e}),t.setTag("surface","cmc")}function m0e(t){const e=D(ao);m.useEffect(()=>{K.ensureInitialized(),t&&(window.appEnd=performance.now(),performance.mark("startupTime-begin",{startTime:window.appStart}),performance.mark("startupTime-end",{startTime:window.appEnd}),performance.measure("startupTime","startupTime-begin","startupTime-end"),p0e().catch(console.error))},[t]),m.useEffect(()=>{t&&e&&setTimeout(()=>{ou("onPageLoad")},1e3)},[t,e])}function g0e(t){m.useEffect(()=>(document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}),[t])}function v0e(){g0e(()=>{document.visibilityState==="visible"&&K.trackEvent({name:"system",data:{eventName:"copilotVisible"}})})}const Yxe={Pageseditor:"pageseditor-supported-features"},f6=l.discriminatedUnion("eventName",[l.object({eventName:l.literal("auth0.accountAdded")}),l.object({eventName:l.literal("auth0.accountRemoved")})]);function p6(){return so(OE,l.boolean().nullable())===!0}function y0e(){return so(CL,l.boolean().nullable())===!0}function b0e(){return so(mg,l.boolean().nullable())===!0}function m6(t){for(const e of t)if(e.tenantId===cg)return e;return t[0]}function Zh(t){return ts(t)?"AAD":"MSA"}function C0e(){const[t,e]=m.useState(!1),n=Te(Un),r=Te(zo),o=D(uD);return m.useEffect(()=>{if(t||p6())return;function s(c){var u;if(c===null){n(null),K.setUserAccountType(void 0);return}n({id:((u=c.idTokenClaims)==null?void 0:u.oid)??"",tenantId:c.tenantId,provider:"microsoft",accountType:Zh(c.tenantId)}),K.setUserAccountType(Zh(c.tenantId))}async function a(){try{const{msal:c}=await Sr.get();K.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"hook",eventInfo_timing:performance.now()-window.appStart}}),e(!0);const{monitorAccountChangesAcrossTabs:u,enableAuth0:d}=be.instance().config();u&&c.enableAccountStorageEvents(),c.addEventCallback(async f=>{if(vU(f),(f.eventType===ue.LOGIN_SUCCESS||f.eventType===ue.ACQUIRE_TOKEN_SUCCESS)&&f.payload&&"account"in f.payload&&f.payload.account){const{account:p}=f.payload,g=c.getActiveAccount();(!g||g.homeAccountId!==p.homeAccountId)&&(c.setActiveAccount(p),s(p))}else if(f.eventType===ue.LOGOUT_SUCCESS){const p=m6(c.getAllAccounts());c.setActiveAccount(p??null),s(p??null)}else f.eventType===ue.ACCOUNT_ADDED?r({reason:"login"}):f.eventType===ue.ACCOUNT_REMOVED&&r({reason:"logout"})}),d&&u&&jh.addEventListener("message",f=>{const p=f6.safeParse(f.data);if(!p.success)return;const{eventName:g}=p.data;g==="auth0.accountAdded"?r({reason:"login"}):g==="auth0.accountRemoved"&&r({reason:"logout"})})}catch(c){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"hook",eventInfo_errorMessage:c instanceof Error?c.message:""}})}}a().catch(console.error)},[t,r,n]),o===!0?o:t}async function S0e(){const t=st();async function e(){return await gs.instance().getAccountFromProviders()!==null}function n(){return y0e()?!b0e():!1}function r(i){var s;if(i===null){t.set(Un,null),K.setUserAccountType(void 0);return}t.set(Un,{id:((s=i.idTokenClaims)==null?void 0:s.oid)??"",tenantId:i.tenantId,provider:"microsoft",accountType:Zh(i.tenantId)}),K.setUserAccountType(Zh(i.tenantId))}async function o(){try{be.instance().config().enableAuth0&&await vo.get();const{msal:i}=await Sr.get();K.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"DCL",eventInfo_timing:performance.now()-window.appStart}}),i.addEventCallback(async d=>{if(vU(d),a){d.eventType===ue.ACCOUNT_ADDED?t.set(zo,{reason:"login"}):d.eventType===ue.ACCOUNT_REMOVED&&t.set(zo,{reason:"logout"});return}if((d.eventType===ue.LOGIN_SUCCESS||d.eventType===ue.ACQUIRE_TOKEN_SUCCESS)&&d.payload&&"account"in d.payload&&d.payload.account){const{account:f}=d.payload,p=i.getActiveAccount();(!p||p.homeAccountId!==f.homeAccountId)&&(i.setActiveAccount(f),r(f))}else if(d.eventType===ue.LOGOUT_SUCCESS){const f=m6(i.getAllAccounts());i.setActiveAccount(f??null),r(f??null)}else d.eventType===ue.ACCOUNT_ADDED?t.set(zo,{reason:"login"}):d.eventType===ue.ACCOUNT_REMOVED&&t.set(zo,{reason:"logout"})});let s=!1;const a=vf();if(a){const d=gs.instance();await d.initAuthAccount(),s=!!await d.getAccountFromProviders()}else s=await e();t.set(uD,!0);const{monitorAccountChangesAcrossTabs:c,enableAuth0:u}=be.instance().config();if(c&&i.enableAccountStorageEvents(),!s&&n())try{const d=await i.ssoSilent({scopes:[b2],prompt:"none",redirectUri:typeof window<"u"?window.location.origin:void 0}),f=Zh(d.account.tenantId)==="MSA";Ei(mg,l.boolean(),!0),f?(i.setActiveAccount(d.account),r(d.account)):await i.logoutRedirect({account:d.account,onRedirectNavigate:()=>!1})}catch{}u&&c&&jh.addEventListener("message",d=>{const f=f6.safeParse(d.data);if(!f.success)return;const{eventName:p}=f.data;p==="auth0.accountAdded"?t.set(zo,{reason:"login"}):p==="auth0.accountRemoved"&&t.set(zo,{reason:"logout"})})}catch(i){K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"DCL",eventInfo_errorMessage:i instanceof Error?i.message:""}})}}return o()}function E0e(){const t=VV(),e=Te(ep);t&&(r=>o$.includes(r))(t)&&e(t)}function w0e(){const t=D(Un),e=ve("account-change-chat-reset");m.useEffect(()=>{e&&y4()},[t,e])}function T0e(){const t=Xo("kill-clarity");BF({onStartComplete:()=>{e()}});const e=()=>{try{if(t)return()=>{};window.clarity||(window.clarity=function(...o){window.clarity&&(window.clarity.q=window.clarity.q??[]).push(o)});const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src="/cl/tag/n59ae4ieqq",document.body.appendChild(n),window.clarity("signal",async r=>{if(r.type==="cl_dtrs"&&r.value){const{sendChallengeResponse:o}=await nc();o({method:"clarity",token:r.value})}}),window.clarity("metadata",()=>{sw({surface:"cmc"});const r=gt(OL);r!==null&&sw({isNewUser:r.toString()})},!1,!0),()=>{delete window.clarity,n.remove()}}catch(n){return K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"useClarity",eventInfo_details:"Error loading Clarity",eventInfo_errorMessage:`${n}`}}),()=>{}}}}function XS(t){if(be.instance().config().persistThemeChoice){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t!==n?rr(gg,t):ro(gg)}document.documentElement.setAttribute("data-theme",t),Kt.emit("theme:color-applied",t)}function I0e(){const{persistThemeChoice:t,enforceTheme:e}=be.instance().config(),[n,r]=tt(Cs);m.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),i=a=>{const c=a.matches?"dark":"light";r(c),XS(c),t&&ro(gg)};let s=t?pn(gg):"";return s!=="dark"&&s!=="light"&&(s=o.matches?"dark":"light"),e&&(s=e),r(s),XS(s),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[r,t,e]),m.useEffect(()=>{n&&XS(n)},[n])}function _0e(){m.useEffect(()=>{if(window.ReportingObserver===void 0)return()=>{};const t=new ReportingObserver(e=>{for(const n of e){if(n.type!=="csp-violation"||!n.body)continue;const{body:r}=n,{blockedURL:o,documentURL:i,effectiveDirective:s,disposition:a}=r;console.error("Reporting CSP violation",{blockedURL:o,documentURL:i,effectiveDirective:s,disposition:a}),K.trackEvent({name:"system",data:{eventName:"copilotCSPViolation",eventInfo_blockedURL:o,eventInfo_documentURL:i,eventInfo_effectiveDirective:s,eventInfo_disposition:a}})}},{buffered:!0,types:["csp-violation"]});return t.observe(),()=>{t.disconnect()}},[])}function A0e(){const t=ve("custom-1ds"),e=D(ao);m.useEffect(()=>{if(!t||!be.instance().config().enableCustom1DS)return Y2(),()=>{};if(!e)return()=>{};const n=()=>{if(window.oneDS){const{ApplicationInsights:i}=window.oneDS;return new i}},r=()=>{var c;window.OneDsAzureAnalytics=window.OneDsAzureAnalytics??n();function i(){var d;return!!!((d=window.OneDsAzureAnalytics)!=null&&d.getCookieMgr().get("MSCC"))}const s={adobe:i(),google:i()},a={instrumentationKey:"c72e6b24df604532a6282edd268b4ba4-9cdee1fe-5d2f-4626-9620-dbad9b53a8e5-8065",channelConfiguration:{eventsLimitInMem:50,autoFlushEventsLimit:1},propertyConfiguration:{userConsentCookieName:ty.name,gpcDataSharingOptIn:K2(),callback:{userConsentDetails:()=>{if(!Jv.includes(e))return{Required:!0,Analytics:!0,SocialMedia:!0,Advertising:!0};const u=qf();return{Required:Object.values(u).includes(!0),Analytics:u.analytics,SocialMedia:u.socialMedia,Advertising:u.advertising}}}},webAnalyticsConfiguration:{coreData:{appId:"JS:Copilot_microsoft_com"},cookiesToCollect:["_mkto_trk"],urlCollectQuery:!0,syncMuid:i()},extensionConfig:{IdSyncPlugin:s}};window.postConsAzure1DSInit||((c=window.OneDsAzureAnalytics)==null||c.initialize(a,[]),window.postConsAzure1DSInit=!0)},o=document.createElement("script");return o.src="https://az416426.vo.msecnd.net/scripts/c/ms.analytics-web-4.min.js",o.async=!0,o.onload=r,document.head.appendChild(o),()=>{document.head.removeChild(o)}},[t,e])}function k0e(t){const{handler:e}=l4({deferred:!0}),{handler:n}=b4({deferred:!0}),{passthroughType:r,prompt:o}=C4(),i=m.useCallback(c=>{K.setLandingPage("chatWithPartialPromptPassthrough"),e(c)},[e]),s=m.useCallback(c=>{K.setLandingPage("chatWithFullPromptPassthrough"),n(c)},[n]),a=m.useCallback(()=>{if(o&&r)switch(r){case"partial":i(o);break;case"full":s(o);break}},[s,i,r,o]);m.useEffect(()=>{t&&a()},[t,a])}function x0e(){const t=Wt(),e=gy(),n=m.useRef(!1),r=D(hr),[o,i]=tt(Cc),s=my();m.useEffect(()=>{t.startsWith("/chats")&&gn("appearance-talk")==="1"&&(n.current=!0)},[t]),m.useEffect(()=>{s&&r&&n.current&&(n.current=!1,i(oy))},[r,n,e,o,i,s])}function R0e(){const t=D(mt),e=D(TL),n=ve("adsidsync"),r=D(ao),o=xr(),i=l6(r),s=D(NT);m.useEffect(()=>{const{adsEnabled:a,enforceAdsOptOutOfPersonalization:c}=be.instance().config();if(t&&e&&n&&a){const u=new URLSearchParams;if(u.append("cpid",e),u.append("cvid",t),o&&u.append("cp","1"),q2()){const v=qf().advertising;if(i&&!v)return;v&&!c?u.append("ps","1"):u.append("ps","0")}else{if(i)return;u.append("ps","1")}const f=`https://c.bing.com/cp?${u}`,p=performance.now();fetch(f,{method:"GET",mode:"no-cors",credentials:"include"}).then(g=>{const v=performance.now();KL(f,"GET",v-p,g.clone())}).catch(g=>{K.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"adsError",eventInfo_errorMessage:"Ads Id Sync failed with error",eventInfo_details:`Ads Id Sync failed: ${g}`}})})}},[s,t,r,i,n,e,o])}function P0e(t){const e=D(Un),n=D(uy),r=D(rI),o=D(tp),i=D(dy),{upsellFromAuth0:s}=be.instance().config().proSubscription,{handleProSubscription:a}=Mv({payflowEntryPoint:"RedirectFromAuth0Account",skuType:i?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Redirect"}),u=xr()&&(e==null?void 0:e.provider)==="microsoft",d=ve("cmc-m365-sku"),f=Wo("pff"),p=OV("needsStartSubscription"),g=Wt(),v=m.useRef(!1);m.useEffect(()=>{if(p&&d&&u&&!g.startsWith("/subscription/start")&&(f==="WinNative"||f==="EdgeSidepane")){W2("needsStartSubscription"),setTimeout(()=>{a()},0);return}if(!(s!=null&&s.navigateToProSubPageAfterLogin))return;const y=sessionStorage.getItem(dE);if(!y)return;async function b(C){const[,S]=C.split("-");if(S==="link"){const w=performance.now(),{getAuth0AccessToken:E,auth0:T}=await vo.get(),I=await E(rf);if(!I){aa({feature:"accountLinkAuth0WithMSA",errorType:"LinkStartedWithoutAuth0Token"});return}try{await Fr({path:"/user/link",args:{body:{token:I}}})}catch(A){A instanceof Error&&aa({feature:"accountLinkAuth0WithMSA",errorType:A.name,errorMessage:A.message,exception:A.stack})}finally{T.logout({openUrl:!1}),Sc({feature:"accountLinkAuth0WithMSA",duration:performance.now()-w}),o||await a()}}}if(t&&!v.current&&n){if(v.current=!0,sessionStorage.removeItem(dE),(e==null?void 0:e.accountType)!=="MSA"||r)return;b(y)}},[t,a,s,e,o,r,n,g,u,f,d,p])}function N0e(t){const e=Te(xT);m.useEffect(()=>{if(!t)return()=>{};const n=i=>zU(i)?(e(i.toString()),!0):!1,r=i=>{const s=i.target.closest("a");s&&s instanceof HTMLAnchorElement&&n(s.href)&&i.preventDefault()},o=window.open;return window.open=function(...s){return s.length>0&&typeof s[0]=="string"&&!n(s[0])?o.apply(window,s):null},document.addEventListener("click",r),()=>{window.open=o,document.removeEventListener("click",r)}},[t,e])}function O0e(){m.useEffect(()=>{const t=pn(PE),e=Date.now();t||rr(PE,e.toString())},[])}function M0e(){m.useEffect(()=>{},[])}function L0e(t){const[e,n]=m.useState(!1),r=HU();return m.useEffect(()=>{e||!t||r({enablePageRedirect:!0,overwriteData:!1}).then(o=>{o&&n(!0)}).catch(console.error)},[r,e,t]),{appInitialized:e}}let g6=-1;const vb=t=>{addEventListener("pageshow",e=>{e.persisted&&(g6=e.timeStamp,t(e))},!0)},Xu=(t,e,n,r)=>{let o,i;return s=>{e.value>=0&&(s||r)&&(i=e.value-(o??0),(i||o===void 0)&&(o=e.value,e.delta=i,e.rating=((a,c)=>a>c[1]?"poor":a>c[0]?"needs-improvement":"good")(e.value,n),t(e)))}},v6=t=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t()))},AA=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},yb=()=>{const t=AA();return(t==null?void 0:t.activationStart)??0},Zu=(t,e=-1)=>{const n=AA();let r="navigate";return g6>=0?r="back-forward-cache":n&&(document.prerendering||yb()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},ZS=new WeakMap;function D0e(t,e){return ZS.get(t)||ZS.set(t,new e),ZS.get(t)}const y6=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{e(o.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},b6=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let cu=-1;const rO=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,jv=t=>{document.visibilityState==="hidden"&&cu>-1&&(cu=t.type==="visibilitychange"?t.timeStamp:0,j0e())},oO=()=>{addEventListener("visibilitychange",jv,!0),addEventListener("prerenderingchange",jv,!0)},j0e=()=>{removeEventListener("visibilitychange",jv,!0),removeEventListener("prerenderingchange",jv,!0)},C6=()=>{var t;return cu<0&&(cu=(document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden")[0])==null?void 0:t.startTime)??rO(),oO(),vb(()=>{setTimeout(()=>{cu=rO(),oO()})})),{get firstHiddenTime(){return cu}}},kA=t=>{document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},iO=[1800,3e3],U0e=(t,e={})=>{kA(()=>{const n=C6();let r,o=Zu("FCP");const i=y6("paint",s=>{for(const a of s)a.name==="first-contentful-paint"&&(i.disconnect(),a.startTime<n.firstHiddenTime&&(o.value=Math.max(a.startTime-yb(),0),o.entries.push(a),r(!0)))});i&&(r=Xu(t,o,iO,e.reportAllChanges),vb(s=>{o=Zu("FCP"),r=Xu(t,o,iO,e.reportAllChanges),v6(()=>{o.value=performance.now()-s.timeStamp,r(!0)})}))})},F0e=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(e(t=b6(t)),document.addEventListener("visibilitychange",t,{once:!0}))};let B0e=class{constructor(){Z(this,"m")}h(e){var n;(n=this.m)==null||n.call(this,e)}};const sO=[2500,4e3],H0e=(t,e={})=>{kA(()=>{const n=C6();let r,o=Zu("LCP");const i=D0e(e,B0e),s=c=>{e.reportAllChanges||(c=c.slice(-1));for(const u of c)i.h(u),u.startTime<n.firstHiddenTime&&(o.value=Math.max(u.startTime-yb(),0),o.entries=[u],r())},a=y6("largest-contentful-paint",s);if(a){r=Xu(t,o,sO,e.reportAllChanges);const c=b6(()=>{s(a.takeRecords()),a.disconnect(),r(!0)});for(const u of["keydown","click","visibilitychange"])addEventListener(u,()=>F0e(c),{capture:!0,once:!0});vb(u=>{o=Zu("LCP"),r=Xu(t,o,sO,e.reportAllChanges),v6(()=>{o.value=performance.now()-u.timeStamp,r(!0)})})}})},aO=[800,1800],Nw=t=>{document.prerendering?kA(()=>Nw(t)):document.readyState!=="complete"?addEventListener("load",()=>Nw(t),!0):setTimeout(t)},z0e=(t,e={})=>{let n=Zu("TTFB"),r=Xu(t,n,aO,e.reportAllChanges);Nw(()=>{const o=AA();o&&(n.value=Math.max(o.responseStart-yb(),0),n.entries=[o],r(!0),vb(()=>{n=Zu("TTFB",0),r=Xu(t,n,aO,e.reportAllChanges),r(!0)}))})},eE=t=>{var i;const e=(i=performance.getEntriesByType("navigation")[0])==null?void 0:i.type;let n;const r=navigator;r.connection&&typeof r.connection.effectiveType=="string"&&(n=r.connection.effectiveType);const o={eventName:t.name,eventInfo_duration:t.value,eventInfo_navigationType:e,eventInfo_connectionType:n};K.trackEvent({name:"system",data:o});try{const s=`web-vitals-${t.name}`;performance.mark(s),performance.measure(`web-vitals-measure-${t.name}`)}catch{}};let cO=!1;function V0e(){if(typeof window>"u"||cO)return;cO=!0;let t=!1;const e=n=>{t||(t=!0,eE(n))};z0e(eE),U0e(eE),H0e(e,{reportAllChanges:!0})}function $0e(){m.useEffect(()=>(window.addEventListener("unhandledrejection",$k),()=>{window.removeEventListener("unhandledrejection",$k)}),[])}function G0e(t={}){const{isAppInitialized:e=!1}=t,n=window.appStart;return m.useEffect(()=>!e||!n?()=>{}:(window.addEventListener("beforeunload",E1),()=>{window.removeEventListener("beforeunload",E1)}),[e,n]),{startTime:n}}function q0e(){typeof window<"u"&&(Object.defineProperty(window,"APP_VERSION",{value:yT()}),Object.defineProperty(window,"APP_SURFACE",{value:"cmc"}))}const K0e=new MB({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}});function W0e({children:t,sidebar:e,customLayout:n=!1}){O0e(),Qy(),E0e(),Ghe(),ble();const r=C0e(),{appInitialized:o}=L0e(r);Ebe(),k0e(o),I0e(),$0e();const i=eA();N0e(i);const s=D(zo);G0e({isAppInitialized:o}),v0e(),vde(),A0e(),x0e();const a=D(hf);m0e(o),V0e(),w0e(),P0e(o),M0e(),T0e(),_0e(),R0e();const c=m.useMemo(()=>({tvCopilotIcon:t}),[t]);return a==="user-banned"?h.jsx(u0e,{}):a==="age-verification"?h.jsx(xue,{}):a?h.jsx(z_,{}):!o||!r?null:s?h.jsx(KU,{accountActionRequired:s}):h.jsx(LB,{client:K0e,children:h.jsx(YO,{reducedMotion:"user",children:h.jsx(XU.Provider,{value:c,children:h.jsx(l0e,{sidebar:e,customLayout:n,children:h.jsx(DB,{})})})})})}function Y0e(t){const{onError:e=Z2}=t;return h.jsxs(ZO,{fallback:h.jsx(z_,{}),onError:e,children:[h.jsx(Rve,{}),h.jsx(W0e,{...t})]})}q0e();document.addEventListener("DOMContentLoaded",()=>{p6()&&setTimeout(()=>S0e(),0)});function Q0e(){const t=xr(),e=D(eI),n=Te(NL);m.useEffect(()=>{t&&!e&&ile()&&n(!0)},[t,e,n])}class xA{static install(){Mce(new xA)}async maybeInstantiate(){return so(jE,l.boolean().nullable())?new X0e:null}}const J0e={actAsBroker:!0,preferredInteractionType:we.Redirect};class X0e extends gU{async instantiateMsal(){hI({apiName:ue.INITIALIZE_START,providerType:"microsoft",extraInfo:{eventInfo_isPWB:!0}});const e=new Nce(C2,J0e,S2);return await e.initialize(),await e.initializeBrokering(),fI({apiName:ue.INITIALIZE_END,providerType:"microsoft",extraInfo:{eventInfo_isPWB:!0}}),e}}BU();xA.install();function Z0e(){Q0e();const t=ve("pages-layout-v2"),e=Wt();let n=!1;return t&&e.startsWith("/pages")&&(n=!0),h.jsx(Y0e,{customLayout:n})}const Pt=jB({component:Z0e}),S6=m.lazy(()=>q(()=>import("./discover-6X3Cm0yT.js").then(t=>t.d),__vite__mapDeps([325,1,326,327,328,329,222,330,287,286,331,332,333,334,335,336,337,338,324,339,340,341,342,245,231,343,344,345,274,247]))),ewe=_t("/")({component:()=>h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(S6,{})})}),twe=_t("/discover")({component:()=>h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(At,{className:"size-12"})}),children:h.jsx(S6,{})})}),nwe=100,lO=.3,rwe=2*ai,owe="bottom-[60px] sm:bottom-[120px] h-[50px]",E6="min-h-[60px] sm:min-h-[120px]",w6="min-h-[calc(100dvh-60px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-120px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",iwe="min-h-[calc(100dvh-48px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-48px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",swe="min-h-[calc(100dvh-80px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-80px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",awe="bottom-[var(--character-component-height)] h-[50px]",cwe="min-h-[calc(100dvh-var(--character-component-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))]";function lwe(t,e,n,r,o){const[i,s]=tt(iM),a=m.useCallback(()=>{s(E=>!E)},[s]),c=lo(),u=m.useMemo(()=>({variants:{start:{opacity:0},exiting:{opacity:0,y:-100,transition:{duration:.2,y:{duration:.3}}}},initial:"start",animate:i?"exiting":"default"}),[i]),d=m.useMemo(()=>({initial:{opacity:0,y:nwe},animate:{opacity:1,y:0,transition:{duration:.4,y:{duration:lO}}},exit:{opacity:0,y:-100,transition:{duration:.2,y:{duration:lO}}},onAnimationStart:E=>{typeof E=="object"&&!Array.isArray(E)&&E.opacity===1&&(setTimeout(()=>t(),10),s(!1))}}),[t,s]),f=n?awe:owe,p=n?`min-h-[${r}px]`:E6,{highlighted:g,backstage:v}=dwe(o,i),y=hwe(n,v,g),b=m.useRef(null),{scrollYProgress:C}=UB({target:b,container:e,offset:["end start","start start"]}),S=Pu(C,[rwe/100,1],[0,1]);return{toggleMessagesAreExiting:a,backstageMessagesProps:u,highlightedMessagesProps:d,opacity:c?S:C,sentinelRef:b,sentinelClasses:f,backstageClasses:p,highlightedClasses:y,highlighted:g,backstage:v}}function uwe(t){var o;const e=T6(t);if(!e)return[];const n=e.author==="human",r=!n&&((o=t.at(-2))==null?void 0:o.author)==="ai";return n||r?[e]:t.slice(-2)}function T6(t){return t.at(-1)}function dwe(t,e){const n=uwe(t),r=t.slice(0,-(n.length+(e?2:0)));return{highlighted:n,backstage:r}}function hwe(t,e,n){return t?cwe:be.instance().config().smallAnochorTopWithoutHeader&&n.length>0?e.length===0?swe:iwe:w6}function I6(){return G(Uf("pageContainer")??"px-6","mx-auto w-full max-w-chat")}function fwe(){var t=new Map;function e(n){var r=n.root,o=n.rootMargin,i=n.threshold,s=t.get(r);s||(s=new Map,t.set(r,s));var a=JSON.stringify({rootMargin:o,threshold:i}),c=s.get(a);if(!c){var u=new Map,d=new IntersectionObserver(function(f){f.forEach(function(p){var g=u.get(p.target);g==null||g(p)})},{root:r,rootMargin:o,threshold:i});c={observer:d,entryCallbacks:u},s.set(a,c)}return{observe:function(p,g){var v,y;(v=c)==null||v.entryCallbacks.set(p,g),(y=c)==null||y.observer.observe(p)},unobserve:function(p){var g,v;(g=c)==null||g.entryCallbacks.delete(p),(v=c)==null||v.observer.unobserve(p)}}}return{getObserver:e}}var pwe="0px",mwe=[0],gwe=fwe();function vwe(t){var e,n,r=(e=t==null?void 0:t.rootMargin)!=null?e:pwe,o=(n=t==null?void 0:t.threshold)!=null?n:mwe,i=m.useRef(null),s=m.useRef(null),a=m.useRef(null),c=m.useState(),u=c[0],d=c[1],f=m.useCallback(function(){var y=i.current;if(!y){d(void 0);return}var b=gwe.getObserver({root:s.current,rootMargin:r,threshold:o});b.observe(y,function(C){d(C)}),a.current=b},[r,o]),p=m.useCallback(function(){var y=a.current,b=i.current;b&&(y==null||y.unobserve(b)),a.current=null},[]),g=m.useCallback(function(y){p(),i.current=y,f()},[f,p]),v=m.useCallback(function(y){p(),s.current=y,f()},[f,p]);return[g,{entry:u,rootRef:v}]}function Ow(){return Ow=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ow.apply(this,arguments)}function ywe(t){var e,n=vwe(t),r=n[0],o=n[1],i=!!((e=o.entry)!=null&&e.isIntersecting),s=m.useState(i),a=s[0],c=s[1];return i&&!a&&c(!0),[r,Ow({},o,{isVisible:i,wasEverVisible:a})]}var bwe=100;function Cwe(t){var e=t.loading,n=t.hasNextPage,r=t.onLoadMore,o=t.rootMargin,i=t.disabled,s=t.delayInMs,a=s===void 0?bwe:s,c=ywe({rootMargin:o}),u=c[0],d=c[1],f=d.rootRef,p=d.isVisible,g=!i&&!e&&p&&n;return m.useEffect(function(){if(g){var v=setTimeout(function(){r()},a);return function(){clearTimeout(v)}}},[r,g,a]),[u,{rootRef:f}]}async function Mw(t,e,n){try{await Fr({path:`/conversations/${t}/react`,args:{body:{[n]:e},analytics:{anonymousPath:"/conversations/*/react"}}})}catch{}}async function _6(t,e,n){try{await Fr({path:`/conversations/${t}/feedback`,args:{body:{types:Array.from(e),text:n},analytics:{anonymousPath:"/conversations/*/feedback"}}})}catch{}}const A6=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M10.052 17.7057C10.3913 18.683 11.6841 19.1333 12.4829 18.2962C12.6455 18.1257 12.8081 17.9416 12.9176 17.7774C13.2379 17.2968 13.3725 16.6641 13.4218 16.0477C13.4721 15.4195 13.438 14.7454 13.3738 14.1352C13.3093 13.5225 13.2129 12.9604 13.1328 12.5522C13.1294 12.5345 13.1259 12.5171 13.1225 12.5H14.006C15.8777 12.5 17.2924 10.8049 16.9576 8.96334L16.2737 5.20164C15.8017 2.60569 13.2078 0.970952 10.6622 1.66519L5.06251 3.19239C4.14894 3.44154 3.45455 4.18547 3.26885 5.11401L2.91581 6.87918C2.63809 8.2678 3.69991 9.43756 4.82905 9.88388C5.15163 10.0114 5.44337 10.1732 5.66974 10.374C7.37583 11.8875 7.99442 13.0971 9.05406 15.2231C9.4084 15.9339 9.77205 16.8995 10.052 17.7057ZM12.0165 12.1214L12.0169 12.1229L12.0187 12.1303L12.0262 12.1614C12.0328 12.1892 12.0426 12.231 12.0549 12.2851C12.0793 12.3933 12.1135 12.5507 12.1515 12.7446C12.2277 13.1333 12.3188 13.665 12.3793 14.2398C12.4401 14.8171 12.4685 15.4242 12.425 15.9679C12.3806 16.5235 12.2652 16.9532 12.0855 17.2227C12.0264 17.3113 11.9138 17.444 11.7594 17.6058C11.5605 17.8142 11.1314 17.7657 10.9967 17.3777C10.7141 16.5639 10.3334 15.5481 9.94904 14.777C8.88216 12.6365 8.19326 11.2759 6.33336 9.62597C5.99304 9.32406 5.58878 9.1089 5.19665 8.9539C4.31631 8.60592 3.75035 7.80549 3.89639 7.0753L4.24943 5.31013C4.36085 4.753 4.77748 4.30665 5.32562 4.15715L10.9254 2.62995C12.9052 2.08999 14.9227 3.36145 15.2898 5.38053L15.9738 9.14223C16.197 10.3699 15.2538 11.5 14.006 11.5H12.5015C12.3476 11.5 12.2022 11.5709 12.1074 11.6923C12.0127 11.8136 11.9792 11.972 12.0165 12.1214C12.0165 12.1214 12.0165 12.1213 12.0165 12.1214Z",fill:"currentColor"})),Jxe=Object.freeze(Object.defineProperty({__proto__:null,default:A6},Symbol.toStringTag,{value:"Module"})),k6=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M10.052 2.29418C10.3913 1.31688 11.6841 0.866611 12.4829 1.70374C12.6455 1.87416 12.8081 2.05832 12.9176 2.22254C13.2379 2.70305 13.3725 3.33584 13.4218 3.9522C13.4721 4.58034 13.438 5.25446 13.3738 5.86473C13.3093 6.47735 13.2129 7.03948 13.1328 7.44766C13.1294 7.46535 13.1259 7.48277 13.1225 7.49989H14.006C15.8777 7.49989 17.2924 9.19503 16.9576 11.0365L16.2737 14.7983C15.8017 17.3942 13.2078 19.0289 10.6622 18.3347L5.06251 16.8075C4.14894 16.5583 3.45455 15.8144 3.26885 14.8859L2.91581 13.1207C2.63809 11.7321 3.69991 10.5623 4.82905 10.116C5.15163 9.9885 5.44337 9.82668 5.66974 9.62586C7.37583 8.11234 7.99442 6.90276 9.05406 4.77684C9.4084 4.06594 9.77205 3.10043 10.052 2.29418ZM12.0165 7.87851L12.0169 7.87696L12.0187 7.86962L12.0262 7.83852C12.0328 7.81068 12.0426 7.76892 12.0549 7.71482C12.0793 7.60658 12.1135 7.44919 12.1515 7.25525C12.2277 6.86655 12.3188 6.33493 12.3793 5.76005C12.4401 5.18282 12.4685 4.57569 12.425 4.03195C12.3806 3.47644 12.2652 3.04673 12.0855 2.77724C12.0264 2.68859 11.9138 2.55593 11.7594 2.3941C11.5605 2.18565 11.1314 2.23417 10.9967 2.62217C10.7141 3.43598 10.3334 4.45183 9.94904 5.22294C8.88216 7.36338 8.19326 8.72396 6.33336 10.3739C5.99304 10.6758 5.58878 10.891 5.19665 11.046C4.31631 11.394 3.75035 12.1944 3.89639 12.9246L4.24943 14.6898C4.36085 15.2469 4.77748 15.6932 5.32562 15.8427L10.9254 17.3699C12.9052 17.9099 14.9227 16.6384 15.2898 14.6194L15.9738 10.8577C16.197 9.62998 15.2538 8.49989 14.006 8.49989H12.5015C12.3476 8.49989 12.2022 8.42895 12.1074 8.3076C12.0127 8.18627 11.9792 8.02785 12.0165 7.87851C12.0165 7.87847 12.0165 7.87855 12.0165 7.87851Z",fill:"currentColor"})),Xxe=Object.freeze(Object.defineProperty({__proto__:null,default:k6},Symbol.toStringTag,{value:"Module"}));function x6(t){const{titleText:e,subtitleText:n,positiveButtonText:r,negativeButtonText:o,positiveButtonTitle:i,negativeButtonTitle:s,modalHeaderText:a,onPositiveClick:c,onNegativeClick:u,isModalOpen:d,onModalClose:f,modalContent:p,className:g="",isDebugAudioRecorderEnabled:v=!1}=t;return h.jsxs("div",{className:g,children:[h.jsx("div",{className:"relative w-full pb-6 after:absolute after:mt-3 after:w-full after:border-b after:border-stroke-300"}),h.jsx("h2",{className:"mt-5 text-foreground-600 text-xs",children:h.jsx("strong",{children:e})}),h.jsx("p",{className:"mt-1 text-foreground-600 text-xs",children:n}),h.jsxs("div",{className:G("mt-3.5 grid w-fit min-w-72 grid-rows-1 gap-2",v?"grid-cols-3":"grid-cols-2"),children:[h.jsxs(Ue,{onClick:c,title:i,variant:"rect",size:"36-sm",children:[h.jsx(k6,{className:"size-5"})," ",r]}),h.jsxs(Ue,{onClick:u,title:s,variant:"rect",size:"36-sm",children:[h.jsx(A6,{className:"size-5"})," ",o]}),v&&h.jsx(Ue,{onClick:async()=>{await nSe.download()},title:"Download audio debug",variant:"rect",size:"36-sm",children:"Download audio debug"})]}),d&&h.jsx(Cp,{isOpen:!0,onClose:f,headerText:a,className:"w-full max-w-[400px]",children:p})]})}function Swe(){}function Ewe({inputValue:t,handleChange:e}){const[n,r]=m.useState(""),{t:o}=Fe();return Xo("kill-free-form-text")?null:h.jsx(CA,{disabled:!1,className:"max-h-[8rem] grow-0 basis-[8rem] !items-start overflow-auto rounded-xl border-2 border-stone-700 bg-black/5 px-0.5",inputValue:t,characterLimit:mz,autoFocus:!1,setInput:s=>{e(s)},placeholder:o("chat.feedback.placeholder"),errorMessage:n,setError:r,onEnter:Swe,isMultiLines:!0})}function R6(t){const{feedbackOptions:e,onSubmit:n}=t,{t:r}=Fe(),[o,i]=m.useState(new Set),[s,a]=m.useState(""),c=o.size===0,u=f=>{i(p=>{const g=new Set(p);return o.has(f)?g.delete(f):g.add(f),g})},d=async()=>{n(o,s),i(new Set)};return e?h.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[h.jsx("ul",{role:"list",className:"mt-0 flex list-none flex-col gap-2",children:e.map(f=>h.jsx("li",{children:h.jsx(X4,{label:f.label,setChecked:()=>u(f.type),checked:o.has(f.type)})},f.type))}),c?null:h.jsx(Ewe,{inputValue:s,handleChange:a}),h.jsx(Ue,{title:r("chat.feedback.submitFeedbackButton"),size:"48-lg",color:"strong",className:"mt-4 max-h-12",disabled:c,onClick:d,children:r("chat.feedback.submitFeedbackButton")})]}):null}function wwe(t){var C,S;const{className:e}=t,n=D(_T),[r,o]=tt(ry),[i,s]=m.useState(!1),[a,c]=m.useState(),u=ve("ads-showroom-picasso-feedback"),{t:d}=Fe(),f=w=>{Sn({source:"feedback",scenario:WV[w],conversationId:r==null?void 0:r.conversationId,additionalData:{brandId:r==null?void 0:r.brandId,brandName:(r==null?void 0:r.brandName)??""}})},p=()=>{s(!1),o(void 0)},g=async w=>{r!=null&&r.conversationId&&u&&await Mw(r.conversationId,w,"showroomReaction")},v=()=>{var w;f("thumbs-up"),c("thumbs-up"),(w=n==null?void 0:n.showroom)!=null&&w.positive?s(!0):p(),g("thumbs-up")},y=()=>{var w;f("thumbs-down"),c("thumbs-down"),(w=n==null?void 0:n.showroom)!=null&&w.negative?s(!0):p(),g("thumbs-down")},b=async(w,E)=>{p(),r&&K.trackEvent({name:"interaction",data:{eventName:"copilotSubmitFineConversationFeedback",eventInfo_fineFeedbackTypes:Array.from(w).join(","),eventInfo_conversationId:r.conversationId,eventInfo_additionalData:JSON.stringify({brandId:r.brandId,brandName:r.brandName,reactionType:a})}}),r!=null&&r.conversationId&&w.size>0&&_6(r.conversationId,w,E)};return h.jsx(x6,{titleText:d("ads.showroomFeedbackTitle",{brand:r==null?void 0:r.brandName}),subtitleText:d("ads.showroomFeedbackDescription"),positiveButtonText:d("ads.showroomFeedbackPositive"),negativeButtonText:d("ads.showroomFeedbackNegative"),positiveButtonTitle:d("reviewPrompt.positive"),negativeButtonTitle:d("reviewPrompt.negative"),modalHeaderText:d("ads.showroomFeedbackModalTitle"),onPositiveClick:v,onNegativeClick:y,isModalOpen:i,onModalClose:p,modalContent:h.jsx(R6,{onSubmit:b,feedbackOptions:a==="thumbs-up"?((C=n==null?void 0:n.showroom)==null?void 0:C.positive)??void 0:(S=n==null?void 0:n.showroom)==null?void 0:S.negative}),className:e,isDebugAudioRecorderEnabled:!1})}function Twe(t){const{onSubmit:e}=t,{t:n}=Fe(),[r,o]=m.useState(!1),i=async s=>{o(!0),await e(s),o(!1)};return h.jsxs("div",{children:[h.jsx("p",{children:n("voice.feedback.reviewReason")}),h.jsx(Ue,{title:n("voice.feedback.okay"),size:"48-lg",color:"strong",className:"mt-4 max-h-12 w-full",disabled:r,onClick:()=>i(!0),children:n("voice.feedback.okay")}),h.jsx(Ue,{title:n("voice.feedback.noThanks"),size:"48-lg",color:"default",className:"mt-3 w-full",onClick:()=>i(!1),children:n("voice.feedback.noThanks")})]})}function Iwe({className:t}){const e=D(mt),n=D(_T),r=Te(sd),[o,i]=tt(ZT),[s,a]=m.useState(),c=ve("debug-audio-recorder")&&!1,u=pJ(),{t:d}=Fe(),f=()=>{Sn({source:"voiceFeedback",scenario:"thumbsUp",conversationId:e,destination:u?"appearance":void 0}),e&&Mw(e,"thumbs-up","audioReaction"),r(!1),Kt.emit("feedback:ai-message-reaction","positive")},p=()=>{Sn({source:"voiceFeedback",scenario:"thumbsDown",conversationId:e,destination:u?"appearance":void 0}),e&&Mw(e,"thumbs-down","audioReaction"),a("feedback-options")},g=()=>{a(null),r(!1)},v=async(C,S)=>{e&&C.size>0&&_6(e,C,S),o?g():a("review-request")},y=async C=>{C&&(i(!0),await xhe({optInToVoiceTraining:!0})),g()},b=()=>s==="feedback-options"?h.jsx(R6,{onSubmit:v,feedbackOptions:n==null?void 0:n.call}):s==="review-request"?h.jsx(Twe,{onSubmit:y}):null;return h.jsx(x6,{titleText:d("voice.feedback.howWasVoiceChat"),subtitleText:d("voice.feedback.giveFeedback"),positiveButtonText:d("voice.feedback.good"),negativeButtonText:d("voice.feedback.bad"),positiveButtonTitle:d("reviewPrompt.positive"),negativeButtonTitle:d("reviewPrompt.negative"),modalHeaderText:d(s==="feedback-options"?"voice.feedback.chooseWhatHappened":"voice.feedback.canMicrosoftReview"),onPositiveClick:f,onNegativeClick:p,isModalOpen:!!s,onModalClose:g,modalContent:b(),className:t,isDebugAudioRecorderEnabled:c})}const _we=m.lazy(()=>q(()=>import("./index.es-D4CGDrX3.js"),__vite__mapDeps([225,1]))),Awe=E4();function kwe({onAnimationClicked:t}){const e=m.useRef(null),{t:n}=Fe(),[r,o]=m.useState(null);m.useEffect(()=>{Awe.load("../../assets/lottie/character-thinking-cloud-animation.json").then(o).catch(()=>o(null))},[]),m.useEffect(()=>{const a=e.current;return a&&r&&a.playSegments([0,67],!0),()=>{a&&r&&a.playSegments([350,370],!0)}},[r]);const i=()=>{var c,u;(c=e.current)==null||c.playSegments([320,345],!0),(u=e.current)==null||u.pause(),t();const a=document.getElementById(bA);a==null||a.focus()},s=a=>{a.key==="Enter"&&i()};return h.jsx("div",{children:h.jsx(m.Suspense,{fallback:h.jsx("div",{}),children:h.jsx(_we,{lottieRef:e,role:"button",tabIndex:0,"aria-label":n("characterAnimation.characterThinkingCloudAriaLabelText"),title:n("characterAnimation.characterThinkingCloudAriaLabelText"),animationData:r,loop:!1,onMouseDown:i,onMouseEnter:()=>{var a;return(a=e.current)==null?void 0:a.playSegments([275,295],!0)},onMouseLeave:()=>{var a;return(a=e.current)==null?void 0:a.playSegments([296,315],!0)},onKeyDown:s,onComplete:()=>{var a;return(a=e.current)==null?void 0:a.playSegments([68,274],!0)}})})})}const uO=1,xwe=m.lazy(()=>q(()=>import("./character-Dqu56dCZ.js"),__vite__mapDeps([235,1,236])).then(t=>({default:t.Character})));function Rwe({animatingMessageId:t,isStreamingMessage:e,displayedCharacterId:n,setCharacterComponentHeight:r}){const o=ve("characterspeech"),[i,s]=m.useState(0),[a,c]=m.useState(!1),[u,d]=tt(ic),{submitMessage:f}=cb(),p=D(Bi),g=()=>{s(0),c(!1)};m.useEffect(()=>{let b;return o&&u==="idle"&&(b=setInterval(()=>{s(C=>C<uO?C+1:C),p.length>0&&i===uO&&!e&&(c(!0),K.trackEvent({name:"system",data:{eventName:"characterTalkToMeDisplayed",eventInfo_conversationId:gt(mt),eventInfo_characterId:n}}))},1e3)),()=>clearInterval(b)},[u,n,p.length,o,i,e]),m.useEffect(()=>{o&&u!=="idle"&&u!=="hovering"&&g()},[u,o]);const v=async()=>{g(),d("responding"),await f({command:{type:"promptCharacterSpeech"},inputMethod:"promptCharacterSpeech"}),K.trackEvent({name:"interaction",data:{eventName:"characterTalkToMeClicked",eventInfo_conversationId:gt(mt),eventInfo_characterId:n}})};function y(){switch(n){case"aqua":return"translate-x-9";case"mica":return"translate-x-14";case"erin":return"translate-x-16";default:throw new Error("Invalid characterId provided to getTranslateXClass")}}return h.jsx(ZO,{fallback:h.jsx(z_,{}),onError:s$(t,n),children:h.jsxs("div",{"data-testid":"character-div",className:G("sticky top-0 h-2/5 min-h-[40vh] w-full bg-gradient-chat-light-character dark:bg-midnight-850 dark:bg-none",qt.babylonCharacter),style:{maskImage:"linear-gradient(to bottom, #000 95%, transparent 100%)"},children:[h.jsx(Tn,{children:a&&h.jsx(xe.div,{className:G("absolute start-1/2 top-12 size-36",y()),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:h.jsx(kwe,{onAnimationClicked:v})})}),h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(At,{type:"spinnerThemed",className:"size-12"})}),children:h.jsx(xwe,{characterId:n,setCharacterComponentHeight:r})})]})})}function Pwe({className:t}){const{t:e}=Fe();return h.jsxs("div",{className:bt("flex items-center gap-2",t),children:[h.jsx(At,{type:"reasoning",className:"size-11"}),h.jsxs("div",{className:"flex flex-col text-sm",children:[h.jsx("span",{children:e("chat.reasoningLoading.title")}),h.jsx("span",{className:"text-foreground-450 dark:text-foreground-600",children:e("chat.reasoningLoading.description")})]})]})}function Nwe(){return Vw(Bi,t=>{if(!et("ceo")||t.length===0)return!1;const e=t[t.length-1];return(e==null?void 0:e.author)==="ai"&&e.content.some(n=>n.type==="activity"&&n.activity.status==="running")})}function dO(t){let e=0;for(const n of t)e+=n;return e}function Owe(t,e,n){let r=0,o=null,i=[],s=0;return{getValue:()=>{if(!n)return 0;if(!o){o=Math.floor(performance.now());const c=t[t.length-1];if(!c)s=0;else{const u=c+dO(i)*1e3;u>o?(s=(u-o)/1e3,i=[]):(s=0,i=[])}}const a=t[r];return a?(r+=1,i=[],Math.max((a-o)/1e3,0)):(s=Number((s+dO(i)).toFixed(3)),i=[],e(r,o,s),r+=1,s)},queueUpdate:a=>{i.push(a)}}}function Mwe(t){const e=m.useRef([]);return m.useCallback(()=>Owe(e.current,(n,r,o)=>{e.current[n]=r+o*1e3},t),[t])}function Lwe(t){const{isActive:e,animationDuration:n="5s",children:r,className:o,...i}=t;return h.jsx("div",{className:bt(e&&"bg-gradient-to-l from-foreground-800 via-foreground-300 to-foreground-800 bg-[size:200%_100%] bg-clip-text text-transparent",o),style:{...e&&{animation:`shimmer-reverse ${n} linear infinite 0.5s`}},...i,children:r})}const P6="rounded-2xl border border-stroke-250 p-3";function N6(){const{t}=Fe(),e=t("chat.reasoningLoading.title");return h.jsx("div",{className:"text-sm",children:h.jsx(Lwe,{isActive:!0,children:e})})}function Dwe(){return h.jsx(xe.div,{initial:rt,animate:Ot,className:G("w-fit",P6),children:h.jsx(N6,{})})}function Zxe(t){const{shouldAnimate:e,items:n}=t,r=n&&n.at(-1).text,[o,i]=m.useState(0),s=Mwe(!0),{blocks:a}=m.useMemo(()=>{if(!r)return{blocks:[]};const u=s(),d=F4(r);return{blocks:xv(d,u,()=>{i(o+1)})}},[s,r,o]);return!(r&&a.length>0)?null:h.jsxs(xe.div,{initial:rt,animate:Ot,className:G("w-3/4",P6),children:[h.jsx(N6,{}),h.jsx("div",{className:"pt-3 text-foreground-550 text-sm",children:h.jsx(Rv,{blocks:a,shouldAnimate:e})})]})}function hO(){const t=D(dr),e=D(m.useMemo(Nwe,[])),n=ve("think-deeper-cot");switch(t){case"chat":case"smart":case"computerUse":case"research":return e?null:h.jsx(At,{type:"spinnerThemed",className:"absolute -ms-2.5 -mt-2 size-11"});case"reasoning":return n?h.jsx(Dwe,{}):h.jsx(Pwe,{className:"absolute -ms-2.5 -mt-2 w-max"});default:return null}}const jwe=m.lazy(()=>q(()=>import("./actions-chat-detail-BzKpPpEl.js"),__vite__mapDeps([346,1,347,348,330,349,350,337,272])).then(t=>({default:t.ActionsChatDetail}))),Uwe=m.lazy(()=>q(()=>import("./showroom-chat-detail-CclAGWoH.js"),__vite__mapDeps([351,1])).then(t=>({default:t.ShowroomChatDetail})));function Fwe(){const t=D(ad);return h.jsx("div",{className:"flex size-full items-center justify-center",children:t?h.jsx(m.Suspense,{fallback:h.jsx(fO,{}),children:h.jsx(Uwe,{})}):h.jsx(m.Suspense,{fallback:h.jsx(fO,{}),children:h.jsx(jwe,{})})})}function fO(){return h.jsx("div",{className:"flex size-full items-center justify-center",children:h.jsx(At,{className:"size-12"})})}const Im=376,tE="0.5rem";function O6(t){const{children:e}=t,n=D(jr),r=lo(),o=n==="side-by-side",i=hb(),s=n==="side-by-side"&&!i,a=r?"bg-stone-150":"bg-gradient-chat-light",c=db(u=>{const d=document.getElementById("app");d&&d.style.setProperty("--chat-details-container-height",i?`${u.height}px`:null)});return h.jsxs("div",{className:G("flex size-full max-h-[100vh] min-h-0",i&&"flex-col",o&&"bg-sidebar-light dark:bg-sidebar-dark",r&&o&&"pb-2"),style:s?{gap:tE}:void 0,children:[n!=="chat-only"&&h.jsx(xe.div,{ref:c,className:G("rounded-lg",i&&"h-fit",o&&"shadow-lg","dark:bg-midnight-850 dark:bg-none",a),initial:{width:s?`calc(100% - ${tE} - max(${Im}px, 25%))`:"100%"},animate:{width:s?`calc(100% - ${tE} - max(${Im}px, 25%))`:"100%"},transition:xo,children:h.jsx(Fwe,{})}),h.jsx(xe.div,{className:G(n==="detail-only"&&"hidden",o&&a,i?"h-[calc(100vh-var(--chat-details-container-height))]":"h-full",o&&"rounded-lg pb-px shadow-lg dark:bg-midnight-850 dark:bg-none"),initial:{width:s?`max(${Im}px, 25%)`:"100%"},animate:{width:s?`max(${Im}px, 25%)`:"100%"},transition:xo,children:e})]})}function Bwe(t,e,n){const r=xm(t,e),o=Mu(e,{weekStartsOn:1}),i=xm(o,e),s=xm(hg(o,7),e),a=du(t,"EEEE",{weekStartsOn:1}),c=n(`dates.weekdays.${a.toLowerCase()}`),u=n(`dates.months.${du(t,"MMMM").toLowerCase()}Abbr`),d=du(t,"d"),f=n("dates.dayMonthDate",{day:c,month:u,date:d});return r>=1?f:r>=0?`${n("dates.today")}`:r>=-1?`${n("dates.yesterday")}`:r>=i?c:r>=s?n("dates.previousDay",{day:c}):f}function Hwe(t,e){return Bwe(t,new Date,e)}function eRe(t){const e=Math.max(0,t),n=Math.floor(e/60),r=e%60;return`${n}:${r<10?"0":""}${r}`}function zwe(t){const{date:e,className:n}=t,{t:r}=Fe();return h.jsxs("div",{className:G("flex items-center",n),children:[h.jsx("span",{className:"opacity-70 text-xs-strong","data-testid":"date-divider",children:Hwe(e,r)}),h.jsx(cA,{verticalMargin:!1,color:"accent",className:"mt-px grow"})]})}function Vwe(t){const{content:e}=t;return h.jsx("div",{className:"text-center text-foreground-450 text-xs dark:text-foreground-600",children:e})}const $we="contrast-more:outline contrast-more:after:border-2 contrast-more:after:absolute contrast-more:after:pointer-events-none contrast-more:after:w-2/3 contrast-more:after:h-2/3",Gwe="text-stone-550 active:text-stone-350 dark:text-slate-400 active:dark:text-slate-450",qwe="bg-white/3 safe-hover:bg-black/5 active:bg-black/3 dark:bg-black/3 dark:safe-hover:bg-white/5 dark:active:bg-white/3",Kwe="border-[1px] border-black/8 dark:border-white/8",Wwe=`${Gwe} ${qwe} ${Kwe}`;function Ywe(t){const{children:e,isSelected:n,className:r,onClick:o,disabled:i,unselectedColorClass:s,variant:a="standard"}=t,{focusable:c}=rd({autoRestoreFocus:!0,forceFocus:!0});let u;return n?u=mc.strong:a==="flat"?u=Wwe:u=mc[s??"overlay-dimmed-inverted"],h.jsx("button",{disabled:i,type:"button",ref:c.ref,className:G("shadow-none dark:shadow-none",nf,eT["40-base"],tT["40-base"],uE["40-base"],zv,u,r,n&&$we),onClick:o,"aria-pressed":n,"data-spatial-focus-key":c.focusKey,children:e})}function Qwe(t){const{query:e,messageId:n,index:r,onClick:o}=t,i=D(mt),s=()=>{Sn({source:"suggestionChip",conversationId:i,messageId:n}),K.trackEvent({name:"interaction",data:{eventName:"copilotSuggestionFollowupSelection",eventInfo_messageId:n,eventInfo_conversationId:i??"",eventInfo_suggestionIndex:r}}),o()};return h.jsx(Ywe,{isSelected:!1,variant:"flat",className:"max-w-[80%] text-start sm:max-w-fit",onClick:s,children:h.jsx("span",{className:"p-1",children:e})})}function Jwe(t){const{mostRecentMessageId:e,className:n}=t,r=D(m$),o=r&&e===r.messageId;return m.useEffect(()=>{o&&fd({page:"chat",scenario:"suggestionReceived"})},[o]),h.jsx("div",{className:G("mt-auto",n),children:o&&h.jsx(Xwe,{suggestions:r.suggestions,messageId:r.messageId})})}function Xwe({suggestions:t,messageId:e}){const{submitMessage:n}=cb(),r=m.useRef(null),o=Yw(r,{amount:"all",once:!0});return m.useEffect(()=>{o&&fd({page:"chat",scenario:"suggestionRender"})},[o]),h.jsx(xn,{ref:r,duration:_o.suggestions,className:"flex flex-col items-end gap-3 pb-8",children:t.map((i,s)=>h.jsx(Qwe,{index:s,messageId:e,onClick:()=>n({text:i,inputMethod:"suggestion"}),query:i},i))})}function RA(t){const{pages:e,className:n,children:r,disableLink:o,clickSource:i}=t,{pushPages:s}=QU(),a=()=>{Kt.emit("disclaimer:open-settings"),s(e),at({source:i??"settingsLink",destination:e[e.length-1]})};return o?h.jsx("span",{children:r}):h.jsx("button",{className:n,type:"button",title:"",onClick:a,children:r})}function pO(t){var e;return((e=be.instance().config().settingsOverrides)==null?void 0:e[t.key])??t.default}function Zwe(){const t=xr(),e=D(kL),n=D(ZT),r=D(eI),o=D(id),i=D(GQ),s=!!D(qQ),a=!!D(KQ),c=!!(pO({key:"shouldShowTextModelTrainingSettings",default:!0})&&s),u=!!(pO({key:"shouldShowVoiceModelTrainingSettings",default:!0})&&a),d=ve("view-settings-disclaimer"),f=c||u,p=!f||e&&!n,g=_U(),[v,y]=tt(NL),[b,C]=m.useState(!1);m.useEffect(()=>{if((f||i)&&t&&!o){if(v){C(!0),y(!1);return}if(g<SE){C(!0);return}let E;try{E=sle()}catch{E=new Date}const T=B2(E,6),I=new Date;I>T&&(C(!0),rr(mf,I.toISOString()))}},[t,f,o,g,i,v,y]);const S=()=>p===void 0||r===void 0||i===void 0?null:o||!t?"chat.unauthenticatedDisclaimer":!i||!b?"chat.firstTurnDisclaimerBase":!p&&!r?d?"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":"chat.firstTurnDisclaimerPersonalizationTraining":p&&!r?d?"chat.firstTurnPersonalizationDisclaimerViewSettings":"chat.firstTurnPersonalizationDisclaimer":r&&!p?d?"chat.firstTurnTrainingDisclaimerViewSettings":"chat.firstTurnTrainingDisclaimer":"chat.firstTurnDisclaimerBase";return(()=>{var T,I,A;let E=S();return E?(T=be.instance().config().uiOverrides)!=null&&T.hideTrainingDisclaimer?"chat.firstTurnDisclaimerBase":(E=((A=(I=be.instance().config()).textOverrides)==null?void 0:A.call(I,E))??E,E):null})()}const PA="text-foreground-450 text-xs dark:text-foreground-600",eTe="underline",mO={settingsLink:h.jsx(RA,{pages:["menu","account","privacy"],className:G(PA,eTe),clickSource:"disclaimerSettingsLink"}),learnMoreLink:h.jsx(Dw,{link:Tv})},gO={termsLink:h.jsx(Dw,{link:Nf}),privacyLink:h.jsx(Dw,{link:Ju})},tTe={settingsLink:h.jsx(RA,{pages:["menu","account","privacy"],className:G(PA),disableLink:!0})};function Lw(t){const{forceVisible:e,disableDisclaimerSettingsLink:n,className:r,testId:o}=t,i=Zwe(),s=D(Po);if(!(s==null?void 0:s.isNew)&&!e||!i)return null;const c=u=>{switch(u){case"chat.unauthenticatedDisclaimer":return h.jsxs(h.Fragment,{children:[h.jsx(Fo,{i18nKey:"chat.firstTurnDisclaimerBase"})," ",h.jsx(Fo,{i18nKey:u,components:{termsLink:gO.termsLink,privacyLink:gO.privacyLink}})]});case"chat.firstTurnTrainingDisclaimer":case"chat.firstTurnPersonalizationDisclaimer":case"chat.firstTurnDisclaimerPersonalizationTraining":case"chat.firstTurnTrainingDisclaimerViewSettings":case"chat.firstTurnPersonalizationDisclaimerViewSettings":case"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":return h.jsxs(h.Fragment,{children:[h.jsx(Fo,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",h.jsx(Fo,{i18nKey:u,components:{settingsLink:n?tTe.settingsLink:mO.settingsLink}})]});case"chat.edge.firstTurnPersonalizationDisclaimer":case"chat.edge.firstTurnPersonalizationSettingsDisclaimer":return h.jsxs(h.Fragment,{children:[h.jsx(Fo,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",h.jsx(Fo,{i18nKey:u,components:{learnMoreLink:mO.learnMoreLink,bold:h.jsx("strong",{})}})]});case"chat.firstTurnDisclaimerBase":case"chat.firstTurnPersonalizationDisclaimerBase":case"chat.tv.firstTurnDisclaimer":return h.jsx(Fo,{i18nKey:u});default:return null}};return h.jsx(xn,{id:i,mode:"wait",className:G("space-y-8 pb-8",PA,r),"data-testid":o,children:c(i)})}function Dw(t){const{children:e,link:n,className:r}=t;return h.jsx(ta,{className:G("underline",r),href:n,title:"",children:e})}function M6(t){const{customBottomDisclaimer:e}=t,n=ve("async-disclaimer-text"),r=SA(),[o,i]=m.useState(!n);return m.useEffect(()=>{r&&r.length>0&&i(!0)},[r]),e||(o?h.jsx(xn,{className:"absolute bottom-0 flex max-w-chat justify-center px-6 text-center","data-testid":"bottom-disclaimer",children:h.jsx(Lw,{})}):null)}function nTe(){return h.jsx("div",{"aria-hidden":!0,className:"flex size-full flex-col items-center justify-center"})}const Ml="absolute animate-dot-ellipsis size-2 rounded-full bg-background-450";function rTe(t){const{className:e}=t;return h.jsxs("div",{className:bt("flex items-center justify-center gap-3",e),children:[h.jsxs("div",{className:"relative flex items-center justify-center",children:[h.jsx("div",{className:Ml,style:{animationDelay:"0ms"}}),h.jsx("div",{className:Ml,style:{animationDelay:"30ms"}})]}),h.jsxs("div",{className:"relative flex items-center justify-center",children:[h.jsx("div",{className:Ml,style:{animationDelay:"100ms"}}),h.jsx("div",{className:Ml,style:{animationDelay:"130ms"}})]}),h.jsxs("div",{className:"relative flex items-center justify-center",children:[h.jsx("div",{className:Ml,style:{animationDelay:"200ms"}}),h.jsx("div",{className:Ml,style:{animationDelay:"230ms"}})]})]})}function oTe(t){const{text:e,staggerChildren:n=.018,delayChildren:r=0,initialOpacity:o=0}=t;return h.jsx(xe.div,{variants:{show:{transition:{staggerChildren:n,delayChildren:r}}},initial:"hidden",animate:"show",children:tA(e).map((i,s)=>h.jsx(xe.span,{variants:{hidden:{opacity:o},show:{opacity:1,transition:{duration:K4}}},children:i},s))})}function iTe(){const t=tr({breakpoint:"md"}),e=lo(),n=D(ba);return e&&n&&!t}const sTe={sm:"text-md",md:"text-xl",lg:"text-3xl"};function aTe(t){const{subheading:e}=t;return h.jsx("h2",{className:"mt-4 text-foreground-800 text-base",children:e})}function cTe(t){const{className:e,fontSize:n="lg"}=t,r=D(hy),o=D(wL),{t:i}=Fe(),s=iTe(),{greetingKey:a,widgetGreeting:c,widgetSubheading:u}=UL(),d=EA(),f=BCe(),p=a?i(a,{name:o}):"";return d?h.jsx("div",{className:bt(e,"flex w-full flex-col items-start justify-start gap-2 sm:mb-6 sm:h-[100px] sm:justify-end"),children:h.jsx("div",{className:"flex justify-start sm:min-h-8",children:!f||r?h.jsx("div",{className:"ms-2 mt-6 flex size-full sm:mt-0",children:h.jsx(rTe,{className:"flex-1"})}):h.jsxs("div",{className:"flex flex-col items-start gap-2",children:[h.jsxs(xn,{className:"flex items-center gap-2 text-foreground-550 dark:text-foreground-750",id:c??p,children:[h.jsx("p",{className:"text-xs-strong",children:i("common.copilotText")}),h.jsx("p",{className:"text-xs",children:du(new Date,"h:mm aa")})]}),h.jsx("h1",{className:"text-lg",children:h.jsx(L6,{text:c??p},c)})]})})}):h.jsxs("div",{className:bt(e,"flex flex-col items-start",sTe[n],s&&u&&"mb-8 bp-960:mb-0"),"data-testid":"launch-greeting",children:[h.jsx("h1",{children:p}),u&&h.jsx(aTe,{subheading:u})]})}const L6=m.memo(t=>{const{text:e}=t;return h.jsx(oTe,{text:e,staggerChildren:.02,delayChildren:.1},e)});L6.displayName="AnimatedTextMemo";function lTe(t){const{customLaunchGreeting:e,className:n}=t,r=tr({breakpoint:"sm"}),{showShoppingCardInNewChat:o}=py();return e||h.jsx(cTe,{className:n,fontSize:r||o?"md":"lg"})}function uTe(t){const{className:e}=t,n=D(id),r="top-disclaimer";return n?h.jsx(Lw,{forceVisible:!0,className:e,testId:r}):h.jsx(Lw,{className:e,testId:r})}function dTe({characterId:t,className:e}){const n=D(Po),[r,o]=tt(sM),{t:i}=Fe();return m.useEffect(()=>{(n==null?void 0:n.isNew)===!1&&o(!1)},[o,n==null?void 0:n.isNew]),n!=null&&n.isNew?h.jsxs(xn,{id:"character-disclaimer",mode:"wait",className:G("pb-2 text-stone-550/90 text-xs dark:text-slate-250/60",e),children:[i("characterAnimation.characterDisclaimerTextV2",{characterName:i$(t,i)})," ",r&&h.jsx(Fo,{i18nKey:"characterAnimation.characterSettingDisclaimerText",components:{settingsLink:h.jsx(RA,{pages:["menu","character-options"],className:"text-stone-550/90 underline text-xs dark:text-slate-250/60"})}})]}):null}function hTe(){return h.jsx(mb,{size:"sm",stroke:!0,className:"flex h-[172px] w-[324px] cursor-pointer flex-col p-4",children:h.jsx("div",{className:"flex flex-1",children:h.jsx(gb,{className:"size-full",style:{clipPath:"var(--clip-path-squircle-36)"}})})})}const fTe=m.lazy(()=>q(()=>import("./contextual-shopping-card-CJalk0xw.js"),__vite__mapDeps([352,1,353,253,249,354,355,250,251,252,238,356,357,358,359,360])).then(t=>({default:t.AnimatedContextualShoppingCard})));function D6(t){const{customLaunchGreeting:e,chatItemClasses:n}=t,{isCentralComposerEnabled:r,isWidgetSectionEnabled:o,isAppearanceOnHomeEnabled:i}=wp(),s=tr({breakpoint:"sm"}),a=Lv({breakpoint:"h760"}),c=Lv({breakpoint:"h600"}),u=i&&!c,d=ve("multiplecharacters"),f=fy(),p=D(IT),g=D(oJ),v=!Zy(),y=d&&p!==null,b=S4(),{launchGreetingShown:C,widgetSubheading:S}=UL(),{showShoppingCardInNewChat:w,shoppingProductMetadata:E}=py(),T=!g&&!y&&!C&&f&&!b,A=be.instance().config().smallScreenShowTopDisclaimerAfterSendingMessage??!1?!f:!T,_=y||s&&A,R=D(dr)==="computerUse",$=o&&!R&&!s&&!a,U=T&&"pb-2",se=m.lazy(()=>i?q(()=>import("./appearance-chat-Dum3Rcbf.js"),__vite__mapDeps([361,1])).then(k=>({default:k.AppearanceChat})):Promise.resolve({default:()=>null})),P=h.jsxs(xn,{delay:.2,initial:v?"initial":!1,className:bt(r?"mt-2 flex flex-col items-start text-pretty pe-0 sm:absolute sm:inset-x-0 sm:inset-y-0 sm:mx-auto sm:mt-0 sm:max-w-chat sm:px-4 sm:pb-[calc(var(--composer-container-height))]":U,w&&"mx-auto mt-2 max-w-sm sm:relative sm:mt-6 sm:max-w-md sm:px-4",u&&s&&"grow",$&&!S&&"sm:pb-[calc(var(--composer-container-height)-64px)]",$&&S&&"sm:pb-[calc(var(--composer-container-height)-32px)]"),children:[u&&r&&h.jsx("div",{className:bt("order-2 flex w-full flex-col items-center justify-center sm:absolute sm:h-[calc(50%-60px-var(--composer-container-height)/2)]",s&&"grow"),children:h.jsx(m.Suspense,{fallback:h.jsx(nTe,{}),children:h.jsx(se,{voiceAppearanceId:oy})})}),h.jsxs("div",{className:bt("order-1 flex w-full flex-col gap-2 sm:top-0 sm:h-full sm:justify-center",i?"items-center":"items-start"),children:[T&&h.jsx(lTe,{customLaunchGreeting:e,className:bt(i?"text-center":"sm:ps-2")}),y&&h.jsx(dTe,{characterId:p}),w&&E&&h.jsx(m.Suspense,{fallback:h.jsx(hTe,{}),children:h.jsx(fTe,{content:E})}),_&&h.jsx(uTe,{})]})]},"chat-welcome");return n?h.jsx("div",{className:n,children:P}):P}const vO=10,pTe=0,mTe=.2;function gTe({onClick:t,shouldShowScrollToBottomButton:e,bottomButtonClass:n=""}){const{t:r}=Fe(),o=D(jr),i=hb(),s=o==="side-by-side"&&!i;return h.jsx(Tn,{children:e&&h.jsx(xe.div,{className:G("absolute flex justify-center",qt.chatScrollToBottomButton,s?"end-0 w-1/4 min-w-chat-side-by-side justify-end":"inset-x-0",n),initial:{...rt,y:vO},animate:{...Ot,y:pTe},exit:{...rt,y:vO},transition:{duration:mTe},children:h.jsx(Ue,{color:"acrylic",variant:"square",title:r("chat.scrollToBottom"),onClick:t,children:h.jsx("span",{className:"overflow-hidden rounded-xl bg-white/40 p-2 shadow-xl dark:bg-background-350/60",children:h.jsx(mp,{className:"size-6 rotate-180"})})})})})}const j6=t=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_12117_44960",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},m.createElement("path",{d:"M7.19253 7.24894C7.46962 6.94112 7.94384 6.91617 8.25172 7.1932L10.7517 9.44267C10.9098 9.58487 11 9.78745 11 10C11 10.2126 10.9098 10.4152 10.7517 10.5574L8.25172 12.8068C7.94384 13.0839 7.46962 13.0589 7.19253 12.7511C6.91543 12.4433 6.94039 11.9692 7.24827 11.6922L8.29553 10.7499H4.75C4.33579 10.7499 4 10.4141 4 10C4 9.58591 4.33579 9.2502 4.75 9.2502H8.29553L7.24828 8.30789C6.94039 8.03086 6.91543 7.55675 7.19253 7.24894ZM20 15.2506C20 16.7691 18.7688 18 17.25 18L2.75 18C1.23122 18 0 16.7691 0 15.2506V4.74937C0 3.23093 1.23122 2 2.75 2H17.25C18.7688 2 20 3.23094 20 4.74937L20 15.2506ZM17.25 16.5003C17.9404 16.5003 18.5 15.9408 18.5 15.2506L18.5 4.74937C18.5 4.05917 17.9404 3.49966 17.25 3.49966L13.9958 3.49966L13.9958 16.5003H17.25ZM12.4958 16.5003L12.4958 3.49966L2.75 3.49965C2.05965 3.49965 1.5 4.05917 1.5 4.74937L1.5 15.2506C1.5 15.9408 2.05964 16.5003 2.75 16.5003L12.4958 16.5003Z",fill:"currentColor"})),m.createElement("g",{mask:"url(#mask0_12117_44960)"},m.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),tRe=Object.freeze(Object.defineProperty({__proto__:null,default:j6},Symbol.toStringTag,{value:"Module"}));function vTe(){const t=!Xo("kill-share-c2"),e=Wt(),n=D(Po);return!!(t&&e.startsWith("/chats")&&!e.endsWith("/talk")&&(n!=null&&n.history.length))}function U6(){const{t}=Fe(),e=tr({breakpoint:"md"}),n=tr({breakpoint:"sm"}),r=tr({breakpoint:"xl"}),o=D(jr)==="side-by-side",i=D(ba),s=Wt(),a=Te(jr),c=hb(),u=o&&!n&&s.startsWith("/chats"),d=vTe()&&r,f=(e||!i||u||d)&&!c,p=m.useCallback(()=>{a("detail-only")},[a]);return h.jsx("div",{className:G("sticky top-0 z-10 w-full"),children:h.jsx(Tn,{children:f&&h.jsx(xe.div,{className:"absolute h-16 w-full rounded-lg bg-stone-150/90 backdrop-blur-md dark:bg-midnight-850/80",initial:"initial",animate:"animate",exit:"exit",variants:{initial:rt,animate:Ot,exit:rt},transition:xo,"data-testid":"sticky-header",children:u&&h.jsx(xe.div,{initial:rt,animate:Ot,exit:{transition:{duration:0},...rt},transition:xo,children:h.jsx(Ue,{title:t("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",className:"ms-3.5 mt-1.5",onClick:p,children:h.jsx(j6,{className:"size-5"})})})})})})}const yTe="answerCards.ariaLabel.numberOfLocalResultsSingle",bTe="answerCards.ariaLabel.numberOfLocalResultsPlural";function CTe(t){let e="";for(const r of t.entities){if(e+=r.name,r.category&&(e+=`, ${r.category}`),r.price&&(e+=`, ${STe(r.price)}`),r.reviews[0]){const o=r.reviews[0];e+=", ",e+=ce("answerCards.ariaLabel.ratedByReviewer",{rating:o.rating,reviewCount:o.count,reviewProvider:o.providerName})}r.phoneNumber&&(e+=", ",e+=ce("answerCards.ariaLabel.phoneNumber",{phoneNumber:r.phoneNumber})),r.location.address&&(e+=", ",e+=ce("answerCards.ariaLabel.address",{address:r.location.address})),e+=". "}const n=t.entities.length===1?yTe:bTe;return ce(n,{count:t.entities.length,resultSummary:e})}function STe(t){switch(t.length){case 1:return ce("answerCards.ariaLabel.inexpensivePrices");case 2:return ce("answerCards.ariaLabel.averagePrices");default:return ce("answerCards.ariaLabel.expensivePrices")}}function ETe(t){const{content:e,announce:n}=t;let r;for(const o of e){switch(o.type){case"text":r=o.text;break;case"image":o.url?r=ce("chat.imageGenerated",{prompt:o.prompt??""}):r=ce("chat.imageGenerating");break;case"page":break;case"citation":break;case"card":r=wTe(o.card);break;case"error":r=o.text;break;case"task":break;case"deleted":break;case"chainOfThought":break;case"activity":break;case"memoryUpdateMessagePart":r=o.text;break}r&&n({msg:r})}}function wTe(t){switch(t.type){case"localEntity":return CTe(t);case"ads":case"weather":case"weatherTemperatureHourly":case"weatherTemperatureDaily":case"weatherPrecipitationHourly":case"weatherPrecipitationDaily":case"image":case"phoneImages":case"phoneLinking":case"phoneAlarm":case"phoneTimer":case"phoneSendMessage":case"video":case"sportsSchedule":case"sportsGame":case"safetyHelpline":case"shopping":case"shoppingProducts":case"shoppingCurated":case"job":case"inlineVideo":case"quiz":case"financeChart":case"generativeUI":case"recipe":case"mediaSpotlight":case"inlineImage":case"m365":case"file":case"computerUseFeedback":return"";default:return""}}function TTe(t,e){const n=m.useRef();m.useEffect(()=>{var o;if(e==="streaming")return;const r=t.at(-1);r&&r.author==="ai"&&r.id!==((o=n.current)==null?void 0:o.id)&&(ETe({content:r.content,announce:fA}),n.current=r)},[t,e])}function ITe(t){m.useEffect(()=>{if(t.current){const e=r=>{var i,s,a,c,u;if(r.target&&r.target instanceof Element&&r.target.closest('[data-formatless-copy="false"]'))return;const o=window.getSelection();if(o!=null&&o.rangeCount){let d=document.createElement("div");const f=o.getRangeAt(0),{startContainer:p,endContainer:g}=f;d.appendChild(f.cloneContents());const v=(i=p.parentElement)==null?void 0:i.closest("pre"),y=(s=g.parentElement)==null?void 0:s.closest("pre"),b=!!v&&!!y&&v===y,C=!!((a=p.parentElement)!=null&&a.closest("table")),S=d.getElementsByTagName("*");for(const I of S)I.getAttribute("data-copy")==="false"?I.remove():(I.removeAttribute("style"),I.removeAttribute("class"),I.removeAttribute("initial"),I.removeAttribute("animate"),I.removeAttribute("variants"),I.removeAttribute("custom"));if(b){const I=document.createElement("pre");I.appendChild(d),d=I}if(C){const I=document.createElement("table"),A=Array.from(d.children);for(const _ of A)I.appendChild(_);d=I}d.style.position="absolute",d.style.left="-9999px",document.body.appendChild(d);const w=window.getSelection(),E=document.createRange();E.selectNodeContents(d),w==null||w.removeAllRanges(),w==null||w.addRange(E);const T=(w==null?void 0:w.toString())??"";w==null||w.removeAllRanges(),w==null||w.addRange(f),document.body.removeChild(d),d.removeAttribute("style"),(c=r.clipboardData)==null||c.setData("text/plain",T),(u=r.clipboardData)==null||u.setData("text/html",b||C?d.outerHTML:d.innerHTML)}r.preventDefault()},n=t.current;return n.addEventListener("copy",e),()=>{n.removeEventListener("copy",e)}}return()=>{}},[t])}const _Te=typeof document<"u"?m.useLayoutEffect:m.useEffect;function ATe(t,e){const n=m.useRef(0),r=m.useRef(0);m.useEffect(()=>{const{current:o}=e,i=()=>{if(o){const s=o.scrollHeight-o.scrollTop;r.current=s}};return o==null||o.addEventListener("scroll",i,{passive:!0}),i(),()=>{o==null||o.removeEventListener("scroll",i)}},[e]),_Te(()=>{const{current:o}=e;o&&o.scrollTop+r.current!==o.scrollHeight&&(n.current===0?setTimeout(()=>{o.scrollTop=o.scrollHeight},100):o.scrollTop=o.scrollHeight-r.current,n.current=t)},[t,e])}function kTe(t,e){const n=Xo("kill-review-prompt"),o=!!be.instance().config().promptForReviews&&!n,i=Te(Ir),s=m.useCallback(async c=>{if(!o)return;const{shown:u}=await zce.run({});if(u)return;const f=wCe()>=vCe,p=c>mCe;(f||p)&&!TCe()&&(i("prompt-review"),K.trackEvent({name:"system",data:{eventName:"inAppSurveyPopUp",eventInfo_triggerType:p?"longChat":"activeDays"}}))},[o,i]),a=m.useRef(!1);m.useEffect(()=>{e&&(a.current=!0)},[e]),m.useEffect(()=>{e||!a.current||s(t)},[t,e,s])}function xTe(t){return m.useCallback(({behavior:n="smooth",delay:r=0})=>{setTimeout(()=>{t.current&&t.current.scrollTo({top:t.current.scrollHeight,behavior:n})},r)},[t])}const RTe=.1;function PTe(t){const{chatRef:e,isEnabled:n,hasMessages:r=!0}=t,o=m.useRef(null),[i,s]=m.useState(!1),a=m.useCallback(c=>{const u=c[0];u&&s(!u.isIntersecting&&r)},[r]);return m.useEffect(()=>{if(!n||!e.current||!o.current)return()=>{};const c=new IntersectionObserver(a,{root:e.current,threshold:RTe});return c.observe(o.current),()=>{c.disconnect()}},[n,e,a]),m.useEffect(()=>{r||s(!1)},[r]),{bottomRef:o,shouldShowScrollToBottomButton:i}}function NTe(){const t=D(ep),e=ga(In),n=D(wT);m.useEffect(()=>{e(r=>{if(n){const o=r.get(n);o&&(o.characterId=t)}})},[n,t,e])}async function OTe(t,e){const n=cI(e);if(n){const{message:r,part:o}=n;if(!o.task)return;const i=await nc();i.setConversationIdByMessageId({messageId:r.id,conversationId:t}),i.setMessageIdByTaskId({taskId:o.task.id,messageId:r.id})}}const MTe=window.requestIdleCallback||function(e){const n=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-n))}})},1)},F6=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M2 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v7a2 2 0 0 1-1.164 1.818 1.497 1.497 0 0 0-.275-.379l-.446-.446A1 1 0 0 0 17 13V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5v1H4a2 2 0 0 1-2-2V6Zm8.854 4.146A.5.5 0 0 0 10 10.5v7a.5.5 0 0 0 .91.287l1.571-2.245 2.943.452a.5.5 0 0 0 .43-.848l-5-5ZM11 15.915v-4.207l3.066 3.067-1.74-.268a.5.5 0 0 0-.486.207l-.84 1.2Z"})),nRe=Object.freeze(Object.defineProperty({__proto__:null,default:F6},Symbol.toStringTag,{value:"Module"})),B6=t=>m.createElement("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M32.0007 5.33301C46.7282 5.33301 58.6673 17.2721 58.6673 31.9997C58.6673 46.7273 46.7282 58.6663 32.0007 58.6663C17.2731 58.6663 5.33398 46.7273 5.33398 31.9997C5.33398 17.2721 17.2731 5.33301 32.0007 5.33301ZM32.0007 8.66634C19.114 8.66634 8.66732 19.113 8.66732 31.9997C8.66732 44.8863 19.114 55.333 32.0007 55.333C44.8873 55.333 55.334 44.8863 55.334 31.9997C55.334 19.113 44.8873 8.66634 32.0007 8.66634ZM23.7105 21.3663L23.8458 21.4878L32.0007 29.6437L40.1555 21.4878C40.763 20.8803 41.7227 20.8398 42.3772 21.3663L42.5125 21.4878C43.12 22.0953 43.1605 23.0551 42.634 23.7095L42.5125 23.8449L34.3567 31.9997L42.5125 40.1545C43.12 40.762 43.1605 41.7217 42.634 42.3762L42.5125 42.5115C41.905 43.119 40.9453 43.1595 40.2908 42.633L40.1555 42.5115L32.0007 34.3557L23.8458 42.5115C23.2383 43.119 22.2786 43.1595 21.6241 42.633L21.4888 42.5115C20.8813 41.904 20.8408 40.9443 21.3673 40.2898L21.4888 40.1545L29.6447 31.9997L21.4888 23.8449C20.8813 23.2374 20.8408 22.2776 21.3673 21.6232L21.4888 21.4878C22.0963 20.8803 23.0561 20.8398 23.7105 21.3663Z"})),rRe=Object.freeze(Object.defineProperty({__proto__:null,default:B6},Symbol.toStringTag,{value:"Module"})),yO="size-5",bO="flex w-full items-center justify-end gap-1.5 text-foreground-450 dark:text-slate-400";function LTe({type:t}){const{t:e}=Fe();switch(t){case"takeTaskControl":return h.jsxs("div",{className:bO,children:[h.jsx(F6,{className:yO}),e("actions.tookControl")]});case"cancelTask":return h.jsxs("div",{className:bO,children:[h.jsx(B6,{className:yO}),e("actions.cancelledTask")]});case"createPage":case"appendToPage":case"promptCharacterSpeech":default:return null}}function DTe(t){const{fileName:e,fileType:n}=t,r=n!==""?n:sA(e);return bp(r)?h.jsx(QF,{filename:e,fileType:r}):null}async function oRe(t,e){const r=`Copilot_${du(new Date,"yyyyMMdd_HHmmss")}`,i=await(await fetch(t)).blob(),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}function jTe(t){t.target instanceof HTMLImageElement&&URL.revokeObjectURL(t.target.src)}async function UTe(t,e=!1){try{const n=await Uc(t,{analytics:{anonymousPath:"/attachments/*.png"}});return e&&n.status!==200?null:await n.blob()}catch{return null}}async function FTe(t,e=!1){try{const n=await UTe(t,e);return n?URL.createObjectURL(n):null}catch{return null}}function BTe(t){const{url:e}=t,{t:n}=Fe(),[r,o]=m.useState(null);return m.useEffect(()=>{if(!e){o(null);return}async function i(){o(await FTe(e))}i()},[e]),r?h.jsx("img",{className:"block h-full overflow-hidden rounded-2xl bg-background-static-250 object-cover object-center shadow-inner dark:bg-background-static-900",alt:n("chat.uploadedImageAltText"),src:r,onLoad:jTe}):null}function HTe(t){const{text:e}=t;return h.jsx("div",{className:"flex w-full flex-col items-end","data-content":"user-message",children:h.jsx("div",{className:G("font-ligatures-none h-fit max-w-[80%] self-end whitespace-pre-wrap break-words rounded-2xl bg-accent-250/60 px-5 py-3 dark:bg-accent-200",Ui("userMessage")??"text-base"),children:e})})}const H6=m.forwardRef((t,e)=>{const{children:n,tabBehavior:r="limited-trap-focus",ignoreDefaultKeydown:o,...i}=t,s=JO({tabBehavior:r,ignoreDefaultKeydown:o});return ve("a11y-keyboard-navigation")?h.jsx(xe.div,{ref:e,...s,...i,tabIndex:0,children:n}):h.jsx(xe.div,{...i,ref:e,children:n})});H6.displayName="FocusableGroupMotion";function zTe(t){const{children:e,tabBehavior:n="limited-trap-focus",ignoreDefaultKeydown:r,...o}=t,i=JO({tabBehavior:n,ignoreDefaultKeydown:r});return ve("a11y-keyboard-navigation")?h.jsx("div",{...i,...o,tabIndex:0,role:"article",children:e}):h.jsx("div",{...o,children:e})}const z6=t=>h.jsx(zTe,{...t});z6.Motion=H6;function VTe(){const{t}=Fe();return h.jsx("div",{className:"flex w-fit justify-end",children:h.jsx("div",{className:"flex h-32 w-44 items-center justify-center rounded-xl border border-stroke-250 bg-accent-200 px-4 py-2 dark:bg-accent-250",children:h.jsx("span",{className:"text-center text-foreground-450 text-sm",children:t("share.imagePlaceholder")})})})}function $Te({tabs:t=[]}){return t.length===0?null:h.jsx(dl,{className:"flex min-h-[60px] flex-col gap-2",tabbable:!0,tabIndex:0,children:h.jsx(bF,{showRemoveIcon:!1,tabs:t})})}function GTe(t){const{message:e,className:n,isForSharing:r}=t,{t:o}=Fe(),s=!!D(ad),a=ve("edge-multi-tabs-manual"),c=ve("a11y-keyboard-navigation"),u=!Xo("kill-share-c2"),d=o(c?"chat.userSaid":"chat.user"),f=(g,v,y)=>g.type==="document"?h.jsx(DTe,{fileType:g.contentType,fileName:g.fileName},`${y}-${v}`):u&&r?h.jsx(VTe,{},`${y}-${v}`):g.type==="image"?h.jsx("div",{className:"w-auto max-w-[min(80%,256px)]",children:h.jsx(BTe,{url:g.url})},`${y}-${v}`):null,p=e.content.filter(g=>g.type==="document"||g.type==="image");return h.jsxs(z6,{className:G("space-y-1",n),id:`${e.id}-user-message`,"aria-labelledby":`${e.id}-user-message`,children:[h.jsxs("div",{className:"relative space-y-3",children:[h.jsx("h2",{className:"sr-only","aria-label":d,"data-copy":"false",children:d}),p.length>0&&h.jsx("div",{className:"flex h-32 w-full flex-row justify-end gap-2 overflow-hidden",children:p.map((g,v)=>f(g,v,"file"))}),e.content.map((g,v)=>g.type==="browserTabs"?a&&IF(g.tabs)?h.jsx($Te,{tabs:g.tabs},v):null:g.type==="text"?h.jsx(HTe,{text:g.text},v):g.type==="command"?h.jsx(LTe,{type:g.command.type},v):(g.type==="document",null)),e.emojiReaction&&h.jsx("div",{className:"absolute -bottom-3 end-3",children:e.emojiReaction})]}),!s&&e.brand&&h.jsx("div",{className:"w-full px-3 text-right text-foreground-600 text-xs",children:o("ads.aboutBrand",{brand:e.brand.brandLogo.businessName})})]},e.id)}const qTe=m.lazy(()=>q(()=>import("./action-alert-CkxzKiPV.js"),__vite__mapDeps([362,1,363])).then(t=>({default:t.ActionAlert}))),KTe=m.lazy(()=>q(()=>import("./ai-message-DEFgmSWe.js").then(t=>t.l),__vite__mapDeps([364,1,324,229,329,365,366,223,295,343,221,367,327,357,368]))),WTe=1.5,CO="inline-block w-full space-y-8",NA="max-w-chat w-full";function V6(t){var Me,We,Ne,z;const{className:e,conversationContainerClassName:n="mb-[var(--composer-container-height)]",bottomButtonClassName:r="bottom-[calc(var(--composer-container-height)+1.5rem)]",customLaunchGreeting:o,customBottomDisclaimer:i,enableHighlightedClasses:s=!0,enableBackstageClasses:a=!0,disableStickyHeader:c=!1,disableSuggestions:u=!1,reactionsToDisable:d}=t,{loader:f}=t6(),p=D(Bi),g=D(Po),v=D(IT),y=D(dr),b=D(mM),C=D(ry),S=tr({breakpoint:"sm"}),E=ve("multiplecharacters")&&v!==null,T=ve("scroll-to-bottom-button"),I=ve("sharecontinue"),A=!Zy(),[_,j]=m.useState(0);NTe();const R=m.useRef(null),$=xTe(R);ATe(p.length,R),ITe(R);const[U]=Cwe({...f,disabled:!!f.error}),{backstageMessagesProps:se,highlightedMessagesProps:P,sentinelRef:k,sentinelClasses:N,backstageClasses:x,highlightedClasses:M,opacity:te,highlighted:Y,backstage:Q}=lwe(()=>$({behavior:"instant",delay:be.instance().config().scrollToBottomDelay}),R,E,_,p),ee=Pu(te,re=>re<.5?"none":"auto"),oe=()=>$({behavior:"smooth"}),{bottomRef:Ce,shouldShowScrollToBottomButton:fe}=PTe({chatRef:R,isEnabled:T,hasMessages:p.length>0}),ze=D(TT).get((g==null?void 0:g.id)??""),nt=D(sd);m.useEffect(()=>{g!=null&&g.id&&(OTe(g.id,p),MTe(()=>{q(()=>import("./ai-message-DEFgmSWe.js").then(re=>re.l),__vite__mapDeps([364,1,324,229,329,365,366,223,295,343,221,367,327,357,368]))}))},[g==null?void 0:g.id,p]),TTe(p,g==null?void 0:g.streamingState);const J=T6(Y),pe=(J==null?void 0:J.author)==="human"&&J.id===""||(g==null?void 0:g.streamingState)==="streaming",X=!!D(Sh),H=D(Oh),ae=pe&&!ze||X||H,Ee=ve("announce-loading"),L=m.useId(),{disableMultiturn:de}=be.instance().config(),Se=(We=(Me=be.instance().config().styleOverrides)==null?void 0:Me.width)==null?void 0:We.chat;kTe(p.length,pe);const ie=lo(),ge=fy(),{showShoppingCardInNewChat:He}=py(),Xe=!E&&!S&&ge,ct=a&&!(He&&!S),{crossPromotion:lt}=be.instance().config(),je=lt==null?void 0:lt.chatBanner,dt=D(Cs)==="dark"?je==null?void 0:je.dark:je==null?void 0:je.light,[Ut,Ft]=m.useState(!1),{isMediaViewerOpen:rn}=zi(),vn=ve("chat-refactor-max-width"),F=vn?I6():void 0,W=vn?"w-full":NA,ne=(g==null?void 0:g.streamingState)==="idle",_e=(re,he=!1,ye,Le=!1)=>re.map((qe,Ze)=>{const ot=new Date(qe.createdAt),St=Ze>0?re[Ze-1]:ye,Bn=St&&new Date(St.createdAt),yn=!Bn||!CT(ot,Bn),zr=I&&pCe(g!=null&&g.continuedAt?new Date(g.continuedAt):null,ot,Bn);return h.jsxs(m.Fragment,{children:[zr&&h.jsx(Vwe,{content:ce("chat.continuedConversationDisclaimer")}),yn&&!de&&h.jsx(zwe,{date:ot,className:F}),qe.author==="ai"?h.jsx(m.Suspense,{fallback:h.jsx(hO,{}),children:h.jsx(KTe,{message:qe,isStreamingComplete:ne,shouldAnimate:he,reactionsToDisable:d,isLastMessage:Le&&Ze===re.length-1})}):h.jsx(GTe,{message:qe,className:F})]},qe.id)});return h.jsx(O6,{children:h.jsxs("div",{className:G("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-chat-side-by-side",(g==null?void 0:g.id)&&QL(g.id)&&"t-custom-scrollbar",be.instance().config().wkWebViewScrollbarFix&&"wk-webview-scrollbar-fix",be.instance().config().showScrollbarOnHover&&"scrollbar-container",rn&&"invisible",e),ref:R,"data-testid":"chat-page",children:[!c&&h.jsx(U6,{}),f.hasNextPage&&h.jsx("div",{ref:U}),E&&h.jsx(Rwe,{animatingMessageId:ze,isStreamingMessage:pe,displayedCharacterId:v,setCharacterComponentHeight:j}),dt&&Ut&&h.jsxs("div",{className:"fixed bottom-6 end-6 flex w-40 flex-col items-center gap-1 rounded-3xl px-3 pb-2 pt-3 shadow-lg dark:bg-midnight-750",children:[h.jsx("img",{src:dt,alt:ce("crossSelling.chatBannerImageAlt"),className:"size-36 object-contain"}),h.jsx("p",{className:"mt-2 text-center text-foreground-750 text-xs",children:ce("crossSelling.chatBannerLabel")})]}),h.jsx(dl.Motion,{circular:!1,tabbable:!0,initial:A?"start":!1,animate:"end",variants:{start:rt,end:{...Ot,transition:{duration:.2,delay:.2}}},className:G(n,"grow",!vn&&(Uf("pageContainer")??"px-6"),W,Se),layout:"position",transition:xo,"data-content":"conversation","data-copy":"false",children:h.jsxs(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:[h.jsxs(xe.div,{className:G("relative",ie||!c?"pt-10":"pt-6",Q.length>0&&CO,ct&&x),variants:se.variants,initial:A?se.initial:!1,animate:se.animate,style:{opacity:p.length>0?te:0,pointerEvents:ee},children:[h.jsx("div",{className:G("absolute -z-10 w-full",N),ref:k}),_e(Q)]}),h.jsxs("div",{className:G(s&&M,"flex flex-col"),"data-testid":"highlighted-chats",children:[h.jsx(Tn,{mode:"wait",initial:!1,children:h.jsxs(h.Fragment,{children:[h.jsx(D6,{customLaunchGreeting:o,chatItemClasses:F}),Y.length>0&&h.jsxs(xe.div,{className:G("pb-6",CO),initial:P.initial,animate:P.animate,exit:P.exit,onAnimationStart:P.onAnimationStart,onAnimationComplete:()=>{Ft(!0)},children:[_e(Y,!!ze,Q[Q.length-1]??void 0,!0),h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:ae&&h.jsx("div",{className:F,children:h.jsxs(xe.div,{"aria-hidden":!0,className:G("relative size-7"),initial:"start",animate:"end",variants:{start:{...rt},end:{...Ot,transition:{delay:WTe}}},children:[Ee&&h.jsx(Vc,{id:L,timeout:3e3,msg:ce(y==="reasoning"?"chat.reasoning":"chat.loading"),type:"polite"}),h.jsx(hO,{})]})})}),h.jsx(xn,{children:nt&&h.jsx(Iwe,{className:F})}),h.jsx(xn,{children:C&&C.visible&&h.jsx(wwe,{className:F})})]},(Ne=Y[0])==null?void 0:Ne.createdAt)]})}),!u&&h.jsx(Jwe,{mostRecentMessageId:J==null?void 0:J.id,className:F}),b&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(qTe,{startIcon:(z=b.startIconProvider)==null?void 0:z.call(b),title:b.title,subTitle:b.subTitle,conversationId:b.conversationId,onClick:b.onClick,trackingArgs:b.trackingArgs,className:F})}),h.jsx("div",{ref:Ce,style:{height:0,overflow:"hidden"}}),h.jsx(gTe,{shouldShowScrollToBottomButton:fe,onClick:oe,bottomButtonClass:r})]})]})}),Xe&&h.jsx(M6,{customBottomDisclaimer:i})]})})}const iRe=Object.freeze(Object.defineProperty({__proto__:null,CHAT_WIDTH_CLASSES:NA,default:V6},Symbol.toStringTag,{value:"Module"}));function $6(t){var y,b;const{className:e,conversationContainerClassName:n="mb-[var(--composer-container-height)]",customLaunchGreeting:r,customBottomDisclaimer:o,disableStickyHeader:i=!1,enableBackstageClasses:s=!0,enableHighlightedClasses:a=!0}=t,c=ve("chat-refactor-max-width"),u=tr({breakpoint:"sm"}),d=lo(),f=!u,p=(b=(y=be.instance().config().styleOverrides)==null?void 0:y.width)==null?void 0:b.chat,g=c?I6():void 0,v=c?"w-full":NA;return h.jsx(O6,{children:h.jsxs("div",{className:bt("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-chat-side-by-side",be.instance().config().showScrollbarOnHover&&"scrollbar-container",e),"data-testid":"landing-page",children:[!i&&h.jsx(U6,{}),h.jsx(dl.Motion,{circular:!1,tabbable:!0,initial:"start",animate:"end",variants:{start:rt,end:{...Ot,transition:{duration:.2,delay:.2}}},className:bt(n,"grow",!c&&(Uf("pageContainer")??"px-6"),v,p),layout:"position",transition:xo,children:h.jsxs(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:[h.jsx("div",{className:bt("relative",d||!i?"pt-10":"pt-6",s&&E6)}),h.jsx("div",{className:bt("flex",a&&w6),children:h.jsx(Tn,{mode:"wait",initial:!1,children:h.jsx(D6,{customLaunchGreeting:r,chatItemClasses:g})})})]})}),f&&h.jsx(M6,{customBottomDisclaimer:o})]})})}const YTe=_t("/")({component:$6});_t("/w/landing")({component:$6});const QTe=FB("/chats/$conversationId");function JTe(t){const{disableStickyHeader:e,reactionsToDisable:n}=t,{conversationId:r}=QTe.useParams(),o=Te(mt),i=ve("conversation-id-sync");return m.useEffect(()=>{i&&o(r)},[r,o,i]),h.jsx(V6,{disableStickyHeader:e,reactionsToDisable:n})}const XTe=_t("/chats/$conversationId")({component:JTe}),ZTe=_t("/topic-selection")(),eIe=_t("/login")(),tIe=_t("/gaming")(),nIe=_t("/discover")(),rIe=_t("/daily")(),oIe=_t("/agents")(),iIe=_t("/referrals/")(),sIe=_t("/portrait/")(),aIe=_t("/labs_/")(),cIe=_t("/subscription/start")(),lIe=_t("/subscription/manage")(),uIe=_t("/shares/$conversationId")(),dIe=_t("/referrals/rules")(),hIe=_t("/pro/subscribe")(),fIe=_t("/portrait/talk")(),pIe=_t("/pages/$pageId")(),mIe=_t("/memory/narrative")(),gIe=_t("/campaigns/$campaignId")(),vIe=_t("/shares/podcasts/$shareId")(),yIe=_t("/shares/pages/$shareId")(),bIe=_t("/pro/redeem/$redeemCode")(),CIe=_t("/pro/ewallet/return")(),SIe=_t("/podcasts/$podcastType/$podcastId")(),EIe=_t("/labs_/experiments/$experimentAlias")(),wIe=_t("/chats_/$conversationId/talk")(),TIe=_t("/labs_/experiments/3d-generations/")(),IIe=_t("/labs_/experiments/3d-generations/my-creations")(),_Ie=_t("/labs_/experiments/3d-generations/shares/$shareId")(),AIe=ZTe.update({id:"/topic-selection",path:"/topic-selection",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./topic-selection.lazy-CUtes3jB.js"),__vite__mapDeps([369,1])).then(t=>t.Route)),kIe=eIe.update({id:"/login",path:"/login",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./login.lazy-Bif1qmgH.js"),__vite__mapDeps([370,1,282])).then(t=>t.Route)),xIe=tIe.update({id:"/gaming",path:"/gaming",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./gaming.lazy-DKkn83_U.js"),__vite__mapDeps([371,1,233,234])).then(t=>t.Route)),RIe=nIe.update({id:"/discover",path:"/discover",getParentRoute:()=>Pt}).lazy(()=>q(()=>Promise.resolve().then(()=>tAe),void 0).then(t=>t.Route)),PIe=rIe.update({id:"/daily",path:"/daily",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./daily.lazy-DmOfeLwI.js"),__vite__mapDeps([372,1,373,374,375,341,376,221,377,284,367,327,326])).then(t=>t.Route)),NIe=oIe.update({id:"/agents",path:"/agents",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./agents.lazy-BDIjjSDh.js"),__vite__mapDeps([378,1])).then(t=>t.Route)),OIe=ewe.update({id:"/",path:"/",getParentRoute:()=>Pt}),MIe=iIe.update({id:"/referrals/",path:"/referrals/",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./index.lazy-COPaUBK7.js"),__vite__mapDeps([379,1,307,242,306,311,380,381,382,383,384,385])).then(t=>t.Route)),LIe=sIe.update({id:"/portrait/",path:"/portrait/",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./index.lazy-BobqLvJC.js"),__vite__mapDeps([386,1])).then(t=>t.Route)),DIe=aIe.update({id:"/labs_/",path:"/labs/",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./index.lazy-CS4xUp2J.js"),__vite__mapDeps([387,1,388,389,390,391,392,393,394])).then(t=>t.Route)),jIe=cIe.update({id:"/subscription/start",path:"/subscription/start",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./subscription.start.lazy-CB0o-j8F.js"),__vite__mapDeps([395,1])).then(t=>t.Route)),UIe=lIe.update({id:"/subscription/manage",path:"/subscription/manage",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./subscription.manage.lazy-fAU5ixGL.js"),__vite__mapDeps([396,1,321,330])).then(t=>t.Route)),FIe=uIe.update({id:"/shares/$conversationId",path:"/shares/$conversationId",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./shares._conversationId.lazy-C2QEoIQ3.js"),__vite__mapDeps([397,1])).then(t=>t.Route)),BIe=dIe.update({id:"/referrals/rules",path:"/referrals/rules",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./rules.lazy-DSdVju-u.js"),__vite__mapDeps([398,1,242,311,381,312,399])).then(t=>t.Route)),HIe=hIe.update({id:"/pro/subscribe",path:"/pro/subscribe",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./pro.subscribe.lazy-CZOZLVXC.js"),__vite__mapDeps([400,1,243,244,245,231,401,402,403,404,405,406,301,238,298,407,408,303,409,368,410,320,411,412,413,241,242,414,415,416,417,418,233,234,419,420])).then(t=>t.Route)),zIe=fIe.update({id:"/portrait/talk",path:"/portrait/talk",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./talk.lazy-DoDQXrUb.js"),__vite__mapDeps([421,1])).then(t=>t.Route)),VIe=pIe.update({id:"/pages/$pageId",path:"/pages/$pageId",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./pages._pageId.lazy-DmI7ZzAm.js"),__vite__mapDeps([422,1,423,424,425,426,427,428,429,365,430,431,279,363,432,329,218,433,434,220,221])).then(t=>t.Route)),$Ie=mIe.update({id:"/memory/narrative",path:"/memory/narrative",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./memory.narrative.lazy-yLVhutc4.js"),__vite__mapDeps([435,1,297])).then(t=>t.Route)),GIe=gIe.update({id:"/campaigns/$campaignId",path:"/campaigns/$campaignId",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./campaigns._campaignId.lazy-CBKVVI7n.js"),__vite__mapDeps([436,1,289])).then(t=>t.Route)),qIe=YTe.update({id:"/w/landing",path:"/w/landing",getParentRoute:()=>Pt}),KIe=XTe.update({id:"/chats/$conversationId",path:"/chats/$conversationId",getParentRoute:()=>Pt}),WIe=vIe.update({id:"/shares/podcasts/$shareId",path:"/shares/podcasts/$shareId",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./shares.podcasts._shareId.lazy-DE_g4UE5.js"),__vite__mapDeps([437,1,367,327,345,376,221,377])).then(t=>t.Route)),YIe=yIe.update({id:"/shares/pages/$shareId",path:"/shares/pages/$shareId",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./shares.pages._shareId.lazy-ZZeYgKCO.js"),__vite__mapDeps([438,1,434,221,423,424,425,426,427,428,429,365,430,431,279,363,432,329,218,433,220,439])).then(t=>t.Route)),QIe=bIe.update({id:"/pro/redeem/$redeemCode",path:"/pro/redeem/$redeemCode",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./pro.redeem._redeemCode.lazy-C0b5paBi.js"),__vite__mapDeps([440,1])).then(t=>t.Route)),JIe=CIe.update({id:"/pro/ewallet/return",path:"/pro/ewallet/return",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./pro.ewallet.return.lazy-kQP2gzhn.js"),__vite__mapDeps([441,1,402])).then(t=>t.Route)),XIe=SIe.update({id:"/podcasts/$podcastType/$podcastId",path:"/podcasts/$podcastType/$podcastId",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./podcasts._podcastType._podcastId.lazy-B59UoFG3.js"),__vite__mapDeps([442,1,373,374,375,341,376,221,377,284,367,327,326])).then(t=>t.Route)),ZIe=EIe.update({id:"/labs_/experiments/$experimentAlias",path:"/labs/experiments/$experimentAlias",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./experiments._experimentAlias.lazy-Ds5ZY3RN.js").then(t=>t.e),__vite__mapDeps([443,1,389,388,390,391,392,393,286,287])).then(t=>t.Route)),e_e=wIe.update({id:"/chats_/$conversationId/talk",path:"/chats/$conversationId/talk",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./chats_._conversationId.talk.lazy-Bozin0Y3.js"),__vite__mapDeps([444,1,445,446,447,296])).then(t=>t.Route)),t_e=TIe.update({id:"/labs_/experiments/3d-generations/",path:"/labs/experiments/3d-generations/",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./my-creations.lazy-PeuyTF4N.js").then(t=>t.i),__vite__mapDeps([448,1,388,320,277,220,222,234,374,375,341,449])).then(t=>t.Route)),n_e=IIe.update({id:"/labs_/experiments/3d-generations/my-creations",path:"/labs/experiments/3d-generations/my-creations",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./my-creations.lazy-PeuyTF4N.js").then(t=>t.m),__vite__mapDeps([448,1,388,320,277,220,222,234,374,375,341,449])).then(t=>t.Route)),r_e=_Ie.update({id:"/labs_/experiments/3d-generations/shares/$shareId",path:"/labs/experiments/3d-generations/shares/$shareId",getParentRoute:()=>Pt}).lazy(()=>q(()=>import("./shares._shareId.lazy-C1Z5og_M.js"),__vite__mapDeps([450,1])).then(t=>t.Route)),o_e={IndexRoute:OIe,AgentsLazyRoute:NIe,DailyLazyRoute:PIe,DiscoverLazyRoute:RIe,GamingLazyRoute:xIe,LoginLazyRoute:kIe,TopicSelectionLazyRoute:AIe,ChatsConversationIdRoute:KIe,WLandingRoute:qIe,CampaignsCampaignIdLazyRoute:GIe,MemoryNarrativeLazyRoute:$Ie,PagesPageIdLazyRoute:VIe,PortraitTalkLazyRoute:zIe,ProSubscribeLazyRoute:HIe,ReferralsRulesLazyRoute:BIe,SharesConversationIdLazyRoute:FIe,SubscriptionManageLazyRoute:UIe,SubscriptionStartLazyRoute:jIe,LabsIndexLazyRoute:DIe,PortraitIndexLazyRoute:LIe,ReferralsIndexLazyRoute:MIe,ChatsConversationIdTalkLazyRoute:e_e,LabsExperimentsExperimentAliasLazyRoute:ZIe,PodcastsPodcastTypePodcastIdLazyRoute:XIe,ProEwalletReturnLazyRoute:JIe,ProRedeemRedeemCodeLazyRoute:QIe,SharesPagesShareIdLazyRoute:YIe,SharesPodcastsShareIdLazyRoute:WIe,LabsExperiments3dGenerationsMyCreationsLazyRoute:n_e,LabsExperiments3dGenerationsIndexLazyRoute:t_e,LabsExperiments3dGenerationsSharesShareIdLazyRoute:r_e},i_e=Pt._addFileChildren(o_e)._addFileTypes(),Tp=BB({routeTree:i_e});function s_e(){return h.jsx(HB,{router:Tp})}(function(){const t="onabort onactivate onactivateinvisible onafterprint onafterupdate onanimationcancel onanimationend onanimationiteration onanimationstart onariarequest onauxclick onbeforeactivate onbeforecopy onbeforecut onbeforedeactivate onbeforeeditfocus onbeforepaste onbeforeprint onbeforeunload onbegin onblur onbounce oncancel oncanplay oncanplaythrough oncellchange onchange onclick onclose oncommand oncontextmenu oncontrolselect oncopy oncuechange oncut ondataavailable ondatasetchanged ondatasetcomplete ondblclick ondeactivate ondrag ondragdrop ondragend ondragenter ondragexit ondragleave ondragover ondragstart ondrop ondurationchange onemptied onend onended onerror onerrorupdate onexit onfilterchange onfinish onfocus onfocusin onfocusout onformdata onfullscreenchange onfullscreenerror ongotpointercapture onhelp oninput oninvalid onkeydown onkeypress onkeyup onlayoutcomplete onload onloadeddata onloadedmetadata onloadend onloadstart onlosecapture onlostpointercapture onmediacomplete onmediaerror onmessage onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onmove onmoveend onmovestart onmozfullscreenchange onmozfullscreenerror onmscontentzoom onmsgesturechange onmsgesturedoubletap onmsgestureend onmsgesturehold onmsgesturestart onmsgesturetap onmsgotpointercapture onmsinertiastart onmslostpointercapture onmsmanipulationstatechanged onmspointercancel onmspointerdown onmspointerenter onmspointerleave onmspointermove onmspointerout onmspointerover onmspointerup onoffline ononline onoutofsync onoverscroll onpaste onpause onplay onplaying onpointercancel onpointerdown onpointerenter onpointerleave onpointermove onpointerout onpointerover onpointerrawupdate onpointerup onprogress onpropertychange onratechange onreadystatechange onrepeat onreset onresize onresizeend onresizestart onresume onreverse onrowdelete onrowenter onrowexit onrowinserted onscroll onscrollend onsearch onseek onseeked onseeking onselect onselectionchange onselectstart onshow onstalled onstart onstop onstorage onsubmit onsuspend onsynchrestored ontimeerror ontimeupdate ontoggle ontrackchange ontransitioncancel ontransitionend ontransitionrun ontransitionstart onunload onurlflip onvolumechange onwaiting onwebkitanimationend onwebkitanimationiteration onwebkitanimationstart onwebkitfullscreenchange onwebkitfullscreenerror onwebkittransitionend onwheel".split(" ");function e(){if(typeof window<"u"){const f=[];for(const p in HTMLElement.prototype)p.slice(0,2)==="on"&&f.push(p);return f}return t}const n=typeof window<"u",r=()=>{throw new TypeError("undefined conversion")},o=()=>null,{toLowerCase:i,toUpperCase:s}=String.prototype;function a(){throw new TypeError("Illegal constructor")}function c(){throw new TypeError("Illegal constructor")}const{l:u}=function(){function f(J){let pe=se.get(J);return pe===void 0&&(pe=w(null),se.set(J,pe)),pe}function p(J){const pe=A(J);if(pe==null||A(pe)!==_)throw Error();for(const X of I(pe))E(J,X,{value:J[X]});return J}function g(J,pe){T(J.prototype),delete J.name,E(J,"name",{value:pe})}function v(J){return pe=>pe instanceof J&&se.has(pe)}function y(J,pe){function X(ae,Ee){const L=pe[Ee]||(J=="default"?o:r),de=T(new ae(U,J));return T({[Ee](Se,...ie){if(Se=L(""+Se,...ie),Se==null){if(J=="default")return Se;Se=""}return Se=""+Se,ie=T(w(de)),f(ie).v=Se,ie}}[Ee])}const H=w(a.prototype);for(const ae of I(ze))H[ae]=X(ze[ae],ae);return E(H,"name",{value:J,writable:!1,configurable:!1,enumerable:!0}),T(H)}function b(J,pe,X,H="",ae=""){if(J=s.apply(String(J)),(H=ae||H)||(H="http://www.w3.org/1999/xhtml"),H=j.apply(fe,[H])?fe[H]:null){if(j.apply(H,[J])&&H[J]&&j.apply(H[J][pe],[X])&&H[J][pe][X])return H[J][pe][X];if(j.apply(H,["*"])&&j.apply(H["*"][pe],[X])&&H["*"][pe][X])return H["*"][pe][X]}}function C(){return x}const{assign:S,create:w,defineProperty:E,freeze:T,getOwnPropertyNames:I,getPrototypeOf:A,prototype:_}=Object,{hasOwnProperty:j}=_,{forEach:R,push:$}=Array.prototype,U=Symbol(),se=p(new WeakMap),P=p([]),k=p([]);let N=!0,x=null,M=!1;class te{constructor(pe,X){if(pe!==U)throw Error("cannot call the constructor");E(this,"policyName",{value:X,enumerable:!0})}toString(){return f(this).v}valueOf(){return f(this).v}}class Y extends te{}g(Y,"TrustedScriptURL");class Q extends te{}g(Q,"TrustedHTML");class ee extends te{}g(ee,"TrustedScript"),g(te,"TrustedType");const oe=T(w(new Q(U,"")));f(oe).v="";const Ce=T(w(new ee(U,"")));f(Ce).v="";const fe={"http://www.w3.org/1999/xhtml":{EMBED:{attributes:{src:Y.name}},IFRAME:{attributes:{srcdoc:Q.name}},OBJECT:{attributes:{data:Y.name,codebase:Y.name}},SCRIPT:{attributes:{src:Y.name,text:ee.name},properties:{innerText:ee.name,textContent:ee.name,text:ee.name}},"*":{attributes:{},properties:{innerHTML:Q.name,outerHTML:Q.name}}},"http://www.w3.org/2000/svg":{"*":{attributes:{},properties:{}}}};var Pe={codebase:"codeBase",formaction:"formAction"};!n||"srcdoc"in HTMLIFrameElement.prototype||delete fe["http://www.w3.org/1999/xhtml"].IFRAME.attributes.srcdoc;for(const J of Object.keys(fe["http://www.w3.org/1999/xhtml"])){fe["http://www.w3.org/1999/xhtml"][J].properties||(fe["http://www.w3.org/1999/xhtml"][J].properties={});for(const pe of Object.keys(fe["http://www.w3.org/1999/xhtml"][J].attributes))fe["http://www.w3.org/1999/xhtml"][J].properties[Pe[pe]?Pe[pe]:pe]=fe["http://www.w3.org/1999/xhtml"][J].attributes[pe]}for(const J of e())fe["http://www.w3.org/1999/xhtml"]["*"].attributes[J]="TrustedScript",fe["http://www.w3.org/2000/svg"]["*"].attributes[J]="TrustedScript";const ze={createHTML:Q,createScriptURL:Y,createScript:ee},nt=ze.hasOwnProperty;return Pe=w(c.prototype),S(Pe,{createPolicy:function(J,pe){if(!J.match(/^[-#a-zA-Z0-9=_/@.%]+$/g))throw new TypeError("Policy "+J+" contains invalid characters.");if(M&&k.indexOf(J)===-1&&k.indexOf("*")===-1)throw new TypeError("Policy "+J+" disallowed.");if(J==="default"&&x)throw new TypeError("Policy "+J+" already exists.");if(M&&!N&&P.indexOf(J)!==-1)throw new TypeError("Policy "+J+" exists.");P.push(J);const X=w(null);if(pe&&typeof pe=="object")for(const H of I(pe))nt.call(ze,H)&&(X[H]=pe[H]);else console.warn("trustedTypes.createPolicy "+J+" was given an empty policy");return T(X),pe=y(J,X),J==="default"&&(x=pe),pe},h:v(Q),j:v(Y),i:v(ee),c:function(J,pe,X="",H=""){return pe=i.apply(String(pe)),b(J,"attributes",pe,X,H)||null},f:function(J,pe,X=""){return b(J,"properties",String(pe),X)||null},g:function(J=""){if(!J)try{J=document.documentElement.namespaceURI}catch{J="http://www.w3.org/1999/xhtml"}return(J=fe[J])?JSON.parse(JSON.stringify(J)):{}},a:oe,b:Ce,o:x,TrustedHTML:Q,TrustedScriptURL:Y,TrustedScript:ee}),E(Pe,"defaultPolicy",{get:C,set:()=>{}}),{l:T(Pe),w:function(J,pe){M=!0,k.length=0,R.call(J,X=>{$.call(k,""+X)}),N=pe,P.length=0},m:function(){M=!1},s:C,u:function(){x=null,P.splice(P.indexOf("default"),1)}}}();if(typeof window<"u"&&(window.TrustedTypes&&typeof window.trustedTypes>"u"&&(window.trustedTypes=Object.freeze(window.TrustedTypes)),typeof window.trustedTypes>"u")){var d=Object.create(c.prototype);Object.assign(d,{isHTML:u.h,isScriptURL:u.j,isScript:u.i,createPolicy:u.createPolicy,getAttributeType:u.c,getPropertyType:u.f,getTypeMapping:u.g,emptyHTML:u.a,emptyScript:u.b,_isPolyfill_:!0}),Object.defineProperty(d,"defaultPolicy",Object.getOwnPropertyDescriptor(u,"defaultPolicy")||{}),window.trustedTypes=Object.freeze(d),window.TrustedHTML=u.TrustedHTML,window.TrustedScriptURL=u.TrustedScriptURL,window.TrustedScript=u.TrustedScript,window.TrustedTypePolicy=a,window.TrustedTypePolicyFactory=c}}).call(void 0);/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:G6,setPrototypeOf:SO,isFrozen:a_e,getPrototypeOf:c_e,getOwnPropertyDescriptor:l_e}=Object;let{freeze:_r,seal:Ro,create:q6}=Object,{apply:jw,construct:Uw}=typeof Reflect<"u"&&Reflect;_r||(_r=function(e){return e});Ro||(Ro=function(e){return e});jw||(jw=function(e,n,r){return e.apply(n,r)});Uw||(Uw=function(e,n){return new e(...n)});const _m=Ar(Array.prototype.forEach),u_e=Ar(Array.prototype.lastIndexOf),EO=Ar(Array.prototype.pop),mh=Ar(Array.prototype.push),d_e=Ar(Array.prototype.splice),Xm=Ar(String.prototype.toLowerCase),nE=Ar(String.prototype.toString),wO=Ar(String.prototype.match),gh=Ar(String.prototype.replace),h_e=Ar(String.prototype.indexOf),f_e=Ar(String.prototype.trim),jo=Ar(Object.prototype.hasOwnProperty),yr=Ar(RegExp.prototype.test),vh=p_e(TypeError);function Ar(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return jw(t,e,r)}}function p_e(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Uw(t,n)}}function Ct(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xm;SO&&SO(t,null);let r=e.length;for(;r--;){let o=e[r];if(typeof o=="string"){const i=n(o);i!==o&&(a_e(e)||(e[r]=i),o=i)}t[o]=!0}return t}function m_e(t){for(let e=0;e<t.length;e++)jo(t,e)||(t[e]=null);return t}function Ba(t){const e=q6(null);for(const[n,r]of G6(t))jo(t,n)&&(Array.isArray(r)?e[n]=m_e(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Ba(r):e[n]=r);return e}function yh(t,e){for(;t!==null;){const r=l_e(t,e);if(r){if(r.get)return Ar(r.get);if(typeof r.value=="function")return Ar(r.value)}t=c_e(t)}function n(){return null}return n}const TO=_r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rE=_r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),oE=_r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),g_e=_r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),iE=_r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),v_e=_r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),IO=_r(["#text"]),_O=_r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),sE=_r(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),AO=_r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Am=_r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),y_e=Ro(/\{\{[\w\W]*|[\w\W]*\}\}/gm),b_e=Ro(/<%[\w\W]*|[\w\W]*%>/gm),C_e=Ro(/\$\{[\w\W]*/gm),S_e=Ro(/^data-[\-\w.\u00B7-\uFFFF]+$/),E_e=Ro(/^aria-[\-\w]+$/),K6=Ro(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),w_e=Ro(/^(?:\w+script|data):/i),T_e=Ro(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W6=Ro(/^html$/i),I_e=Ro(/^[a-z][.\w]*(-[.\w]+)+$/i);var kO=Object.freeze({__proto__:null,ARIA_ATTR:E_e,ATTR_WHITESPACE:T_e,CUSTOM_ELEMENT:I_e,DATA_ATTR:S_e,DOCTYPE_NAME:W6,ERB_EXPR:b_e,IS_ALLOWED_URI:K6,IS_SCRIPT_OR_DATA:w_e,MUSTACHE_EXPR:y_e,TMPLIT_EXPR:C_e});const bh={element:1,text:3,progressingInstruction:7,comment:8,document:9},__e=function(){return typeof window>"u"?null:window},A_e=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(r=n.getAttribute(o));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},xO=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Y6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:__e();const e=Je=>Y6(Je);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==bh.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,o=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:a,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,v=c.prototype,y=yh(v,"cloneNode"),b=yh(v,"remove"),C=yh(v,"nextSibling"),S=yh(v,"childNodes"),w=yh(v,"parentNode");if(typeof s=="function"){const Je=n.createElement("template");Je.content&&Je.content.ownerDocument&&(n=Je.content.ownerDocument)}let E,T="";const{implementation:I,createNodeIterator:A,createDocumentFragment:_,getElementsByTagName:j}=n,{importNode:R}=r;let $=xO();e.isSupported=typeof G6=="function"&&typeof w=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:U,ERB_EXPR:se,TMPLIT_EXPR:P,DATA_ATTR:k,ARIA_ATTR:N,IS_SCRIPT_OR_DATA:x,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:te}=kO;let{IS_ALLOWED_URI:Y}=kO,Q=null;const ee=Ct({},[...TO,...rE,...oE,...iE,...IO]);let oe=null;const Ce=Ct({},[..._O,...sE,...AO,...Am]);let fe=Object.seal(q6(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Pe=null,ze=null,nt=!0,J=!0,pe=!1,X=!0,H=!1,ae=!0,Ee=!1,L=!1,de=!1,Se=!1,ie=!1,ge=!1,He=!0,Xe=!1;const ct="user-content-";let lt=!0,je=!1,Qe={},dt=null;const Ut=Ct({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ft=null;const rn=Ct({},["audio","video","img","source","image","track"]);let vn=null;const F=Ct({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),W="http://www.w3.org/1998/Math/MathML",ne="http://www.w3.org/2000/svg",_e="http://www.w3.org/1999/xhtml";let Me=_e,We=!1,Ne=null;const z=Ct({},[W,ne,_e],nE);let re=Ct({},["mi","mo","mn","ms","mtext"]),he=Ct({},["annotation-xml"]);const ye=Ct({},["title","style","font","a","script"]);let Le=null;const qe=["application/xhtml+xml","text/html"],Ze="text/html";let ot=null,St=null;const Bn=n.createElement("form"),yn=function(B){return B instanceof RegExp||B instanceof Function},zr=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(St&&St===B)){if((!B||typeof B!="object")&&(B={}),B=Ba(B),Le=qe.indexOf(B.PARSER_MEDIA_TYPE)===-1?Ze:B.PARSER_MEDIA_TYPE,ot=Le==="application/xhtml+xml"?nE:Xm,Q=jo(B,"ALLOWED_TAGS")?Ct({},B.ALLOWED_TAGS,ot):ee,oe=jo(B,"ALLOWED_ATTR")?Ct({},B.ALLOWED_ATTR,ot):Ce,Ne=jo(B,"ALLOWED_NAMESPACES")?Ct({},B.ALLOWED_NAMESPACES,nE):z,vn=jo(B,"ADD_URI_SAFE_ATTR")?Ct(Ba(F),B.ADD_URI_SAFE_ATTR,ot):F,Ft=jo(B,"ADD_DATA_URI_TAGS")?Ct(Ba(rn),B.ADD_DATA_URI_TAGS,ot):rn,dt=jo(B,"FORBID_CONTENTS")?Ct({},B.FORBID_CONTENTS,ot):Ut,Pe=jo(B,"FORBID_TAGS")?Ct({},B.FORBID_TAGS,ot):{},ze=jo(B,"FORBID_ATTR")?Ct({},B.FORBID_ATTR,ot):{},Qe=jo(B,"USE_PROFILES")?B.USE_PROFILES:!1,nt=B.ALLOW_ARIA_ATTR!==!1,J=B.ALLOW_DATA_ATTR!==!1,pe=B.ALLOW_UNKNOWN_PROTOCOLS||!1,X=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,H=B.SAFE_FOR_TEMPLATES||!1,ae=B.SAFE_FOR_XML!==!1,Ee=B.WHOLE_DOCUMENT||!1,Se=B.RETURN_DOM||!1,ie=B.RETURN_DOM_FRAGMENT||!1,ge=B.RETURN_TRUSTED_TYPE||!1,de=B.FORCE_BODY||!1,He=B.SANITIZE_DOM!==!1,Xe=B.SANITIZE_NAMED_PROPS||!1,lt=B.KEEP_CONTENT!==!1,je=B.IN_PLACE||!1,Y=B.ALLOWED_URI_REGEXP||K6,Me=B.NAMESPACE||_e,re=B.MATHML_TEXT_INTEGRATION_POINTS||re,he=B.HTML_INTEGRATION_POINTS||he,fe=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&yn(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(fe.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&yn(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(fe.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(fe.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),H&&(J=!1),ie&&(Se=!0),Qe&&(Q=Ct({},IO),oe=[],Qe.html===!0&&(Ct(Q,TO),Ct(oe,_O)),Qe.svg===!0&&(Ct(Q,rE),Ct(oe,sE),Ct(oe,Am)),Qe.svgFilters===!0&&(Ct(Q,oE),Ct(oe,sE),Ct(oe,Am)),Qe.mathMl===!0&&(Ct(Q,iE),Ct(oe,AO),Ct(oe,Am))),B.ADD_TAGS&&(Q===ee&&(Q=Ba(Q)),Ct(Q,B.ADD_TAGS,ot)),B.ADD_ATTR&&(oe===Ce&&(oe=Ba(oe)),Ct(oe,B.ADD_ATTR,ot)),B.ADD_URI_SAFE_ATTR&&Ct(vn,B.ADD_URI_SAFE_ATTR,ot),B.FORBID_CONTENTS&&(dt===Ut&&(dt=Ba(dt)),Ct(dt,B.FORBID_CONTENTS,ot)),lt&&(Q["#text"]=!0),Ee&&Ct(Q,["html","head","body"]),Q.table&&(Ct(Q,["tbody"]),delete Pe.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw vh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=B.TRUSTED_TYPES_POLICY,T=E.createHTML("")}else E===void 0&&(E=A_e(g,o)),E!==null&&typeof T=="string"&&(T=E.createHTML(""));_r&&_r(B),St=B}},sr=Ct({},[...rE,...oE,...g_e]),Qn=Ct({},[...iE,...v_e]),Hn=function(B){let Re=w(B);(!Re||!Re.tagName)&&(Re={namespaceURI:Me,tagName:"template"});const $e=Xm(B.tagName),tn=Xm(Re.tagName);return Ne[B.namespaceURI]?B.namespaceURI===ne?Re.namespaceURI===_e?$e==="svg":Re.namespaceURI===W?$e==="svg"&&(tn==="annotation-xml"||re[tn]):!!sr[$e]:B.namespaceURI===W?Re.namespaceURI===_e?$e==="math":Re.namespaceURI===ne?$e==="math"&&he[tn]:!!Qn[$e]:B.namespaceURI===_e?Re.namespaceURI===ne&&!he[tn]||Re.namespaceURI===W&&!re[tn]?!1:!Qn[$e]&&(ye[$e]||!sr[$e]):!!(Le==="application/xhtml+xml"&&Ne[B.namespaceURI]):!1},Vr=function(B){mh(e.removed,{element:B});try{w(B).removeChild(B)}catch{b(B)}},pr=function(B,Re){try{mh(e.removed,{attribute:Re.getAttributeNode(B),from:Re})}catch{mh(e.removed,{attribute:null,from:Re})}if(Re.removeAttribute(B),B==="is")if(Se||ie)try{Vr(Re)}catch{}else try{Re.setAttribute(B,"")}catch{}},Pd=function(B){let Re=null,$e=null;if(de)B="<remove></remove>"+B;else{const Rn=wO(B,/^[\r\n\t ]+/);$e=Rn&&Rn[0]}Le==="application/xhtml+xml"&&Me===_e&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const tn=E?E.createHTML(B):B;if(Me===_e)try{Re=new p().parseFromString(tn,Le)}catch{}if(!Re||!Re.documentElement){Re=I.createDocument(Me,"template",null);try{Re.documentElement.innerHTML=We?T:tn}catch{}}const nn=Re.body||Re.documentElement;return B&&$e&&nn.insertBefore(n.createTextNode($e),nn.childNodes[0]||null),Me===_e?j.call(Re,Ee?"html":"body")[0]:Ee?Re.documentElement:nn},Nd=function(B){return A.call(B.ownerDocument||B,B,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ws=function(B){return B instanceof f&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof d)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Ts=function(B){return typeof a=="function"&&B instanceof a};function mr(Je,B,Re){_m(Je,$e=>{$e.call(e,B,Re,St)})}const Ip=function(B){let Re=null;if(mr($.beforeSanitizeElements,B,null),ws(B))return Vr(B),!0;const $e=ot(B.nodeName);if(mr($.uponSanitizeElement,B,{tagName:$e,allowedTags:Q}),B.hasChildNodes()&&!Ts(B.firstElementChild)&&yr(/<[/\w]/g,B.innerHTML)&&yr(/<[/\w]/g,B.textContent)||B.nodeType===bh.progressingInstruction||ae&&B.nodeType===bh.comment&&yr(/<[/\w]/g,B.data))return Vr(B),!0;if(!Q[$e]||Pe[$e]){if(!Pe[$e]&&_p($e)&&(fe.tagNameCheck instanceof RegExp&&yr(fe.tagNameCheck,$e)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck($e)))return!1;if(lt&&!dt[$e]){const tn=w(B)||B.parentNode,nn=S(B)||B.childNodes;if(nn&&tn){const Rn=nn.length;for(let ar=Rn-1;ar>=0;--ar){const ho=y(nn[ar],!0);ho.__removalCount=(B.__removalCount||0)+1,tn.insertBefore(ho,C(B))}}}return Vr(B),!0}return B instanceof c&&!Hn(B)||($e==="noscript"||$e==="noembed"||$e==="noframes")&&yr(/<\/no(script|embed|frames)/i,B.innerHTML)?(Vr(B),!0):(H&&B.nodeType===bh.text&&(Re=B.textContent,_m([U,se,P],tn=>{Re=gh(Re,tn," ")}),B.textContent!==Re&&(mh(e.removed,{element:B.cloneNode()}),B.textContent=Re)),mr($.afterSanitizeElements,B,null),!1)},Od=function(B,Re,$e){if(He&&(Re==="id"||Re==="name")&&($e in n||$e in Bn))return!1;if(!(J&&!ze[Re]&&yr(k,Re))){if(!(nt&&yr(N,Re))){if(!oe[Re]||ze[Re]){if(!(_p(B)&&(fe.tagNameCheck instanceof RegExp&&yr(fe.tagNameCheck,B)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck(B))&&(fe.attributeNameCheck instanceof RegExp&&yr(fe.attributeNameCheck,Re)||fe.attributeNameCheck instanceof Function&&fe.attributeNameCheck(Re))||Re==="is"&&fe.allowCustomizedBuiltInElements&&(fe.tagNameCheck instanceof RegExp&&yr(fe.tagNameCheck,$e)||fe.tagNameCheck instanceof Function&&fe.tagNameCheck($e))))return!1}else if(!vn[Re]){if(!yr(Y,gh($e,M,""))){if(!((Re==="src"||Re==="xlink:href"||Re==="href")&&B!=="script"&&h_e($e,"data:")===0&&Ft[B])){if(!(pe&&!yr(x,gh($e,M,"")))){if($e)return!1}}}}}}return!0},_p=function(B){return B!=="annotation-xml"&&wO(B,te)},Is=function(B){mr($.beforeSanitizeAttributes,B,null);const{attributes:Re}=B;if(!Re||ws(B))return;const $e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:oe,forceKeepAttr:void 0};let tn=Re.length;for(;tn--;){const nn=Re[tn],{name:Rn,namespaceURI:ar,value:ho}=nn,Ea=ot(Rn);let Jn=Rn==="value"?ho:f_e(ho);if($e.attrName=Ea,$e.attrValue=Jn,$e.keepAttr=!0,$e.forceKeepAttr=void 0,mr($.uponSanitizeAttribute,B,$e),Jn=$e.attrValue,Xe&&(Ea==="id"||Ea==="name")&&(pr(Rn,B),Jn=ct+Jn),ae&&yr(/((--!?|])>)|<\/(style|title)/i,Jn)){pr(Rn,B);continue}if($e.forceKeepAttr||(pr(Rn,B),!$e.keepAttr))continue;if(!X&&yr(/\/>/i,Jn)){pr(Rn,B);continue}H&&_m([U,se,P],Ld=>{Jn=gh(Jn,Ld," ")});const Ap=ot(B.nodeName);if(Od(Ap,Ea,Jn)){if(E&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!ar)switch(g.getAttributeType(Ap,Ea)){case"TrustedHTML":{Jn=E.createHTML(Jn);break}case"TrustedScriptURL":{Jn=E.createScriptURL(Jn);break}}try{ar?B.setAttributeNS(ar,Rn,Jn):B.setAttribute(Rn,Jn),ws(B)?Vr(B):EO(e.removed)}catch{}}}mr($.afterSanitizeAttributes,B,null)},Md=function Je(B){let Re=null;const $e=Nd(B);for(mr($.beforeSanitizeShadowDOM,B,null);Re=$e.nextNode();)mr($.uponSanitizeShadowNode,Re,null),Ip(Re),Is(Re),Re.content instanceof i&&Je(Re.content);mr($.afterSanitizeShadowDOM,B,null)};return e.sanitize=function(Je){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=null,$e=null,tn=null,nn=null;if(We=!Je,We&&(Je="<!-->"),typeof Je!="string"&&!Ts(Je))if(typeof Je.toString=="function"){if(Je=Je.toString(),typeof Je!="string")throw vh("dirty is not a string, aborting")}else throw vh("toString is not a function");if(!e.isSupported)return Je;if(L||zr(B),e.removed=[],typeof Je=="string"&&(je=!1),je){if(Je.nodeName){const ho=ot(Je.nodeName);if(!Q[ho]||Pe[ho])throw vh("root node is forbidden and cannot be sanitized in-place")}}else if(Je instanceof a)Re=Pd("<!---->"),$e=Re.ownerDocument.importNode(Je,!0),$e.nodeType===bh.element&&$e.nodeName==="BODY"||$e.nodeName==="HTML"?Re=$e:Re.appendChild($e);else{if(!Se&&!H&&!Ee&&Je.indexOf("<")===-1)return E&&ge?E.createHTML(Je):Je;if(Re=Pd(Je),!Re)return Se?null:ge?T:""}Re&&de&&Vr(Re.firstChild);const Rn=Nd(je?Je:Re);for(;tn=Rn.nextNode();)Ip(tn),Is(tn),tn.content instanceof i&&Md(tn.content);if(je)return Je;if(Se){if(ie)for(nn=_.call(Re.ownerDocument);Re.firstChild;)nn.appendChild(Re.firstChild);else nn=Re;return(oe.shadowroot||oe.shadowrootmode)&&(nn=R.call(r,nn,!0)),nn}let ar=Ee?Re.outerHTML:Re.innerHTML;return Ee&&Q["!doctype"]&&Re.ownerDocument&&Re.ownerDocument.doctype&&Re.ownerDocument.doctype.name&&yr(W6,Re.ownerDocument.doctype.name)&&(ar="<!DOCTYPE "+Re.ownerDocument.doctype.name+`>
`+ar),H&&_m([U,se,P],ho=>{ar=gh(ar,ho," ")}),E&&ge?E.createHTML(ar):ar},e.setConfig=function(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};zr(Je),L=!0},e.clearConfig=function(){St=null,L=!1},e.isValidAttribute=function(Je,B,Re){St||zr({});const $e=ot(Je),tn=ot(B);return Od($e,tn,Re)},e.addHook=function(Je,B){typeof B=="function"&&mh($[Je],B)},e.removeHook=function(Je,B){if(B!==void 0){const Re=u_e($[Je],B);return Re===-1?void 0:d_e($[Je],Re,1)[0]}return EO($[Je])},e.removeHooks=function(Je){$[Je]=[]},e.removeAllHooks=function(){$=xO()},e}var RO=Y6(),ef=class{constructor(t,e,n,r,o,i){Z(this,"type",3);Z(this,"name","");Z(this,"prefix","");Z(this,"value","");Z(this,"suffix","");Z(this,"modifier",3);this.type=t,this.name=e,this.prefix=n,this.value=r,this.suffix=o,this.modifier=i}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},k_e=/[$_\p{ID_Start}]/u,x_e=/[$_\u200C\u200D\p{ID_Continue}]/u,Fw=".*";function R_e(t,e){return/^[\x00-\x7F]*$/.test(t)}function Q6(t,e=!1){let n=[],r=0;for(;r<t.length;){let o=t[r],i=function(s){if(!e)throw new TypeError(s);n.push({type:"INVALID_CHAR",index:r,value:t[r++]})};if(o==="*"){n.push({type:"ASTERISK",index:r,value:t[r++]});continue}if(o==="+"||o==="?"){n.push({type:"OTHER_MODIFIER",index:r,value:t[r++]});continue}if(o==="\\"){n.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(o==="{"){n.push({type:"OPEN",index:r,value:t[r++]});continue}if(o==="}"){n.push({type:"CLOSE",index:r,value:t[r++]});continue}if(o===":"){let s="",a=r+1;for(;a<t.length;){let c=t.substr(a,1);if(a===r+1&&k_e.test(c)||a!==r+1&&x_e.test(c)){s+=t[a++];continue}break}if(!s){i(`Missing parameter name at ${r}`);continue}n.push({type:"NAME",index:r,value:s}),r=a;continue}if(o==="("){let s=1,a="",c=r+1,u=!1;if(t[c]==="?"){i(`Pattern cannot start with "?" at ${c}`);continue}for(;c<t.length;){if(!R_e(t[c])){i(`Invalid character '${t[c]}' at ${c}.`),u=!0;break}if(t[c]==="\\"){a+=t[c++]+t[c++];continue}if(t[c]===")"){if(s--,s===0){c++;break}}else if(t[c]==="("&&(s++,t[c+1]!=="?")){i(`Capturing groups are not allowed at ${c}`),u=!0;break}a+=t[c++]}if(u)continue;if(s){i(`Unbalanced pattern at ${r}`);continue}if(!a){i(`Missing pattern at ${r}`);continue}n.push({type:"REGEX",index:r,value:a}),r=c;continue}n.push({type:"CHAR",index:r,value:t[r++]})}return n.push({type:"END",index:r,value:""}),n}function J6(t,e={}){let n=Q6(t);e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./");let r=`[^${po(e.delimiter)}]+?`,o=[],i=0,s=0,a=new Set,c=S=>{if(s<n.length&&n[s].type===S)return n[s++].value},u=()=>c("OTHER_MODIFIER")??c("ASTERISK"),d=S=>{let w=c(S);if(w!==void 0)return w;let{type:E,index:T}=n[s];throw new TypeError(`Unexpected ${E} at ${T}, expected ${S}`)},f=()=>{let S="",w;for(;w=c("CHAR")??c("ESCAPED_CHAR");)S+=w;return S},p=S=>S,g=e.encodePart||p,v="",y=S=>{v+=S},b=()=>{v.length&&(o.push(new ef(3,"","",g(v),"",3)),v="")},C=(S,w,E,T,I)=>{let A=3;switch(I){case"?":A=1;break;case"*":A=0;break;case"+":A=2;break}if(!w&&!E&&A===3){y(S);return}if(b(),!w&&!E){if(!S)return;o.push(new ef(3,"","",g(S),"",A));return}let _;E?E==="*"?_=Fw:_=E:_=r;let j=2;_===r?(j=1,_=""):_===Fw&&(j=0,_="");let R;if(w?R=w:E&&(R=i++),a.has(R))throw new TypeError(`Duplicate name '${R}'.`);a.add(R),o.push(new ef(j,R,g(S),_,g(T),A))};for(;s<n.length;){let S=c("CHAR"),w=c("NAME"),E=c("REGEX");if(!w&&!E&&(E=c("ASTERISK")),w||E){let I=S??"";e.prefixes.indexOf(I)===-1&&(y(I),I=""),b();let A=u();C(I,w,E,"",A);continue}let T=S??c("ESCAPED_CHAR");if(T){y(T);continue}if(c("OPEN")){let I=f(),A=c("NAME"),_=c("REGEX");!A&&!_&&(_=c("ASTERISK"));let j=f();d("CLOSE");let R=u();C(I,A,_,j,R);continue}b(),d("END")}return o}function po(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function PO(t){return t&&t.ignoreCase?"ui":"u"}function P_e(t,e,n){return X6(J6(t,n),e,n)}function lu(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function X6(t,e,n={}){n.delimiter??(n.delimiter="/#?"),n.prefixes??(n.prefixes="./"),n.sensitive??(n.sensitive=!1),n.strict??(n.strict=!1),n.end??(n.end=!0),n.start??(n.start=!0),n.endsWith="";let r=n.start?"^":"";for(let a of t){if(a.type===3){a.modifier===3?r+=po(a.value):r+=`(?:${po(a.value)})${lu(a.modifier)}`;continue}e&&e.push(a.name);let c=`[^${po(n.delimiter)}]+?`,u=a.value;if(a.type===1?u=c:a.type===0&&(u=Fw),!a.prefix.length&&!a.suffix.length){a.modifier===3||a.modifier===1?r+=`(${u})${lu(a.modifier)}`:r+=`((?:${u})${lu(a.modifier)})`;continue}if(a.modifier===3||a.modifier===1){r+=`(?:${po(a.prefix)}(${u})${po(a.suffix)})`,r+=lu(a.modifier);continue}r+=`(?:${po(a.prefix)}`,r+=`((?:${u})(?:`,r+=po(a.suffix),r+=po(a.prefix),r+=`(?:${u}))*)${po(a.suffix)})`,a.modifier===0&&(r+="?")}let o=`[${po(n.endsWith)}]|$`,i=`[${po(n.delimiter)}]`;if(n.end)return n.strict||(r+=`${i}?`),n.endsWith.length?r+=`(?=${o})`:r+="$",new RegExp(r,PO(n));n.strict||(r+=`(?:${i}(?=${o}))?`);let s=!1;if(t.length){let a=t[t.length-1];a.type===3&&a.modifier===3&&(s=n.delimiter.indexOf(a)>-1)}return s||(r+=`(?=${i}|${o})`),new RegExp(r,PO(n))}var Bs={delimiter:"",prefixes:"",sensitive:!0,strict:!0},N_e={delimiter:".",prefixes:"",sensitive:!0,strict:!0},O_e={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function M_e(t,e){return t.length?t[0]==="/"?!0:!e||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}function Z6(t,e){return t.startsWith(e)?t.substring(e.length,t.length):t}function L_e(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}function e8(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}var t8=["ftp","file","http","https","ws","wss"];function n8(t){if(!t)return!0;for(let e of t8)if(t.test(e))return!0;return!1}function D_e(t,e){if(t=Z6(t,"#"),e||t==="")return t;let n=new URL("https://example.com");return n.hash=t,n.hash?n.hash.substring(1,n.hash.length):""}function j_e(t,e){if(t=Z6(t,"?"),e||t==="")return t;let n=new URL("https://example.com");return n.search=t,n.search?n.search.substring(1,n.search.length):""}function U_e(t,e){return e||t===""?t:e8(t)?i8(t):o8(t)}function F_e(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.password=t,n.password}function B_e(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.username=t,n.username}function H_e(t,e,n){if(n||t==="")return t;if(e&&!t8.includes(e))return new URL(`${e}:${t}`).pathname;let r=t[0]=="/";return t=new URL(r?t:"/-"+t,"https://example.com").pathname,r||(t=t.substring(2,t.length)),t}function z_e(t,e,n){return r8(e)===t&&(t=""),n||t===""?t:s8(t)}function V_e(t,e){return t=L_e(t,":"),e||t===""?t:OA(t)}function r8(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function OA(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}function $_e(t){if(t==="")return t;let e=new URL("https://example.com");return e.username=t,e.username}function G_e(t){if(t==="")return t;let e=new URL("https://example.com");return e.password=t,e.password}function o8(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let e=new URL("https://example.com");return e.hostname=t,e.hostname}function i8(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}function s8(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}function q_e(t){if(t==="")return t;let e=new URL("https://example.com");return e.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?e.pathname.substring(2,e.pathname.length):e.pathname}function K_e(t){return t===""?t:new URL(`data:${t}`).pathname}function W_e(t){if(t==="")return t;let e=new URL("https://example.com");return e.search=t,e.search.substring(1,e.search.length)}function Y_e(t){if(t==="")return t;let e=new URL("https://example.com");return e.hash=t,e.hash.substring(1,e.hash.length)}var Tu,br,qn,an,rc,Iu,Wr,_u,Au,ku,ke,Pn,a8,Bw,Rh,Zm,mo,Hw,c8,eg,l8,u8,tg,Kl,Ha,d8,h8,f8,p8,ci,m8,FO,Q_e=(FO=class{constructor(t){on(this,ke);on(this,Tu);on(this,br,[]);on(this,qn,{});on(this,an,0);on(this,rc,1);on(this,Iu,0);on(this,Wr,0);on(this,_u,0);on(this,Au,0);on(this,ku,!1);Mt(this,Tu,t)}get result(){return me(this,qn)}parse(){for(Mt(this,br,Q6(me(this,Tu),!0));me(this,an)<me(this,br).length;Mt(this,an,me(this,an)+me(this,rc))){if(Mt(this,rc,1),me(this,br)[me(this,an)].type==="END"){if(me(this,Wr)===0){Be(this,ke,Bw).call(this),Be(this,ke,Ha).call(this)?Be(this,ke,Pn).call(this,9,1):Be(this,ke,Kl).call(this)?Be(this,ke,Pn).call(this,8,1):Be(this,ke,Pn).call(this,7,0);continue}else if(me(this,Wr)===2){Be(this,ke,Rh).call(this,5);continue}Be(this,ke,Pn).call(this,10,0);break}if(me(this,_u)>0)if(Be(this,ke,h8).call(this))Mt(this,_u,me(this,_u)-1);else continue;if(Be(this,ke,d8).call(this)){Mt(this,_u,me(this,_u)+1);continue}switch(me(this,Wr)){case 0:Be(this,ke,Hw).call(this)&&Be(this,ke,Rh).call(this,1);break;case 1:if(Be(this,ke,Hw).call(this)){Be(this,ke,m8).call(this);let t=7,e=1;Be(this,ke,c8).call(this)?(t=2,e=3):me(this,ku)&&(t=2),Be(this,ke,Pn).call(this,t,e)}break;case 2:Be(this,ke,eg).call(this)?Be(this,ke,Rh).call(this,3):(Be(this,ke,tg).call(this)||Be(this,ke,Kl).call(this)||Be(this,ke,Ha).call(this))&&Be(this,ke,Rh).call(this,5);break;case 3:Be(this,ke,l8).call(this)?Be(this,ke,Pn).call(this,4,1):Be(this,ke,eg).call(this)&&Be(this,ke,Pn).call(this,5,1);break;case 4:Be(this,ke,eg).call(this)&&Be(this,ke,Pn).call(this,5,1);break;case 5:Be(this,ke,f8).call(this)?Mt(this,Au,me(this,Au)+1):Be(this,ke,p8).call(this)&&Mt(this,Au,me(this,Au)-1),Be(this,ke,u8).call(this)&&!me(this,Au)?Be(this,ke,Pn).call(this,6,1):Be(this,ke,tg).call(this)?Be(this,ke,Pn).call(this,7,0):Be(this,ke,Kl).call(this)?Be(this,ke,Pn).call(this,8,1):Be(this,ke,Ha).call(this)&&Be(this,ke,Pn).call(this,9,1);break;case 6:Be(this,ke,tg).call(this)?Be(this,ke,Pn).call(this,7,0):Be(this,ke,Kl).call(this)?Be(this,ke,Pn).call(this,8,1):Be(this,ke,Ha).call(this)&&Be(this,ke,Pn).call(this,9,1);break;case 7:Be(this,ke,Kl).call(this)?Be(this,ke,Pn).call(this,8,1):Be(this,ke,Ha).call(this)&&Be(this,ke,Pn).call(this,9,1);break;case 8:Be(this,ke,Ha).call(this)&&Be(this,ke,Pn).call(this,9,1);break}}me(this,qn).hostname!==void 0&&me(this,qn).port===void 0&&(me(this,qn).port="")}},Tu=new WeakMap,br=new WeakMap,qn=new WeakMap,an=new WeakMap,rc=new WeakMap,Iu=new WeakMap,Wr=new WeakMap,_u=new WeakMap,Au=new WeakMap,ku=new WeakMap,ke=new WeakSet,Pn=function(t,e){var n,r,o;switch(me(this,Wr)){case 0:break;case 1:me(this,qn).protocol=Be(this,ke,ci).call(this);break;case 2:break;case 3:me(this,qn).username=Be(this,ke,ci).call(this);break;case 4:me(this,qn).password=Be(this,ke,ci).call(this);break;case 5:me(this,qn).hostname=Be(this,ke,ci).call(this);break;case 6:me(this,qn).port=Be(this,ke,ci).call(this);break;case 7:me(this,qn).pathname=Be(this,ke,ci).call(this);break;case 8:me(this,qn).search=Be(this,ke,ci).call(this);break;case 9:me(this,qn).hash=Be(this,ke,ci).call(this);break}me(this,Wr)!==0&&t!==10&&([1,2,3,4].includes(me(this,Wr))&&[6,7,8,9].includes(t)&&((n=me(this,qn)).hostname??(n.hostname="")),[1,2,3,4,5,6].includes(me(this,Wr))&&[8,9].includes(t)&&((r=me(this,qn)).pathname??(r.pathname=me(this,ku)?"/":"")),[1,2,3,4,5,6,7].includes(me(this,Wr))&&t===9&&((o=me(this,qn)).search??(o.search=""))),Be(this,ke,a8).call(this,t,e)},a8=function(t,e){Mt(this,Wr,t),Mt(this,Iu,me(this,an)+e),Mt(this,an,me(this,an)+e),Mt(this,rc,0)},Bw=function(){Mt(this,an,me(this,Iu)),Mt(this,rc,0)},Rh=function(t){Be(this,ke,Bw).call(this),Mt(this,Wr,t)},Zm=function(t){return t<0&&(t=me(this,br).length-t),t<me(this,br).length?me(this,br)[t]:me(this,br)[me(this,br).length-1]},mo=function(t,e){let n=Be(this,ke,Zm).call(this,t);return n.value===e&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")},Hw=function(){return Be(this,ke,mo).call(this,me(this,an),":")},c8=function(){return Be(this,ke,mo).call(this,me(this,an)+1,"/")&&Be(this,ke,mo).call(this,me(this,an)+2,"/")},eg=function(){return Be(this,ke,mo).call(this,me(this,an),"@")},l8=function(){return Be(this,ke,mo).call(this,me(this,an),":")},u8=function(){return Be(this,ke,mo).call(this,me(this,an),":")},tg=function(){return Be(this,ke,mo).call(this,me(this,an),"/")},Kl=function(){if(Be(this,ke,mo).call(this,me(this,an),"?"))return!0;if(me(this,br)[me(this,an)].value!=="?")return!1;let t=Be(this,ke,Zm).call(this,me(this,an)-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"},Ha=function(){return Be(this,ke,mo).call(this,me(this,an),"#")},d8=function(){return me(this,br)[me(this,an)].type=="OPEN"},h8=function(){return me(this,br)[me(this,an)].type=="CLOSE"},f8=function(){return Be(this,ke,mo).call(this,me(this,an),"[")},p8=function(){return Be(this,ke,mo).call(this,me(this,an),"]")},ci=function(){let t=me(this,br)[me(this,an)],e=Be(this,ke,Zm).call(this,me(this,Iu)).index;return me(this,Tu).substring(e,t.index)},m8=function(){let t={};Object.assign(t,Bs),t.encodePart=OA;let e=P_e(Be(this,ke,ci).call(this),void 0,t);Mt(this,ku,n8(e))},FO),aE=["protocol","username","password","hostname","port","pathname","search","hash"],js="*";function NO(t,e){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(t,e);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}function Wi(t,e){return e?Ph(t):t}function Ch(t,e,n){let r;if(typeof e.baseURL=="string")try{r=new URL(e.baseURL),e.protocol===void 0&&(t.protocol=Wi(r.protocol.substring(0,r.protocol.length-1),n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&(t.username=Wi(r.username,n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&e.password===void 0&&(t.password=Wi(r.password,n)),e.protocol===void 0&&e.hostname===void 0&&(t.hostname=Wi(r.hostname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&(t.port=Wi(r.port,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&(t.pathname=Wi(r.pathname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&(t.search=Wi(r.search.substring(1,r.search.length),n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&e.hash===void 0&&(t.hash=Wi(r.hash.substring(1,r.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${e.baseURL}'.`)}if(typeof e.protocol=="string"&&(t.protocol=V_e(e.protocol,n)),typeof e.username=="string"&&(t.username=B_e(e.username,n)),typeof e.password=="string"&&(t.password=F_e(e.password,n)),typeof e.hostname=="string"&&(t.hostname=U_e(e.hostname,n)),typeof e.port=="string"&&(t.port=z_e(e.port,t.protocol,n)),typeof e.pathname=="string"){if(t.pathname=e.pathname,r&&!M_e(t.pathname,n)){let o=r.pathname.lastIndexOf("/");o>=0&&(t.pathname=Wi(r.pathname.substring(0,o+1),n)+t.pathname)}t.pathname=H_e(t.pathname,t.protocol,n)}return typeof e.search=="string"&&(t.search=j_e(e.search,n)),typeof e.hash=="string"&&(t.hash=D_e(e.hash,n)),t}function Ph(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}function J_e(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function X_e(t,e){e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./"),e.sensitive??(e.sensitive=!1),e.strict??(e.strict=!1),e.end??(e.end=!0),e.start??(e.start=!0),e.endsWith="";let n=".*",r=`[^${J_e(e.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,i="";for(let s=0;s<t.length;++s){let a=t[s];if(a.type===3){if(a.modifier===3){i+=Ph(a.value);continue}i+=`{${Ph(a.value)}}${lu(a.modifier)}`;continue}let c=a.hasCustomName(),u=!!a.suffix.length||!!a.prefix.length&&(a.prefix.length!==1||!e.prefixes.includes(a.prefix)),d=s>0?t[s-1]:null,f=s<t.length-1?t[s+1]:null;if(!u&&c&&a.type===1&&a.modifier===3&&f&&!f.prefix.length&&!f.suffix.length)if(f.type===3){let p=f.value.length>0?f.value[0]:"";u=o.test(p)}else u=!f.hasCustomName();if(!u&&!a.prefix.length&&d&&d.type===3){let p=d.value[d.value.length-1];u=e.prefixes.includes(p)}u&&(i+="{"),i+=Ph(a.prefix),c&&(i+=`:${a.name}`),a.type===2?i+=`(${a.value})`:a.type===1?c||(i+=`(${r})`):a.type===0&&(!c&&(!d||d.type===3||d.modifier!==3||u||a.prefix!=="")?i+="*":i+=`(${n})`),a.type===1&&c&&a.suffix.length&&o.test(a.suffix[0])&&(i+="\\"),i+=Ph(a.suffix),u&&(i+="}"),a.modifier!==3&&(i+=lu(a.modifier))}return i}var hi,oc,xu,Kn,Uo,Ru,BO,Z_e=(BO=class{constructor(t={},e,n){on(this,hi);on(this,oc,{});on(this,xu,{});on(this,Kn,{});on(this,Uo,{});on(this,Ru,!1);try{let r;if(typeof e=="string"?r=e:n=e,typeof t=="string"){let a=new Q_e(t);if(a.parse(),t=a.result,r===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=r}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(r)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let o={ignoreCase:n.ignoreCase===!0};Mt(this,hi,Ch({pathname:js,protocol:js,username:js,password:js,hostname:js,port:js,search:js,hash:js},t,!0)),r8(me(this,hi).protocol)===me(this,hi).port&&(me(this,hi).port="");let s;for(s of aE){if(!(s in me(this,hi)))continue;let a={},c=me(this,hi)[s];switch(me(this,xu)[s]=[],s){case"protocol":Object.assign(a,Bs),a.encodePart=OA;break;case"username":Object.assign(a,Bs),a.encodePart=$_e;break;case"password":Object.assign(a,Bs),a.encodePart=G_e;break;case"hostname":Object.assign(a,N_e),e8(c)?a.encodePart=i8:a.encodePart=o8;break;case"port":Object.assign(a,Bs),a.encodePart=s8;break;case"pathname":n8(me(this,oc).protocol)?(Object.assign(a,O_e,o),a.encodePart=q_e):(Object.assign(a,Bs,o),a.encodePart=K_e);break;case"search":Object.assign(a,Bs,o),a.encodePart=W_e;break;case"hash":Object.assign(a,Bs,o),a.encodePart=Y_e;break}try{me(this,Uo)[s]=J6(c,a),me(this,oc)[s]=X6(me(this,Uo)[s],me(this,xu)[s],a),me(this,Kn)[s]=X_e(me(this,Uo)[s],a),Mt(this,Ru,me(this,Ru)||me(this,Uo)[s].some(u=>u.type===2))}catch{throw new TypeError(`invalid ${s} pattern '${me(this,hi)[s]}'.`)}}}catch(r){throw new TypeError(`Failed to construct 'URLPattern': ${r.message}`)}}test(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?n=Ch(n,t,!1):n=Ch(n,NO(t,e),!1)}catch{return!1}let r;for(r of aE)if(!me(this,oc)[r].exec(n[r]))return!1;return!0}exec(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?n=Ch(n,t,!1):n=Ch(n,NO(t,e),!1)}catch{return null}let r={};e?r.inputs=[t,e]:r.inputs=[t];let o;for(o of aE){let i=me(this,oc)[o].exec(n[o]);if(!i)return null;let s={};for(let[a,c]of me(this,xu)[o].entries())if(typeof c=="string"||typeof c=="number"){let u=i[a+1];s[c]=u}r[o]={input:n[o]??"",groups:s}}return r}static compareComponent(t,e,n){let r=(a,c)=>{for(let u of["type","modifier","prefix","value","suffix"]){if(a[u]<c[u])return-1;if(a[u]!==c[u])return 1}return 0},o=new ef(3,"","","","",3),i=new ef(0,"","","","",3),s=(a,c)=>{let u=0;for(;u<Math.min(a.length,c.length);++u){let d=r(a[u],c[u]);if(d)return d}return a.length===c.length?0:r(a[u]??o,c[u]??o)};return!me(e,Kn)[t]&&!me(n,Kn)[t]?0:me(e,Kn)[t]&&!me(n,Kn)[t]?s(me(e,Uo)[t],[i]):!me(e,Kn)[t]&&me(n,Kn)[t]?s([i],me(n,Uo)[t]):s(me(e,Uo)[t],me(n,Uo)[t])}get protocol(){return me(this,Kn).protocol}get username(){return me(this,Kn).username}get password(){return me(this,Kn).password}get hostname(){return me(this,Kn).hostname}get port(){return me(this,Kn).port}get pathname(){return me(this,Kn).pathname}get search(){return me(this,Kn).search}get hash(){return me(this,Kn).hash}get hasRegExpGroups(){return me(this,Ru)}},hi=new WeakMap,oc=new WeakMap,xu=new WeakMap,Kn=new WeakMap,Uo=new WeakMap,Ru=new WeakMap,BO);globalThis.URLPattern||(globalThis.URLPattern=Z_e);let g8;function sRe(t){g8=t}function eAe(){var t,e;typeof window<"u"&&(window.copilotTrustedTypesPolicy=(t=window.trustedTypes)==null?void 0:t.createPolicy("copilotPolicy",{createHTML:n=>RO.sanitize(n)}),(e=window.trustedTypes)==null||e.createPolicy("default",{createScriptURL:n=>{const r=/^\/cl\//,o=new URLPattern({protocol:"https",hostname:"www.clarity.ms",pathname:"/s/*"}),i=new URLPattern({protocol:"https",hostname:"*.cloudflare.com"}),s=new URLPattern({protocol:"https",hostname:"bat.bing.com"}),a=new URLPattern({protocol:"https",hostname:"az416426.vo.msecnd.net"}),c=new URLPattern({protocol:"https",hostname:"fpt.dfp.microsoft.com"}),u=new URLPattern({protocol:"https",hostname:"assets.msn.com"}),d=new URLPattern({protocol:"https",hostname:"content.lifecycle.office.net"});if(r.test(n)||o.test(n)||i.test(n)||s.test(n)||a.test(n)||c.test(n)||u.test(n)||d.test(n)||n===g8)return n;throw new Error(`Unsafe script URL "${n}" blocked by CSP.`)},createHTML:n=>RO.sanitize(n)}))}eAe();zB.createRoot(document.getElementById("app")).render(h.jsx(Gc.StrictMode,{children:h.jsx(s_e,{})}));const tAe=Object.freeze(Object.defineProperty({__proto__:null,Route:twe},Symbol.toStringTag,{value:"Module"}));export{q as $,Ws as A,Ue as B,X4 as C,Cp as D,XT as E,xn as F,UF as G,rt as H,su as I,rr as J,ake as K,ta as L,ce as M,Z_ as N,Av as O,nb as P,lg as Q,Cs as R,Vc as S,Fo as T,Sp as U,fd as V,gT as W,at as X,K as Y,qt as Z,It as _,Fe as a,Id as a$,hr as a0,dge as a1,mb as a2,mM as a3,JL as a4,Q_ as a5,mt as a6,L1e as a7,ZO as a8,s$ as a9,Ehe as aA,lT as aB,o1e as aC,Kt as aD,Kc as aE,xr as aF,sl as aG,zue as aH,pAe as aI,fAe as aJ,hp as aK,fF as aL,Po as aM,exe as aN,UL as aO,Xle as aP,Ew as aQ,Ad as aR,Lw as aS,EN as aT,SN as aU,Cm as aV,nve as aW,rve as aX,Z1e as aY,ove as aZ,ive as a_,bt as aa,z_ as ab,tr as ac,Lv as ad,Es as ae,Fi as af,p$ as ag,dy as ah,Un as ai,rI as aj,Mv as ak,gA as al,hz as am,tp as an,_ge as ao,Age as ap,FJ as aq,$ce as ar,T1 as as,cb as at,lI as au,Pke as av,que as aw,Uue as ax,Cwe as ay,N1e as az,Wke as b,F_ as b$,Wt as b0,Vv as b1,nT as b2,rT as b3,Jue as b4,Xue as b5,RP as b6,Sa as b7,nz as b8,Sn as b9,pa as bA,Z4 as bB,Sxe as bC,Jce as bD,aa as bE,ob as bF,Sge as bG,Fn as bH,Wo as bI,oke as bJ,rke as bK,Fr as bL,Ei as bM,ike as bN,cke as bO,so as bP,OV as bQ,Ju as bR,Nf as bS,il as bT,XAe as bU,LAe as bV,g$ as bW,DAe as bX,TL as bY,Pxe as bZ,JF as b_,Vi as ba,Cle as bb,mp as bc,YF as bd,J4 as be,Q4 as bf,du as bg,zi as bh,CEe as bi,nc as bj,SEe as bk,mme as bl,tme as bm,QF as bn,H4 as bo,ju as bp,Xd as bq,Eke as br,gt as bs,ea as bt,_Ae as bu,AAe as bv,kAe as bw,WQ as bx,Dye as by,sa as bz,G as c,Mie as c$,aye as c0,cye as c1,yke as c2,Xo as c3,hT as c4,CT as c5,vAe as c6,Uc as c7,MAe as c8,og as c9,axe as cA,cxe as cB,ql as cC,tf as cD,aA as cE,dM as cF,rge as cG,P3 as cH,dU as cI,yae as cJ,lie as cK,Aa as cL,dv as cM,qs as cN,Tt as cO,Y3 as cP,Rc as cQ,ese as cR,la as cS,A0 as cT,ur as cU,Gke as cV,_0 as cW,Xx as cX,__ as cY,lse as cZ,P0 as c_,Z2 as ca,Kge as cb,k6 as cc,A6 as cd,ICe as ce,eb as cf,ic as cg,o$ as ch,MQ as ci,AT as cj,lye as ck,db as cl,Ske as cm,fM as cn,JCe as co,XJ as cp,DQ as cq,LQ as cr,Uke as cs,c2 as ct,zve as cu,nxe as cv,X1e as cw,sxe as cx,ixe as cy,rxe as cz,yAe as d,Bi as d$,hce as d0,Cae as d1,bae as d2,om as d3,pae as d4,Bj as d5,Use as d6,jse as d7,zse as d8,Ixe as d9,WAe as dA,JU as dB,fEe as dC,yP as dD,D7 as dE,wU as dF,gp as dG,dl as dH,iTe as dI,Uf as dJ,NA as dK,GTe as dL,vs as dM,WSe as dN,KSe as dO,xxe as dP,ITe as dQ,cbe as dR,ibe as dS,kxe as dT,abe as dU,yF as dV,f4 as dW,Hve as dX,et as dY,QU as dZ,zc as d_,ETe as da,Lwe as db,Qke as dc,oRe as dd,fA as de,_T as df,R6 as dg,cA as dh,wxe as di,ML as dj,dke as dk,VAe as dl,$Ae as dm,zAe as dn,dJ as dp,w$ as dq,lle as dr,uue as ds,V_ as dt,uSe as du,eJ as dv,py as dw,dw as dx,sI as dy,QAe as dz,Ir as e,Nl as e$,wEe as e0,er as e1,cde as e2,Txe as e3,KV as e4,TAe as e5,IAe as e6,qV as e7,gO as e8,h1e as e9,Y_ as eA,zL as eB,GL as eC,Cge as eD,YL as eE,Hwe as eF,ba as eG,ZAe as eH,g1e as eI,y1e as eJ,v1e as eK,Fue as eL,dve as eM,dO as eN,eRe as eO,eH as eP,sd as eQ,ry as eR,IL as eS,vA as eT,txe as eU,Xv as eV,Y1e as eW,Sm as eX,Xs as eY,Nv as eZ,Ol as e_,u1e as ea,C1e as eb,b1e as ec,l1e as ed,ga as ee,In as ef,S1e as eg,m1e as eh,j2 as ei,yA as ej,WU as ek,Cue as el,wp as em,bge as en,Zde as eo,G_ as ep,tke as eq,GEe as er,PF as es,Yo as et,wT as eu,$Q as ev,NAe as ew,lo as ex,NQ as ey,$_ as ez,Ni as f,hb as f$,_xe as f0,Ege as f1,nke as f2,Nxe as f3,Axe as f4,uCe as f5,mL as f6,LF as f7,lCe as f8,Zs as f9,kke as fA,xm as fB,F4 as fC,Mwe as fD,xv as fE,Rv as fF,ma as fG,B6 as fH,X9 as fI,nge as fJ,Kke as fK,qke as fL,ny as fM,hke as fN,Zf as fO,Ywe as fP,eX as fQ,Zb as fR,Cc as fS,my as fT,pO as fU,Km as fV,oy as fW,Qbe as fX,GAe as fY,jr as fZ,ET as f_,YAe as fa,hJ as fb,pL as fc,t6 as fd,Yt as fe,tX as ff,q_ as fg,Rke as fh,Hv as fi,K9 as fj,oxe as fk,zv as fl,pF as fm,sb as fn,nr as fo,Az as fp,_z as fq,Dk as fr,ey as fs,cV as ft,CAe as fu,bAe as fv,eT as fw,tT as fx,uE as fy,hg as fz,gb as g,$$ as g$,iX as g0,rX as g1,F6 as g2,WL as g3,jTe as g4,UTe as g5,eP as g6,OAe as g7,wF as g8,RO as g9,Tke as gA,Ike as gB,vSe as gC,Fxe as gD,wke as gE,Sg as gF,P2 as gG,uT as gH,bo as gI,us as gJ,fi as gK,De as gL,$v as gM,vc as gN,un as gO,Er as gP,wr as gQ,qv as gR,To as gS,dT as gT,ls as gU,aT as gV,gc as gW,no as gX,nJ as gY,KAe as gZ,JAe as g_,O7 as ga,ao as gb,gy as gc,Mh as gd,ISe as ge,Xy as gf,z1e as gg,Vge as gh,CN as gi,fve as gj,tF as gk,Zw as gl,Uge as gm,Vce as gn,W_ as go,u6 as gp,UAe as gq,Qs as gr,XCe as gs,Pw as gt,Q1e as gu,xw as gv,WS as gw,RAe as gx,_ke as gy,Ake as gz,At as h,I6 as h$,df as h0,_Ce as h1,ad as h2,hf as h3,Qt as h4,Hke as h5,zke as h6,M1 as h7,Vke as h8,$ke as h9,pm as hA,Exe as hB,Cke as hC,KL as hD,Ewe as hE,uke as hF,r1e as hG,Rxe as hH,gz as hI,WV as hJ,m4 as hK,Ca as hL,xke as hM,GN as hN,Oxe as hO,TF as hP,F1e as hQ,uM as hR,Vs as hS,G4 as hT,_ve as hU,obe as hV,vhe as hW,fhe as hX,Jde as hY,Xme as hZ,P1e as h_,dr as ha,x1e as hb,R1e as hc,Mde as hd,Lde as he,sw as hf,sRe as hg,B_ as hh,STe as hi,oTe as hj,z6 as hk,Wxe as hl,Kxe as hm,hue as hn,due as ho,r0e as hp,Vxe as hq,$xe as hr,Gxe as hs,tO as ht,qxe as hu,fde as hv,xo as hw,wL as hx,U6 as hy,ED as hz,Bc as i,GQ as i$,Zxe as i0,Ui as i1,EF as i2,SF as i3,CG as i4,qAe as i5,MN as i6,L7 as i7,v$ as i8,LN as i9,pke as iA,mAe as iB,ep as iC,Gge as iD,_L as iE,i$ as iF,HQ as iG,O_ as iH,tb as iI,uw as iJ,mP as iK,sue as iL,eI as iM,XEe as iN,EL as iO,tCe as iP,lAe as iQ,gAe as iR,pye as iS,mxe as iT,vxe as iU,kL as iV,ZT as iW,mke as iX,hM as iY,qQ as iZ,KQ as i_,EAe as ia,wAe as ib,uf as ic,kF as id,l$ as ie,fke as ig,Cw as ih,zge as ii,Ff as ij,sF as ik,J1e as il,PT as im,QN as io,Bxe as ip,jQ as iq,TT as ir,c$ as is,uAe as it,hAe as iu,dAe as iv,pJ as iw,bke as ix,BQ as iy,zQ as iz,_o as j,p1e as j$,H1e as j0,FAe as j1,BAe as j2,HAe as j3,lke as j4,uy as j5,vke as j6,bxe as j7,yxe as j8,Ov as j9,E1e as jA,nCe as jB,i1e as jC,tbe as jD,fme as jE,hme as jF,ys as jG,ab as jH,PAe as jI,Che as jJ,V6 as jK,ume as jL,jCe as jM,CA as jN,c4 as jO,DEe as jP,o0e as jQ,xAe as jR,Yxe as jS,T6 as jT,c1e as jU,a1e as jV,s1e as jW,O1e as jX,M1e as jY,She as jZ,f1e as j_,ww as ja,mA as jb,gxe as jc,ske as jd,gke as je,RT as jf,uz as jg,$ye as jh,TU as ji,vTe as jj,rb as jk,pbe as jl,Yke as jm,e1e as jn,t1e as jo,SAe as jp,jAe as jq,Sc as jr,nf as js,jce as jt,bP as ju,FF as jv,iAe as jw,l2 as jx,pxe as jy,d1e as jz,Ot as k,eke as k0,zW as k1,Rne as k2,Fke as k3,Bke as k4,wv as k5,sAe as k6,aAe as k7,cAe as k8,Jke as k9,jxe as kA,Uxe as kB,Hxe as kC,zxe as kD,Jxe as kE,Xxe as kF,tRe as kG,nRe as kH,rRe as kI,iRe as kJ,Xke as ka,Zke as kb,n1e as kc,w1e as kd,T1e as ke,I1e as kf,_1e as kg,A1e as kh,k1e as ki,w4 as kj,B1e as kk,V1e as kl,$1e as km,G1e as kn,q1e as ko,K1e as kp,W1e as kq,lxe as kr,uxe as ks,dxe as kt,hxe as ku,fxe as kv,Cxe as kw,Mxe as kx,Lxe as ky,Dxe as kz,mc as l,Sz as m,Io as n,xL as o,mF as p,Dw as q,Tv as r,xhe as s,be as t,co as u,X2 as v,ve as w,es as x,pn as y,vg as z};
